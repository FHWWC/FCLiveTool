<!DOCTYPE html><html lang="en"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-140352188-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-140352188-1');</script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="description" content="The CDN for @videojs/http-streaming"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="timestamp" content="2021-12-14T10:41:07.651Z"/><link rel="shortcut icon" href="/favicon.ico"/><title>UNPKG - @videojs/http-streaming</title><script>window.Promise || document.write('\x3Cscript src="/es6-promise@4.2.5/dist/es6-promise.min.js">\x3C/script>\x3Cscript>ES6Promise.polyfill()\x3C/script>')</script><script>window.fetch || document.write('\x3Cscript src="/whatwg-fetch@3.0.0/dist/fetch.umd.js">\x3C/script>')</script><script>window.__DATA__ = {"packageName":"@videojs/http-streaming","packageVersion":"2.12.1","availableVersions":["0.1.0","0.2.0","0.2.1","0.3.0","0.3.1","0.4.0","0.5.0","0.5.1","0.5.2","0.5.3","0.6.1","0.7.0","0.7.1","0.7.2","0.8.0","0.9.0","1.0.0","1.0.1","1.0.2","1.1.0","1.2.0","1.2.1","1.2.2","1.2.3","1.2.4","1.2.5","1.2.6","1.3.0","1.3.1","1.4.0","1.4.1","1.4.2","1.5.0","1.5.1","1.6.0","1.7.0","1.8.0","1.9.0","1.9.1","1.9.2","1.9.3","1.10.0","1.10.1","1.10.2","1.10.3-alpha.0","1.10.3","1.10.4","1.10.5-0","1.10.5-1","1.10.5","1.10.6","1.11.0-0","1.11.0-alpha.0","1.11.0-alpha.1","1.11.0","1.11.1","1.11.2","1.11.3","1.12.0","1.12.1","1.12.2","1.12.3","1.13.0","1.13.1","1.13.2","1.13.3","1.13.4","2.0.0-rc.0","2.0.0-rc.1","2.0.0-rc.2","2.0.0","2.1.0","2.2.0","2.2.1","2.2.2","2.2.3","2.2.4","2.3.0","2.3.1","2.3.2","2.4.0","2.4.1","2.4.2","2.5.0","2.6.0","2.6.1","2.6.2","2.6.3","2.6.4","2.7.0","2.7.1","2.8.0","2.8.1","2.8.2","2.8.3","2.9.0","2.9.1","2.9.2","2.9.3","2.10.0","2.10.1","2.10.2","2.10.3","2.11.0","2.11.1","2.11.2","2.12.0","2.12.1"],"filename":"/dist/videojs-http-streaming.min.js","target":{"path":"/dist/videojs-http-streaming.min.js","type":"file","details":{"contentType":"application/javascript","integrity":"sha384-dh5qR9WkPEkYiLsKxEAtMo1Pl1khMSnxeKWcPI0RLmqQkOwOjhVBixj1zYW/1JCH","language":"JavaScript","size":315193,"uri":null,"highlights":["<span class=\"code-comment\">/*! @name @videojs/http-streaming @version 2.12.1 @license Apache-2.0 */</span>\n","!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> exports&amp;&amp;<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">module</span>?t(exports,<span class=\"code-built_in\">require</span>(<span class=\"code-string\">\"video.js\"</span>),<span class=\"code-built_in\">require</span>(<span class=\"code-string\">\"@xmldom/xmldom\"</span>)):<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> define&amp;&amp;define.amd?define([<span class=\"code-string\">\"exports\"</span>,<span class=\"code-string\">\"video.js\"</span>,<span class=\"code-string\">\"@xmldom/xmldom\"</span>],t):t((e=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> globalThis?globalThis:e||self).httpStreaming={},e.videojs,e.window)}(<span class=\"code-keyword\">this</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-string\">\"use strict\"</span>;<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">n</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;<span class=\"code-string\">\"default\"</span><span class=\"code-keyword\">in</span> e?e:{<span class=\"code-attr\">default</span>:e}}<span class=\"code-keyword\">var</span> r=n(t);<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">a</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e(i={<span class=\"code-attr\">path</span>:t,<span class=\"code-attr\">exports</span>:{},<span class=\"code-attr\">require</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\"</span>)}(<span class=\"code-literal\">null</span>==t&amp;&amp;i.path)}},i.exports),i.exports}<span class=\"code-keyword\">var</span> s=a((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.exports=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ReferenceError</span>(<span class=\"code-string\">\"this hasn't been initialised - super() hasn't been called\"</span>);<span class=\"code-keyword\">return</span> e},e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>})),o=a((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">return</span> e.exports=t=<span class=\"code-built_in\">Object</span>.setPrototypeOf||<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>,t(i,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>})),u=a((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.exports=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.prototype=<span class=\"code-built_in\">Object</span>.create(t.prototype),e.prototype.constructor=e,o(e,t)},e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>})),d=a((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s;i=<span class=\"code-regexp\">/^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/?#]*\\/)*[^;?#]*)?(;[^?#]*)?(\\?[^#]*)?(#[^]*)?$/</span>,n=<span class=\"code-regexp\">/^([^\\/?#]*)([^]*)$/</span>,r=<span class=\"code-regexp\">/(?:\\/|^)\\.(?=\\/)/g</span>,a=<span class=\"code-regexp\">/(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g</span>,s={<span class=\"code-attr\">buildAbsoluteURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class=\"code-keyword\">if</span>(!i.alwaysNormalize)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> r=s.parseURL(e);<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class=\"code-keyword\">var</span> a=s.parseURL(t);<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse relative URL.\"</span>);<span class=\"code-keyword\">if</span>(a.scheme)<span class=\"code-keyword\">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class=\"code-keyword\">var</span> o=s.parseURL(e);<span class=\"code-keyword\">if</span>(!o)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Error trying to parse base URL.\"</span>);<span class=\"code-keyword\">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class=\"code-string\">\"/\"</span>!==o.path[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">var</span> u=n.exec(o.path);o.netLoc=u[<span class=\"code-number\">1</span>],o.path=u[<span class=\"code-number\">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class=\"code-string\">\"/\"</span>);<span class=\"code-keyword\">var</span> d={<span class=\"code-attr\">scheme</span>:o.scheme,<span class=\"code-attr\">netLoc</span>:a.netLoc,<span class=\"code-attr\">path</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">params</span>:a.params,<span class=\"code-attr\">query</span>:a.query,<span class=\"code-attr\">fragment</span>:a.fragment};<span class=\"code-keyword\">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class=\"code-string\">\"/\"</span>!==a.path[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">if</span>(a.path){<span class=\"code-keyword\">var</span> l=o.path,c=l.substring(<span class=\"code-number\">0</span>,l.lastIndexOf(<span class=\"code-string\">\"/\"</span>)+<span class=\"code-number\">1</span>)+a.path;d.path=s.normalizePath(c)}<span class=\"code-keyword\">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class=\"code-attr\">parseURL</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=i.exec(e);<span class=\"code-keyword\">return</span> t?{<span class=\"code-attr\">scheme</span>:t[<span class=\"code-number\">1</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">netLoc</span>:t[<span class=\"code-number\">2</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">path</span>:t[<span class=\"code-number\">3</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">params</span>:t[<span class=\"code-number\">4</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">query</span>:t[<span class=\"code-number\">5</span>]||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">fragment</span>:t[<span class=\"code-number\">6</span>]||<span class=\"code-string\">\"\"</span>}:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">normalizePath</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(e=e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>).replace(r,<span class=\"code-string\">\"\"</span>);e.length!==(e=e.replace(a,<span class=\"code-string\">\"\"</span>)).length;);<span class=\"code-keyword\">return</span> e.split(<span class=\"code-string\">\"\"</span>).reverse().join(<span class=\"code-string\">\"\"</span>)},<span class=\"code-attr\">buildURLFromParts</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s})),l=<span class=\"code-string\">\"http://example.com\"</span>,c=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-regexp\">/^[a-z]+:/i</span>.test(t))<span class=\"code-keyword\">return</span> t;<span class=\"code-regexp\">/^data:/</span>.test(e)&amp;&amp;(e=<span class=\"code-built_in\">window</span>.location&amp;&amp;<span class=\"code-built_in\">window</span>.location.href||<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">var</span> i=<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>.URL,n=<span class=\"code-regexp\">/^\\/\\//</span>.test(e),r=!<span class=\"code-built_in\">window</span>.location&amp;&amp;!<span class=\"code-regexp\">/\\/\\//i</span>.test(e);<span class=\"code-keyword\">if</span>(i?e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.URL(e,<span class=\"code-built_in\">window</span>.location||l):<span class=\"code-regexp\">/\\/\\//i</span>.test(e)||(e=d.buildAbsoluteURL(<span class=\"code-built_in\">window</span>.location&amp;&amp;<span class=\"code-built_in\">window</span>.location.href||<span class=\"code-string\">\"\"</span>,e)),i){<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">new</span> URL(t,e);<span class=\"code-keyword\">return</span> r?a.href.slice(l.length):n?a.href.slice(a.protocol.length):a.href}<span class=\"code-keyword\">return</span> d.buildAbsoluteURL(e,t)},h=c,f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;i&amp;&amp;i.responseURL&amp;&amp;t!==i.responseURL?i.responseURL:t},p=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.debug?r.default.log.debug.bind(r.default,<span class=\"code-string\">\"VHS:\"</span>,e+<span class=\"code-string\">\" &gt;\"</span>):<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{}},m=a((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e.exports=t=<span class=\"code-built_in\">Object</span>.assign||<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">1</span>;t&lt;<span class=\"code-built_in\">arguments</span>.length;t++){<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">arguments</span>[t];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-built_in\">Object</span>.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n])}<span class=\"code-keyword\">return</span> e},e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>,t.apply(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>})),g=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.listeners[e]||(<span class=\"code-keyword\">this</span>.listeners[e]=[]),<span class=\"code-keyword\">this</span>.listeners[e].push(t)},t.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.listeners[e])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.listeners[e].indexOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.listeners[e]=<span class=\"code-keyword\">this</span>.listeners[e].slice(<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.listeners[e].splice(i,<span class=\"code-number\">1</span>),i&gt;<span class=\"code-number\">-1</span>},t.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.listeners[e];<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.length,n=<span class=\"code-number\">0</span>;n&lt;i;++n)t[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>,<span class=\"code-number\">1</span>),a=t.length,s=<span class=\"code-number\">0</span>;s&lt;a;++s)t[s].apply(<span class=\"code-keyword\">this</span>,r)},t.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}},t.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}))},e}();<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">y</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=(t=e,<span class=\"code-built_in\">window</span>.atob?<span class=\"code-built_in\">window</span>.atob(t):Buffer.from(t,<span class=\"code-string\">\"base64\"</span>).toString(<span class=\"code-string\">\"binary\"</span>)),n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.length),r=<span class=\"code-number\">0</span>;r&lt;i.length;r++)n[r]=i.charCodeAt(r);<span class=\"code-keyword\">return</span> n}\n","<span class=\"code-comment\">/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */</span><span class=\"code-keyword\">var</span> v,_,T=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).buffer=<span class=\"code-string\">\"\"</span>,t}<span class=\"code-keyword\">return</span> u(t,e),t.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.buffer+=e,t=<span class=\"code-keyword\">this</span>.buffer.indexOf(<span class=\"code-string\">\"\\n\"</span>);t&gt;<span class=\"code-number\">-1</span>;t=<span class=\"code-keyword\">this</span>.buffer.indexOf(<span class=\"code-string\">\"\\n\"</span>))<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.buffer.substring(<span class=\"code-number\">0</span>,t)),<span class=\"code-keyword\">this</span>.buffer=<span class=\"code-keyword\">this</span>.buffer.substring(t+<span class=\"code-number\">1</span>)},t}(g),b=<span class=\"code-built_in\">String</span>.fromCharCode(<span class=\"code-number\">9</span>),S=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-regexp\">/([0-9.]*)?@?([0-9.]*)?/</span>.exec(e||<span class=\"code-string\">\"\"</span>),i={};<span class=\"code-keyword\">return</span> t[<span class=\"code-number\">1</span>]&amp;&amp;(i.length=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),t[<span class=\"code-number\">2</span>]&amp;&amp;(i.offset=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">2</span>],<span class=\"code-number\">10</span>)),i},w=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=e.split(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(<span class=\"code-string\">'(?:^|,)((?:[^=]*)=(?:\"[^\"]*\"|[^,]*))'</span>)),n={},r=i.length;r--;)<span class=\"code-string\">\"\"</span>!==i[r]&amp;&amp;((t=<span class=\"code-regexp\">/([^=]*)=(.*)/</span>.exec(i[r]).slice(<span class=\"code-number\">1</span>))[<span class=\"code-number\">0</span>]=t[<span class=\"code-number\">0</span>].replace(<span class=\"code-regexp\">/^\\s+|\\s+$/g</span>,<span class=\"code-string\">\"\"</span>),t[<span class=\"code-number\">1</span>]=t[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/^\\s+|\\s+$/g</span>,<span class=\"code-string\">\"\"</span>),t[<span class=\"code-number\">1</span>]=t[<span class=\"code-number\">1</span>].replace(<span class=\"code-regexp\">/^['\"](.*)['\"]$/g</span>,<span class=\"code-string\">\"$1\"</span>),n[t[<span class=\"code-number\">0</span>]]=t[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">return</span> n},I=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).customParsers=[],t.tagMappers=[],t}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">this</span>;<span class=\"code-number\">0</span>!==(e=e.trim()).length&amp;&amp;(<span class=\"code-string\">\"#\"</span>===e[<span class=\"code-number\">0</span>]?<span class=\"code-keyword\">this</span>.tagMappers.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i(e);<span class=\"code-keyword\">return</span> n===e?t:t.concat([n])}),[e]).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;n.customParsers.length;r++)<span class=\"code-keyword\">if</span>(n.customParsers[r].call(n,e))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.indexOf(<span class=\"code-string\">\"#EXT\"</span>))<span class=\"code-keyword\">if</span>(e=e.replace(<span class=\"code-string\">\"\\r\"</span>,<span class=\"code-string\">\"\"</span>),t=<span class=\"code-regexp\">/^#EXTM3U/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"m3u\"</span>});<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXTINF:?([0-9\\.]*)?,?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"inf\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseFloat</span>(t[<span class=\"code-number\">1</span>])),t[<span class=\"code-number\">2</span>]&amp;&amp;(i.title=t[<span class=\"code-number\">2</span>]),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-TARGETDURATION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"targetduration\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.duration=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-VERSION:?([0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"version\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.version=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"media-sequence\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.number=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"discontinuity-sequence\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.number=<span class=\"code-built_in\">parseInt</span>(t[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"playlist-type\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.playlistType=t[<span class=\"code-number\">1</span>]),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-BYTERANGE:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i=m(S(t[<span class=\"code-number\">1</span>]),{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"byterange\"</span>}),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"allow-cache\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.allowed=!<span class=\"code-regexp\">/NO/</span>.test(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MAP:?(.*)$/</span>.exec(e)){<span class=\"code-keyword\">if</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"map\"</span>},t[<span class=\"code-number\">1</span>]){<span class=\"code-keyword\">var</span> a=w(t[<span class=\"code-number\">1</span>]);a.URI&amp;&amp;(i.uri=a.URI),a.BYTERANGE&amp;&amp;(i.byterange=S(a.BYTERANGE))}n.trigger(<span class=\"code-string\">\"data\"</span>,i)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-STREAM-INF:?(.*)$/</span>.exec(e)){<span class=\"code-keyword\">if</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"stream-inf\"</span>},t[<span class=\"code-number\">1</span>]){<span class=\"code-keyword\">if</span>(i.attributes=w(t[<span class=\"code-number\">1</span>]),i.attributes.RESOLUTION){<span class=\"code-keyword\">var</span> s=i.attributes.RESOLUTION.split(<span class=\"code-string\">\"x\"</span>),o={};s[<span class=\"code-number\">0</span>]&amp;&amp;(o.width=<span class=\"code-built_in\">parseInt</span>(s[<span class=\"code-number\">0</span>],<span class=\"code-number\">10</span>)),s[<span class=\"code-number\">1</span>]&amp;&amp;(o.height=<span class=\"code-built_in\">parseInt</span>(s[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>)),i.attributes.RESOLUTION=o}i.attributes.BANDWIDTH&amp;&amp;(i.attributes.BANDWIDTH=<span class=\"code-built_in\">parseInt</span>(i.attributes.BANDWIDTH,<span class=\"code-number\">10</span>)),i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>]&amp;&amp;(i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes[<span class=\"code-string\">\"PROGRAM-ID\"</span>],<span class=\"code-number\">10</span>))}n.trigger(<span class=\"code-string\">\"data\"</span>,i)}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-MEDIA:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"media\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=w(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-ENDLIST/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"endlist\"</span>});<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-DISCONTINUITY/</span>.exec(e))n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"discontinuity\"</span>});<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"program-date-time\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.dateTimeString=t[<span class=\"code-number\">1</span>],i.dateTimeObject=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t[<span class=\"code-number\">1</span>])),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-KEY:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"key\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=w(t[<span class=\"code-number\">1</span>]),i.attributes.IV&amp;&amp;(<span class=\"code-string\">\"0x\"</span>===i.attributes.IV.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>).toLowerCase()&amp;&amp;(i.attributes.IV=i.attributes.IV.substring(<span class=\"code-number\">2</span>)),i.attributes.IV=i.attributes.IV.match(<span class=\"code-regexp\">/.{8}/g</span>),i.attributes.IV[<span class=\"code-number\">0</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">0</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">1</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">1</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">2</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">2</span>],<span class=\"code-number\">16</span>),i.attributes.IV[<span class=\"code-number\">3</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes.IV[<span class=\"code-number\">3</span>],<span class=\"code-number\">16</span>),i.attributes.IV=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(i.attributes.IV))),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-START:?(.*)$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"start\"</span>},t[<span class=\"code-number\">1</span>]&amp;&amp;(i.attributes=w(t[<span class=\"code-number\">1</span>]),i.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>]=<span class=\"code-built_in\">parseFloat</span>(i.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>]),i.attributes.PRECISE=<span class=\"code-regexp\">/YES/</span>.test(i.attributes.PRECISE)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-OUT-CONT:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-out-cont\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-OUT:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-out\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>(t=<span class=\"code-regexp\">/^#EXT-X-CUE-IN:?(.*)?$/</span>.exec(e))<span class=\"code-keyword\">return</span> i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"cue-in\"</span>},t[<span class=\"code-number\">1</span>]?i.data=t[<span class=\"code-number\">1</span>]:i.data=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>((t=<span class=\"code-regexp\">/^#EXT-X-SKIP:(.*)$/</span>.exec(e))&amp;&amp;t[<span class=\"code-number\">1</span>])<span class=\"code-keyword\">return</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"skip\"</span>}).attributes=w(t[<span class=\"code-number\">1</span>]),i.attributes.hasOwnProperty(<span class=\"code-string\">\"SKIPPED-SEGMENTS\"</span>)&amp;&amp;(i.attributes[<span class=\"code-string\">\"SKIPPED-SEGMENTS\"</span>]=<span class=\"code-built_in\">parseInt</span>(i.attributes[<span class=\"code-string\">\"SKIPPED-SEGMENTS\"</span>],<span class=\"code-number\">10</span>)),i.attributes.hasOwnProperty(<span class=\"code-string\">\"RECENTLY-REMOVED-DATERANGES\"</span>)&amp;&amp;(i.attributes[<span class=\"code-string\">\"RECENTLY-REMOVED-DATERANGES\"</span>]=i.attributes[<span class=\"code-string\">\"RECENTLY-REMOVED-DATERANGES\"</span>].split(b)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>((t=<span class=\"code-regexp\">/^#EXT-X-PART:(.*)$/</span>.exec(e))&amp;&amp;t[<span class=\"code-number\">1</span>])<span class=\"code-keyword\">return</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"part\"</span>}).attributes=w(t[<span class=\"code-number\">1</span>]),[<span class=\"code-string\">\"DURATION\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class=\"code-built_in\">parseFloat</span>(i.attributes[e]))})),[<span class=\"code-string\">\"INDEPENDENT\"</span>,<span class=\"code-string\">\"GAP\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class=\"code-regexp\">/YES/</span>.test(i.attributes[e]))})),i.attributes.hasOwnProperty(<span class=\"code-string\">\"BYTERANGE\"</span>)&amp;&amp;(i.attributes.byterange=S(i.attributes.BYTERANGE)),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>((t=<span class=\"code-regexp\">/^#EXT-X-SERVER-CONTROL:(.*)$/</span>.exec(e))&amp;&amp;t[<span class=\"code-number\">1</span>])<span class=\"code-keyword\">return</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"server-control\"</span>}).attributes=w(t[<span class=\"code-number\">1</span>]),[<span class=\"code-string\">\"CAN-SKIP-UNTIL\"</span>,<span class=\"code-string\">\"PART-HOLD-BACK\"</span>,<span class=\"code-string\">\"HOLD-BACK\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class=\"code-built_in\">parseFloat</span>(i.attributes[e]))})),[<span class=\"code-string\">\"CAN-SKIP-DATERANGES\"</span>,<span class=\"code-string\">\"CAN-BLOCK-RELOAD\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class=\"code-regexp\">/YES/</span>.test(i.attributes[e]))})),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>((t=<span class=\"code-regexp\">/^#EXT-X-PART-INF:(.*)$/</span>.exec(e))&amp;&amp;t[<span class=\"code-number\">1</span>])<span class=\"code-keyword\">return</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"part-inf\"</span>}).attributes=w(t[<span class=\"code-number\">1</span>]),[<span class=\"code-string\">\"PART-TARGET\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class=\"code-built_in\">parseFloat</span>(i.attributes[e]))})),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>((t=<span class=\"code-regexp\">/^#EXT-X-PRELOAD-HINT:(.*)$/</span>.exec(e))&amp;&amp;t[<span class=\"code-number\">1</span>])<span class=\"code-keyword\">return</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"preload-hint\"</span>}).attributes=w(t[<span class=\"code-number\">1</span>]),[<span class=\"code-string\">\"BYTERANGE-START\"</span>,<span class=\"code-string\">\"BYTERANGE-LENGTH\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(i.attributes.hasOwnProperty(e)){i.attributes[e]=<span class=\"code-built_in\">parseInt</span>(i.attributes[e],<span class=\"code-number\">10</span>);<span class=\"code-keyword\">var</span> t=<span class=\"code-string\">\"BYTERANGE-LENGTH\"</span>===e?<span class=\"code-string\">\"length\"</span>:<span class=\"code-string\">\"offset\"</span>;i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[t]=i.attributes[e],<span class=\"code-keyword\">delete</span> i.attributes[e]}})),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">if</span>((t=<span class=\"code-regexp\">/^#EXT-X-RENDITION-REPORT:(.*)$/</span>.exec(e))&amp;&amp;t[<span class=\"code-number\">1</span>])<span class=\"code-keyword\">return</span>(i={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">tagType</span>:<span class=\"code-string\">\"rendition-report\"</span>}).attributes=w(t[<span class=\"code-number\">1</span>]),[<span class=\"code-string\">\"LAST-MSN\"</span>,<span class=\"code-string\">\"LAST-PART\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class=\"code-built_in\">parseInt</span>(i.attributes[e],<span class=\"code-number\">10</span>))})),<span class=\"code-keyword\">void</span> n.trigger(<span class=\"code-string\">\"data\"</span>,i);n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"tag\"</span>,<span class=\"code-attr\">data</span>:e.slice(<span class=\"code-number\">4</span>)})}}}<span class=\"code-keyword\">else</span> n.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"comment\"</span>,<span class=\"code-attr\">text</span>:e.slice(<span class=\"code-number\">1</span>)})})):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"uri\"</span>,<span class=\"code-attr\">uri</span>:e}))},i.addParser=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> r&amp;&amp;(r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}),<span class=\"code-keyword\">this</span>.customParsers.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(i.exec(e))<span class=\"code-keyword\">return</span> t.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"custom\"</span>,<span class=\"code-attr\">data</span>:r(e),<span class=\"code-attr\">customType</span>:n,<span class=\"code-attr\">segment</span>:a}),!<span class=\"code-number\">0</span>}))},i.addTagMapper=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.expression,i=e.map;<span class=\"code-keyword\">this</span>.tagMappers.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.test(e)?i(e):e}))},t}(g),E=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(e).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n;t[(n=i,n.toLowerCase().replace(<span class=\"code-regexp\">/-(\\w)/g</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">1</span>].toUpperCase()})))]=e[i]})),t},A=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.serverControl,i=e.targetDuration,n=e.partTargetDuration;<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> r=<span class=\"code-string\">\"#EXT-X-SERVER-CONTROL\"</span>,a=<span class=\"code-string\">\"holdBack\"</span>,s=<span class=\"code-string\">\"partHoldBack\"</span>,o=i&amp;&amp;<span class=\"code-number\">3</span>*i,u=n&amp;&amp;<span class=\"code-number\">2</span>*n;i&amp;&amp;!t.hasOwnProperty(a)&amp;&amp;(t[a]=o,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:r+<span class=\"code-string\">\" defaulting HOLD-BACK to targetDuration * 3 (\"</span>+o+<span class=\"code-string\">\").\"</span>})),o&amp;&amp;t[a]&lt;o&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:r+<span class=\"code-string\">\" clamping HOLD-BACK (\"</span>+t[a]+<span class=\"code-string\">\") to targetDuration * 3 (\"</span>+o+<span class=\"code-string\">\")\"</span>}),t[a]=o),n&amp;&amp;!t.hasOwnProperty(s)&amp;&amp;(t[s]=<span class=\"code-number\">3</span>*n,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:r+<span class=\"code-string\">\" defaulting PART-HOLD-BACK to partTargetDuration * 3 (\"</span>+t[s]+<span class=\"code-string\">\").\"</span>})),n&amp;&amp;t[s]&lt;u&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:r+<span class=\"code-string\">\" clamping PART-HOLD-BACK (\"</span>+t[s]+<span class=\"code-string\">\") to partTargetDuration * 2 (\"</span>+u+<span class=\"code-string\">\").\"</span>}),t[s]=u)}},L=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).lineStream=<span class=\"code-keyword\">new</span> T,t.parseStream=<span class=\"code-keyword\">new</span> I,t.lineStream.pipe(t.parseStream);<span class=\"code-keyword\">var</span> i,n,r=s(t),a=[],o={},u=!<span class=\"code-number\">1</span>,d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},l={<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:{},<span class=\"code-attr\">SUBTITLES</span>:{}},c=<span class=\"code-number\">0</span>;t.manifest={<span class=\"code-attr\">allowCache</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">discontinuityStarts</span>:[],<span class=\"code-attr\">segments</span>:[]};<span class=\"code-keyword\">var</span> h=<span class=\"code-number\">0</span>,f=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> t.on(<span class=\"code-string\">\"end\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.uri||!o.parts&amp;&amp;!o.preloadHints||(!o.map&amp;&amp;i&amp;&amp;(o.map=i),!o.key&amp;&amp;n&amp;&amp;(o.key=n),o.timeline||<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> c||(o.timeline=c),t.manifest.preloadSegment=o)})),t.parseStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,s;({<span class=\"code-attr\">tag</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{({<span class=\"code-attr\">version</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.version&amp;&amp;(<span class=\"code-keyword\">this</span>.manifest.version=e.version)},<span class=\"code-string\">\"allow-cache\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.allowCache=e.allowed,<span class=\"code-string\">\"allowed\"</span><span class=\"code-keyword\">in</span> e||(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting allowCache to YES\"</span>}),<span class=\"code-keyword\">this</span>.manifest.allowCache=!<span class=\"code-number\">0</span>)},<span class=\"code-attr\">byterange</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-string\">\"length\"</span><span class=\"code-keyword\">in</span> e&amp;&amp;(o.byterange=t,t.length=e.length,<span class=\"code-string\">\"offset\"</span><span class=\"code-keyword\">in</span> e||(e.offset=h)),<span class=\"code-string\">\"offset\"</span><span class=\"code-keyword\">in</span> e&amp;&amp;(o.byterange=t,t.offset=e.offset),h=t.offset+t.length},<span class=\"code-attr\">endlist</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.endList=!<span class=\"code-number\">0</span>},<span class=\"code-attr\">inf</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"mediaSequence\"</span><span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.manifest||(<span class=\"code-keyword\">this</span>.manifest.mediaSequence=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting media sequence to zero\"</span>})),<span class=\"code-string\">\"discontinuitySequence\"</span><span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.manifest||(<span class=\"code-keyword\">this</span>.manifest.discontinuitySequence=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting discontinuity sequence to zero\"</span>})),e.duration&gt;<span class=\"code-number\">0</span>&amp;&amp;(o.duration=e.duration),<span class=\"code-number\">0</span>===e.duration&amp;&amp;(o.duration=<span class=\"code-number\">.01</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"updating zero segment duration to a small value\"</span>})),<span class=\"code-keyword\">this</span>.manifest.segments=a},<span class=\"code-attr\">key</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(e.attributes)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"NONE\"</span>!==e.attributes.METHOD)<span class=\"code-keyword\">if</span>(e.attributes.URI){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"com.apple.streamingkeydelivery\"</span>===e.attributes.KEYFORMAT)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.manifest.contentProtection=<span class=\"code-keyword\">this</span>.manifest.contentProtection||{},<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.manifest.contentProtection[<span class=\"code-string\">\"com.apple.fps.1_0\"</span>]={<span class=\"code-attr\">attributes</span>:e.attributes});<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"</span>===e.attributes.KEYFORMAT)<span class=\"code-keyword\">return</span><span class=\"code-number\">-1</span>===[<span class=\"code-string\">\"SAMPLE-AES\"</span>,<span class=\"code-string\">\"SAMPLE-AES-CTR\"</span>,<span class=\"code-string\">\"SAMPLE-AES-CENC\"</span>].indexOf(e.attributes.METHOD)?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key method provided for Widevine\"</span>}):(<span class=\"code-string\">\"SAMPLE-AES-CENC\"</span>===e.attributes.METHOD&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead\"</span>}),<span class=\"code-string\">\"data:text/plain;base64,\"</span>!==e.attributes.URI.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">23</span>)?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key URI provided for Widevine\"</span>}):e.attributes.KEYID&amp;&amp;<span class=\"code-string\">\"0x\"</span>===e.attributes.KEYID.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>)?(<span class=\"code-keyword\">this</span>.manifest.contentProtection=<span class=\"code-keyword\">this</span>.manifest.contentProtection||{},<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.manifest.contentProtection[<span class=\"code-string\">\"com.widevine.alpha\"</span>]={<span class=\"code-attr\">attributes</span>:{<span class=\"code-attr\">schemeIdUri</span>:e.attributes.KEYFORMAT,<span class=\"code-attr\">keyId</span>:e.attributes.KEYID.substring(<span class=\"code-number\">2</span>)},<span class=\"code-attr\">pssh</span>:y(e.attributes.URI.split(<span class=\"code-string\">\",\"</span>)[<span class=\"code-number\">1</span>])})):<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"invalid key ID provided for Widevine\"</span>}));e.attributes.METHOD||<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting key method to AES-128\"</span>}),n={<span class=\"code-attr\">method</span>:e.attributes.METHOD||<span class=\"code-string\">\"AES-128\"</span>,<span class=\"code-attr\">uri</span>:e.attributes.URI},<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.attributes.IV&amp;&amp;(n.iv=e.attributes.IV)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring key declaration without URI\"</span>});<span class=\"code-keyword\">else</span> n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring key declaration without attribute list\"</span>})},<span class=\"code-string\">\"media-sequence\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-built_in\">isFinite</span>(e.number)?<span class=\"code-keyword\">this</span>.manifest.mediaSequence=e.number:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid media sequence: \"</span>+e.number})},<span class=\"code-string\">\"discontinuity-sequence\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-built_in\">isFinite</span>(e.number)?(<span class=\"code-keyword\">this</span>.manifest.discontinuitySequence=e.number,c=e.number):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid discontinuity sequence: \"</span>+e.number})},<span class=\"code-string\">\"playlist-type\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{/VOD|EVENT/.test(e.playlistType)?<span class=\"code-keyword\">this</span>.manifest.playlistType=e.playlistType:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring unknown playlist type: \"</span>+e.playlist})},<span class=\"code-attr\">map</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i={},e.uri&amp;&amp;(i.uri=e.uri),e.byterange&amp;&amp;(i.byterange=e.byterange),n&amp;&amp;(i.key=n)},<span class=\"code-string\">\"stream-inf\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.playlists=a,<span class=\"code-keyword\">this</span>.manifest.mediaGroups=<span class=\"code-keyword\">this</span>.manifest.mediaGroups||l,e.attributes?(o.attributes||(o.attributes={}),m(o.attributes,e.attributes)):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring empty stream-inf attributes\"</span>})},<span class=\"code-attr\">media</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.manifest.mediaGroups=<span class=\"code-keyword\">this</span>.manifest.mediaGroups||l,e.attributes&amp;&amp;e.attributes.TYPE&amp;&amp;e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]&amp;&amp;e.attributes.NAME){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]]=i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]]||{},t=i[e.attributes[<span class=\"code-string\">\"GROUP-ID\"</span>]],(s={<span class=\"code-attr\">default</span>:<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.DEFAULT)}).default?s.autoselect=!<span class=\"code-number\">0</span>:s.autoselect=<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&amp;&amp;(s.language=e.attributes.LANGUAGE),e.attributes.URI&amp;&amp;(s.uri=e.attributes.URI),e.attributes[<span class=\"code-string\">\"INSTREAM-ID\"</span>]&amp;&amp;(s.instreamId=e.attributes[<span class=\"code-string\">\"INSTREAM-ID\"</span>]),e.attributes.CHARACTERISTICS&amp;&amp;(s.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&amp;&amp;(s.forced=<span class=\"code-regexp\">/yes/i</span>.test(e.attributes.FORCED)),t[e.attributes.NAME]=s}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring incomplete or missing media group\"</span>})},<span class=\"code-attr\">discontinuity</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{c+=<span class=\"code-number\">1</span>,o.discontinuity=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.manifest.discontinuityStarts.push(a.length)},<span class=\"code-string\">\"program-date-time\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.manifest.dateTimeString&amp;&amp;(<span class=\"code-keyword\">this</span>.manifest.dateTimeString=e.dateTimeString,<span class=\"code-keyword\">this</span>.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},<span class=\"code-attr\">targetduration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{!<span class=\"code-built_in\">isFinite</span>(e.duration)||e.duration&lt;<span class=\"code-number\">0</span>?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring invalid target duration: \"</span>+e.duration}):(<span class=\"code-keyword\">this</span>.manifest.targetDuration=e.duration,A.call(<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.manifest))},<span class=\"code-attr\">start</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.attributes&amp;&amp;!<span class=\"code-built_in\">isNaN</span>(e.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>])?<span class=\"code-keyword\">this</span>.manifest.start={<span class=\"code-attr\">timeOffset</span>:e.attributes[<span class=\"code-string\">\"TIME-OFFSET\"</span>],<span class=\"code-attr\">precise</span>:e.attributes.PRECISE}:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"ignoring start declaration without appropriate attribute list\"</span>})},<span class=\"code-string\">\"cue-out\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.cueOut=e.data},<span class=\"code-string\">\"cue-out-cont\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.cueOutCont=e.data},<span class=\"code-string\">\"cue-in\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.cueIn=e.data},<span class=\"code-attr\">skip</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.skip=E(e.attributes),<span class=\"code-keyword\">this</span>.warnOnMissingAttributes_(<span class=\"code-string\">\"#EXT-X-SKIP\"</span>,e.attributes,[<span class=\"code-string\">\"SKIPPED-SEGMENTS\"</span>])},<span class=\"code-attr\">part</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;u=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.manifest.segments.length,n=E(e.attributes);o.parts=o.parts||[],o.parts.push(n),n.byterange&amp;&amp;(n.byterange.hasOwnProperty(<span class=\"code-string\">\"offset\"</span>)||(n.byterange.offset=f),f=n.byterange.offset+n.byterange.length);<span class=\"code-keyword\">var</span> r=o.parts.length<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">this</span>.warnOnMissingAttributes_(<span class=\"code-string\">\"#EXT-X-PART #\"</span>+r+<span class=\"code-string\">\" for segment #\"</span>+i,e.attributes,[<span class=\"code-string\">\"URI\"</span>,<span class=\"code-string\">\"DURATION\"</span>]),<span class=\"code-keyword\">this</span>.manifest.renditionReports&amp;&amp;<span class=\"code-keyword\">this</span>.manifest.renditionReports.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{e.hasOwnProperty(<span class=\"code-string\">\"lastPart\"</span>)||t.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"#EXT-X-RENDITION-REPORT #\"</span>+i+<span class=\"code-string\">\" lacks required attribute(s): LAST-PART\"</span>})}))},<span class=\"code-string\">\"server-control\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.manifest.serverControl=E(e.attributes);t.hasOwnProperty(<span class=\"code-string\">\"canBlockReload\"</span>)||(t.canBlockReload=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"info\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false\"</span>})),A.call(<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.manifest),t.canSkipDateranges&amp;&amp;!t.hasOwnProperty(<span class=\"code-string\">\"canSkipUntil\"</span>)&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set\"</span>})},<span class=\"code-string\">\"preload-hint\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.manifest.segments.length,i=E(e.attributes),n=i.type&amp;&amp;<span class=\"code-string\">\"PART\"</span>===i.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(i),i.byterange&amp;&amp;(i.byterange.hasOwnProperty(<span class=\"code-string\">\"offset\"</span>)||(i.byterange.offset=n?f:<span class=\"code-number\">0</span>,n&amp;&amp;(f=i.byterange.offset+i.byterange.length)));<span class=\"code-keyword\">var</span> r=o.preloadHints.length<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.warnOnMissingAttributes_(<span class=\"code-string\">\"#EXT-X-PRELOAD-HINT #\"</span>+r+<span class=\"code-string\">\" for segment #\"</span>+t,e.attributes,[<span class=\"code-string\">\"TYPE\"</span>,<span class=\"code-string\">\"URI\"</span>]),i.type)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">0</span>;a&lt;o.preloadHints.length<span class=\"code-number\">-1</span>;a++){<span class=\"code-keyword\">var</span> s=o.preloadHints[a];s.type&amp;&amp;s.type===i.type&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"#EXT-X-PRELOAD-HINT #\"</span>+r+<span class=\"code-string\">\" for segment #\"</span>+t+<span class=\"code-string\">\" has the same TYPE \"</span>+i.type+<span class=\"code-string\">\" as preload hint #\"</span>+a})}},<span class=\"code-string\">\"rendition-report\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=E(e.attributes);<span class=\"code-keyword\">this</span>.manifest.renditionReports=<span class=\"code-keyword\">this</span>.manifest.renditionReports||[],<span class=\"code-keyword\">this</span>.manifest.renditionReports.push(t);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.manifest.renditionReports.length<span class=\"code-number\">-1</span>,n=[<span class=\"code-string\">\"LAST-MSN\"</span>,<span class=\"code-string\">\"URI\"</span>];u&amp;&amp;n.push(<span class=\"code-string\">\"LAST-PART\"</span>),<span class=\"code-keyword\">this</span>.warnOnMissingAttributes_(<span class=\"code-string\">\"#EXT-X-RENDITION-REPORT #\"</span>+i,e.attributes,n)},<span class=\"code-string\">\"part-inf\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.manifest.partInf=E(e.attributes),<span class=\"code-keyword\">this</span>.warnOnMissingAttributes_(<span class=\"code-string\">\"#EXT-X-PART-INF\"</span>,e.attributes,[<span class=\"code-string\">\"PART-TARGET\"</span>]),<span class=\"code-keyword\">this</span>.manifest.partInf.partTarget&amp;&amp;(<span class=\"code-keyword\">this</span>.manifest.partTargetDuration=<span class=\"code-keyword\">this</span>.manifest.partInf.partTarget),A.call(<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.manifest)}}[e.tagType]||d).call(r)},<span class=\"code-attr\">uri</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.uri=e.uri,a.push(o),<span class=\"code-keyword\">this</span>.manifest.targetDuration&amp;&amp;!(<span class=\"code-string\">\"duration\"</span><span class=\"code-keyword\">in</span> o)&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"defaulting segment duration to the target duration\"</span>}),o.duration=<span class=\"code-keyword\">this</span>.manifest.targetDuration),n&amp;&amp;(o.key=n),o.timeline=c,i&amp;&amp;(o.map=i),f=<span class=\"code-number\">0</span>,o={}},<span class=\"code-attr\">comment</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},<span class=\"code-attr\">custom</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(<span class=\"code-keyword\">this</span>.manifest.custom=<span class=\"code-keyword\">this</span>.manifest.custom||{},<span class=\"code-keyword\">this</span>.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.warnOnMissingAttributes_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=[];i.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.hasOwnProperty(e)||n.push(e)})),n.length&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"warn\"</span>,{<span class=\"code-attr\">message</span>:e+<span class=\"code-string\">\" lacks required attribute(s): \"</span>+n.join(<span class=\"code-string\">\", \"</span>)})},i.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.lineStream.push(e)},i.end=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.lineStream.push(<span class=\"code-string\">\"\\n\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"end\"</span>)},i.addParser=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parseStream.addParser(e)},i.addTagMapper=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parseStream.addTagMapper(e)},t}(g),P={<span class=\"code-attr\">mp4</span>:<span class=\"code-regexp\">/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/</span>,<span class=\"code-attr\">webm</span>:<span class=\"code-regexp\">/^(vp0?[89]|av0?1|opus|vorbis)/</span>,<span class=\"code-attr\">ogg</span>:<span class=\"code-regexp\">/^(vp0?[89]|theora|flac|opus|vorbis)/</span>,<span class=\"code-attr\">video</span>:<span class=\"code-regexp\">/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/</span>,<span class=\"code-attr\">audio</span>:<span class=\"code-regexp\">/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/</span>,<span class=\"code-attr\">text</span>:<span class=\"code-regexp\">/^(stpp.ttml.im1t)/</span>,<span class=\"code-attr\">muxerVideo</span>:<span class=\"code-regexp\">/^(avc0?1)/</span>,<span class=\"code-attr\">muxerAudio</span>:<span class=\"code-regexp\">/^(mp4a)/</span>,<span class=\"code-attr\">muxerText</span>:<span class=\"code-regexp\">/a^/</span>},k=[<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"text\"</span>],x=[<span class=\"code-string\">\"Video\"</span>,<span class=\"code-string\">\"Audio\"</span>,<span class=\"code-string\">\"Text\"</span>],O=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e?e.replace(<span class=\"code-regexp\">/avc1\\.(\\d+)\\.(\\d+)/i</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"avc1.\"</span>+(<span class=\"code-string\">\"00\"</span>+<span class=\"code-built_in\">Number</span>(t).toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)+<span class=\"code-string\">\"00\"</span>+(<span class=\"code-string\">\"00\"</span>+<span class=\"code-built_in\">Number</span>(i).toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)})):e},D=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">var</span> t=e.split(<span class=\"code-string\">\",\"</span>),i=[];<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;e=e.trim(),k.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=P[n].exec(e.toLowerCase());<span class=\"code-keyword\">if</span>(r&amp;&amp;!(r.length&lt;=<span class=\"code-number\">1</span>)){t=n;<span class=\"code-keyword\">var</span> a=e.substring(<span class=\"code-number\">0</span>,r[<span class=\"code-number\">1</span>].length),s=e.replace(a,<span class=\"code-string\">\"\"</span>);i.push({<span class=\"code-attr\">type</span>:a,<span class=\"code-attr\">details</span>:s,<span class=\"code-attr\">mediaType</span>:n})}})),t||i.push({<span class=\"code-attr\">type</span>:e,<span class=\"code-attr\">details</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">mediaType</span>:<span class=\"code-string\">\"unknown\"</span>})})),i},C=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>),P.audio.test(e.trim().toLowerCase())},U=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e&amp;&amp;<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">var</span> t,i=e.toLowerCase().split(<span class=\"code-string\">\",\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> O(e.trim())})),n=<span class=\"code-string\">\"video\"</span>;<span class=\"code-number\">1</span>===i.length&amp;&amp;C(i[<span class=\"code-number\">0</span>])?n=<span class=\"code-string\">\"audio\"</span>:<span class=\"code-number\">1</span>===i.length&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===(t=i[<span class=\"code-number\">0</span>])&amp;&amp;(t=<span class=\"code-string\">\"\"</span>),P.text.test(t.trim().toLowerCase()))&amp;&amp;(n=<span class=\"code-string\">\"application\"</span>);<span class=\"code-keyword\">var</span> r=<span class=\"code-string\">\"mp4\"</span>;<span class=\"code-keyword\">return</span> i.every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> P.mp4.test(e)}))?r=<span class=\"code-string\">\"mp4\"</span>:i.every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> P.webm.test(e)}))?r=<span class=\"code-string\">\"webm\"</span>:i.every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> P.ogg.test(e)}))&amp;&amp;(r=<span class=\"code-string\">\"ogg\"</span>),n+<span class=\"code-string\">\"/\"</span>+r+<span class=\"code-string\">';codecs=\"'</span>+e+<span class=\"code-string\">'\"'</span>}},R=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>),<span class=\"code-built_in\">window</span>.MediaSource&amp;&amp;<span class=\"code-built_in\">window</span>.MediaSource.isTypeSupported&amp;&amp;<span class=\"code-built_in\">window</span>.MediaSource.isTypeSupported(U(e))||!<span class=\"code-number\">1</span>},M=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-string\">\"\"</span>),e.toLowerCase().split(<span class=\"code-string\">\",\"</span>).every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=e.trim();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;x.length;t++)<span class=\"code-keyword\">if</span>(P[<span class=\"code-string\">\"muxer\"</span>+x[t]].test(e))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}))},B=<span class=\"code-string\">\"mp4a.40.2\"</span>,N=<span class=\"code-number\">1</span>/<span class=\"code-number\">30</span>,F=<span class=\"code-number\">.1</span>,q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=[];<span class=\"code-keyword\">if</span>(e&amp;&amp;e.length)<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t(e.start(i),e.end(i))&amp;&amp;n.push([e.start(i),e.end(i)]);<span class=\"code-keyword\">return</span> r.default.createTimeRanges(n)},H=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> q(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> e-F&lt;=t&amp;&amp;i+F&gt;=t}))},G=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> q(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e-N&gt;=t}))},W=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=[];<span class=\"code-keyword\">if</span>(!e||!e.length)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push(e.start(i)+<span class=\"code-string\">\" =&gt; \"</span>+e.end(i));<span class=\"code-keyword\">return</span> t.join(<span class=\"code-string\">\", \"</span>)},V=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push({<span class=\"code-attr\">start</span>:e.start(i),<span class=\"code-attr\">end</span>:e.end(i)});<span class=\"code-keyword\">return</span> t},j=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e&amp;&amp;e.length&amp;&amp;e.end)<span class=\"code-keyword\">return</span> e.end(e.length<span class=\"code-number\">-1</span>)},X=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(!e||!e.length)<span class=\"code-keyword\">return</span> i;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;e.length;n++){<span class=\"code-keyword\">var</span> r=e.start(n),a=e.end(n);t&gt;a||(i+=t&gt;r&amp;&amp;t&lt;=a?a-t:a-r)}<span class=\"code-keyword\">return</span> i},z=r.default.createTimeRange,Q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t.preload)<span class=\"code-keyword\">return</span> t.duration;<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>(t.parts||[]).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i+=e.duration})),(t.preloadHints||[]).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-string\">\"PART\"</span>===t.type&amp;&amp;(i+=e.partTargetDuration)})),i},Y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>(e.segments||[]).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.parts?t.parts.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n,r</span>)</span>{e.push({<span class=\"code-attr\">duration</span>:n.duration,<span class=\"code-attr\">segmentIndex</span>:i,<span class=\"code-attr\">partIndex</span>:r,<span class=\"code-attr\">part</span>:n,<span class=\"code-attr\">segment</span>:t})})):e.push({<span class=\"code-attr\">duration</span>:t.duration,<span class=\"code-attr\">segmentIndex</span>:i,<span class=\"code-attr\">partIndex</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">part</span>:<span class=\"code-literal\">null</span>}),e}),[])},K=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[e.segments.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">return</span> t&amp;&amp;t.parts||[]},$=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.preloadSegment;<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> i=t.parts;<span class=\"code-keyword\">return</span>(t.preloadHints||[]).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+(<span class=\"code-string\">\"PART\"</span>===t.type?<span class=\"code-number\">1</span>:<span class=\"code-number\">0</span>)}),<span class=\"code-number\">0</span>)+(i&amp;&amp;i.length?i.length:<span class=\"code-number\">0</span>)}},J=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(t.endList)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e&amp;&amp;e.suggestedPresentationDelay)<span class=\"code-keyword\">return</span> e.suggestedPresentationDelay;<span class=\"code-keyword\">var</span> i=K(t).length&gt;<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> i&amp;&amp;t.serverControl&amp;&amp;t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&amp;&amp;t.partTargetDuration?<span class=\"code-number\">3</span>*t.partTargetDuration:t.serverControl&amp;&amp;t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?<span class=\"code-number\">3</span>*t.targetDuration:<span class=\"code-number\">0</span>},Z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=e.mediaSequence+e.segments.length),t&lt;e.mediaSequence)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=t-e.mediaSequence,r=e.segments[n];<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:r.start,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:r.end-r.duration,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">for</span>(;n--;){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(r=e.segments[n]).end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i+r.end,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(i+=Q(e,r),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r.start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i+r.start,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">1</span>}}(e,t);<span class=\"code-keyword\">if</span>(n.precise)<span class=\"code-keyword\">return</span> n.result;<span class=\"code-keyword\">var</span> r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">0</span>,r=t-e.mediaSequence;r&lt;e.segments.length;r++){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(i=e.segments[r]).start)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i.start-n,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(n+=Q(e,i),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==i.end)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:i.end-n,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">0</span>}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">result</span>:<span class=\"code-number\">-1</span>,<span class=\"code-attr\">precise</span>:!<span class=\"code-number\">1</span>}}(e,t);<span class=\"code-keyword\">return</span> r.precise?r.result:n.result+i},ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> i&amp;&amp;(i=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t){<span class=\"code-keyword\">if</span>(e.totalDuration)<span class=\"code-keyword\">return</span> e.totalDuration;<span class=\"code-keyword\">if</span>(!e.endList)<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">window</span>.Infinity}<span class=\"code-keyword\">return</span> Z(e,t,i)},te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.defaultDuration,i=e.durationList,n=e.startIndex,r=e.endIndex,a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(n&gt;r){<span class=\"code-keyword\">var</span> s=[r,n];n=s[<span class=\"code-number\">0</span>],r=s[<span class=\"code-number\">1</span>]}<span class=\"code-keyword\">if</span>(n&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o=n;o&lt;<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">0</span>,r);o++)a+=t;n=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=n;u&lt;r;u++)a+=i[u].duration;<span class=\"code-keyword\">return</span> a},ie=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!e.segments)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(e.endList)<span class=\"code-keyword\">return</span> ee(e);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;t=t||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> r=Z(e,e.mediaSequence+e.segments.length,t);<span class=\"code-keyword\">return</span> i&amp;&amp;(r-=n=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n?n:J(<span class=\"code-literal\">null</span>,e)),<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,r)},ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil&amp;&amp;e.excludeUntil&gt;<span class=\"code-built_in\">Date</span>.now()},re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil&amp;&amp;e.excludeUntil===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>},ae=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=ne(e);<span class=\"code-keyword\">return</span>!e.disabled&amp;&amp;!t},se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.attributes&amp;&amp;t.attributes[e]},oe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===e.playlists.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.attributes.BANDWIDTH||<span class=\"code-built_in\">Number</span>.MAX_VALUE;<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===e.playlists.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!ae(e)&amp;&amp;(e.attributes.BANDWIDTH||<span class=\"code-number\">0</span>)&lt;i})).length},ue=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>!(!e&amp;&amp;!t||!e&amp;&amp;t||e&amp;&amp;!t||e!==t&amp;&amp;(!e.id||!t.id||e.id!==t.id)&amp;&amp;(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&amp;&amp;(!e.uri||!t.uri||e.uri!==t.uri))},de=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e&amp;&amp;e.mediaGroups&amp;&amp;e.mediaGroups.AUDIO||{},n=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r <span class=\"code-keyword\">in</span> i){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> i[r])<span class=\"code-keyword\">if</span>(n=t(i[r][a]))<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">if</span>(n)<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">return</span>!!n},le=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!e.playlists||!e.playlists.length)<span class=\"code-keyword\">return</span> de(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.playlists&amp;&amp;e.playlists.length||e.uri}));<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.playlists[t],n=i.attributes&amp;&amp;i.attributes.CODECS;<span class=\"code-keyword\">return</span> n&amp;&amp;n.split(<span class=\"code-string\">\",\"</span>).every((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> C(e)}))||de(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> ue(i,e)}))?<span class=\"code-string\">\"continue\"</span>:{<span class=\"code-attr\">v</span>:!<span class=\"code-number\">1</span>}},i=<span class=\"code-number\">0</span>;i&lt;e.playlists.length;i++){<span class=\"code-keyword\">var</span> n=t(i);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"continue\"</span>!==n&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> n)<span class=\"code-keyword\">return</span> n.v}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>},ce={<span class=\"code-attr\">liveEdgeDelay</span>:J,<span class=\"code-attr\">duration</span>:ee,<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t||<span class=\"code-number\">0</span>,r=ie(e,t,!<span class=\"code-number\">0</span>,i);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===r?z():z(n,r)},<span class=\"code-attr\">getMediaInfoForTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=e.playlist,i=e.currentTime,n=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,s=e.experimentalExactManifestTimings,o=i-a,u=Y(t),d=<span class=\"code-number\">0</span>,l=<span class=\"code-number\">0</span>;l&lt;u.length;l++){<span class=\"code-keyword\">var</span> c=u[l];<span class=\"code-keyword\">if</span>(n===c.segmentIndex&amp;&amp;(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> r||<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> c.partIndex||r===c.partIndex)){d=l;<span class=\"code-keyword\">break</span>}}<span class=\"code-keyword\">if</span>(o&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">if</span>(d&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> h=d<span class=\"code-number\">-1</span>;h&gt;=<span class=\"code-number\">0</span>;h--){<span class=\"code-keyword\">var</span> f=u[h];<span class=\"code-keyword\">if</span>(o+=f.duration,s){<span class=\"code-keyword\">if</span>(o&lt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">continue</span>}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(o+N&lt;=<span class=\"code-number\">0</span>)<span class=\"code-keyword\">continue</span>;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">partIndex</span>:f.partIndex,<span class=\"code-attr\">segmentIndex</span>:f.segmentIndex,<span class=\"code-attr\">startTime</span>:a-te({<span class=\"code-attr\">defaultDuration</span>:t.targetDuration,<span class=\"code-attr\">durationList</span>:u,<span class=\"code-attr\">startIndex</span>:d,<span class=\"code-attr\">endIndex</span>:h})}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">partIndex</span>:u[<span class=\"code-number\">0</span>]&amp;&amp;u[<span class=\"code-number\">0</span>].partIndex||<span class=\"code-literal\">null</span>,<span class=\"code-attr\">segmentIndex</span>:u[<span class=\"code-number\">0</span>]&amp;&amp;u[<span class=\"code-number\">0</span>].segmentIndex||<span class=\"code-number\">0</span>,<span class=\"code-attr\">startTime</span>:i}}<span class=\"code-keyword\">if</span>(d&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> p=d;p&lt;<span class=\"code-number\">0</span>;p++)<span class=\"code-keyword\">if</span>((o-=t.targetDuration)&lt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">partIndex</span>:u[<span class=\"code-number\">0</span>]&amp;&amp;u[<span class=\"code-number\">0</span>].partIndex||<span class=\"code-literal\">null</span>,<span class=\"code-attr\">segmentIndex</span>:u[<span class=\"code-number\">0</span>]&amp;&amp;u[<span class=\"code-number\">0</span>].segmentIndex||<span class=\"code-number\">0</span>,<span class=\"code-attr\">startTime</span>:i};d=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> m=d;m&lt;u.length;m++){<span class=\"code-keyword\">var</span> g=u[m];<span class=\"code-keyword\">if</span>(o-=g.duration,s){<span class=\"code-keyword\">if</span>(o&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">continue</span>}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(o-N&gt;=<span class=\"code-number\">0</span>)<span class=\"code-keyword\">continue</span>;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">partIndex</span>:g.partIndex,<span class=\"code-attr\">segmentIndex</span>:g.segmentIndex,<span class=\"code-attr\">startTime</span>:a+te({<span class=\"code-attr\">defaultDuration</span>:t.targetDuration,<span class=\"code-attr\">durationList</span>:u,<span class=\"code-attr\">startIndex</span>:d,<span class=\"code-attr\">endIndex</span>:m})}}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">segmentIndex</span>:u[u.length<span class=\"code-number\">-1</span>].segmentIndex,<span class=\"code-attr\">partIndex</span>:u[u.length<span class=\"code-number\">-1</span>].partIndex,<span class=\"code-attr\">startTime</span>:i}},<span class=\"code-attr\">isEnabled</span>:ae,<span class=\"code-attr\">isDisabled</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.disabled},<span class=\"code-attr\">isBlacklisted</span>:ne,<span class=\"code-attr\">isIncompatible</span>:re,<span class=\"code-attr\">playlistEnd</span>:ie,<span class=\"code-attr\">isAes</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.segments.length;t++)<span class=\"code-keyword\">if</span>(e.segments[t].key)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},<span class=\"code-attr\">hasAttribute</span>:se,<span class=\"code-attr\">estimateSegmentRequestTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=<span class=\"code-number\">0</span>),se(<span class=\"code-string\">\"BANDWIDTH\"</span>,i)?(e*i.attributes.BANDWIDTH<span class=\"code-number\">-8</span>*n)/t:<span class=\"code-literal\">NaN</span>},<span class=\"code-attr\">isLowestEnabledRendition</span>:oe,<span class=\"code-attr\">isAudioOnly</span>:le,<span class=\"code-attr\">playlistMatch</span>:ue,<span class=\"code-attr\">segmentDurationWithParts</span>:Q},he=r.default.log,fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"-\"</span>+t},pe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.mediaGroups&amp;&amp;[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">if</span>(e.mediaGroups[i])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> e.mediaGroups[i])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r <span class=\"code-keyword\">in</span> e.mediaGroups[i][n]){<span class=\"code-keyword\">var</span> a=e.mediaGroups[i][n][r];t(a,i,n,r)}}))},me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.uri,n=e.id;t.id=n,t.playlistErrors_=<span class=\"code-number\">0</span>,i&amp;&amp;(t.uri=i),t.attributes=t.attributes||{}},ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.uri=t;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.playlists.length;i++)<span class=\"code-keyword\">if</span>(!e.playlists[i].uri){<span class=\"code-keyword\">var</span> n=<span class=\"code-string\">\"placeholder-uri-\"</span>+i;e.playlists[i].uri=n}<span class=\"code-keyword\">var</span> r=le(e);pe(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n,a</span>)</span>{<span class=\"code-keyword\">var</span> s=<span class=\"code-string\">\"placeholder-uri-\"</span>+i+<span class=\"code-string\">\"-\"</span>+n+<span class=\"code-string\">\"-\"</span>+a;<span class=\"code-keyword\">if</span>(!t.playlists||!t.playlists.length){<span class=\"code-keyword\">if</span>(r&amp;&amp;<span class=\"code-string\">\"AUDIO\"</span>===i&amp;&amp;!t.uri)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o=<span class=\"code-number\">0</span>;o&lt;e.playlists.length;o++){<span class=\"code-keyword\">var</span> u=e.playlists[o];<span class=\"code-keyword\">if</span>(u.attributes&amp;&amp;u.attributes.AUDIO&amp;&amp;u.attributes.AUDIO===n)<span class=\"code-keyword\">return</span>}t.playlists=[m({},t)]}t.playlists.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=fe(i,s);t.uri?t.resolvedUri=t.resolvedUri||h(e.uri,t.uri):(t.uri=<span class=\"code-number\">0</span>===i?s:n,t.resolvedUri=t.uri),t.id=t.id||n,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=e.playlists.length;t--;){<span class=\"code-keyword\">var</span> i=e.playlists[t];me({<span class=\"code-attr\">playlist</span>:i,<span class=\"code-attr\">id</span>:fe(t,i.uri)}),i.resolvedUri=h(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||he.warn(<span class=\"code-string\">\"Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.\"</span>)}}(e),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{pe(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{t.uri&amp;&amp;(t.resolvedUri=h(e.uri,t.uri))}))}(e)},ye=r.default.mergeOptions,ve=r.default.EventTarget,_e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">var</span> i=ye(e,t);<span class=\"code-keyword\">if</span>(e.preloadHints&amp;&amp;!t.preloadHints&amp;&amp;<span class=\"code-keyword\">delete</span> i.preloadHints,e.parts&amp;&amp;!t.parts)<span class=\"code-keyword\">delete</span> i.parts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(e.parts&amp;&amp;t.parts)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;t.parts.length;n++)e.parts&amp;&amp;e.parts[n]&amp;&amp;(i.parts[n]=ye(e.parts[n],t.parts[n]));<span class=\"code-keyword\">return</span>!e.skipped&amp;&amp;t.skipped&amp;&amp;(i.skipped=!<span class=\"code-number\">1</span>),e.preload&amp;&amp;!t.preload&amp;&amp;(i.preload=!<span class=\"code-number\">1</span>),i},Te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{!e.resolvedUri&amp;&amp;e.uri&amp;&amp;(e.resolvedUri=h(t,e.uri)),e.key&amp;&amp;!e.key.resolvedUri&amp;&amp;(e.key.resolvedUri=h(t,e.key.uri)),e.map&amp;&amp;!e.map.resolvedUri&amp;&amp;(e.map.resolvedUri=h(t,e.map.uri)),e.map&amp;&amp;e.map.key&amp;&amp;!e.map.key.resolvedUri&amp;&amp;(e.map.key.resolvedUri=h(t,e.map.key.uri)),e.parts&amp;&amp;e.parts.length&amp;&amp;e.parts.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.resolvedUri||(e.resolvedUri=h(t,e.uri))})),e.preloadHints&amp;&amp;e.preloadHints.length&amp;&amp;e.preloadHints.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.resolvedUri||(e.resolvedUri=h(t,e.uri))}))},be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segments||[],i=e.preloadSegment;<span class=\"code-keyword\">if</span>(i&amp;&amp;i.parts&amp;&amp;i.parts.length){<span class=\"code-keyword\">if</span>(i.preloadHints)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;i.preloadHints.length;n++)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"MAP\"</span>===i.preloadHints[n].type)<span class=\"code-keyword\">return</span> t;i.duration=e.targetDuration,i.preload=!<span class=\"code-number\">0</span>,t.push(i)}<span class=\"code-keyword\">return</span> t},Se=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===t||e.segments&amp;&amp;t.segments&amp;&amp;e.segments.length===t.segments.length&amp;&amp;e.endList===t.endList&amp;&amp;e.mediaSequence===t.mediaSequence&amp;&amp;e.preloadSegment===t.preloadSegment},we=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=Se);<span class=\"code-keyword\">var</span> n=ye(e,{}),r=n.playlists[t.id];<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(i(r,t))<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;t.segments=be(t);<span class=\"code-keyword\">var</span> a=ye(r,t);<span class=\"code-keyword\">if</span>(a.preloadSegment&amp;&amp;!t.preloadSegment&amp;&amp;<span class=\"code-keyword\">delete</span> a.preloadSegment,r.segments){<span class=\"code-keyword\">if</span>(t.skip){t.segments=t.segments||[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;s&lt;t.skip.skippedSegments;s++)t.segments.unshift({<span class=\"code-attr\">skipped</span>:!<span class=\"code-number\">0</span>})}a.segments=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.slice(),r=t.slice();i=i||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a,s=[],o=<span class=\"code-number\">0</span>;o&lt;r.length;o++){<span class=\"code-keyword\">var</span> u=n[o+i],d=r[o];u?(a=u.map||a,s.push(_e(u,d))):(a&amp;&amp;!d.map&amp;&amp;(d.map=a),s.push(d))}<span class=\"code-keyword\">return</span> s}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{Te(e,a.resolvedUri)}));<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o=<span class=\"code-number\">0</span>;o&lt;n.playlists.length;o++)n.playlists[o].id===t.id&amp;&amp;(n.playlists[o]=a);<span class=\"code-keyword\">return</span> n.playlists[t.id]=a,n.playlists[t.uri]=a,pe(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(e.playlists)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">0</span>;a&lt;e.playlists.length;a++)t.id===e.playlists[a].id&amp;&amp;(e.playlists[a]=t)})),n},Ie=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.segments||[],n=i[i.length<span class=\"code-number\">-1</span>],r=n&amp;&amp;n.parts&amp;&amp;n.parts[n.parts.length<span class=\"code-number\">-1</span>],a=r&amp;&amp;r.duration||n&amp;&amp;n.duration;<span class=\"code-keyword\">return</span> t&amp;&amp;a?<span class=\"code-number\">1e3</span>*a:<span class=\"code-number\">500</span>*(e.partTargetDuration||e.targetDuration||<span class=\"code-number\">10</span>)},Ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> a;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n={}),a=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>,!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL or object is required\"</span>);a.logger_=p(<span class=\"code-string\">\"PlaylistLoader\"</span>);<span class=\"code-keyword\">var</span> o=n,u=o.withCredentials,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==u&amp;&amp;u,l=o.handleManifestRedirects,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==l&amp;&amp;l;a.src=t,a.vhs_=i,a.withCredentials=d,a.handleManifestRedirects=c;<span class=\"code-keyword\">var</span> h=i.options_;<span class=\"code-keyword\">return</span> a.customTagParsers=h&amp;&amp;h.customTagParsers||[],a.customTagMappers=h&amp;&amp;h.customTagMappers||[],a.experimentalLLHLS=h&amp;&amp;h.experimentalLLHLS||!<span class=\"code-number\">1</span>,r.default.browser.IE_VERSION&amp;&amp;(a.experimentalLLHLS=!<span class=\"code-number\">1</span>),a.state=<span class=\"code-string\">\"HAVE_NOTHING\"</span>,a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(s(a)),a.on(<span class=\"code-string\">\"mediaupdatetimeout\"</span>,a.handleMediaupdatetimeout_),a}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.handleMediaupdatetimeout_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"HAVE_METADATA\"</span>===<span class=\"code-keyword\">this</span>.state){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.media(),i=h(<span class=\"code-keyword\">this</span>.master.uri,t.uri);<span class=\"code-keyword\">this</span>.experimentalLLHLS&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(t.endList||!t.serverControl)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> i={};<span class=\"code-keyword\">if</span>(t.serverControl.canBlockReload){<span class=\"code-keyword\">var</span> n=t.preloadSegment,r=t.mediaSequence+t.segments.length;<span class=\"code-keyword\">if</span>(n){<span class=\"code-keyword\">var</span> a=n.parts||[],s=$(t)<span class=\"code-number\">-1</span>;s&gt;<span class=\"code-number\">-1</span>&amp;&amp;s!==a.length<span class=\"code-number\">-1</span>&amp;&amp;(i._HLS_part=s),(s&gt;<span class=\"code-number\">-1</span>||a.length)&amp;&amp;r--}i._HLS_msn=r}<span class=\"code-keyword\">if</span>(t.serverControl&amp;&amp;t.serverControl.canSkipUntil&amp;&amp;(i._HLS_skip=t.serverControl.canSkipDateranges?<span class=\"code-string\">\"v2\"</span>:<span class=\"code-string\">\"YES\"</span>),<span class=\"code-built_in\">Object</span>.keys(i).length){<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.URL(e);[<span class=\"code-string\">\"_HLS_skip\"</span>,<span class=\"code-string\">\"_HLS_msn\"</span>,<span class=\"code-string\">\"_HLS_part\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.hasOwnProperty(e)&amp;&amp;o.searchParams.set(e,i[e])})),e=o.toString()}<span class=\"code-keyword\">return</span> e}(i,t)),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_CURRENT_METADATA\"</span>,<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:i,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(e.request)<span class=\"code-keyword\">return</span> t?e.playlistRequestError(e.request,e.media(),<span class=\"code-string\">\"HAVE_METADATA\"</span>):<span class=\"code-keyword\">void</span> e.haveMetadata({<span class=\"code-attr\">playlistString</span>:e.request.responseText,<span class=\"code-attr\">url</span>:e.media().uri,<span class=\"code-attr\">id</span>:e.media().id})}))}},i.playlistRequestError=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.uri,r=t.id;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,i&amp;&amp;(<span class=\"code-keyword\">this</span>.state=i),<span class=\"code-keyword\">this</span>.error={<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.master.playlists[r],<span class=\"code-attr\">status</span>:e.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS playlist request error at URL: \"</span>+n+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">responseText</span>:e.responseText,<span class=\"code-attr\">code</span>:e.status&gt;=<span class=\"code-number\">500</span>?<span class=\"code-number\">4</span>:<span class=\"code-number\">2</span>},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)},i.parseManifest_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=e.url;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.onwarn,i=e.oninfo,n=e.manifestString,r=e.customTagParsers,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?[]:r,s=e.customTagMappers,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?[]:s,u=e.experimentalLLHLS,d=<span class=\"code-keyword\">new</span> L;t&amp;&amp;d.on(<span class=\"code-string\">\"warn\"</span>,t),i&amp;&amp;d.on(<span class=\"code-string\">\"info\"</span>,i),a.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> d.addParser(e)})),o.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> d.addTagMapper(e)})),d.push(n),d.end();<span class=\"code-keyword\">var</span> l=d.manifest;<span class=\"code-keyword\">if</span>(u||([<span class=\"code-string\">\"preloadSegment\"</span>,<span class=\"code-string\">\"skip\"</span>,<span class=\"code-string\">\"serverControl\"</span>,<span class=\"code-string\">\"renditionReports\"</span>,<span class=\"code-string\">\"partInf\"</span>,<span class=\"code-string\">\"partTargetDuration\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{l.hasOwnProperty(e)&amp;&amp;<span class=\"code-keyword\">delete</span> l[e]})),l.segments&amp;&amp;l.segments.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{[<span class=\"code-string\">\"parts\"</span>,<span class=\"code-string\">\"preloadHints\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.hasOwnProperty(t)&amp;&amp;<span class=\"code-keyword\">delete</span> e[t]}))}))),!l.targetDuration){<span class=\"code-keyword\">var</span> c=<span class=\"code-number\">10</span>;l.segments&amp;&amp;l.segments.length&amp;&amp;(c=l.segments.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(e,t.duration)}),<span class=\"code-number\">0</span>)),t&amp;&amp;t(<span class=\"code-string\">\"manifest has no targetDuration defaulting to \"</span>+c),l.targetDuration=c}<span class=\"code-keyword\">var</span> h=K(l);<span class=\"code-keyword\">if</span>(h.length&amp;&amp;!l.partTargetDuration){<span class=\"code-keyword\">var</span> f=h.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(e,t.duration)}),<span class=\"code-number\">0</span>);t&amp;&amp;(t(<span class=\"code-string\">\"manifest has no partTargetDuration defaulting to \"</span>+f),he.error(<span class=\"code-string\">\"LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.\"</span>)),l.partTargetDuration=f}<span class=\"code-keyword\">return</span> l}({<span class=\"code-attr\">onwarn</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> n=e.message;<span class=\"code-keyword\">return</span> t.logger_(<span class=\"code-string\">\"m3u8-parser warn for \"</span>+i+<span class=\"code-string\">\": \"</span>+n)},<span class=\"code-attr\">oninfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> n=e.message;<span class=\"code-keyword\">return</span> t.logger_(<span class=\"code-string\">\"m3u8-parser info for \"</span>+i+<span class=\"code-string\">\": \"</span>+n)},<span class=\"code-attr\">manifestString</span>:e.manifestString,<span class=\"code-attr\">customTagParsers</span>:<span class=\"code-keyword\">this</span>.customTagParsers,<span class=\"code-attr\">customTagMappers</span>:<span class=\"code-keyword\">this</span>.customTagMappers,<span class=\"code-attr\">experimentalLLHLS</span>:<span class=\"code-keyword\">this</span>.experimentalLLHLS})},i.haveMetadata=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlistString,i=e.playlistObject,n=e.url,r=e.id;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>;<span class=\"code-keyword\">var</span> a=i||<span class=\"code-keyword\">this</span>.parseManifest_({<span class=\"code-attr\">url</span>:n,<span class=\"code-attr\">manifestString</span>:t});a.lastRequest=<span class=\"code-built_in\">Date</span>.now(),me({<span class=\"code-attr\">playlist</span>:a,<span class=\"code-attr\">uri</span>:n,<span class=\"code-attr\">id</span>:r});<span class=\"code-keyword\">var</span> s=we(<span class=\"code-keyword\">this</span>.master,a);<span class=\"code-keyword\">this</span>.targetDuration=a.partTargetDuration||a.targetDuration,<span class=\"code-keyword\">this</span>.pendingMedia_=<span class=\"code-literal\">null</span>,s?(<span class=\"code-keyword\">this</span>.master=s,<span class=\"code-keyword\">this</span>.media_=<span class=\"code-keyword\">this</span>.master.playlists[r]):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistunchanged\"</span>),<span class=\"code-keyword\">this</span>.updateMediaUpdateTimeout_(Ie(<span class=\"code-keyword\">this</span>.media(),!!s)),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>)},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.stopRequest(),<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.finalRenditionTimeout),<span class=\"code-keyword\">this</span>.off()},i.stopRequest=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.request;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e.onreadystatechange=<span class=\"code-literal\">null</span>,e.abort()}},i.media=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.media_;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot switch media playlist from \"</span>+<span class=\"code-keyword\">this</span>.state);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.master.playlists[e])<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Unknown playlist URI: \"</span>+e);e=<span class=\"code-keyword\">this</span>.master.playlists[e]}<span class=\"code-keyword\">if</span>(<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.finalRenditionTimeout),t){<span class=\"code-keyword\">var</span> n=(e.partTargetDuration||e.targetDuration)/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>||<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.finalRenditionTimeout=<span class=\"code-built_in\">window</span>.setTimeout(<span class=\"code-keyword\">this</span>.media.bind(<span class=\"code-keyword\">this</span>,e,!<span class=\"code-number\">1</span>),n)}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.state,a=!<span class=\"code-keyword\">this</span>.media_||e.id!==<span class=\"code-keyword\">this</span>.media_.id,s=<span class=\"code-keyword\">this</span>.master.playlists[e.id];<span class=\"code-keyword\">if</span>(s&amp;&amp;s.endList||e.endList&amp;&amp;e.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.request&amp;&amp;(<span class=\"code-keyword\">this</span>.request.onreadystatechange=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.request.abort(),<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.media_=e,<span class=\"code-keyword\">void</span>(a&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-string\">\"HAVE_MASTER\"</span>===r?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)));<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.updateMediaUpdateTimeout_(Ie(e,!<span class=\"code-number\">0</span>)),a){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"SWITCHING_MEDIA\"</span>,<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">if</span>(e.resolvedUri===<span class=\"code-keyword\">this</span>.request.url)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">this</span>.request.onreadystatechange=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.request.abort(),<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.pendingMedia_=e,<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:e.resolvedUri,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,n</span>)</span>{<span class=\"code-keyword\">if</span>(i.request){<span class=\"code-keyword\">if</span>(e.lastRequest=<span class=\"code-built_in\">Date</span>.now(),e.resolvedUri=f(i.handleManifestRedirects,e.resolvedUri,n),t)<span class=\"code-keyword\">return</span> i.playlistRequestError(i.request,e,r);i.haveMetadata({<span class=\"code-attr\">playlistString</span>:n.responseText,<span class=\"code-attr\">url</span>:e.uri,<span class=\"code-attr\">id</span>:e.id}),<span class=\"code-string\">\"HAVE_MASTER\"</span>===r?i.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):i.trigger(<span class=\"code-string\">\"mediachange\"</span>)}}))}}},i.pause=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaUpdateTimeout&amp;&amp;(<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.stopRequest(),<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">1</span>),<span class=\"code-string\">\"SWITCHING_MEDIA\"</span>===<span class=\"code-keyword\">this</span>.state?<span class=\"code-keyword\">this</span>.media_?<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>:<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>:<span class=\"code-string\">\"HAVE_CURRENT_METADATA\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>)},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout&amp;&amp;(<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-literal\">null</span>);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.media();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> n=i?(i.partTargetDuration||i.targetDuration)/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>:<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.mediaUpdateTimeout=<span class=\"code-literal\">null</span>,t.load()}),n)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.started?i&amp;&amp;!i.endList?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.start()},i.updateMediaUpdateTimeout_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout&amp;&amp;(<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.media()&amp;&amp;!<span class=\"code-keyword\">this</span>.media().endList&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.mediaUpdateTimeout=<span class=\"code-literal\">null</span>,t.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>),t.updateMediaUpdateTimeout_(e)}),e))},i.start=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.src)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.src.uri||(<span class=\"code-keyword\">this</span>.src.uri=<span class=\"code-built_in\">window</span>.location.href),<span class=\"code-keyword\">this</span>.src.resolvedUri=<span class=\"code-keyword\">this</span>.src.uri,<span class=\"code-keyword\">void</span> setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.setupInitialPlaylist(e.src)}),<span class=\"code-number\">0</span>);<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:<span class=\"code-keyword\">this</span>.src,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(e.request){<span class=\"code-keyword\">if</span>(e.request=<span class=\"code-literal\">null</span>,t)<span class=\"code-keyword\">return</span> e.error={<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS playlist request error at URL: \"</span>+e.src+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">responseText</span>:i.responseText,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},<span class=\"code-string\">\"HAVE_NOTHING\"</span>===e.state&amp;&amp;(e.started=!<span class=\"code-number\">1</span>),e.trigger(<span class=\"code-string\">\"error\"</span>);e.src=f(e.handleManifestRedirects,e.src,i);<span class=\"code-keyword\">var</span> n=e.parseManifest_({<span class=\"code-attr\">manifestString</span>:i.responseText,<span class=\"code-attr\">url</span>:e.src});e.setupInitialPlaylist(n)}}))},i.srcUri=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.src?<span class=\"code-keyword\">this</span>.src:<span class=\"code-keyword\">this</span>.src.uri},i.setupInitialPlaylist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>,e.playlists)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.master=e,ge(<span class=\"code-keyword\">this</span>.master,<span class=\"code-keyword\">this</span>.srcUri()),e.playlists.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.segments=be(e),e.segments.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{Te(t,e.resolvedUri)}))})),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>),<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.request||<span class=\"code-keyword\">this</span>.media(<span class=\"code-keyword\">this</span>.master.playlists[<span class=\"code-number\">0</span>]));<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.srcUri()||<span class=\"code-built_in\">window</span>.location.href;<span class=\"code-keyword\">this</span>.master=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=fe(<span class=\"code-number\">0</span>,t),n={<span class=\"code-attr\">mediaGroups</span>:{<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:{},<span class=\"code-attr\">SUBTITLES</span>:{}},<span class=\"code-attr\">uri</span>:<span class=\"code-built_in\">window</span>.location.href,<span class=\"code-attr\">resolvedUri</span>:<span class=\"code-built_in\">window</span>.location.href,<span class=\"code-attr\">playlists</span>:[{<span class=\"code-attr\">uri</span>:t,<span class=\"code-attr\">id</span>:i,<span class=\"code-attr\">resolvedUri</span>:t,<span class=\"code-attr\">attributes</span>:{}}]};<span class=\"code-keyword\">return</span> n.playlists[i]=n.playlists[<span class=\"code-number\">0</span>],n.playlists[t]=n.playlists[<span class=\"code-number\">0</span>],n}(<span class=\"code-number\">0</span>,t),<span class=\"code-keyword\">this</span>.haveMetadata({<span class=\"code-attr\">playlistObject</span>:e,<span class=\"code-attr\">url</span>:t,<span class=\"code-attr\">id</span>:<span class=\"code-keyword\">this</span>.master.playlists[<span class=\"code-number\">0</span>].id}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>)},t}(ve),Ae=r.default.xhr,Le=r.default.mergeOptions,Pe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-string\">\"arraybuffer\"</span>===e.responseType?e.response:e.responseText;!t&amp;&amp;r&amp;&amp;(e.responseTime=<span class=\"code-built_in\">Date</span>.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=<span class=\"code-built_in\">Math</span>.floor(e.bytesReceived/e.roundTripTime*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>))),i.headers&amp;&amp;(e.responseHeaders=i.headers),t&amp;&amp;<span class=\"code-string\">\"ETIMEDOUT\"</span>===t.code&amp;&amp;(e.timedout=!<span class=\"code-number\">0</span>),t||e.aborted||<span class=\"code-number\">200</span>===i.statusCode||<span class=\"code-number\">206</span>===i.statusCode||<span class=\"code-number\">0</span>===i.statusCode||(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"XHR Failed with a response of: \"</span>+(e&amp;&amp;(r||e.responseText)))),n(t,e)},ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{t=Le({<span class=\"code-attr\">timeout</span>:<span class=\"code-number\">45e3</span>},t);<span class=\"code-keyword\">var</span> n=e.beforeRequest||r.default.Vhs.xhr.beforeRequest;<span class=\"code-keyword\">if</span>(n&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> n){<span class=\"code-keyword\">var</span> a=n(t);a&amp;&amp;(t=a)}<span class=\"code-keyword\">var</span> s=(!<span class=\"code-number\">0</span>===r.default.Vhs.xhr.original?Ae:r.default.Vhs.xhr)(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> Pe(s,e,t,i)})),o=s.abort;<span class=\"code-keyword\">return</span> s.abort=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s.aborted=!<span class=\"code-number\">0</span>,o.apply(s,<span class=\"code-built_in\">arguments</span>)},s.uri=t.uri,s.requestTime=<span class=\"code-built_in\">Date</span>.now(),s};<span class=\"code-keyword\">return</span> e.original=!<span class=\"code-number\">0</span>,e},xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={};<span class=\"code-keyword\">return</span> e.byterange&amp;&amp;(i.Range=<span class=\"code-string\">\"bytes=\"</span>+(t=e.byterange).offset+<span class=\"code-string\">\"-\"</span>+(<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> t.offset||<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> t.length?<span class=\"code-built_in\">window</span>.BigInt(t.offset)+<span class=\"code-built_in\">window</span>.BigInt(t.length)-<span class=\"code-built_in\">window</span>.BigInt(<span class=\"code-number\">1</span>):t.offset+t.length<span class=\"code-number\">-1</span>)),i},Oe=<span class=\"code-regexp\">/^(audio|video|application)\\/(x-|vnd\\.apple\\.)?mpegurl/i</span>,De=<span class=\"code-regexp\">/^application\\/dash\\+xml/i</span>,Ce=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Oe.test(e)?<span class=\"code-string\">\"hls\"</span>:De.test(e)?<span class=\"code-string\">\"dash\"</span>:<span class=\"code-string\">\"application/vnd.videojs.vhs+json\"</span>===e?<span class=\"code-string\">\"vhs-json\"</span>:<span class=\"code-literal\">null</span>},Ue=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.start(t)+<span class=\"code-string\">\"-\"</span>+e.end(t)},Re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.toString(<span class=\"code-number\">16</span>);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"00\"</span>.substring(<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>-i.length)+i+(t%<span class=\"code-number\">2</span>?<span class=\"code-string\">\" \"</span>:<span class=\"code-string\">\"\"</span>)},Me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">32</span>&amp;&amp;e&lt;<span class=\"code-number\">126</span>?<span class=\"code-built_in\">String</span>.fromCharCode(e):<span class=\"code-string\">\".\"</span>},Be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(e).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=e[i];<span class=\"code-built_in\">ArrayBuffer</span>.isView(n)?t[i]={<span class=\"code-attr\">bytes</span>:n.buffer,<span class=\"code-attr\">byteOffset</span>:n.byteOffset,<span class=\"code-attr\">byteLength</span>:n.byteLength}:t[i]=n})),t},Ne=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byterange||{<span class=\"code-attr\">length</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">offset</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">return</span>[t.length,t.offset,e.resolvedUri].join(<span class=\"code-string\">\",\"</span>)},Fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.resolvedUri},qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">Array</span>.prototype.slice.call(e),i=<span class=\"code-number\">16</span>,n=<span class=\"code-string\">\"\"</span>,r=<span class=\"code-number\">0</span>;r&lt;t.length/i;r++)n+=t.slice(r*i,r*i+i).map(Re).join(<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\" \"</span>+t.slice(r*i,r*i+i).map(Me).join(<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\"\\n\"</span>;<span class=\"code-keyword\">return</span> n},He=<span class=\"code-built_in\">Object</span>.freeze({<span class=\"code-attr\">__proto__</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">createTransferableMessage</span>:Be,<span class=\"code-attr\">initSegmentId</span>:Ne,<span class=\"code-attr\">segmentKeyId</span>:Fe,<span class=\"code-attr\">hexDump</span>:qe,<span class=\"code-attr\">tagDump</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.bytes;<span class=\"code-keyword\">return</span> qe(t)},<span class=\"code-attr\">textRanges</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i+=Ue(e,t)+<span class=\"code-string\">\" \"</span>;<span class=\"code-keyword\">return</span> i}}),Ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.programTime,n=t.playlist,r=t.retryCount,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">2</span>:r,s=t.seekTo,o=t.pauseAfterSeek,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o||o,d=t.tech,l=t.callback;<span class=\"code-keyword\">if</span>(!l)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"seekToProgramTime: callback must be provided\"</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i||!n||!s)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"seekToProgramTime: programTime, seekTo and playlist must be provided\"</span>});<span class=\"code-keyword\">if</span>(!n.endList&amp;&amp;!d.hasStarted_)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"player must be playing a live stream to start buffering\"</span>});<span class=\"code-keyword\">if</span>(!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.segments||<span class=\"code-number\">0</span>===e.segments.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;e.segments.length;t++)<span class=\"code-keyword\">if</span>(!e.segments[t].dateTimeObject)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}(n))<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"programDateTime tags must be provided in the manifest \"</span>+n.resolvedUri});<span class=\"code-keyword\">var</span> c=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">try</span>{i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(e)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}<span class=\"code-keyword\">if</span>(!t||!t.segments||<span class=\"code-number\">0</span>===t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n=t.segments[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(i&lt;n.dateTimeObject)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;t.segments.length<span class=\"code-number\">-1</span>&amp;&amp;(n=t.segments[r],!(i&lt;t.segments[r+<span class=\"code-number\">1</span>].dateTimeObject));r++);<span class=\"code-keyword\">var</span> a,s=t.segments[t.segments.length<span class=\"code-number\">-1</span>],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+<span class=\"code-number\">.25</span>*s.duration;<span class=\"code-keyword\">return</span> i&gt;<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(o.getTime()+<span class=\"code-number\">1e3</span>*u)?<span class=\"code-literal\">null</span>:(i&gt;o&amp;&amp;(n=s),{<span class=\"code-attr\">segment</span>:n,<span class=\"code-attr\">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:ce.duration(t,t.mediaSequence+t.segments.indexOf(n)),<span class=\"code-attr\">type</span>:n.videoTimingInfo?<span class=\"code-string\">\"accurate\"</span>:<span class=\"code-string\">\"estimate\"</span>})}(i,n);<span class=\"code-keyword\">if</span>(!c)<span class=\"code-keyword\">return</span> l({<span class=\"code-attr\">message</span>:i+<span class=\"code-string\">\" was not found in the stream\"</span>});<span class=\"code-keyword\">var</span> h=c.segment,f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;<span class=\"code-keyword\">try</span>{i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(e),n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t)}<span class=\"code-keyword\">catch</span>(e){}<span class=\"code-keyword\">var</span> r=i.getTime();<span class=\"code-keyword\">return</span>(n.getTime()-r)/<span class=\"code-number\">1e3</span>}(h.dateTimeObject,i);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"estimate\"</span>===c.type)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===a?l({<span class=\"code-attr\">message</span>:i+<span class=\"code-string\">\" is not buffered yet. Try again\"</span>}):(s(c.estimatedStart+f),<span class=\"code-keyword\">void</span> d.one(<span class=\"code-string\">\"seeked\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e({<span class=\"code-attr\">programTime</span>:i,<span class=\"code-attr\">playlist</span>:n,<span class=\"code-attr\">retryCount</span>:a<span class=\"code-number\">-1</span>,<span class=\"code-attr\">seekTo</span>:s,<span class=\"code-attr\">pauseAfterSeek</span>:u,<span class=\"code-attr\">tech</span>:d,<span class=\"code-attr\">callback</span>:l})})));<span class=\"code-keyword\">var</span> p=h.start+f;d.one(<span class=\"code-string\">\"seeked\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> l(<span class=\"code-literal\">null</span>,d.currentTime())})),u&amp;&amp;d.pause(),s(p)},We=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!e&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> e},Ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">arguments</span>.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(t),n=<span class=\"code-number\">0</span>;n&lt;t;n++)i[n]=<span class=\"code-built_in\">arguments</span>[n];<span class=\"code-keyword\">return</span> i.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> i||<span class=\"code-built_in\">Object</span>.keys(i).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-built_in\">Array</span>.isArray(t[n])&amp;&amp;<span class=\"code-built_in\">Array</span>.isArray(i[n])?t[n]=t[n].concat(i[n]):We(t[n])&amp;&amp;We(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]})),t}),{})},je=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.concat(t)}),[])},Xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.length)<span class=\"code-keyword\">return</span>[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t.push(e[i]);<span class=\"code-keyword\">return</span> t},ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.baseUrl,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?<span class=\"code-string\">\"\"</span>:t,n=e.source,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-string\">\"\"</span>:n,a=e.range,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-string\">\"\"</span>:a,o=e.indexRange,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-string\">\"\"</span>:o,d={<span class=\"code-attr\">uri</span>:r,<span class=\"code-attr\">resolvedUri</span>:c(i||<span class=\"code-string\">\"\"</span>,r)};<span class=\"code-keyword\">if</span>(s||u){<span class=\"code-keyword\">var</span> l,h=(s||u).split(<span class=\"code-string\">\"-\"</span>),f=<span class=\"code-built_in\">window</span>.BigInt?<span class=\"code-built_in\">window</span>.BigInt(h[<span class=\"code-number\">0</span>]):<span class=\"code-built_in\">parseInt</span>(h[<span class=\"code-number\">0</span>],<span class=\"code-number\">10</span>),p=<span class=\"code-built_in\">window</span>.BigInt?<span class=\"code-built_in\">window</span>.BigInt(h[<span class=\"code-number\">1</span>]):<span class=\"code-built_in\">parseInt</span>(h[<span class=\"code-number\">1</span>],<span class=\"code-number\">10</span>);f&lt;<span class=\"code-built_in\">Number</span>.MAX_SAFE_INTEGER&amp;&amp;<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> f&amp;&amp;(f=<span class=\"code-built_in\">Number</span>(f)),p&lt;<span class=\"code-built_in\">Number</span>.MAX_SAFE_INTEGER&amp;&amp;<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> p&amp;&amp;(p=<span class=\"code-built_in\">Number</span>(p)),<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span>(l=<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> p||<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> f?<span class=\"code-built_in\">window</span>.BigInt(p)-<span class=\"code-built_in\">window</span>.BigInt(f)+<span class=\"code-built_in\">window</span>.BigInt(<span class=\"code-number\">1</span>):p-f+<span class=\"code-number\">1</span>)&amp;&amp;l&lt;<span class=\"code-built_in\">Number</span>.MAX_SAFE_INTEGER&amp;&amp;(l=<span class=\"code-built_in\">Number</span>(l)),d.byterange={<span class=\"code-attr\">length</span>:l,<span class=\"code-attr\">offset</span>:f}}<span class=\"code-keyword\">return</span> d},Qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e&amp;&amp;(e=<span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)),<span class=\"code-built_in\">isNaN</span>(e)?<span class=\"code-literal\">null</span>:e},Ye={<span class=\"code-attr\">static</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.duration,i=e.timescale,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-number\">1</span>:i,r=e.sourceDuration,a=e.periodDuration,s=Qe(e.endNumber),o=t/n;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> s?{<span class=\"code-attr\">start</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">end</span>:s}:<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> a?{<span class=\"code-attr\">start</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">end</span>:a/o}:{<span class=\"code-attr\">start</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">end</span>:r/o}},<span class=\"code-attr\">dynamic</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.duration,o=e.start,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">0</span>:o,d=e.minimumUpdatePeriod,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">0</span>:d,c=e.timeShiftBufferDepth,h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===c?<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>:c,f=Qe(e.endNumber),p=(t+i)/<span class=\"code-number\">1e3</span>,m=n+u,g=p+l-m,y=<span class=\"code-built_in\">Math</span>.ceil(g*a/s),v=<span class=\"code-built_in\">Math</span>.floor((p-m-h)*a/s),_=<span class=\"code-built_in\">Math</span>.floor((p-m)*a/s);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,v),<span class=\"code-attr\">end</span>:<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> f?f:<span class=\"code-built_in\">Math</span>.min(y,_)}}},Ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.duration,n=e.timescale,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-number\">1</span>:n,a=e.periodDuration,s=e.sourceDuration,o=Ye[t](e),u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=[],n=e;n&lt;t;n++)i.push(n);<span class=\"code-keyword\">return</span> i}(o.start,o.end).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.duration,r=e.timescale,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">1</span>:r,s=e.periodIndex,o=e.startNumber;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">number</span>:(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">1</span>:o)+t,<span class=\"code-attr\">duration</span>:n/a,<span class=\"code-attr\">timeline</span>:s,<span class=\"code-attr\">time</span>:i*n}}}(e));<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"static\"</span>===t){<span class=\"code-keyword\">var</span> d=u.length<span class=\"code-number\">-1</span>,l=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> a?a:s;u[d].duration=l-i/r*d}<span class=\"code-keyword\">return</span> u},$e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.baseUrl,i=e.initialization,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?{}:i,r=e.sourceDuration,a=e.indexRange,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-string\">\"\"</span>:a,o=e.duration;<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"NO_BASE_URL\"</span>);<span class=\"code-keyword\">var</span> u=ze({<span class=\"code-attr\">baseUrl</span>:t,<span class=\"code-attr\">source</span>:n.sourceURL,<span class=\"code-attr\">range</span>:n.range}),d=ze({<span class=\"code-attr\">baseUrl</span>:t,<span class=\"code-attr\">source</span>:t,<span class=\"code-attr\">indexRange</span>:s});<span class=\"code-keyword\">if</span>(d.map=u,o){<span class=\"code-keyword\">var</span> l=Ke(e);l.length&amp;&amp;(d.duration=l[<span class=\"code-number\">0</span>].duration,d.timeline=l[<span class=\"code-number\">0</span>].timeline)}<span class=\"code-keyword\">else</span> r&amp;&amp;(d.duration=r,d.timeline=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> d.number=<span class=\"code-number\">0</span>,[d]},Je=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=e.sidx.map?e.sidx.map:<span class=\"code-literal\">null</span>,a=e.sidx.duration,s=e.timeline||<span class=\"code-number\">0</span>,o=e.sidx.byterange,u=o.offset+o.length,d=t.timescale,l=t.references.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>!==e.referenceType})),c=[],h=e.endList?<span class=\"code-string\">\"static\"</span>:<span class=\"code-string\">\"dynamic\"</span>;n=<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> t.firstOffset?<span class=\"code-built_in\">window</span>.BigInt(u)+t.firstOffset:u+t.firstOffset;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> f=<span class=\"code-number\">0</span>;f&lt;l.length;f++){<span class=\"code-keyword\">var</span> p,m=t.references[f],g=m.referencedSize,y=m.subsegmentDuration;p=<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> n?n+<span class=\"code-built_in\">window</span>.BigInt(g)-<span class=\"code-built_in\">window</span>.BigInt(<span class=\"code-number\">1</span>):n+g<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">var</span> v=$e({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">timescale</span>:d,<span class=\"code-attr\">timeline</span>:s,<span class=\"code-attr\">periodIndex</span>:s,<span class=\"code-attr\">duration</span>:y,<span class=\"code-attr\">sourceDuration</span>:a,<span class=\"code-attr\">indexRange</span>:n+<span class=\"code-string\">\"-\"</span>+p,<span class=\"code-attr\">type</span>:h})[<span class=\"code-number\">0</span>];r&amp;&amp;(v.map=r),c.push(v),n+=<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> n?<span class=\"code-built_in\">window</span>.BigInt(g):g}<span class=\"code-keyword\">return</span> e.segments=c,e},Ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;e.uri+<span class=\"code-string\">\"-\"</span>+(i=<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span>(t=e.byterange).offset||<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> t.length?<span class=\"code-built_in\">window</span>.BigInt(t.offset)+<span class=\"code-built_in\">window</span>.BigInt(t.length)-<span class=\"code-built_in\">window</span>.BigInt(<span class=\"code-number\">1</span>):t.offset+t.length<span class=\"code-number\">-1</span>,t.offset+<span class=\"code-string\">\"-\"</span>+i);<span class=\"code-keyword\">var</span> t,i},et=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=t.attributes.id+(t.attributes.lang||<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">return</span> e[n]?(t.segments[<span class=\"code-number\">0</span>]&amp;&amp;(t.segments[<span class=\"code-number\">0</span>].discontinuity=!<span class=\"code-number\">0</span>),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&amp;&amp;(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e}),{}),<span class=\"code-built_in\">Object</span>.keys(t).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e]}))).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span> e.discontinuityStarts=(t=e.segments,<span class=\"code-string\">\"discontinuity\"</span>,t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.discontinuity&amp;&amp;e.push(i),e}),[])),e}))},tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Ze(e.sidx),n=i&amp;&amp;t[i]&amp;&amp;t[i].sidx;<span class=\"code-keyword\">return</span> n&amp;&amp;Je(e,n,e.sidx.resolvedUri),e},it=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),!<span class=\"code-built_in\">Object</span>.keys(t).length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i <span class=\"code-keyword\">in</span> e)e[i]=tt(e[i],t);<span class=\"code-keyword\">return</span> e},nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class=\"code-attr\">attributes</span>:(t={<span class=\"code-attr\">NAME</span>:i.id,<span class=\"code-attr\">AUDIO</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-string\">\"subs\"</span>,<span class=\"code-attr\">RESOLUTION</span>:{<span class=\"code-attr\">width</span>:i.width,<span class=\"code-attr\">height</span>:i.height},<span class=\"code-attr\">CODECS</span>:i.codecs,<span class=\"code-attr\">BANDWIDTH</span>:i.bandwidth},t[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,t),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===i.type,<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:i.duration,<span class=\"code-attr\">segments</span>:n,<span class=\"code-attr\">mediaSequence</span>:n.length?n[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>};<span class=\"code-keyword\">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video/mp4\"</span>===t.mimeType||<span class=\"code-string\">\"video/webm\"</span>===t.mimeType||<span class=\"code-string\">\"video\"</span>===t.contentType},at=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio/mp4\"</span>===t.mimeType||<span class=\"code-string\">\"audio/webm\"</span>===t.mimeType||<span class=\"code-string\">\"audio\"</span>===t.contentType},st=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"text/vtt\"</span>===t.mimeType||<span class=\"code-string\">\"text\"</span>===t.contentType},ot=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?<span class=\"code-number\">1</span>:s,u=e.start,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===u?<span class=\"code-number\">0</span>:u,l=e.minimumUpdatePeriod,c=(n+r)/<span class=\"code-number\">1e3</span>+(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===l?<span class=\"code-number\">0</span>:l)-(a+d);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.ceil((c*o-t)/i)},ut=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.type,n=e.minimumUpdatePeriod,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-number\">0</span>:n,a=e.media,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-string\">\"\"</span>:a,o=e.sourceDuration,u=e.timescale,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===u?<span class=\"code-number\">1</span>:u,l=e.startNumber,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===l?<span class=\"code-number\">1</span>:l,h=e.periodIndex,f=[],p=<span class=\"code-number\">-1</span>,m=<span class=\"code-number\">0</span>;m&lt;t.length;m++){<span class=\"code-keyword\">var</span> g=t[m],y=g.d,v=g.r||<span class=\"code-number\">0</span>,_=g.t||<span class=\"code-number\">0</span>;p&lt;<span class=\"code-number\">0</span>&amp;&amp;(p=_),_&amp;&amp;_&gt;p&amp;&amp;(p=_);<span class=\"code-keyword\">var</span> T=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(v&lt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">var</span> b=m+<span class=\"code-number\">1</span>;T=b===t.length?<span class=\"code-string\">\"dynamic\"</span>===i&amp;&amp;r&gt;<span class=\"code-number\">0</span>&amp;&amp;s.indexOf(<span class=\"code-string\">\"$Number$\"</span>)&gt;<span class=\"code-number\">0</span>?ot(e,p,y):(o*d-p)/y:(t[b].t-p)/y}<span class=\"code-keyword\">else</span> T=v+<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> S=c+f.length+T,w=c+f.length;w&lt;S;)f.push({<span class=\"code-attr\">number</span>:w,<span class=\"code-attr\">duration</span>:y/d,<span class=\"code-attr\">time</span>:p,<span class=\"code-attr\">timeline</span>:h}),p+=y,w++}<span class=\"code-keyword\">return</span> f},dt=<span class=\"code-regexp\">/\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g</span>,lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.replace(dt,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"$$\"</span>===t)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"$\"</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e[i])<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">var</span> a=<span class=\"code-string\">\"\"</span>+e[i];<span class=\"code-keyword\">return</span><span class=\"code-string\">\"RepresentationID\"</span>===i?a:(r=n?<span class=\"code-built_in\">parseInt</span>(r,<span class=\"code-number\">10</span>):<span class=\"code-number\">1</span>,a.length&gt;=r?a:<span class=\"code-string\">\"\"</span>+<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(r-a.length+<span class=\"code-number\">1</span>).join(<span class=\"code-string\">\"0\"</span>)+a)}}(t))},ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">RepresentationID</span>:e.id,<span class=\"code-attr\">Bandwidth</span>:e.bandwidth||<span class=\"code-number\">0</span>},n=e.initialization,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?{<span class=\"code-attr\">sourceURL</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">range</span>:<span class=\"code-string\">\"\"</span>}:n,a=ze({<span class=\"code-attr\">baseUrl</span>:e.baseUrl,<span class=\"code-attr\">source</span>:lt(r.sourceURL,i),<span class=\"code-attr\">range</span>:r.range}),s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.duration||t?e.duration?Ke(e):ut(e,t):[{<span class=\"code-attr\">number</span>:e.startNumber||<span class=\"code-number\">1</span>,<span class=\"code-attr\">duration</span>:e.sourceDuration,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">timeline</span>:e.periodIndex}]}(e,t);<span class=\"code-keyword\">return</span> s.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{i.Number=t.number,i.Time=t.time;<span class=\"code-keyword\">var</span> n=lt(e.media||<span class=\"code-string\">\"\"</span>,i),r=e.timescale||<span class=\"code-number\">1</span>,s=e.presentationTimeOffset||<span class=\"code-number\">0</span>,o=e.periodStart+(t.time-s)/r;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">uri</span>:n,<span class=\"code-attr\">timeline</span>:t.timeline,<span class=\"code-attr\">duration</span>:t.duration,<span class=\"code-attr\">resolvedUri</span>:c(e.baseUrl||<span class=\"code-string\">\"\"</span>,n),<span class=\"code-attr\">map</span>:a,<span class=\"code-attr\">number</span>:t.number,<span class=\"code-attr\">presentationTime</span>:o}}))},ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.duration,n=e.segmentUrls,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?[]:n,a=e.periodStart;<span class=\"code-keyword\">if</span>(!i&amp;&amp;!t||i&amp;&amp;t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"SEGMENT_TIME_UNSPECIFIED\"</span>);<span class=\"code-keyword\">var</span> s,o=r.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.baseUrl,n=e.initialization,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?{}:n,a=ze({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">source</span>:r.sourceURL,<span class=\"code-attr\">range</span>:r.range}),s=ze({<span class=\"code-attr\">baseUrl</span>:i,<span class=\"code-attr\">source</span>:t.media,<span class=\"code-attr\">range</span>:t.mediaRange});<span class=\"code-keyword\">return</span> s.map=a,s}(e,t)}));<span class=\"code-keyword\">return</span> i&amp;&amp;(s=Ke(e)),t&amp;&amp;(s=ut(e,t)),s.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(o[i]){<span class=\"code-keyword\">var</span> n=o[i],r=e.timescale||<span class=\"code-number\">1</span>,s=e.presentationTimeOffset||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n.presentationTime=a+(t.time-s)/r,n}})).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}))},ft=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=ct,t=Ve(n,r.template)):r.base?(i=$e,t=Ve(n,r.base)):r.list&amp;&amp;(i=ht,t=Ve(n,r.list));<span class=\"code-keyword\">var</span> a={<span class=\"code-attr\">attributes</span>:n};<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> a;<span class=\"code-keyword\">var</span> s=i(t,r.segmentTimeline);<span class=\"code-keyword\">if</span>(t.duration){<span class=\"code-keyword\">var</span> o=t,u=o.duration,d=o.timescale,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===d?<span class=\"code-number\">1</span>:d;t.duration=u/l}<span class=\"code-keyword\">else</span> s.length?t.duration=s.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(e,<span class=\"code-built_in\">Math</span>.ceil(t.duration))}),<span class=\"code-number\">0</span>):t.duration=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> a.attributes=t,a.segments=s,r.base&amp;&amp;t.indexRange&amp;&amp;(a.sidx=s[<span class=\"code-number\">0</span>],a.segments=[]),a},pt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> Xe(e.childNodes).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.tagName===t}))},mt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.textContent.trim()},gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-regexp\">/P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/</span>.exec(e);<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.slice(<span class=\"code-number\">1</span>),n=i[<span class=\"code-number\">0</span>],r=i[<span class=\"code-number\">1</span>],a=i[<span class=\"code-number\">2</span>],s=i[<span class=\"code-number\">3</span>],o=i[<span class=\"code-number\">4</span>],u=i[<span class=\"code-number\">5</span>];<span class=\"code-keyword\">return</span> <span class=\"code-number\">31536e3</span>*<span class=\"code-built_in\">parseFloat</span>(n||<span class=\"code-number\">0</span>)+<span class=\"code-number\">2592e3</span>*<span class=\"code-built_in\">parseFloat</span>(r||<span class=\"code-number\">0</span>)+<span class=\"code-number\">86400</span>*<span class=\"code-built_in\">parseFloat</span>(a||<span class=\"code-number\">0</span>)+<span class=\"code-number\">3600</span>*<span class=\"code-built_in\">parseFloat</span>(s||<span class=\"code-number\">0</span>)+<span class=\"code-number\">60</span>*<span class=\"code-built_in\">parseFloat</span>(o||<span class=\"code-number\">0</span>)+<span class=\"code-built_in\">parseFloat</span>(u||<span class=\"code-number\">0</span>)},yt={<span class=\"code-attr\">mediaPresentationDuration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> gt(e)},<span class=\"code-attr\">availabilityStartTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/</span>.test(t=e)&amp;&amp;(t+=<span class=\"code-string\">\"Z\"</span>),<span class=\"code-built_in\">Date</span>.parse(t)/<span class=\"code-number\">1e3</span>;<span class=\"code-keyword\">var</span> t},<span class=\"code-attr\">minimumUpdatePeriod</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> gt(e)},<span class=\"code-attr\">suggestedPresentationDelay</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> gt(e)},<span class=\"code-attr\">type</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e},<span class=\"code-attr\">timeShiftBufferDepth</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> gt(e)},<span class=\"code-attr\">start</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> gt(e)},<span class=\"code-attr\">width</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">height</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">bandwidth</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">startNumber</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">timescale</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">presentationTimeOffset</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">duration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">isNaN</span>(t)?gt(e):t},<span class=\"code-attr\">d</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">t</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">r</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">parseInt</span>(e,<span class=\"code-number\">10</span>)},<span class=\"code-attr\">DEFAULT</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e}},vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;e.attributes?Xe(e.attributes).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=yt[t.name]||yt.DEFAULT;<span class=\"code-keyword\">return</span> e[t.name]=i(t.value),e}),{}):{}},_t={<span class=\"code-string\">\"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b\"</span>:<span class=\"code-string\">\"org.w3.clearkey\"</span>,<span class=\"code-string\">\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"</span>:<span class=\"code-string\">\"com.widevine.alpha\"</span>,<span class=\"code-string\">\"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95\"</span>:<span class=\"code-string\">\"com.microsoft.playready\"</span>,<span class=\"code-string\">\"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb\"</span>:<span class=\"code-string\">\"com.adobe.primetime\"</span>},Tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.length?je(e.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> c(e,mt(t))}))}))):e},bt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=pt(e,<span class=\"code-string\">\"SegmentTemplate\"</span>)[<span class=\"code-number\">0</span>],i=pt(e,<span class=\"code-string\">\"SegmentList\"</span>)[<span class=\"code-number\">0</span>],n=i&amp;&amp;pt(i,<span class=\"code-string\">\"SegmentURL\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Ve({<span class=\"code-attr\">tag</span>:<span class=\"code-string\">\"SegmentURL\"</span>},vt(e))})),r=pt(e,<span class=\"code-string\">\"SegmentBase\"</span>)[<span class=\"code-number\">0</span>],a=i||t,s=a&amp;&amp;pt(a,<span class=\"code-string\">\"SegmentTimeline\"</span>)[<span class=\"code-number\">0</span>],o=i||r||t,u=o&amp;&amp;pt(o,<span class=\"code-string\">\"Initialization\"</span>)[<span class=\"code-number\">0</span>],d=t&amp;&amp;vt(t);d&amp;&amp;u?d.initialization=u&amp;&amp;vt(u):d&amp;&amp;d.initialization&amp;&amp;(d.initialization={<span class=\"code-attr\">sourceURL</span>:d.initialization});<span class=\"code-keyword\">var</span> l={<span class=\"code-attr\">template</span>:d,<span class=\"code-attr\">segmentTimeline</span>:s&amp;&amp;pt(s,<span class=\"code-string\">\"S\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> vt(e)})),<span class=\"code-attr\">list</span>:i&amp;&amp;Ve(vt(i),{<span class=\"code-attr\">segmentUrls</span>:n,<span class=\"code-attr\">initialization</span>:vt(u)}),<span class=\"code-attr\">base</span>:r&amp;&amp;Ve(vt(r),{<span class=\"code-attr\">initialization</span>:vt(u)})};<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(l).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{l[e]||<span class=\"code-keyword\">delete</span> l[e]})),l},St=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=Tt(t,pt(i.node,<span class=\"code-string\">\"BaseURL\"</span>)),a=<span class=\"code-built_in\">parseInt</span>(i.attributes.id,<span class=\"code-number\">10</span>),s=<span class=\"code-built_in\">window</span>.isNaN(a)?n:a,o=Ve(e,{<span class=\"code-attr\">periodIndex</span>:s,<span class=\"code-attr\">periodStart</span>:i.attributes.start});<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.attributes.duration&amp;&amp;(o.periodDuration=i.attributes.duration);<span class=\"code-keyword\">var</span> u=pt(i.node,<span class=\"code-string\">\"AdaptationSet\"</span>),d=bt(i.node);<span class=\"code-keyword\">return</span> je(u.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r,a=vt(n),s=Tt(t,pt(n,<span class=\"code-string\">\"BaseURL\"</span>)),o=pt(n,<span class=\"code-string\">\"Role\"</span>)[<span class=\"code-number\">0</span>],u={<span class=\"code-attr\">role</span>:vt(o)},d=Ve(e,a,u),l=pt(n,<span class=\"code-string\">\"Accessibility\"</span>)[<span class=\"code-number\">0</span>],c=<span class=\"code-string\">\"urn:scte:dash:cc:cea-608:2015\"</span>===(r=vt(l)).schemeIdUri?(<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> r.value?[]:r.value.split(<span class=\"code-string\">\";\"</span>)).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">if</span>(i=e,/^CC\\d=<span class=\"code-regexp\">/.test(e)){var n=e.split(\"=\");t=n[0],i=n[1]}else/</span>^CC\\d$/.test(e)&amp;&amp;(t=e);<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">channel</span>:t,<span class=\"code-attr\">language</span>:i}})):<span class=\"code-string\">\"urn:scte:dash:cc:cea-708:2015\"</span>===r.schemeIdUri?(<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> r.value?[]:r.value.split(<span class=\"code-string\">\";\"</span>)).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">channel</span>:<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-attr\">language</span>:<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-attr\">aspectRatio</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">easyReader</span>:<span class=\"code-number\">0</span>,<span class=\"code-string\">\"3D\"</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">if</span>(<span class=\"code-regexp\">/=/</span>.test(e)){<span class=\"code-keyword\">var</span> i=e.split(<span class=\"code-string\">\"=\"</span>),n=i[<span class=\"code-number\">0</span>],r=i[<span class=\"code-number\">1</span>],a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-string\">\"\"</span>:r;t.channel=n,t.language=e,a.split(<span class=\"code-string\">\",\"</span>).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.split(<span class=\"code-string\">\":\"</span>),n=i[<span class=\"code-number\">0</span>],r=i[<span class=\"code-number\">1</span>];<span class=\"code-string\">\"lang\"</span>===n?t.language=r:<span class=\"code-string\">\"er\"</span>===n?t.easyReader=<span class=\"code-built_in\">Number</span>(r):<span class=\"code-string\">\"war\"</span>===n?t.aspectRatio=<span class=\"code-built_in\">Number</span>(r):<span class=\"code-string\">\"3D\"</span>===n&amp;&amp;(t[<span class=\"code-string\">\"3D\"</span>]=<span class=\"code-built_in\">Number</span>(r))}))}<span class=\"code-keyword\">else</span> t.language=e;<span class=\"code-keyword\">return</span> t.channel&amp;&amp;(t.channel=<span class=\"code-string\">\"SERVICE\"</span>+t.channel),t})):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;c&amp;&amp;(d=Ve(d,{<span class=\"code-attr\">captionServices</span>:c}));<span class=\"code-keyword\">var</span> h=pt(n,<span class=\"code-string\">\"Label\"</span>)[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(h&amp;&amp;h.childNodes.length){<span class=\"code-keyword\">var</span> f=h.childNodes[<span class=\"code-number\">0</span>].nodeValue.trim();d=Ve(d,{<span class=\"code-attr\">label</span>:f})}<span class=\"code-keyword\">var</span> p=pt(n,<span class=\"code-string\">\"ContentProtection\"</span>).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=vt(t),n=_t[i.schemeIdUri];<span class=\"code-keyword\">if</span>(n){e[n]={<span class=\"code-attr\">attributes</span>:i};<span class=\"code-keyword\">var</span> r=pt(t,<span class=\"code-string\">\"cenc:pssh\"</span>)[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> a=mt(r),s=a&amp;&amp;y(a);e[n].pssh=s}}<span class=\"code-keyword\">return</span> e}),{});<span class=\"code-built_in\">Object</span>.keys(p).length&amp;&amp;(d=Ve(d,{<span class=\"code-attr\">contentProtection</span>:p}));<span class=\"code-keyword\">var</span> m=bt(n),g=pt(n,<span class=\"code-string\">\"Representation\"</span>),v=Ve(i,m);<span class=\"code-keyword\">return</span> je(g.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=pt(n,<span class=\"code-string\">\"BaseURL\"</span>),a=Tt(t,r),s=Ve(e,vt(n)),o=bt(n);<span class=\"code-keyword\">return</span> a.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">segmentInfo</span>:Ve(i,o),<span class=\"code-attr\">attributes</span>:Ve(s,{<span class=\"code-attr\">baseUrl</span>:e})}}))}}(d,s,v)))}}(o,r,d)))}},wt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"\"</span>===e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"DASH_EMPTY_MANIFEST\"</span>);<span class=\"code-keyword\">var</span> t,n,r=<span class=\"code-keyword\">new</span> i.DOMParser;<span class=\"code-keyword\">try</span>{n=(t=r.parseFromString(e,<span class=\"code-string\">\"application/xml\"</span>))&amp;&amp;<span class=\"code-string\">\"MPD\"</span>===t.documentElement.tagName?t.documentElement:<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">catch</span>(e){}<span class=\"code-keyword\">if</span>(!n||n&amp;&amp;n.getElementsByTagName(<span class=\"code-string\">\"parsererror\"</span>).length&gt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"DASH_INVALID_XML\"</span>);<span class=\"code-keyword\">return</span> n},It=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=t,n=i.manifestUri,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?<span class=\"code-string\">\"\"</span>:n,a=i.NOW,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?<span class=\"code-built_in\">Date</span>.now():a,o=i.clientOffset,u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?<span class=\"code-number\">0</span>:o,d=pt(e,<span class=\"code-string\">\"Period\"</span>);<span class=\"code-keyword\">if</span>(!d.length)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"INVALID_NUMBER_OF_PERIOD\"</span>);<span class=\"code-keyword\">var</span> l=pt(e,<span class=\"code-string\">\"Location\"</span>),c=vt(e),h=Tt([r],pt(e,<span class=\"code-string\">\"BaseURL\"</span>));c.type=c.type||<span class=\"code-string\">\"static\"</span>,c.sourceDuration=c.mediaPresentationDuration||<span class=\"code-number\">0</span>,c.NOW=s,c.clientOffset=u,l.length&amp;&amp;(c.locations=l.map(mt));<span class=\"code-keyword\">var</span> f=[];<span class=\"code-keyword\">return</span> d.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=vt(e),n=f[t<span class=\"code-number\">-1</span>];i.start=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes,i=e.priorPeriodAttributes,n=e.mpdType;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.start?t.start:i&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.start&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.duration?i.start+i.duration:i||<span class=\"code-string\">\"static\"</span>!==n?<span class=\"code-literal\">null</span>:<span class=\"code-number\">0</span>}({<span class=\"code-attr\">attributes</span>:i,<span class=\"code-attr\">priorPeriodAttributes</span>:n?n.attributes:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">mpdType</span>:c.type}),f.push({<span class=\"code-attr\">node</span>:e,<span class=\"code-attr\">attributes</span>:i})})),{<span class=\"code-attr\">locations</span>:c.locations,<span class=\"code-attr\">representationInfo</span>:je(f.map(St(c,h)))}}(wt(e),t);<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i={}),!e.length)<span class=\"code-keyword\">return</span>{};<span class=\"code-keyword\">var</span> r=e[<span class=\"code-number\">0</span>].attributes,a=r.sourceDuration,s=r.type,o=r.suggestedPresentationDelay,u=r.minimumUpdatePeriod,d=et(e.filter(rt)).map(nt),l=et(e.filter(at)),c=e.filter(st),h=e.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.attributes.captionServices})).filter(<span class=\"code-built_in\">Boolean</span>),f={<span class=\"code-attr\">allowCache</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">discontinuityStarts</span>:[],<span class=\"code-attr\">segments</span>:[],<span class=\"code-attr\">endList</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">mediaGroups</span>:(n={<span class=\"code-attr\">AUDIO</span>:{},<span class=\"code-attr\">VIDEO</span>:{}},n[<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>]={},n.SUBTITLES={},n),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">duration</span>:a,<span class=\"code-attr\">playlists</span>:it(d,i)};u&gt;=<span class=\"code-number\">0</span>&amp;&amp;(f.minimumUpdatePeriod=<span class=\"code-number\">1e3</span>*u),t&amp;&amp;(f.locations=t),<span class=\"code-string\">\"dynamic\"</span>===s&amp;&amp;(f.suggestedPresentationDelay=o);<span class=\"code-keyword\">var</span> p=<span class=\"code-number\">0</span>===f.playlists.length;<span class=\"code-keyword\">return</span> l.length&amp;&amp;(f.mediaGroups.AUDIO.audio=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=!<span class=\"code-number\">1</span>);<span class=\"code-keyword\">var</span> r=e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,r</span>)</span>{<span class=\"code-keyword\">var</span> a=r.attributes.role&amp;&amp;r.attributes.role.value||<span class=\"code-string\">\"\"</span>,s=r.attributes.lang||<span class=\"code-string\">\"\"</span>,o=r.attributes.label||<span class=\"code-string\">\"main\"</span>;<span class=\"code-keyword\">if</span>(s&amp;&amp;!r.attributes.label){<span class=\"code-keyword\">var</span> u=a?<span class=\"code-string\">\" (\"</span>+a+<span class=\"code-string\">\")\"</span>:<span class=\"code-string\">\"\"</span>;o=<span class=\"code-string\">\"\"</span>+r.attributes.lang+u}e[o]||(e[o]={<span class=\"code-attr\">language</span>:s,<span class=\"code-attr\">autoselect</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">default</span>:<span class=\"code-string\">\"main\"</span>===a,<span class=\"code-attr\">playlists</span>:[],<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>});<span class=\"code-keyword\">var</span> d=tt(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=e.attributes,r=e.segments,a=e.sidx,s={<span class=\"code-attr\">attributes</span>:(i={<span class=\"code-attr\">NAME</span>:n.id,<span class=\"code-attr\">BANDWIDTH</span>:n.bandwidth,<span class=\"code-attr\">CODECS</span>:n.codecs},i[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,i),<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===n.type,<span class=\"code-attr\">timeline</span>:n.periodIndex,<span class=\"code-attr\">resolvedUri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:n.duration,<span class=\"code-attr\">segments</span>:r,<span class=\"code-attr\">mediaSequence</span>:r.length?r[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>};<span class=\"code-keyword\">return</span> n.contentProtection&amp;&amp;(s.contentProtection=n.contentProtection),a&amp;&amp;(s.sidx=a),t&amp;&amp;(s.attributes.AUDIO=<span class=\"code-string\">\"audio\"</span>,s.attributes.SUBTITLES=<span class=\"code-string\">\"subs\"</span>),s}(r,i),t);<span class=\"code-keyword\">return</span> e[o].playlists.push(d),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;<span class=\"code-string\">\"main\"</span>===a&amp;&amp;((n=r).default=!<span class=\"code-number\">0</span>),e}),{});<span class=\"code-keyword\">return</span> n||(r[<span class=\"code-built_in\">Object</span>.keys(r)[<span class=\"code-number\">0</span>]].default=!<span class=\"code-number\">0</span>),r}(l,i,p)),c.length&amp;&amp;(f.mediaGroups.SUBTITLES.subs=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.attributes.lang||<span class=\"code-string\">\"text\"</span>;<span class=\"code-keyword\">return</span> e[n]||(e[n]={<span class=\"code-attr\">language</span>:n,<span class=\"code-attr\">default</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">autoselect</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">playlists</span>:[],<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>}),e[n].playlists.push(tt(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=e.attributes,n=e.segments;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=[{<span class=\"code-attr\">uri</span>:i.baseUrl,<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:i.baseUrl||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">duration</span>:i.sourceDuration,<span class=\"code-attr\">number</span>:<span class=\"code-number\">0</span>}],i.duration=i.sourceDuration);<span class=\"code-keyword\">var</span> r=((t={<span class=\"code-attr\">NAME</span>:i.id,<span class=\"code-attr\">BANDWIDTH</span>:i.bandwidth})[<span class=\"code-string\">\"PROGRAM-ID\"</span>]=<span class=\"code-number\">1</span>,t);<span class=\"code-keyword\">return</span> i.codecs&amp;&amp;(r.CODECS=i.codecs),{<span class=\"code-attr\">attributes</span>:r,<span class=\"code-attr\">uri</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">endList</span>:<span class=\"code-string\">\"static\"</span>===i.type,<span class=\"code-attr\">timeline</span>:i.periodIndex,<span class=\"code-attr\">resolvedUri</span>:i.baseUrl||<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">targetDuration</span>:i.duration,<span class=\"code-attr\">segments</span>:n,<span class=\"code-attr\">mediaSequence</span>:n.length?n[<span class=\"code-number\">0</span>].number:<span class=\"code-number\">1</span>}}(i),t)),e}),{})}(c,i)),h.length&amp;&amp;(f.mediaGroups[<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>].cc=h.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t?(t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.channel,n=t.language;e[n]={<span class=\"code-attr\">autoselect</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">default</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">instreamId</span>:i,<span class=\"code-attr\">language</span>:n},t.hasOwnProperty(<span class=\"code-string\">\"aspectRatio\"</span>)&amp;&amp;(e[n].aspectRatio=t.aspectRatio),t.hasOwnProperty(<span class=\"code-string\">\"easyReader\"</span>)&amp;&amp;(e[n].easyReader=t.easyReader),t.hasOwnProperty(<span class=\"code-string\">\"3D\"</span>)&amp;&amp;(e[n][<span class=\"code-string\">\"3D\"</span>]=t[<span class=\"code-string\">\"3D\"</span>])})),e):e}),{})),f}(i.representationInfo.map(ft),i.locations,t.sidxMapping)},Et=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>),At=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class=\"code-keyword\">return</span> i.getBigUint64?(t=i.getBigUint64(<span class=\"code-number\">0</span>))&lt;<span class=\"code-built_in\">Number</span>.MAX_SAFE_INTEGER?<span class=\"code-built_in\">Number</span>(t):t:i.getUint32(<span class=\"code-number\">0</span>)*Et+i.getUint32(<span class=\"code-number\">4</span>)},Lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Uint8Array</span>?e:(<span class=\"code-built_in\">Array</span>.isArray(e)||(t=e,<span class=\"code-built_in\">ArrayBuffer</span>.isView(t))||e <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>||(e=<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e||<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;e!=e?<span class=\"code-number\">0</span>:[e]),<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e&amp;&amp;e.buffer||e,e&amp;&amp;e.byteOffset||<span class=\"code-number\">0</span>,e&amp;&amp;e.byteLength||<span class=\"code-number\">0</span>));<span class=\"code-keyword\">var</span> t},Pt=<span class=\"code-built_in\">window</span>.BigInt||<span class=\"code-built_in\">Number</span>,kt=[Pt(<span class=\"code-string\">\"0x1\"</span>),Pt(<span class=\"code-string\">\"0x100\"</span>),Pt(<span class=\"code-string\">\"0x10000\"</span>),Pt(<span class=\"code-string\">\"0x1000000\"</span>),Pt(<span class=\"code-string\">\"0x100000000\"</span>),Pt(<span class=\"code-string\">\"0x10000000000\"</span>),Pt(<span class=\"code-string\">\"0x1000000000000\"</span>),Pt(<span class=\"code-string\">\"0x100000000000000\"</span>),Pt(<span class=\"code-string\">\"0x10000000000000000\"</span>)];v=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint16Array</span>([<span class=\"code-number\">65484</span>]),<span class=\"code-number\">255</span>===(_=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(v.buffer,v.byteOffset,v.byteLength))[<span class=\"code-number\">0</span>]||_[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">var</span> xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?{}:t,n=i.signed,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==n&amp;&amp;n,a=i.le,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==a&amp;&amp;a;e=Lt(e);<span class=\"code-keyword\">var</span> o=s?<span class=\"code-string\">\"reduce\"</span>:<span class=\"code-string\">\"reduceRight\"</span>,u=(e[o]?e[o]:<span class=\"code-built_in\">Array</span>.prototype[o]).call(e,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=s?n:<span class=\"code-built_in\">Math</span>.abs(n+<span class=\"code-number\">1</span>-e.length);<span class=\"code-keyword\">return</span> t+Pt(i)*kt[r]}),Pt(<span class=\"code-number\">0</span>));<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> d=kt[e.length]/Pt(<span class=\"code-number\">2</span>)-Pt(<span class=\"code-number\">1</span>);(u=Pt(u))&gt;d&amp;&amp;(u-=d,u-=d,u-=Pt(<span class=\"code-number\">2</span>))}<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Number</span>(u)},Ot=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e&amp;&amp;e&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e.toString&amp;&amp;(e=e.toString()),<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>;t||(e=<span class=\"code-built_in\">unescape</span>(<span class=\"code-built_in\">encodeURIComponent</span>(e)));<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.length),n=<span class=\"code-number\">0</span>;n&lt;e.length;n++)i[n]=e.charCodeAt(n);<span class=\"code-keyword\">return</span> i},Dt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?{}:i,r=n.offset,a=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===r?<span class=\"code-number\">0</span>:r,s=n.mask,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===s?[]:s;e=Lt(e);<span class=\"code-keyword\">var</span> u=(t=Lt(t)).every?t.every:<span class=\"code-built_in\">Array</span>.prototype.every;<span class=\"code-keyword\">return</span> t.length&amp;&amp;e.length-a&gt;=t.length&amp;&amp;u.call(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> t===(o[i]?o[i]&amp;e[a+i]:e[a+i])}))},Ct=Lt([<span class=\"code-number\">73</span>,<span class=\"code-number\">68</span>,<span class=\"code-number\">51</span>]),Ut=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-number\">0</span>),(t=Lt(t)).length-i&lt;<span class=\"code-number\">10</span>||!Dt(t,Ct,{<span class=\"code-attr\">offset</span>:i})?i:(i+=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> i=(e=Lt(e))[t+<span class=\"code-number\">5</span>],n=e[t+<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[t+<span class=\"code-number\">7</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[t+<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[t+<span class=\"code-number\">9</span>];<span class=\"code-keyword\">return</span>(<span class=\"code-number\">16</span>&amp;i)&gt;&gt;<span class=\"code-number\">4</span>?n+<span class=\"code-number\">20</span>:n+<span class=\"code-number\">10</span>}(t,i),e(t,i))},Rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e?Ot(e):e},Mt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=!<span class=\"code-number\">1</span>),i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Array</span>.isArray(e)?e.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Rt(e)})):[Rt(e)]}(i),t=Lt(t);<span class=\"code-keyword\">var</span> r=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> r;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">0</span>;a&lt;t.length;){<span class=\"code-keyword\">var</span> s=(t[a]&lt;&lt;<span class=\"code-number\">24</span>|t[a+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|t[a+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[a+<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">0</span>,o=t.subarray(a+<span class=\"code-number\">4</span>,a+<span class=\"code-number\">8</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===s)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">var</span> u=a+s;<span class=\"code-keyword\">if</span>(u&gt;t.length){<span class=\"code-keyword\">if</span>(n)<span class=\"code-keyword\">break</span>;u=t.length}<span class=\"code-keyword\">var</span> d=t.subarray(a+<span class=\"code-number\">8</span>,u);Dt(o,i[<span class=\"code-number\">0</span>])&amp;&amp;(<span class=\"code-number\">1</span>===i.length?r.push(d):r.push.apply(r,e(d,i.slice(<span class=\"code-number\">1</span>),n))),a=u}<span class=\"code-keyword\">return</span> r},Bt={<span class=\"code-attr\">EBML</span>:Lt([<span class=\"code-number\">26</span>,<span class=\"code-number\">69</span>,<span class=\"code-number\">223</span>,<span class=\"code-number\">163</span>]),<span class=\"code-attr\">DocType</span>:Lt([<span class=\"code-number\">66</span>,<span class=\"code-number\">130</span>]),<span class=\"code-attr\">Segment</span>:Lt([<span class=\"code-number\">24</span>,<span class=\"code-number\">83</span>,<span class=\"code-number\">128</span>,<span class=\"code-number\">103</span>]),<span class=\"code-attr\">SegmentInfo</span>:Lt([<span class=\"code-number\">21</span>,<span class=\"code-number\">73</span>,<span class=\"code-number\">169</span>,<span class=\"code-number\">102</span>]),<span class=\"code-attr\">Tracks</span>:Lt([<span class=\"code-number\">22</span>,<span class=\"code-number\">84</span>,<span class=\"code-number\">174</span>,<span class=\"code-number\">107</span>]),<span class=\"code-attr\">Track</span>:Lt([<span class=\"code-number\">174</span>]),<span class=\"code-attr\">TrackNumber</span>:Lt([<span class=\"code-number\">215</span>]),<span class=\"code-attr\">DefaultDuration</span>:Lt([<span class=\"code-number\">35</span>,<span class=\"code-number\">227</span>,<span class=\"code-number\">131</span>]),<span class=\"code-attr\">TrackEntry</span>:Lt([<span class=\"code-number\">174</span>]),<span class=\"code-attr\">TrackType</span>:Lt([<span class=\"code-number\">131</span>]),<span class=\"code-attr\">FlagDefault</span>:Lt([<span class=\"code-number\">136</span>]),<span class=\"code-attr\">CodecID</span>:Lt([<span class=\"code-number\">134</span>]),<span class=\"code-attr\">CodecPrivate</span>:Lt([<span class=\"code-number\">99</span>,<span class=\"code-number\">162</span>]),<span class=\"code-attr\">VideoTrack</span>:Lt([<span class=\"code-number\">224</span>]),<span class=\"code-attr\">AudioTrack</span>:Lt([<span class=\"code-number\">225</span>]),<span class=\"code-attr\">Cluster</span>:Lt([<span class=\"code-number\">31</span>,<span class=\"code-number\">67</span>,<span class=\"code-number\">182</span>,<span class=\"code-number\">117</span>]),<span class=\"code-attr\">Timestamp</span>:Lt([<span class=\"code-number\">231</span>]),<span class=\"code-attr\">TimestampScale</span>:Lt([<span class=\"code-number\">42</span>,<span class=\"code-number\">215</span>,<span class=\"code-number\">177</span>]),<span class=\"code-attr\">BlockGroup</span>:Lt([<span class=\"code-number\">160</span>]),<span class=\"code-attr\">BlockDuration</span>:Lt([<span class=\"code-number\">155</span>]),<span class=\"code-attr\">Block</span>:Lt([<span class=\"code-number\">161</span>]),<span class=\"code-attr\">SimpleBlock</span>:Lt([<span class=\"code-number\">163</span>])},Nt=[<span class=\"code-number\">128</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">16</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">1</span>],Ft=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=!<span class=\"code-number\">1</span>);<span class=\"code-keyword\">var</span> r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">1</span>,i=<span class=\"code-number\">0</span>;i&lt;Nt.length&amp;&amp;!(e&amp;Nt[i]);i++)t++;<span class=\"code-keyword\">return</span> t}(e[t]),a=e.subarray(t,t+r);<span class=\"code-keyword\">return</span> i&amp;&amp;((a=<span class=\"code-built_in\">Array</span>.prototype.slice.call(e,t,t+r))[<span class=\"code-number\">0</span>]^=Nt[r<span class=\"code-number\">-1</span>]),{<span class=\"code-attr\">length</span>:r,<span class=\"code-attr\">value</span>:xt(a,{<span class=\"code-attr\">signed</span>:n}),<span class=\"code-attr\">bytes</span>:a}},qt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> t?t.match(<span class=\"code-regexp\">/.{1,2}/g</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> e(t)})):<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t?{}:t).le,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==i&amp;&amp;i;(<span class=\"code-string\">\"bigint\"</span>!=<span class=\"code-keyword\">typeof</span> e&amp;&amp;<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e||<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;e!=e)&amp;&amp;(e=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r,a=(r=e=Pt(e),<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.toString(<span class=\"code-number\">2</span>).length}(r)/<span class=\"code-number\">8</span>)),s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ArrayBuffer</span>(a)),o=<span class=\"code-number\">0</span>;o&lt;a;o++){<span class=\"code-keyword\">var</span> u=n?o:<span class=\"code-built_in\">Math</span>.abs(o+<span class=\"code-number\">1</span>-s.length);s[u]=<span class=\"code-built_in\">Number</span>(e/kt[o]&amp;Pt(<span class=\"code-number\">255</span>)),e&lt;<span class=\"code-number\">0</span>&amp;&amp;(s[u]=<span class=\"code-built_in\">Math</span>.abs(~s[u]),s[u]-=<span class=\"code-number\">0</span>===o?<span class=\"code-number\">1</span>:<span class=\"code-number\">2</span>)}<span class=\"code-keyword\">return</span> s}(t):t},Ht=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(n&gt;=i.length)<span class=\"code-keyword\">return</span> i.length;<span class=\"code-keyword\">var</span> r=Ft(i,n,!<span class=\"code-number\">1</span>);<span class=\"code-keyword\">if</span>(Dt(t.bytes,r.bytes))<span class=\"code-keyword\">return</span> n;<span class=\"code-keyword\">var</span> a=Ft(i,n+r.length);<span class=\"code-keyword\">return</span> e(t,i,n+a.length+a.value+r.length)},Gt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Array</span>.isArray(e)?e.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> qt(e)})):[qt(e)]}(i),t=Lt(t);<span class=\"code-keyword\">var</span> n=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> n;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;t.length;){<span class=\"code-keyword\">var</span> a=Ft(t,r,!<span class=\"code-number\">1</span>),s=Ft(t,r+a.length),o=r+a.length+s.length;<span class=\"code-number\">127</span>===s.value&amp;&amp;(s.value=Ht(a,t,o),s.value!==t.length&amp;&amp;(s.value-=o));<span class=\"code-keyword\">var</span> u=o+s.value&gt;t.length?t.length:o+s.value,d=t.subarray(o,u);Dt(i[<span class=\"code-number\">0</span>],a.bytes)&amp;&amp;(<span class=\"code-number\">1</span>===i.length?n.push(d):n=n.concat(e(d,i.slice(<span class=\"code-number\">1</span>)))),r+=a.length+s.length+d.length}<span class=\"code-keyword\">return</span> n},Wt=Lt([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),Vt=Lt([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),jt=Lt([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>]),Xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">1</span>;i&lt;e.length<span class=\"code-number\">-2</span>;)Dt(e.subarray(i,i+<span class=\"code-number\">3</span>),jt)&amp;&amp;(t.push(i+<span class=\"code-number\">2</span>),i++),i++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===t.length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> n=e.length-t.length,r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n),a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;n;a++,i++)a===t[<span class=\"code-number\">0</span>]&amp;&amp;(a++,t.shift()),r[i]=e[a];<span class=\"code-keyword\">return</span> r},zt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>),e=Lt(e),i=[].concat(i);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r,a=<span class=\"code-number\">0</span>,s=<span class=\"code-number\">0</span>;a&lt;e.length&amp;&amp;(s&lt;n||r);){<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(Dt(e.subarray(a),Wt)?o=<span class=\"code-number\">4</span>:Dt(e.subarray(a),Vt)&amp;&amp;(o=<span class=\"code-number\">3</span>),o){<span class=\"code-keyword\">if</span>(s++,r)<span class=\"code-keyword\">return</span> Xt(e.subarray(r,a));<span class=\"code-keyword\">var</span> u=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-string\">\"h264\"</span>===t?u=<span class=\"code-number\">31</span>&amp;e[a+o]:<span class=\"code-string\">\"h265\"</span>===t&amp;&amp;(u=e[a+o]&gt;&gt;<span class=\"code-number\">1</span>&amp;<span class=\"code-number\">63</span>),<span class=\"code-number\">-1</span>!==i.indexOf(u)&amp;&amp;(r=a+o),a+=o+(<span class=\"code-string\">\"h264\"</span>===t?<span class=\"code-number\">1</span>:<span class=\"code-number\">2</span>)}<span class=\"code-keyword\">else</span> a++}<span class=\"code-keyword\">return</span> e.subarray(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>)},Qt={<span class=\"code-attr\">webm</span>:Lt([<span class=\"code-number\">119</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">98</span>,<span class=\"code-number\">109</span>]),<span class=\"code-attr\">matroska</span>:Lt([<span class=\"code-number\">109</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">107</span>,<span class=\"code-number\">97</span>]),<span class=\"code-attr\">flac</span>:Lt([<span class=\"code-number\">102</span>,<span class=\"code-number\">76</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">67</span>]),<span class=\"code-attr\">ogg</span>:Lt([<span class=\"code-number\">79</span>,<span class=\"code-number\">103</span>,<span class=\"code-number\">103</span>,<span class=\"code-number\">83</span>]),<span class=\"code-attr\">ac3</span>:Lt([<span class=\"code-number\">11</span>,<span class=\"code-number\">119</span>]),<span class=\"code-attr\">riff</span>:Lt([<span class=\"code-number\">82</span>,<span class=\"code-number\">73</span>,<span class=\"code-number\">70</span>,<span class=\"code-number\">70</span>]),<span class=\"code-attr\">avi</span>:Lt([<span class=\"code-number\">65</span>,<span class=\"code-number\">86</span>,<span class=\"code-number\">73</span>]),<span class=\"code-attr\">wav</span>:Lt([<span class=\"code-number\">87</span>,<span class=\"code-number\">65</span>,<span class=\"code-number\">86</span>,<span class=\"code-number\">69</span>]),<span class=\"code-string\">\"3gp\"</span>:Lt([<span class=\"code-number\">102</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>,<span class=\"code-number\">51</span>,<span class=\"code-number\">103</span>]),<span class=\"code-attr\">mp4</span>:Lt([<span class=\"code-number\">102</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>]),<span class=\"code-attr\">fmp4</span>:Lt([<span class=\"code-number\">115</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>]),<span class=\"code-attr\">mov</span>:Lt([<span class=\"code-number\">102</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">112</span>,<span class=\"code-number\">113</span>,<span class=\"code-number\">116</span>]),<span class=\"code-attr\">moov</span>:Lt([<span class=\"code-number\">109</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">118</span>]),<span class=\"code-attr\">moof</span>:Lt([<span class=\"code-number\">109</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">102</span>])},Yt={<span class=\"code-attr\">aac</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Ut(e);<span class=\"code-keyword\">return</span> Dt(e,[<span class=\"code-number\">255</span>,<span class=\"code-number\">16</span>],{<span class=\"code-attr\">offset</span>:t,<span class=\"code-attr\">mask</span>:[<span class=\"code-number\">255</span>,<span class=\"code-number\">22</span>]})},<span class=\"code-attr\">mp3</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Ut(e);<span class=\"code-keyword\">return</span> Dt(e,[<span class=\"code-number\">255</span>,<span class=\"code-number\">2</span>],{<span class=\"code-attr\">offset</span>:t,<span class=\"code-attr\">mask</span>:[<span class=\"code-number\">255</span>,<span class=\"code-number\">6</span>]})},<span class=\"code-attr\">webm</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Gt(e,[Bt.EBML,Bt.DocType])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> Dt(t,Qt.webm)},<span class=\"code-attr\">mkv</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Gt(e,[Bt.EBML,Bt.DocType])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> Dt(t,Qt.matroska)},<span class=\"code-attr\">mp4</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!Yt[<span class=\"code-string\">\"3gp\"</span>](e)&amp;&amp;!Yt.mov(e)&amp;&amp;(!(!Dt(e,Qt.mp4,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>})&amp;&amp;!Dt(e,Qt.fmp4,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>}))||!(!Dt(e,Qt.moof,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>})&amp;&amp;!Dt(e,Qt.moov,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>}))||<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>)},<span class=\"code-attr\">mov</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Dt(e,Qt.mov,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>})},<span class=\"code-string\">\"3gp\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Dt(e,Qt[<span class=\"code-string\">\"3gp\"</span>],{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">4</span>})},<span class=\"code-attr\">ac3</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Ut(e);<span class=\"code-keyword\">return</span> Dt(e,Qt.ac3,{<span class=\"code-attr\">offset</span>:t})},<span class=\"code-attr\">ts</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e.length&lt;<span class=\"code-number\">189</span>&amp;&amp;e.length&gt;=<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-number\">71</span>===e[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t+<span class=\"code-number\">188</span>&lt;e.length&amp;&amp;t&lt;<span class=\"code-number\">188</span>;){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">71</span>===e[t]&amp;&amp;<span class=\"code-number\">71</span>===e[t+<span class=\"code-number\">188</span>])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;t+=<span class=\"code-number\">1</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},<span class=\"code-attr\">flac</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Ut(e);<span class=\"code-keyword\">return</span> Dt(e,Qt.flac,{<span class=\"code-attr\">offset</span>:t})},<span class=\"code-attr\">ogg</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Dt(e,Qt.ogg)},<span class=\"code-attr\">avi</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Dt(e,Qt.riff)&amp;&amp;Dt(e,Qt.avi,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">8</span>})},<span class=\"code-attr\">wav</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Dt(e,Qt.riff)&amp;&amp;Dt(e,Qt.wav,{<span class=\"code-attr\">offset</span>:<span class=\"code-number\">8</span>})},<span class=\"code-attr\">h264</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> zt(e,<span class=\"code-string\">\"h264\"</span>,<span class=\"code-number\">7</span>,<span class=\"code-number\">3</span>)}(e).length},<span class=\"code-attr\">h265</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> zt(e,<span class=\"code-string\">\"h265\"</span>,[<span class=\"code-number\">32</span>,<span class=\"code-number\">33</span>],<span class=\"code-number\">3</span>)}(e).length}},Kt=<span class=\"code-built_in\">Object</span>.keys(Yt).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"ts\"</span>!==e&amp;&amp;<span class=\"code-string\">\"h264\"</span>!==e&amp;&amp;<span class=\"code-string\">\"h265\"</span>!==e})).concat([<span class=\"code-string\">\"ts\"</span>,<span class=\"code-string\">\"h264\"</span>,<span class=\"code-string\">\"h265\"</span>]);Kt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Yt[e];Yt[e]=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(Lt(e))}}));<span class=\"code-keyword\">var</span> $t=Yt,Jt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=Lt(e);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t&lt;Kt.length;t++){<span class=\"code-keyword\">var</span> i=Kt[t];<span class=\"code-keyword\">if</span>($t[i](e))<span class=\"code-keyword\">return</span> i}<span class=\"code-keyword\">return</span><span class=\"code-string\">\"\"</span>},Zt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4</span>===e.readyState)<span class=\"code-keyword\">return</span> t()},ei=r.default.EventTarget,ti=r.default.mergeOptions,ii=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!Se(e,t))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(e.sidx&amp;&amp;t.sidx&amp;&amp;(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!e.sidx&amp;&amp;t.sidx||e.sidx&amp;&amp;!t.sidx)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(e.segments&amp;&amp;!t.segments||!e.segments&amp;&amp;t.segments)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!e.segments&amp;&amp;!t.segments)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.segments.length;i++){<span class=\"code-keyword\">var</span> n=e.segments[i],r=t.segments[i];<span class=\"code-keyword\">if</span>(n.uri!==r.uri)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(n.byterange||r.byterange){<span class=\"code-keyword\">var</span> a=n.byterange,s=r.byterange;<span class=\"code-keyword\">if</span>(a&amp;&amp;!s||!a&amp;&amp;s)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(a.offset!==s.offset||a.length!==s.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>},ni=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>(<span class=\"code-built_in\">Boolean</span>(!e.map&amp;&amp;!t.map)||<span class=\"code-built_in\">Boolean</span>(e.map&amp;&amp;t.map&amp;&amp;e.map.byterange.offset===t.map.byterange.offset&amp;&amp;e.map.byterange.length===t.map.byterange.length))&amp;&amp;e.uri===t.uri&amp;&amp;e.byterange.offset===t.byterange.offset&amp;&amp;e.byterange.length===t.byterange.length},ri=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> e){<span class=\"code-keyword\">var</span> r=e[n].sidx;<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> a=Ze(r);<span class=\"code-keyword\">if</span>(!t[a])<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">var</span> s=t[a].sidxInfo;ni(s,r)&amp;&amp;(i[a]=t[a])}}<span class=\"code-keyword\">return</span> i},ai=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n={}),(a=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).masterPlaylistLoader_=r||s(a),r||(a.isMaster_=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> o=n,u=o.withCredentials,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==u&amp;&amp;u,l=o.handleManifestRedirects,c=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==l&amp;&amp;l;<span class=\"code-keyword\">if</span>(a.vhs_=i,a.withCredentials=d,a.handleManifestRedirects=c,!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL or object is required\"</span>);<span class=\"code-keyword\">return</span> a.on(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.refreshXml_()})),a.on(<span class=\"code-string\">\"mediaupdatetimeout\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.refreshMedia_(a.media().id)})),a.state=<span class=\"code-string\">\"HAVE_NOTHING\"</span>,a.loadedPlaylists_={},a.logger_=p(<span class=\"code-string\">\"DashPlaylistLoader\"</span>),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.requestErrored_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span>!<span class=\"code-keyword\">this</span>.request||(<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e?(<span class=\"code-keyword\">this</span>.error=<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> e||e <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">Error</span>?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"DASH request error at URL: \"</span>+t.uri,<span class=\"code-attr\">response</span>:t.response,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>}:e,i&amp;&amp;(<span class=\"code-keyword\">this</span>.state=i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>),!<span class=\"code-number\">0</span>):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>)},i.addSidxSegments_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>,r=e.sidx&amp;&amp;Ze(e.sidx);<span class=\"code-keyword\">if</span>(e.sidx&amp;&amp;r&amp;&amp;!<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_[r]){<span class=\"code-keyword\">var</span> a=f(<span class=\"code-keyword\">this</span>.handleManifestRedirects,e.sidx.resolvedUri),s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a,s</span>)</span>{<span class=\"code-keyword\">if</span>(!n.requestErrored_(a,s,t)){<span class=\"code-keyword\">var</span> o,u=n.masterPlaylistLoader_.sidxMapping_;<span class=\"code-keyword\">try</span>{o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">references</span>:[],<span class=\"code-attr\">referenceId</span>:t.getUint32(<span class=\"code-number\">4</span>),<span class=\"code-attr\">timescale</span>:t.getUint32(<span class=\"code-number\">8</span>)},n=<span class=\"code-number\">12</span>;<span class=\"code-number\">0</span>===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+<span class=\"code-number\">4</span>),n+=<span class=\"code-number\">8</span>):(i.earliestPresentationTime=At(e.subarray(n)),i.firstOffset=At(e.subarray(n+<span class=\"code-number\">8</span>)),n+=<span class=\"code-number\">16</span>),n+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">var</span> r=t.getUint16(n);<span class=\"code-keyword\">for</span>(n+=<span class=\"code-number\">2</span>;r&gt;<span class=\"code-number\">0</span>;n+=<span class=\"code-number\">12</span>,r--)i.references.push({<span class=\"code-attr\">referenceType</span>:(<span class=\"code-number\">128</span>&amp;e[n])&gt;&gt;&gt;<span class=\"code-number\">7</span>,<span class=\"code-attr\">referencedSize</span>:<span class=\"code-number\">2147483647</span>&amp;t.getUint32(n),<span class=\"code-attr\">subsegmentDuration</span>:t.getUint32(n+<span class=\"code-number\">4</span>),<span class=\"code-attr\">startsWithSap</span>:!!(<span class=\"code-number\">128</span>&amp;e[n+<span class=\"code-number\">8</span>]),<span class=\"code-attr\">sapType</span>:(<span class=\"code-number\">112</span>&amp;e[n+<span class=\"code-number\">8</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">sapDeltaTime</span>:<span class=\"code-number\">268435455</span>&amp;t.getUint32(n+<span class=\"code-number\">8</span>)});<span class=\"code-keyword\">return</span> i}(Lt(s.response).subarray(<span class=\"code-number\">8</span>))}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> n.requestErrored_(e,s,t)}<span class=\"code-keyword\">return</span> u[r]={<span class=\"code-attr\">sidxInfo</span>:e.sidx,<span class=\"code-attr\">sidx</span>:o},Je(e,o,e.sidx.resolvedUri),i(!<span class=\"code-number\">0</span>)}};<span class=\"code-keyword\">this</span>.request=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=[],a=!<span class=\"code-number\">1</span>,s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,n,r</span>)</span>{<span class=\"code-keyword\">return</span> t.abort(),a=!<span class=\"code-number\">0</span>,i(e,t,n,r)},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!a){<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> s(e,t,<span class=\"code-string\">\"\"</span>,r);<span class=\"code-keyword\">var</span> i=t.responseText.substring(r&amp;&amp;r.byteLength||<span class=\"code-number\">0</span>,t.responseText.length);<span class=\"code-keyword\">if</span>(r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> e=<span class=\"code-built_in\">arguments</span>.length,t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span>(e),i=<span class=\"code-number\">0</span>;i&lt;e;i++)t[i]=<span class=\"code-built_in\">arguments</span>[i];<span class=\"code-keyword\">if</span>(t=t.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;(e.byteLength||e.length)&amp;&amp;<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e})),t.length&lt;=<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> Lt(t[<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">var</span> n=t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e+(t.byteLength||t.length)}),<span class=\"code-number\">0</span>),r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n),a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e=Lt(e),r.set(e,a),a+=e.byteLength})),r}(r,Ot(i,!<span class=\"code-number\">0</span>)),n=n||Ut(r),r.length&lt;<span class=\"code-number\">10</span>||n&amp;&amp;r.length&lt;n+<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span> Zt(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s(e,t,<span class=\"code-string\">\"\"</span>,r)}));<span class=\"code-keyword\">var</span> o=Jt(r);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"ts\"</span>===o&amp;&amp;r.length&lt;<span class=\"code-number\">188</span>||!o&amp;&amp;r.length&lt;<span class=\"code-number\">376</span>?Zt(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s(e,t,<span class=\"code-string\">\"\"</span>,r)})):s(<span class=\"code-literal\">null</span>,t,o,r)}},u={<span class=\"code-attr\">uri</span>:e,<span class=\"code-attr\">beforeSend</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.overrideMimeType(<span class=\"code-string\">\"text/plain; charset=x-user-defined\"</span>),e.addEventListener(<span class=\"code-string\">\"progress\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> t.total,t.loaded,Pe(e,<span class=\"code-literal\">null</span>,{<span class=\"code-attr\">statusCode</span>:e.status},o)}))}},d=t(u,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> Pe(d,e,t,o)}));<span class=\"code-keyword\">return</span> d}(a,<span class=\"code-keyword\">this</span>.vhs_.xhr,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i,r,o</span>)</span>{<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">return</span> s(t,i);<span class=\"code-keyword\">if</span>(!r||<span class=\"code-string\">\"mp4\"</span>!==r)<span class=\"code-keyword\">return</span> s({<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Unsupported \"</span>+(r||<span class=\"code-string\">\"unknown\"</span>)+<span class=\"code-string\">\" container type for sidx segment at URL: \"</span>+a,<span class=\"code-attr\">response</span>:<span class=\"code-string\">\"\"</span>,<span class=\"code-attr\">playlist</span>:e,<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>},i);<span class=\"code-keyword\">var</span> u=e.sidx.byterange,d=u.offset,l=u.length;<span class=\"code-keyword\">if</span>(o.length&gt;=l+d)<span class=\"code-keyword\">return</span> s(t,{<span class=\"code-attr\">response</span>:o.subarray(d,d+l),<span class=\"code-attr\">status</span>:i.status,<span class=\"code-attr\">uri</span>:i.uri});n.request=n.vhs_.xhr({<span class=\"code-attr\">uri</span>:a,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:xe({<span class=\"code-attr\">byterange</span>:e.sidx.byterange})},s)}))}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i(!<span class=\"code-number\">1</span>)}),<span class=\"code-number\">0</span>)},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.stopRequest(),<span class=\"code-keyword\">this</span>.loadedPlaylists_={},<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_),<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaRequest_),<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.createMupOnMedia_&amp;&amp;(<span class=\"code-keyword\">this</span>.off(<span class=\"code-string\">\"loadedmetadata\"</span>,<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.createMupOnMedia_),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.createMupOnMedia_=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.off()},i.hasPendingRequest=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.request||<span class=\"code-keyword\">this</span>.mediaRequest_},i.stopRequest=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.request){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.request;<span class=\"code-keyword\">this</span>.request=<span class=\"code-literal\">null</span>,e.onreadystatechange=<span class=\"code-literal\">null</span>,e.abort()}},i.media=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.media_;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot switch media playlist from \"</span>+<span class=\"code-keyword\">this</span>.state);<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.state;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e){<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists[e])<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Unknown playlist URI: \"</span>+e);e=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists[e]}<span class=\"code-keyword\">var</span> n=!<span class=\"code-keyword\">this</span>.media_||e.id!==<span class=\"code-keyword\">this</span>.media_.id;<span class=\"code-keyword\">if</span>(n&amp;&amp;<span class=\"code-keyword\">this</span>.loadedPlaylists_[e.id]&amp;&amp;<span class=\"code-keyword\">this</span>.loadedPlaylists_[e.id].endList)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.media_=e,<span class=\"code-keyword\">void</span>(n&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)));n&amp;&amp;(<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachanging\"</span>),<span class=\"code-keyword\">this</span>.addSidxSegments_(e,i,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{t.haveMetadata({<span class=\"code-attr\">startingState</span>:i,<span class=\"code-attr\">playlist</span>:e})})))},i.haveMetadata=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.startingState,i=e.playlist;<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_METADATA\"</span>,<span class=\"code-keyword\">this</span>.loadedPlaylists_[i.id]=i,<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.refreshMedia_(i.id),<span class=\"code-string\">\"HAVE_MASTER\"</span>===t?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedmetadata\"</span>):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediachange\"</span>)},i.pause=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.createMupOnMedia_&amp;&amp;(<span class=\"code-keyword\">this</span>.off(<span class=\"code-string\">\"loadedmetadata\"</span>,<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.createMupOnMedia_),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.createMupOnMedia_=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">this</span>.stopRequest(),<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.isMaster_&amp;&amp;(<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=<span class=\"code-literal\">null</span>),<span class=\"code-string\">\"HAVE_NOTHING\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">1</span>)},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.mediaUpdateTimeout),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.media();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> n=i?i.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>:<span class=\"code-number\">5e3</span>;<span class=\"code-keyword\">this</span>.mediaUpdateTimeout=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.load()}),n)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.started?i&amp;&amp;!i.endList?(<span class=\"code-keyword\">this</span>.isMaster_&amp;&amp;!<span class=\"code-keyword\">this</span>.minimumUpdatePeriodTimeout_&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>),<span class=\"code-keyword\">this</span>.updateMinimumUpdatePeriodTimeout_()),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>)):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.start()},i.start=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.started=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.isMaster_?<span class=\"code-keyword\">this</span>.requestMaster_((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[<span class=\"code-number\">0</span>])})):<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e.haveMaster_()}),<span class=\"code-number\">0</span>)},i.requestMaster_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">if</span>(!t.requestErrored_(i,n)){<span class=\"code-keyword\">var</span> r=n.responseText!==t.masterPlaylistLoader_.masterXml_;<span class=\"code-keyword\">return</span> t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&amp;&amp;n.responseHeaders.date?t.masterLoaded_=<span class=\"code-built_in\">Date</span>.parse(n.responseHeaders.date):t.masterLoaded_=<span class=\"code-built_in\">Date</span>.now(),t.masterPlaylistLoader_.srcUrl=f(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),<span class=\"code-keyword\">void</span> t.syncClientServerClock_((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e(n,r)}))):e(n,r)}<span class=\"code-string\">\"HAVE_NOTHING\"</span>===t.state&amp;&amp;(t.started=!<span class=\"code-number\">1</span>)}))},i.syncClientServerClock_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">this</span>,n=(t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.masterXml_,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=pt(e,<span class=\"code-string\">\"UTCTiming\"</span>)[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=vt(t);<span class=\"code-keyword\">switch</span>(i.schemeIdUri){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-head:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-head:2012\"</span>:i.method=<span class=\"code-string\">\"HEAD\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-xsdate:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-iso:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-xsdate:2012\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:http-iso:2012\"</span>:i.method=<span class=\"code-string\">\"GET\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:direct:2014\"</span>:<span class=\"code-keyword\">case</span><span class=\"code-string\">\"urn:mpeg:dash:utc:direct:2012\"</span>:i.method=<span class=\"code-string\">\"DIRECT\"</span>,i.value=<span class=\"code-built_in\">Date</span>.parse(i.value);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"UNSUPPORTED_UTC_TIMING_SCHEME\"</span>)}<span class=\"code-keyword\">return</span> i}(wt(t)));<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===n?(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.clientOffset_=<span class=\"code-keyword\">this</span>.masterLoaded_-<span class=\"code-built_in\">Date</span>.now(),e()):<span class=\"code-string\">\"DIRECT\"</span>===n.method?(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.clientOffset_=n.value-<span class=\"code-built_in\">Date</span>.now(),e()):<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.request=<span class=\"code-keyword\">this</span>.vhs_.xhr({<span class=\"code-attr\">uri</span>:h(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl,n.value),<span class=\"code-attr\">method</span>:n.method,<span class=\"code-attr\">withCredentials</span>:<span class=\"code-keyword\">this</span>.withCredentials},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,r</span>)</span>{<span class=\"code-keyword\">if</span>(i.request){<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">return</span> i.masterPlaylistLoader_.clientOffset_=i.masterLoaded_-<span class=\"code-built_in\">Date</span>.now(),e();<span class=\"code-keyword\">var</span> a;a=<span class=\"code-string\">\"HEAD\"</span>===n.method?r.responseHeaders&amp;&amp;r.responseHeaders.date?<span class=\"code-built_in\">Date</span>.parse(r.responseHeaders.date):i.masterLoaded_:<span class=\"code-built_in\">Date</span>.parse(r.responseText),i.masterPlaylistLoader_.clientOffset_=a-<span class=\"code-built_in\">Date</span>.now(),e()}})))},i.haveMaster_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"HAVE_MASTER\"</span>,<span class=\"code-keyword\">this</span>.isMaster_?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>):<span class=\"code-keyword\">this</span>.media_||<span class=\"code-keyword\">this</span>.media(<span class=\"code-keyword\">this</span>.childPlaylist_)},i.handleMaster_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaRequest_=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> e,t,i,n=(e={<span class=\"code-attr\">masterXml</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.masterXml_,<span class=\"code-attr\">srcUrl</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl,<span class=\"code-attr\">clientOffset</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.clientOffset_,<span class=\"code-attr\">sidxMapping</span>:<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_},i=It(e.masterXml,{<span class=\"code-attr\">manifestUri</span>:t=e.srcUrl,<span class=\"code-attr\">clientOffset</span>:e.clientOffset,<span class=\"code-attr\">sidxMapping</span>:e.sidxMapping}),ge(i,t),i),r=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master;r&amp;&amp;(n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=!<span class=\"code-number\">0</span>,r=ti(e,{<span class=\"code-attr\">duration</span>:t.duration,<span class=\"code-attr\">minimumUpdatePeriod</span>:t.minimumUpdatePeriod}),a=<span class=\"code-number\">0</span>;a&lt;t.playlists.length;a++){<span class=\"code-keyword\">var</span> s=t.playlists[a];<span class=\"code-keyword\">if</span>(s.sidx){<span class=\"code-keyword\">var</span> o=Ze(s.sidx);i&amp;&amp;i[o]&amp;&amp;i[o].sidx&amp;&amp;Je(s,i[o].sidx,s.sidx.resolvedUri)}<span class=\"code-keyword\">var</span> u=we(r,s,ii);u&amp;&amp;(r=u,n=!<span class=\"code-number\">1</span>)}<span class=\"code-keyword\">return</span> pe(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,a</span>)</span>{<span class=\"code-keyword\">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class=\"code-keyword\">var</span> s=e.playlists[<span class=\"code-number\">0</span>].id,o=we(r,e.playlists[<span class=\"code-number\">0</span>],ii);o&amp;&amp;((r=o).mediaGroups[t][i][a].playlists[<span class=\"code-number\">0</span>]=r.playlists[s],n=!<span class=\"code-number\">1</span>)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&amp;&amp;(n=!<span class=\"code-number\">1</span>),n?<span class=\"code-literal\">null</span>:r}(r,n,<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.sidxMapping_)),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master=n||r;<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.locations&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.locations[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> a&amp;&amp;a!==<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl&amp;&amp;(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.srcUrl=a),(!r||n&amp;&amp;n.minimumUpdatePeriod!==r.minimumUpdatePeriod)&amp;&amp;<span class=\"code-keyword\">this</span>.updateMinimumUpdatePeriodTimeout_(),<span class=\"code-built_in\">Boolean</span>(n)},i.updateMinimumUpdatePeriodTimeout_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_;e.createMupOnMedia_&amp;&amp;(e.off(<span class=\"code-string\">\"loadedmetadata\"</span>,e.createMupOnMedia_),e.createMupOnMedia_=<span class=\"code-literal\">null</span>),e.minimumUpdatePeriodTimeout_&amp;&amp;(<span class=\"code-built_in\">window</span>.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=<span class=\"code-literal\">null</span>);<span class=\"code-keyword\">var</span> t=e.master&amp;&amp;e.master.minimumUpdatePeriod;<span class=\"code-number\">0</span>===t&amp;&amp;(e.media()?t=<span class=\"code-number\">1e3</span>*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one(<span class=\"code-string\">\"loadedmetadata\"</span>,e.createMupOnMedia_))),<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> t||t&lt;=<span class=\"code-number\">0</span>?t&lt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"found invalid minimumUpdatePeriod of \"</span>+t+<span class=\"code-string\">\", not setting a timeout\"</span>):<span class=\"code-keyword\">this</span>.createMUPTimeout_(t)},i.createMUPTimeout_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.minimumUpdatePeriodTimeout_=<span class=\"code-literal\">null</span>,t.trigger(<span class=\"code-string\">\"minimumUpdatePeriod\"</span>),t.createMUPTimeout_(e)}),e)},i.refreshXml_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.requestMaster_((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a;i&amp;&amp;(e.media_&amp;&amp;(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,r=e.masterPlaylistLoader_.sidxMapping_,a=ri(n.playlists,r),pe(n,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class=\"code-keyword\">var</span> s=e.playlists;a=ti(a,ri(s,r))}})),a),e.addSidxSegments_(e.media(),e.state,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.refreshMedia_(e.media().id)})))}))},i.refreshMedia_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"refreshMedia_ must take a media id\"</span>);<span class=\"code-keyword\">this</span>.media_&amp;&amp;<span class=\"code-keyword\">this</span>.isMaster_&amp;&amp;<span class=\"code-keyword\">this</span>.handleMaster_();<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists,n=!<span class=\"code-keyword\">this</span>.media_||<span class=\"code-keyword\">this</span>.media_!==i[e];n?<span class=\"code-keyword\">this</span>.media_=i[e]:<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistunchanged\"</span>),<span class=\"code-keyword\">this</span>.mediaUpdateTimeout||<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{t.media().endList||(t.mediaUpdateTimeout=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.trigger(<span class=\"code-string\">\"mediaupdatetimeout\"</span>),e()}),Ie(t.media(),<span class=\"code-built_in\">Boolean</span>(n))))}(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"loadedplaylist\"</span>)},t}(ei),si={<span class=\"code-attr\">GOAL_BUFFER_LENGTH</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">MAX_GOAL_BUFFER_LENGTH</span>:<span class=\"code-number\">60</span>,<span class=\"code-attr\">BACK_BUFFER_LENGTH</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">GOAL_BUFFER_LENGTH_RATE</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">INITIAL_BANDWIDTH</span>:<span class=\"code-number\">4194304</span>,<span class=\"code-attr\">BANDWIDTH_VARIANCE</span>:<span class=\"code-number\">1.2</span>,<span class=\"code-attr\">BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">MAX_BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE</span>:<span class=\"code-number\">16</span>,<span class=\"code-attr\">BUFFER_LOW_WATER_LINE_RATE</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">BUFFER_HIGH_WATER_LINE</span>:<span class=\"code-number\">30</span>},oi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.on=e.addEventListener,e.off=e.removeEventListener,e},ui=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> URL.createObjectURL(<span class=\"code-keyword\">new</span> Blob([e],{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"application/javascript\"</span>}))}<span class=\"code-keyword\">catch</span>(i){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> BlobBuilder;<span class=\"code-keyword\">return</span> t.append(e),URL.createObjectURL(t.getBlob())}}(e),i=oi(<span class=\"code-keyword\">new</span> Worker(t));i.objURL=t;<span class=\"code-keyword\">var</span> n=i.terminate;<span class=\"code-keyword\">return</span> i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> URL.revokeObjectURL(t),n.call(<span class=\"code-keyword\">this</span>)},i}},di=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"var browserWorkerPolyFill = \"</span>+oi.toString()+<span class=\"code-string\">\";\\nbrowserWorkerPolyFill(self);\\n\"</span>+e},li=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.toString().replace(<span class=\"code-regexp\">/^function.+?{/</span>,<span class=\"code-string\">\"\"</span>).slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>)},ci=di(li((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">this</span>.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class=\"code-keyword\">this</span>.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class=\"code-number\">1</span>),n&gt;<span class=\"code-number\">-1</span>)},<span class=\"code-keyword\">this</span>.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a;<span class=\"code-keyword\">if</span>(i=e[t])<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">for</span>(a=[],n=<span class=\"code-built_in\">arguments</span>.length,n=<span class=\"code-number\">1</span>;n&lt;<span class=\"code-built_in\">arguments</span>.length;++n)a.push(<span class=\"code-built_in\">arguments</span>[n]);<span class=\"code-keyword\">for</span>(r=i.length,n=<span class=\"code-number\">0</span>;n&lt;r;++n)i[n].apply(<span class=\"code-keyword\">this</span>,a)}},<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e={}}}};e.prototype.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.flush(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"partialdone\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.partialFlush(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"endedtimeline\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.endTimeline(t)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"reset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.reset(t)})),e},e.prototype.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e)},e.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,e)},e.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"partialdone\"</span>,e)},e.prototype.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>,e)},e.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>,e)};<span class=\"code-keyword\">var</span> t,i,n,r,a,s,o,u,d,l,c,h,f,p,m,g,y,v,_,T,b,S,w,I,E,A,L,P,k,x,O,D,C,U,R,M,B,N,F,q,H=e,G=<span class=\"code-built_in\">Math</span>.pow(<span class=\"code-number\">2</span>,<span class=\"code-number\">32</span>),W={<span class=\"code-attr\">getUint64</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class=\"code-keyword\">return</span> i.getBigUint64?(t=i.getBigUint64(<span class=\"code-number\">0</span>))&lt;<span class=\"code-built_in\">Number</span>.MAX_SAFE_INTEGER?<span class=\"code-built_in\">Number</span>(t):t:i.getUint32(<span class=\"code-number\">0</span>)*G+i.getUint32(<span class=\"code-number\">4</span>)},<span class=\"code-attr\">MAX_UINT32</span>:G},V=W.MAX_UINT32;!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">if</span>(S={<span class=\"code-attr\">avc1</span>:[],<span class=\"code-attr\">avcC</span>:[],<span class=\"code-attr\">btrt</span>:[],<span class=\"code-attr\">dinf</span>:[],<span class=\"code-attr\">dref</span>:[],<span class=\"code-attr\">esds</span>:[],<span class=\"code-attr\">ftyp</span>:[],<span class=\"code-attr\">hdlr</span>:[],<span class=\"code-attr\">mdat</span>:[],<span class=\"code-attr\">mdhd</span>:[],<span class=\"code-attr\">mdia</span>:[],<span class=\"code-attr\">mfhd</span>:[],<span class=\"code-attr\">minf</span>:[],<span class=\"code-attr\">moof</span>:[],<span class=\"code-attr\">moov</span>:[],<span class=\"code-attr\">mp4a</span>:[],<span class=\"code-attr\">mvex</span>:[],<span class=\"code-attr\">mvhd</span>:[],<span class=\"code-attr\">pasp</span>:[],<span class=\"code-attr\">sdtp</span>:[],<span class=\"code-attr\">smhd</span>:[],<span class=\"code-attr\">stbl</span>:[],<span class=\"code-attr\">stco</span>:[],<span class=\"code-attr\">stsc</span>:[],<span class=\"code-attr\">stsd</span>:[],<span class=\"code-attr\">stsz</span>:[],<span class=\"code-attr\">stts</span>:[],<span class=\"code-attr\">styp</span>:[],<span class=\"code-attr\">tfdt</span>:[],<span class=\"code-attr\">tfhd</span>:[],<span class=\"code-attr\">traf</span>:[],<span class=\"code-attr\">trak</span>:[],<span class=\"code-attr\">trun</span>:[],<span class=\"code-attr\">trex</span>:[],<span class=\"code-attr\">tkhd</span>:[],<span class=\"code-attr\">vmhd</span>:[]},<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">Uint8Array</span>){<span class=\"code-keyword\">for</span>(e <span class=\"code-keyword\">in</span> S)S.hasOwnProperty(e)&amp;&amp;(S[e]=[e.charCodeAt(<span class=\"code-number\">0</span>),e.charCodeAt(<span class=\"code-number\">1</span>),e.charCodeAt(<span class=\"code-number\">2</span>),e.charCodeAt(<span class=\"code-number\">3</span>)]);w=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-string\">\"i\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"s\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"o\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"m\"</span>.charCodeAt(<span class=\"code-number\">0</span>)]),E=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-string\">\"a\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"v\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"c\"</span>.charCodeAt(<span class=\"code-number\">0</span>),<span class=\"code-string\">\"1\"</span>.charCodeAt(<span class=\"code-number\">0</span>)]),I=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),A=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">118</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">86</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">0</span>]),L=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">83</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">97</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">0</span>]),P={<span class=\"code-attr\">video</span>:A,<span class=\"code-attr\">audio</span>:L},O=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">12</span>,<span class=\"code-number\">117</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),x=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),D=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),C=D,U=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),R=D,k=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>])}}(),t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;<span class=\"code-built_in\">arguments</span>.length;t++)n.push(<span class=\"code-built_in\">arguments</span>[t]);<span class=\"code-keyword\">for</span>(t=n.length;t--;)r+=n[t].byteLength;<span class=\"code-keyword\">for</span>(i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r+<span class=\"code-number\">8</span>),<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(i.buffer,i.byteOffset,i.byteLength).setUint32(<span class=\"code-number\">0</span>,i.byteLength),i.set(e,<span class=\"code-number\">4</span>),t=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">8</span>;t&lt;n.length;t++)i.set(n[t],r),r+=n[t].byteLength;<span class=\"code-keyword\">return</span> i},i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t(S.dinf,t(S.dref,O))},n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.esds,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>,<span class=\"code-number\">25</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">21</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">6</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">218</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">218</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">5</span>,<span class=\"code-number\">2</span>,e.audioobjecttype&lt;&lt;<span class=\"code-number\">3</span>|e.samplingfrequencyindex&gt;&gt;&gt;<span class=\"code-number\">1</span>,e.samplingfrequencyindex&lt;&lt;<span class=\"code-number\">7</span>|e.channelcount&lt;&lt;<span class=\"code-number\">3</span>,<span class=\"code-number\">6</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">2</span>]))},m=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.hdlr,P[e])},p=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">3</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">95</span>,<span class=\"code-number\">144</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,e.duration&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;e.duration,<span class=\"code-number\">85</span>,<span class=\"code-number\">196</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">return</span> e.samplerate&amp;&amp;(i[<span class=\"code-number\">12</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">13</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">14</span>]=e.samplerate&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,i[<span class=\"code-number\">15</span>]=<span class=\"code-number\">255</span>&amp;e.samplerate),t(S.mdhd,i)},f=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.mdia,p(e),m(e.type),s(e))},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.mfhd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e]))},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.minf,<span class=\"code-string\">\"video\"</span>===e.type?t(S.vmhd,k):t(S.smhd,x),i(),y(e))},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=[],r=i.length;r--;)n[r]=_(i[r]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[S.moof,a(e)].concat(n))},u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.length,n=[];i--;)n[i]=c(e[i]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[S.moov,l(<span class=\"code-number\">4294967295</span>)].concat(n).concat(d(e)))},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.length,n=[];i--;)n[i]=T(e[i]);<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,[S.mvex].concat(n))},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">95</span>,<span class=\"code-number\">144</span>,(<span class=\"code-number\">4278190080</span>&amp;e)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>]);<span class=\"code-keyword\">return</span> t(S.mvhd,i)},g=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=e.samples||[],a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">4</span>+r.length);<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;r.length;n++)i=r[n].flags,a[n+<span class=\"code-number\">4</span>]=i.dependsOn&lt;&lt;<span class=\"code-number\">4</span>|i.isDependedOn&lt;&lt;<span class=\"code-number\">2</span>|i.hasRedundancy;<span class=\"code-keyword\">return</span> t(S.sdtp,a)},y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.stbl,v(e),t(S.stts,R),t(S.stsc,C),t(S.stsz,U),t(S.stco,D))},v=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.stsd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]),<span class=\"code-string\">\"video\"</span>===e.type?M(e):B(e))},M=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;r.length;i++)s.push((<span class=\"code-number\">65280</span>&amp;r[i].byteLength)&gt;&gt;&gt;<span class=\"code-number\">8</span>),s.push(<span class=\"code-number\">255</span>&amp;r[i].byteLength),s=s.concat(<span class=\"code-built_in\">Array</span>.prototype.slice.call(r[i]));<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;a.length;i++)o.push((<span class=\"code-number\">65280</span>&amp;a[i].byteLength)&gt;&gt;&gt;<span class=\"code-number\">8</span>),o.push(<span class=\"code-number\">255</span>&amp;a[i].byteLength),o=o.concat(<span class=\"code-built_in\">Array</span>.prototype.slice.call(a[i]));<span class=\"code-keyword\">if</span>(n=[S.avc1,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.width)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.width,(<span class=\"code-number\">65280</span>&amp;e.height)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.height,<span class=\"code-number\">0</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">72</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">19</span>,<span class=\"code-number\">118</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">100</span>,<span class=\"code-number\">101</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">106</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">99</span>,<span class=\"code-number\">111</span>,<span class=\"code-number\">110</span>,<span class=\"code-number\">116</span>,<span class=\"code-number\">114</span>,<span class=\"code-number\">105</span>,<span class=\"code-number\">98</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">104</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">115</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">24</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">17</span>]),t(S.avcC,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">1</span>,e.profileIdc,e.profileCompatibility,e.levelIdc,<span class=\"code-number\">255</span>].concat([r.length],s,[a.length],o))),t(S.btrt,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">28</span>,<span class=\"code-number\">156</span>,<span class=\"code-number\">128</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">198</span>,<span class=\"code-number\">192</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">45</span>,<span class=\"code-number\">198</span>,<span class=\"code-number\">192</span>]))],e.sarRatio){<span class=\"code-keyword\">var</span> u=e.sarRatio[<span class=\"code-number\">0</span>],d=e.sarRatio[<span class=\"code-number\">1</span>];n.push(t(S.pasp,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([(<span class=\"code-number\">4278190080</span>&amp;u)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;u)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;u)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;u,(<span class=\"code-number\">4278190080</span>&amp;d)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;d)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;d)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;d])))}<span class=\"code-keyword\">return</span> t.apply(<span class=\"code-literal\">null</span>,n)},B=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.mp4a,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.channelcount)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.channelcount,(<span class=\"code-number\">65280</span>&amp;e.samplesize)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.samplesize,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.samplerate)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.samplerate,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]),n(e))},h=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">7</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.duration)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.duration,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">64</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.width)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.width,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">65280</span>&amp;e.height)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.height,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>]);<span class=\"code-keyword\">return</span> t(S.tkhd,i)},_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o;<span class=\"code-keyword\">return</span> i=t(S.tfhd,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">58</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>])),s=<span class=\"code-built_in\">Math</span>.floor(e.baseMediaDecodeTime/V),o=<span class=\"code-built_in\">Math</span>.floor(e.baseMediaDecodeTime%V),n=t(S.tfdt,<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,s&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,s&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,s&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;s,o&gt;&gt;&gt;<span class=\"code-number\">24</span>&amp;<span class=\"code-number\">255</span>,o&gt;&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>,o&gt;&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>,<span class=\"code-number\">255</span>&amp;o])),<span class=\"code-string\">\"audio\"</span>===e.type?(r=b(e,<span class=\"code-number\">92</span>),t(S.traf,i,n,r)):(a=g(e),r=b(e,a.length+<span class=\"code-number\">92</span>),t(S.traf,i,n,r,a))},c=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.duration=e.duration||<span class=\"code-number\">4294967295</span>,t(S.trak,h(e),f(e))},T=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,(<span class=\"code-number\">4278190080</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.id)&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.id,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video\"</span>!==e.type&amp;&amp;(i[i.length<span class=\"code-number\">-1</span>]=<span class=\"code-number\">0</span>),t(S.trex,i)},q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.length&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].duration&amp;&amp;(i=<span class=\"code-number\">1</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].size&amp;&amp;(n=<span class=\"code-number\">2</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].flags&amp;&amp;(r=<span class=\"code-number\">4</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e[<span class=\"code-number\">0</span>].compositionTimeOffset&amp;&amp;(a=<span class=\"code-number\">8</span>)),[<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,i|n|r|a,<span class=\"code-number\">1</span>,(<span class=\"code-number\">4278190080</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;e.length)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;e.length,(<span class=\"code-number\">4278190080</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">24</span>,(<span class=\"code-number\">16711680</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">16</span>,(<span class=\"code-number\">65280</span>&amp;t)&gt;&gt;&gt;<span class=\"code-number\">8</span>,<span class=\"code-number\">255</span>&amp;t]},F=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u;<span class=\"code-keyword\">for</span>(i+=<span class=\"code-number\">20</span>+<span class=\"code-number\">16</span>*(s=e.samples||[]).length,a=q(s,i),(r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.length+<span class=\"code-number\">16</span>*s.length)).set(a),n=a.length,u=<span class=\"code-number\">0</span>;u&lt;s.length;u++)o=s[u],r[n++]=(<span class=\"code-number\">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">24</span>,r[n++]=(<span class=\"code-number\">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">16</span>,r[n++]=(<span class=\"code-number\">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">8</span>,r[n++]=<span class=\"code-number\">255</span>&amp;o.duration,r[n++]=(<span class=\"code-number\">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">24</span>,r[n++]=(<span class=\"code-number\">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">16</span>,r[n++]=(<span class=\"code-number\">65280</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">8</span>,r[n++]=<span class=\"code-number\">255</span>&amp;o.size,r[n++]=o.flags.isLeading&lt;&lt;<span class=\"code-number\">2</span>|o.flags.dependsOn,r[n++]=o.flags.isDependedOn&lt;&lt;<span class=\"code-number\">6</span>|o.flags.hasRedundancy&lt;&lt;<span class=\"code-number\">4</span>|o.flags.paddingValue&lt;&lt;<span class=\"code-number\">1</span>|o.flags.isNonSyncSample,r[n++]=<span class=\"code-number\">61440</span>&amp;o.flags.degradationPriority,r[n++]=<span class=\"code-number\">15</span>&amp;o.flags.degradationPriority,r[n++]=(<span class=\"code-number\">4278190080</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">24</span>,r[n++]=(<span class=\"code-number\">16711680</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">16</span>,r[n++]=(<span class=\"code-number\">65280</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class=\"code-number\">8</span>,r[n++]=<span class=\"code-number\">255</span>&amp;o.compositionTimeOffset;<span class=\"code-keyword\">return</span> t(S.trun,r)},N=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u;<span class=\"code-keyword\">for</span>(i+=<span class=\"code-number\">20</span>+<span class=\"code-number\">8</span>*(s=e.samples||[]).length,a=q(s,i),(n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.length+<span class=\"code-number\">8</span>*s.length)).set(a),r=a.length,u=<span class=\"code-number\">0</span>;u&lt;s.length;u++)o=s[u],n[r++]=(<span class=\"code-number\">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">24</span>,n[r++]=(<span class=\"code-number\">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">16</span>,n[r++]=(<span class=\"code-number\">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class=\"code-number\">8</span>,n[r++]=<span class=\"code-number\">255</span>&amp;o.duration,n[r++]=(<span class=\"code-number\">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">24</span>,n[r++]=(<span class=\"code-number\">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">16</span>,n[r++]=(<span class=\"code-number\">65280</span>&amp;o.size)&gt;&gt;&gt;<span class=\"code-number\">8</span>,n[r++]=<span class=\"code-number\">255</span>&amp;o.size;<span class=\"code-keyword\">return</span> t(S.trun,n)},b=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio\"</span>===e.type?N(e,t):F(e,t)},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t(S.ftyp,w,I,w,E)};<span class=\"code-keyword\">var</span> j,X,z,Q,Y,K,$,J,Z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t(S.mdat,e)},ee=o,te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">flags</span>:{<span class=\"code-attr\">isLeading</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">dependsOn</span>:<span class=\"code-number\">1</span>,<span class=\"code-attr\">isDependedOn</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">hasRedundancy</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">degradationPriority</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">isNonSyncSample</span>:<span class=\"code-number\">1</span>}};<span class=\"code-keyword\">return</span> i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=<span class=\"code-number\">4</span>*e.length,i.size+=e.byteLength,e.keyFrame&amp;&amp;(i.flags.dependsOn=<span class=\"code-number\">2</span>,i.flags.isNonSyncSample=<span class=\"code-number\">0</span>),i},ie=[<span class=\"code-number\">33</span>,<span class=\"code-number\">16</span>,<span class=\"code-number\">5</span>,<span class=\"code-number\">32</span>,<span class=\"code-number\">164</span>,<span class=\"code-number\">27</span>],ne=[<span class=\"code-number\">33</span>,<span class=\"code-number\">65</span>,<span class=\"code-number\">108</span>,<span class=\"code-number\">84</span>,<span class=\"code-number\">1</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">168</span>,<span class=\"code-number\">2</span>,<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>,<span class=\"code-number\">17</span>,<span class=\"code-number\">191</span>,<span class=\"code-number\">252</span>],re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[];e--;)t.push(<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> t},ae=<span class=\"code-number\">9e4</span>;K=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> X(Y(e,t))},$=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> z(Q(e),t)},J=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> Q(i?e:e-t)};<span class=\"code-keyword\">var</span> se=ae,oe=X=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e*ae},ue=(z=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e*t},Q=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e/ae}),de=(Y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e/t},K),le=$,ce=J,he=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s,o,u,d=<span class=\"code-number\">0</span>,l=<span class=\"code-number\">0</span>,c=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(t.length&amp;&amp;(r=de(e.baseMediaDecodeTime,e.samplerate),a=<span class=\"code-built_in\">Math</span>.ceil(se/(e.samplerate/<span class=\"code-number\">1024</span>)),i&amp;&amp;n&amp;&amp;(d=r-<span class=\"code-built_in\">Math</span>.max(i,n),c=(l=<span class=\"code-built_in\">Math</span>.floor(d/a))*a),!(l&lt;<span class=\"code-number\">1</span>||c&gt;<span class=\"code-number\">45e3</span>))){<span class=\"code-keyword\">for</span>((s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!j){<span class=\"code-keyword\">var</span> e={<span class=\"code-number\">96e3</span>:[ie,[<span class=\"code-number\">227</span>,<span class=\"code-number\">64</span>],re(<span class=\"code-number\">154</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">88200</span>:[ie,[<span class=\"code-number\">231</span>],re(<span class=\"code-number\">170</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">64e3</span>:[ie,[<span class=\"code-number\">248</span>,<span class=\"code-number\">192</span>],re(<span class=\"code-number\">240</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">48e3</span>:[ie,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">148</span>,<span class=\"code-number\">128</span>],re(<span class=\"code-number\">54</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">44100</span>:[ie,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">163</span>,<span class=\"code-number\">128</span>],re(<span class=\"code-number\">84</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">32e3</span>:[ie,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">234</span>],re(<span class=\"code-number\">226</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">24e3</span>:[ie,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">128</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">111</span>,<span class=\"code-number\">112</span>],re(<span class=\"code-number\">126</span>),[<span class=\"code-number\">224</span>]],<span class=\"code-number\">16e3</span>:[ie,[<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">128</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">111</span>,<span class=\"code-number\">255</span>],re(<span class=\"code-number\">269</span>),[<span class=\"code-number\">223</span>,<span class=\"code-number\">108</span>],re(<span class=\"code-number\">195</span>),[<span class=\"code-number\">1</span>,<span class=\"code-number\">192</span>]],<span class=\"code-number\">12e3</span>:[ne,re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">127</span>,<span class=\"code-number\">248</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">6</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">240</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">13</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">224</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">27</span>,<span class=\"code-number\">253</span>,<span class=\"code-number\">128</span>],re(<span class=\"code-number\">259</span>),[<span class=\"code-number\">56</span>]],<span class=\"code-number\">11025</span>:[ne,re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">127</span>,<span class=\"code-number\">248</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">6</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">240</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">13</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">224</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">27</span>,<span class=\"code-number\">255</span>,<span class=\"code-number\">192</span>],re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">55</span>,<span class=\"code-number\">175</span>,<span class=\"code-number\">128</span>],re(<span class=\"code-number\">108</span>),[<span class=\"code-number\">112</span>]],<span class=\"code-number\">8e3</span>:[ne,re(<span class=\"code-number\">268</span>),[<span class=\"code-number\">3</span>,<span class=\"code-number\">121</span>,<span class=\"code-number\">16</span>],re(<span class=\"code-number\">47</span>),[<span class=\"code-number\">7</span>]]};t=e,j=<span class=\"code-built_in\">Object</span>.keys(t).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">return</span> e[i]=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t[i].reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.concat(t)}),[])),e}),{})}<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span> j}()[e.samplerate])||(s=t[<span class=\"code-number\">0</span>].data),o=<span class=\"code-number\">0</span>;o&lt;l;o++)u=t[<span class=\"code-number\">0</span>],t.splice(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,{<span class=\"code-attr\">data</span>:s,<span class=\"code-attr\">dts</span>:u.dts-a,<span class=\"code-attr\">pts</span>:u.pts-a});<span class=\"code-keyword\">return</span> e.baseMediaDecodeTime-=<span class=\"code-built_in\">Math</span>.floor(le(c,e.samplerate)),c}},fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">delete</span> e.minSegmentDts,<span class=\"code-keyword\">delete</span> e.maxSegmentDts,<span class=\"code-keyword\">delete</span> e.minSegmentPts,<span class=\"code-keyword\">delete</span> e.maxSegmentPts},pe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=e.minSegmentDts;<span class=\"code-keyword\">return</span> t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=<span class=\"code-built_in\">Math</span>.max(<span class=\"code-number\">0</span>,i),<span class=\"code-string\">\"audio\"</span>===e.type&amp;&amp;(i*=e.samplerate/<span class=\"code-number\">9e4</span>,i=<span class=\"code-built_in\">Math</span>.floor(i)),i},me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.pts&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.timelineStartInfo.pts&amp;&amp;(e.timelineStartInfo.pts=t.pts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=<span class=\"code-built_in\">Math</span>.min(e.minSegmentPts,t.pts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=<span class=\"code-built_in\">Math</span>.max(e.maxSegmentPts,t.pts)),<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.dts&amp;&amp;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.timelineStartInfo.dts&amp;&amp;(e.timelineStartInfo.dts=t.dts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=<span class=\"code-built_in\">Math</span>.min(e.minSegmentDts,t.dts),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=<span class=\"code-built_in\">Math</span>.max(e.maxSegmentDts,t.dts))},ge=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{t=t||{},e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.parse708captions_=<span class=\"code-string\">\"boolean\"</span>!=<span class=\"code-keyword\">typeof</span> t.parse708captions||t.parse708captions,<span class=\"code-keyword\">this</span>.captionPackets_=[],<span class=\"code-keyword\">this</span>.ccStreams_=[<span class=\"code-keyword\">new</span> Ae(<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> Ae(<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>),<span class=\"code-keyword\">new</span> Ae(<span class=\"code-number\">1</span>,<span class=\"code-number\">0</span>),<span class=\"code-keyword\">new</span> Ae(<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>)],<span class=\"code-keyword\">this</span>.parse708captions_&amp;&amp;(<span class=\"code-keyword\">this</span>.cc708Stream_=<span class=\"code-keyword\">new</span> be({<span class=\"code-attr\">captionServices</span>:t.captionServices})),<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.ccStreams_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),e.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"partialdone\"</span>)),e.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>))}),<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.parse708captions_&amp;&amp;(<span class=\"code-keyword\">this</span>.cc708Stream_.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),<span class=\"code-keyword\">this</span>.cc708Stream_.on(<span class=\"code-string\">\"partialdone\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"partialdone\"</span>)),<span class=\"code-keyword\">this</span>.cc708Stream_.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>)))};(ge.prototype=<span class=\"code-keyword\">new</span> H).push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"sei_rbsp\"</span>===e.nalUnitType&amp;&amp;(t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>,i={<span class=\"code-attr\">payloadType</span>:<span class=\"code-number\">-1</span>,<span class=\"code-attr\">payloadSize</span>:<span class=\"code-number\">0</span>},n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;t&lt;e.byteLength&amp;&amp;<span class=\"code-number\">128</span>!==e[t];){<span class=\"code-keyword\">for</span>(;<span class=\"code-number\">255</span>===e[t];)n+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">for</span>(n+=e[t++];<span class=\"code-number\">255</span>===e[t];)r+=<span class=\"code-number\">255</span>,t++;<span class=\"code-keyword\">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class=\"code-number\">4</span>===n){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"GA94\"</span>===<span class=\"code-built_in\">String</span>.fromCharCode(e[t+<span class=\"code-number\">3</span>],e[t+<span class=\"code-number\">4</span>],e[t+<span class=\"code-number\">5</span>],e[t+<span class=\"code-number\">6</span>])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class=\"code-keyword\">break</span>}i.payload=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}t+=r,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span> i}(e.escapedRBSP)).payload&amp;&amp;<span class=\"code-number\">4</span>===t.payloadType&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">181</span>!==e.payload[<span class=\"code-number\">0</span>]||<span class=\"code-number\">49</span>!=(e.payload[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">8</span>|e.payload[<span class=\"code-number\">2</span>])||<span class=\"code-string\">\"GA94\"</span>!==<span class=\"code-built_in\">String</span>.fromCharCode(e.payload[<span class=\"code-number\">3</span>],e.payload[<span class=\"code-number\">4</span>],e.payload[<span class=\"code-number\">5</span>],e.payload[<span class=\"code-number\">6</span>])||<span class=\"code-number\">3</span>!==e.payload[<span class=\"code-number\">7</span>]?<span class=\"code-literal\">null</span>:e.payload.subarray(<span class=\"code-number\">8</span>,e.payload.length<span class=\"code-number\">-1</span>)}(t)))<span class=\"code-keyword\">if</span>(e.dts&lt;<span class=\"code-keyword\">this</span>.latestDts_)<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.dts===<span class=\"code-keyword\">this</span>.latestDts_&amp;&amp;<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.numSameDts_--,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.numSameDts_||(<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>));n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s=[];<span class=\"code-keyword\">if</span>(!(<span class=\"code-number\">64</span>&amp;t[<span class=\"code-number\">0</span>]))<span class=\"code-keyword\">return</span> s;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">31</span>&amp;t[<span class=\"code-number\">0</span>],i=<span class=\"code-number\">0</span>;i&lt;n;i++)a={<span class=\"code-attr\">type</span>:<span class=\"code-number\">3</span>&amp;t[<span class=\"code-number\">2</span>+(r=<span class=\"code-number\">3</span>*i)],<span class=\"code-attr\">pts</span>:e},<span class=\"code-number\">4</span>&amp;t[r+<span class=\"code-number\">2</span>]&amp;&amp;(a.ccData=t[r+<span class=\"code-number\">3</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[r+<span class=\"code-number\">4</span>],s.push(a));<span class=\"code-keyword\">return</span> s}(e.pts,i),<span class=\"code-keyword\">this</span>.captionPackets_=<span class=\"code-keyword\">this</span>.captionPackets_.concat(n),<span class=\"code-keyword\">this</span>.latestDts_!==e.dts&amp;&amp;(<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.numSameDts_++,<span class=\"code-keyword\">this</span>.latestDts_=e.dts}},ge.prototype.flushCCStreams=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.ccStreams_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"flush\"</span>===e?t.flush():t.partialFlush()}),<span class=\"code-keyword\">this</span>)},ge.prototype.flushStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.captionPackets_.length?(<span class=\"code-keyword\">this</span>.captionPackets_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.presortIndex=t})),<span class=\"code-keyword\">this</span>.captionPackets_.sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),<span class=\"code-keyword\">this</span>.captionPackets_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.type&lt;<span class=\"code-number\">2</span>?<span class=\"code-keyword\">this</span>.dispatchCea608Packet(e):<span class=\"code-keyword\">this</span>.dispatchCea708Packet(e)}),<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.captionPackets_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.flushCCStreams(e)):<span class=\"code-keyword\">this</span>.flushCCStreams(e)},ge.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"flush\"</span>)},ge.prototype.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushStream(<span class=\"code-string\">\"partialFlush\"</span>)},ge.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.latestDts_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.ignoreNextEqualDts_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.numSameDts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.activeCea608Channel_=[<span class=\"code-literal\">null</span>,<span class=\"code-literal\">null</span>],<span class=\"code-keyword\">this</span>.ccStreams_.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.reset()}))},ge.prototype.dispatchCea608Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.setsTextOrXDSActive(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.setsChannel1Active(e)?<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">0</span>:<span class=\"code-keyword\">this</span>.setsChannel2Active(e)&amp;&amp;(<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]=<span class=\"code-number\">1</span>),<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class=\"code-keyword\">this</span>.ccStreams_[(e.type&lt;&lt;<span class=\"code-number\">1</span>)+<span class=\"code-keyword\">this</span>.activeCea608Channel_[e.type]].push(e)},ge.prototype.setsChannel1Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">4096</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},ge.prototype.setsChannel2Active=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>==(<span class=\"code-number\">30720</span>&amp;e.ccData)},ge.prototype.setsTextOrXDSActive=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">256</span>==(<span class=\"code-number\">28928</span>&amp;e.ccData)||<span class=\"code-number\">4138</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)||<span class=\"code-number\">6186</span>==(<span class=\"code-number\">30974</span>&amp;e.ccData)},ge.prototype.dispatchCea708Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.parse708captions_&amp;&amp;<span class=\"code-keyword\">this</span>.cc708Stream_.push(e)};<span class=\"code-keyword\">var</span> ye={<span class=\"code-number\">127</span>:<span class=\"code-number\">9834</span>,<span class=\"code-number\">4128</span>:<span class=\"code-number\">32</span>,<span class=\"code-number\">4129</span>:<span class=\"code-number\">160</span>,<span class=\"code-number\">4133</span>:<span class=\"code-number\">8230</span>,<span class=\"code-number\">4138</span>:<span class=\"code-number\">352</span>,<span class=\"code-number\">4140</span>:<span class=\"code-number\">338</span>,<span class=\"code-number\">4144</span>:<span class=\"code-number\">9608</span>,<span class=\"code-number\">4145</span>:<span class=\"code-number\">8216</span>,<span class=\"code-number\">4146</span>:<span class=\"code-number\">8217</span>,<span class=\"code-number\">4147</span>:<span class=\"code-number\">8220</span>,<span class=\"code-number\">4148</span>:<span class=\"code-number\">8221</span>,<span class=\"code-number\">4149</span>:<span class=\"code-number\">8226</span>,<span class=\"code-number\">4153</span>:<span class=\"code-number\">8482</span>,<span class=\"code-number\">4154</span>:<span class=\"code-number\">353</span>,<span class=\"code-number\">4156</span>:<span class=\"code-number\">339</span>,<span class=\"code-number\">4157</span>:<span class=\"code-number\">8480</span>,<span class=\"code-number\">4159</span>:<span class=\"code-number\">376</span>,<span class=\"code-number\">4214</span>:<span class=\"code-number\">8539</span>,<span class=\"code-number\">4215</span>:<span class=\"code-number\">8540</span>,<span class=\"code-number\">4216</span>:<span class=\"code-number\">8541</span>,<span class=\"code-number\">4217</span>:<span class=\"code-number\">8542</span>,<span class=\"code-number\">4218</span>:<span class=\"code-number\">9168</span>,<span class=\"code-number\">4219</span>:<span class=\"code-number\">9124</span>,<span class=\"code-number\">4220</span>:<span class=\"code-number\">9123</span>,<span class=\"code-number\">4221</span>:<span class=\"code-number\">9135</span>,<span class=\"code-number\">4222</span>:<span class=\"code-number\">9126</span>,<span class=\"code-number\">4223</span>:<span class=\"code-number\">9121</span>,<span class=\"code-number\">4256</span>:<span class=\"code-number\">12600</span>},ve=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">32</span>&lt;=e&amp;&amp;e&lt;=<span class=\"code-number\">127</span>||<span class=\"code-number\">160</span>&lt;=e&amp;&amp;e&lt;=<span class=\"code-number\">255</span>},_e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.windowNum=e,<span class=\"code-keyword\">this</span>.reset()};_e.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.clearText(),<span class=\"code-keyword\">this</span>.pendingNewLine=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.winAttr={},<span class=\"code-keyword\">this</span>.penAttr={},<span class=\"code-keyword\">this</span>.penLoc={},<span class=\"code-keyword\">this</span>.penColor={},<span class=\"code-keyword\">this</span>.visible=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.rowLock=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.columnLock=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.priority=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.relativePositioning=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.anchorVertical=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.anchorHorizontal=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.anchorPoint=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.rowCount=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.virtualRowCount=<span class=\"code-keyword\">this</span>.rowCount+<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.columnCount=<span class=\"code-number\">41</span>,<span class=\"code-keyword\">this</span>.windowStyle=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.penStyle=<span class=\"code-number\">0</span>},_e.prototype.getText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.rows.join(<span class=\"code-string\">\"\\n\"</span>)},_e.prototype.clearText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.rows=[<span class=\"code-string\">\"\"</span>],<span class=\"code-keyword\">this</span>.rowIdx=<span class=\"code-number\">0</span>},_e.prototype.newLine=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.rows.length&gt;=<span class=\"code-keyword\">this</span>.virtualRowCount&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.beforeRowOverflow&amp;&amp;<span class=\"code-keyword\">this</span>.beforeRowOverflow(e),<span class=\"code-keyword\">this</span>.rows.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(<span class=\"code-keyword\">this</span>.rows.push(<span class=\"code-string\">\"\"</span>),<span class=\"code-keyword\">this</span>.rowIdx++);<span class=\"code-keyword\">this</span>.rows.length&gt;<span class=\"code-keyword\">this</span>.virtualRowCount;)<span class=\"code-keyword\">this</span>.rows.shift(),<span class=\"code-keyword\">this</span>.rowIdx--},_e.prototype.isEmpty=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.rows.length||<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.rows.length&amp;&amp;<span class=\"code-string\">\"\"</span>===<span class=\"code-keyword\">this</span>.rows[<span class=\"code-number\">0</span>]},_e.prototype.addText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.rows[<span class=\"code-keyword\">this</span>.rowIdx]+=e},_e.prototype.backspace=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isEmpty()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.rows[<span class=\"code-keyword\">this</span>.rowIdx];<span class=\"code-keyword\">this</span>.rows[<span class=\"code-keyword\">this</span>.rowIdx]=e.substr(<span class=\"code-number\">0</span>,e.length<span class=\"code-number\">-1</span>)}};<span class=\"code-keyword\">var</span> Te=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">this</span>.serviceNum=e,<span class=\"code-keyword\">this</span>.text=<span class=\"code-string\">\"\"</span>,<span class=\"code-keyword\">this</span>.currentWindow=<span class=\"code-keyword\">new</span> _e(<span class=\"code-number\">-1</span>),<span class=\"code-keyword\">this</span>.windows=[],<span class=\"code-keyword\">this</span>.stream=i,<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-keyword\">this</span>.createTextDecoder(t)};Te.prototype.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.startPts=e;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;<span class=\"code-number\">8</span>;i++)<span class=\"code-keyword\">this</span>.windows[i]=<span class=\"code-keyword\">new</span> _e(i),<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;(<span class=\"code-keyword\">this</span>.windows[i].beforeRowOverflow=t)},Te.prototype.setCurrentWindow=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.currentWindow=<span class=\"code-keyword\">this</span>.windows[e]},Te.prototype.createTextDecoder=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"undefined\"</span>==<span class=\"code-keyword\">typeof</span> TextDecoder)<span class=\"code-keyword\">this</span>.stream.trigger(<span class=\"code-string\">\"log\"</span>,{<span class=\"code-attr\">level</span>:<span class=\"code-string\">\"warn\"</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"The `encoding` option is unsupported without TextDecoder support\"</span>});<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">this</span>.textDecoder_=<span class=\"code-keyword\">new</span> TextDecoder(e)}<span class=\"code-keyword\">catch</span>(t){<span class=\"code-keyword\">this</span>.stream.trigger(<span class=\"code-string\">\"log\"</span>,{<span class=\"code-attr\">level</span>:<span class=\"code-string\">\"warn\"</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"TextDecoder could not be created with \"</span>+e+<span class=\"code-string\">\" encoding. \"</span>+t})}};<span class=\"code-keyword\">var</span> be=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{t=t||{},e.prototype.init.call(<span class=\"code-keyword\">this</span>);<span class=\"code-keyword\">var</span> i,n=<span class=\"code-keyword\">this</span>,r=t.captionServices||{},a={};<span class=\"code-built_in\">Object</span>.keys(r).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i=r[e],/^SERVICE/.test(e)&amp;&amp;(a[e]=i.encoding)})),<span class=\"code-keyword\">this</span>.serviceEncodings=a,<span class=\"code-keyword\">this</span>.current708Packet=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.services={},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-number\">3</span>===e.type?(n.new708Packet(),n.add708Bytes(e)):(<span class=\"code-literal\">null</span>===n.current708Packet&amp;&amp;n.new708Packet(),n.add708Bytes(e))}};be.prototype=<span class=\"code-keyword\">new</span> H,be.prototype.new708Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.current708Packet&amp;&amp;<span class=\"code-keyword\">this</span>.push708Packet(),<span class=\"code-keyword\">this</span>.current708Packet={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">ptsVals</span>:[]}},be.prototype.add708Bytes=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.ccData,i=t&gt;&gt;&gt;<span class=\"code-number\">8</span>,n=<span class=\"code-number\">255</span>&amp;t;<span class=\"code-keyword\">this</span>.current708Packet.ptsVals.push(e.pts),<span class=\"code-keyword\">this</span>.current708Packet.data.push(i),<span class=\"code-keyword\">this</span>.current708Packet.data.push(n)},be.prototype.push708Packet=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.current708Packet,t=e.data,i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>,r=<span class=\"code-number\">0</span>,a=t[r++];<span class=\"code-keyword\">for</span>(e.seq=a&gt;&gt;<span class=\"code-number\">6</span>,e.sizeCode=<span class=\"code-number\">63</span>&amp;a;r&lt;t.length;r++)n=<span class=\"code-number\">31</span>&amp;(a=t[r++]),<span class=\"code-number\">7</span>==(i=a&gt;&gt;<span class=\"code-number\">5</span>)&amp;&amp;n&gt;<span class=\"code-number\">0</span>&amp;&amp;(i=a=t[r++]),<span class=\"code-keyword\">this</span>.pushServiceBlock(i,r,n),n&gt;<span class=\"code-number\">0</span>&amp;&amp;(r+=n<span class=\"code-number\">-1</span>)},be.prototype.pushServiceBlock=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=t,a=<span class=\"code-keyword\">this</span>.current708Packet.data,s=<span class=\"code-keyword\">this</span>.services[e];<span class=\"code-keyword\">for</span>(s||(s=<span class=\"code-keyword\">this</span>.initService(e,r));r&lt;t+i&amp;&amp;r&lt;a.length;r++)n=a[r],ve(n)?r=<span class=\"code-keyword\">this</span>.handleText(r,s):<span class=\"code-number\">24</span>===n?r=<span class=\"code-keyword\">this</span>.multiByteCharacter(r,s):<span class=\"code-number\">16</span>===n?r=<span class=\"code-keyword\">this</span>.extendedCommands(r,s):<span class=\"code-number\">128</span>&lt;=n&amp;&amp;n&lt;=<span class=\"code-number\">135</span>?r=<span class=\"code-keyword\">this</span>.setCurrentWindow(r,s):<span class=\"code-number\">152</span>&lt;=n&amp;&amp;n&lt;=<span class=\"code-number\">159</span>?r=<span class=\"code-keyword\">this</span>.defineWindow(r,s):<span class=\"code-number\">136</span>===n?r=<span class=\"code-keyword\">this</span>.clearWindows(r,s):<span class=\"code-number\">140</span>===n?r=<span class=\"code-keyword\">this</span>.deleteWindows(r,s):<span class=\"code-number\">137</span>===n?r=<span class=\"code-keyword\">this</span>.displayWindows(r,s):<span class=\"code-number\">138</span>===n?r=<span class=\"code-keyword\">this</span>.hideWindows(r,s):<span class=\"code-number\">139</span>===n?r=<span class=\"code-keyword\">this</span>.toggleWindows(r,s):<span class=\"code-number\">151</span>===n?r=<span class=\"code-keyword\">this</span>.setWindowAttributes(r,s):<span class=\"code-number\">144</span>===n?r=<span class=\"code-keyword\">this</span>.setPenAttributes(r,s):<span class=\"code-number\">145</span>===n?r=<span class=\"code-keyword\">this</span>.setPenColor(r,s):<span class=\"code-number\">146</span>===n?r=<span class=\"code-keyword\">this</span>.setPenLocation(r,s):<span class=\"code-number\">143</span>===n?s=<span class=\"code-keyword\">this</span>.reset(r,s):<span class=\"code-number\">8</span>===n?s.currentWindow.backspace():<span class=\"code-number\">12</span>===n?s.currentWindow.clearText():<span class=\"code-number\">13</span>===n?s.currentWindow.pendingNewLine=!<span class=\"code-number\">0</span>:<span class=\"code-number\">14</span>===n?s.currentWindow.clearText():<span class=\"code-number\">141</span>===n&amp;&amp;r++},be.prototype.extendedCommands=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e];<span class=\"code-keyword\">return</span> ve(i)&amp;&amp;(e=<span class=\"code-keyword\">this</span>.handleText(e,t,{<span class=\"code-attr\">isExtended</span>:!<span class=\"code-number\">0</span>})),e},be.prototype.getPts=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.current708Packet.ptsVals[<span class=\"code-built_in\">Math</span>.floor(e/<span class=\"code-number\">2</span>)]},be.prototype.initService=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">return</span>(i=<span class=\"code-string\">\"SERVICE\"</span>+e)<span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.serviceEncodings&amp;&amp;(n=<span class=\"code-keyword\">this</span>.serviceEncodings[i]),<span class=\"code-keyword\">this</span>.services[e]=<span class=\"code-keyword\">new</span> Te(e,n,r),<span class=\"code-keyword\">this</span>.services[e].init(<span class=\"code-keyword\">this</span>.getPts(t),(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{r.flushDisplayed(t,r.services[e])})),<span class=\"code-keyword\">this</span>.services[e]},be.prototype.handleText=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=i&amp;&amp;i.isExtended,u=i&amp;&amp;i.isMultiByte,d=<span class=\"code-keyword\">this</span>.current708Packet.data,l=o?<span class=\"code-number\">4096</span>:<span class=\"code-number\">0</span>,c=d[e],h=d[e+<span class=\"code-number\">1</span>],f=t.currentWindow;<span class=\"code-keyword\">return</span> t.textDecoder_&amp;&amp;!o?(u?(r=[c,h],e++):r=[c],n=t.textDecoder_.decode(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r))):(s=ye[a=l|c]||a,n=<span class=\"code-number\">4096</span>&amp;a&amp;&amp;a===s?<span class=\"code-string\">\"\"</span>:<span class=\"code-built_in\">String</span>.fromCharCode(s)),f.pendingNewLine&amp;&amp;!f.isEmpty()&amp;&amp;f.newLine(<span class=\"code-keyword\">this</span>.getPts(e)),f.pendingNewLine=!<span class=\"code-number\">1</span>,f.addText(n),e},be.prototype.multiByteCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e+<span class=\"code-number\">1</span>],r=i[e+<span class=\"code-number\">2</span>];<span class=\"code-keyword\">return</span> ve(n)&amp;&amp;ve(r)&amp;&amp;(e=<span class=\"code-keyword\">this</span>.handleText(++e,t,{<span class=\"code-attr\">isMultiByte</span>:!<span class=\"code-number\">0</span>})),e},be.prototype.setCurrentWindow=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">7</span>&amp;<span class=\"code-keyword\">this</span>.current708Packet.data[e];<span class=\"code-keyword\">return</span> t.setCurrentWindow(i),e},be.prototype.defineWindow=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=<span class=\"code-number\">7</span>&amp;n;t.setCurrentWindow(r);<span class=\"code-keyword\">var</span> a=t.currentWindow;<span class=\"code-keyword\">return</span> n=i[++e],a.visible=(<span class=\"code-number\">32</span>&amp;n)&gt;&gt;<span class=\"code-number\">5</span>,a.rowLock=(<span class=\"code-number\">16</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,a.columnLock=(<span class=\"code-number\">8</span>&amp;n)&gt;&gt;<span class=\"code-number\">3</span>,a.priority=<span class=\"code-number\">7</span>&amp;n,n=i[++e],a.relativePositioning=(<span class=\"code-number\">128</span>&amp;n)&gt;&gt;<span class=\"code-number\">7</span>,a.anchorVertical=<span class=\"code-number\">127</span>&amp;n,n=i[++e],a.anchorHorizontal=n,n=i[++e],a.anchorPoint=(<span class=\"code-number\">240</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,a.rowCount=<span class=\"code-number\">15</span>&amp;n,n=i[++e],a.columnCount=<span class=\"code-number\">63</span>&amp;n,n=i[++e],a.windowStyle=(<span class=\"code-number\">56</span>&amp;n)&gt;&gt;<span class=\"code-number\">3</span>,a.penStyle=<span class=\"code-number\">7</span>&amp;n,a.virtualRowCount=a.rowCount+<span class=\"code-number\">1</span>,e},be.prototype.setWindowAttributes=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;<span class=\"code-keyword\">return</span> n=i[++e],r.fillOpacity=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.fillRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.fillGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.fillBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.borderType=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.borderRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.borderGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.borderBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.borderType+=(<span class=\"code-number\">128</span>&amp;n)&gt;&gt;<span class=\"code-number\">5</span>,r.wordWrap=(<span class=\"code-number\">64</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.printDirection=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.scrollDirection=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.justify=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.effectSpeed=(<span class=\"code-number\">240</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.effectDirection=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.displayEffect=<span class=\"code-number\">3</span>&amp;n,e},be.prototype.flushDisplayed=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=[],n=<span class=\"code-number\">0</span>;n&lt;<span class=\"code-number\">8</span>;n++)t.windows[n].visible&amp;&amp;!t.windows[n].isEmpty()&amp;&amp;i.push(t.windows[n].getText());t.endPts=e,t.text=i.join(<span class=\"code-string\">\"\\n\\n\"</span>),<span class=\"code-keyword\">this</span>.pushCaption(t),t.startPts=e},be.prototype.pushCaption=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"\"</span>!==e.text&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">startPts</span>:e.startPts,<span class=\"code-attr\">endPts</span>:e.endPts,<span class=\"code-attr\">text</span>:e.text,<span class=\"code-attr\">stream</span>:<span class=\"code-string\">\"cc708_\"</span>+e.serviceNum}),e.text=<span class=\"code-string\">\"\"</span>,e.startPts=e.endPts)},be.prototype.displayWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class=\"code-number\">1</span>);<span class=\"code-keyword\">return</span> e},be.prototype.hideWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> e},be.prototype.toggleWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible^=<span class=\"code-number\">1</span>);<span class=\"code-keyword\">return</span> e},be.prototype.clearWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;t.windows[r].clearText();<span class=\"code-keyword\">return</span> e},be.prototype.deleteWindows=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data[++e],n=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">this</span>.flushDisplayed(n,t);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;<span class=\"code-number\">8</span>;r++)i&amp;<span class=\"code-number\">1</span>&lt;&lt;r&amp;&amp;t.windows[r].reset();<span class=\"code-keyword\">return</span> e},be.prototype.setPenAttributes=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;<span class=\"code-keyword\">return</span> n=i[++e],r.textTag=(<span class=\"code-number\">240</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.offset=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.penSize=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.italics=(<span class=\"code-number\">128</span>&amp;n)&gt;&gt;<span class=\"code-number\">7</span>,r.underline=(<span class=\"code-number\">64</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.edgeType=(<span class=\"code-number\">56</span>&amp;n)&gt;&gt;<span class=\"code-number\">3</span>,r.fontStyle=<span class=\"code-number\">7</span>&amp;n,e},be.prototype.setPenColor=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penColor;<span class=\"code-keyword\">return</span> n=i[++e],r.fgOpacity=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.fgRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.fgGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.fgBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.bgOpacity=(<span class=\"code-number\">192</span>&amp;n)&gt;&gt;<span class=\"code-number\">6</span>,r.bgRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.bgGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.bgBlue=<span class=\"code-number\">3</span>&amp;n,n=i[++e],r.edgeRed=(<span class=\"code-number\">48</span>&amp;n)&gt;&gt;<span class=\"code-number\">4</span>,r.edgeGreen=(<span class=\"code-number\">12</span>&amp;n)&gt;&gt;<span class=\"code-number\">2</span>,r.edgeBlue=<span class=\"code-number\">3</span>&amp;n,e},be.prototype.setPenLocation=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;<span class=\"code-keyword\">return</span> t.currentWindow.pendingNewLine=!<span class=\"code-number\">0</span>,n=i[++e],r.row=<span class=\"code-number\">15</span>&amp;n,n=i[++e],r.column=<span class=\"code-number\">63</span>&amp;n,e},be.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.getPts(e);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.flushDisplayed(i,t),<span class=\"code-keyword\">this</span>.initService(t.serviceNum,e)};<span class=\"code-keyword\">var</span> Se={<span class=\"code-number\">42</span>:<span class=\"code-number\">225</span>,<span class=\"code-number\">92</span>:<span class=\"code-number\">233</span>,<span class=\"code-number\">94</span>:<span class=\"code-number\">237</span>,<span class=\"code-number\">95</span>:<span class=\"code-number\">243</span>,<span class=\"code-number\">96</span>:<span class=\"code-number\">250</span>,<span class=\"code-number\">123</span>:<span class=\"code-number\">231</span>,<span class=\"code-number\">124</span>:<span class=\"code-number\">247</span>,<span class=\"code-number\">125</span>:<span class=\"code-number\">209</span>,<span class=\"code-number\">126</span>:<span class=\"code-number\">241</span>,<span class=\"code-number\">127</span>:<span class=\"code-number\">9608</span>,<span class=\"code-number\">304</span>:<span class=\"code-number\">174</span>,<span class=\"code-number\">305</span>:<span class=\"code-number\">176</span>,<span class=\"code-number\">306</span>:<span class=\"code-number\">189</span>,<span class=\"code-number\">307</span>:<span class=\"code-number\">191</span>,<span class=\"code-number\">308</span>:<span class=\"code-number\">8482</span>,<span class=\"code-number\">309</span>:<span class=\"code-number\">162</span>,<span class=\"code-number\">310</span>:<span class=\"code-number\">163</span>,<span class=\"code-number\">311</span>:<span class=\"code-number\">9834</span>,<span class=\"code-number\">312</span>:<span class=\"code-number\">224</span>,<span class=\"code-number\">313</span>:<span class=\"code-number\">160</span>,<span class=\"code-number\">314</span>:<span class=\"code-number\">232</span>,<span class=\"code-number\">315</span>:<span class=\"code-number\">226</span>,<span class=\"code-number\">316</span>:<span class=\"code-number\">234</span>,<span class=\"code-number\">317</span>:<span class=\"code-number\">238</span>,<span class=\"code-number\">318</span>:<span class=\"code-number\">244</span>,<span class=\"code-number\">319</span>:<span class=\"code-number\">251</span>,<span class=\"code-number\">544</span>:<span class=\"code-number\">193</span>,<span class=\"code-number\">545</span>:<span class=\"code-number\">201</span>,<span class=\"code-number\">546</span>:<span class=\"code-number\">211</span>,<span class=\"code-number\">547</span>:<span class=\"code-number\">218</span>,<span class=\"code-number\">548</span>:<span class=\"code-number\">220</span>,<span class=\"code-number\">549</span>:<span class=\"code-number\">252</span>,<span class=\"code-number\">550</span>:<span class=\"code-number\">8216</span>,<span class=\"code-number\">551</span>:<span class=\"code-number\">161</span>,<span class=\"code-number\">552</span>:<span class=\"code-number\">42</span>,<span class=\"code-number\">553</span>:<span class=\"code-number\">39</span>,<span class=\"code-number\">554</span>:<span class=\"code-number\">8212</span>,<span class=\"code-number\">555</span>:<span class=\"code-number\">169</span>,<span class=\"code-number\">556</span>:<span class=\"code-number\">8480</span>,<span class=\"code-number\">557</span>:<span class=\"code-number\">8226</span>,<span class=\"code-number\">558</span>:<span class=\"code-number\">8220</span>,<span class=\"code-number\">559</span>:<span class=\"code-number\">8221</span>,<span class=\"code-number\">560</span>:<span class=\"code-number\">192</span>,<span class=\"code-number\">561</span>:<span class=\"code-number\">194</span>,<span class=\"code-number\">562</span>:<span class=\"code-number\">199</span>,<span class=\"code-number\">563</span>:<span class=\"code-number\">200</span>,<span class=\"code-number\">564</span>:<span class=\"code-number\">202</span>,<span class=\"code-number\">565</span>:<span class=\"code-number\">203</span>,<span class=\"code-number\">566</span>:<span class=\"code-number\">235</span>,<span class=\"code-number\">567</span>:<span class=\"code-number\">206</span>,<span class=\"code-number\">568</span>:<span class=\"code-number\">207</span>,<span class=\"code-number\">569</span>:<span class=\"code-number\">239</span>,<span class=\"code-number\">570</span>:<span class=\"code-number\">212</span>,<span class=\"code-number\">571</span>:<span class=\"code-number\">217</span>,<span class=\"code-number\">572</span>:<span class=\"code-number\">249</span>,<span class=\"code-number\">573</span>:<span class=\"code-number\">219</span>,<span class=\"code-number\">574</span>:<span class=\"code-number\">171</span>,<span class=\"code-number\">575</span>:<span class=\"code-number\">187</span>,<span class=\"code-number\">800</span>:<span class=\"code-number\">195</span>,<span class=\"code-number\">801</span>:<span class=\"code-number\">227</span>,<span class=\"code-number\">802</span>:<span class=\"code-number\">205</span>,<span class=\"code-number\">803</span>:<span class=\"code-number\">204</span>,<span class=\"code-number\">804</span>:<span class=\"code-number\">236</span>,<span class=\"code-number\">805</span>:<span class=\"code-number\">210</span>,<span class=\"code-number\">806</span>:<span class=\"code-number\">242</span>,<span class=\"code-number\">807</span>:<span class=\"code-number\">213</span>,<span class=\"code-number\">808</span>:<span class=\"code-number\">245</span>,<span class=\"code-number\">809</span>:<span class=\"code-number\">123</span>,<span class=\"code-number\">810</span>:<span class=\"code-number\">125</span>,<span class=\"code-number\">811</span>:<span class=\"code-number\">92</span>,<span class=\"code-number\">812</span>:<span class=\"code-number\">94</span>,<span class=\"code-number\">813</span>:<span class=\"code-number\">95</span>,<span class=\"code-number\">814</span>:<span class=\"code-number\">124</span>,<span class=\"code-number\">815</span>:<span class=\"code-number\">126</span>,<span class=\"code-number\">816</span>:<span class=\"code-number\">196</span>,<span class=\"code-number\">817</span>:<span class=\"code-number\">228</span>,<span class=\"code-number\">818</span>:<span class=\"code-number\">214</span>,<span class=\"code-number\">819</span>:<span class=\"code-number\">246</span>,<span class=\"code-number\">820</span>:<span class=\"code-number\">223</span>,<span class=\"code-number\">821</span>:<span class=\"code-number\">165</span>,<span class=\"code-number\">822</span>:<span class=\"code-number\">164</span>,<span class=\"code-number\">823</span>:<span class=\"code-number\">9474</span>,<span class=\"code-number\">824</span>:<span class=\"code-number\">197</span>,<span class=\"code-number\">825</span>:<span class=\"code-number\">229</span>,<span class=\"code-number\">826</span>:<span class=\"code-number\">216</span>,<span class=\"code-number\">827</span>:<span class=\"code-number\">248</span>,<span class=\"code-number\">828</span>:<span class=\"code-number\">9484</span>,<span class=\"code-number\">829</span>:<span class=\"code-number\">9488</span>,<span class=\"code-number\">830</span>:<span class=\"code-number\">9492</span>,<span class=\"code-number\">831</span>:<span class=\"code-number\">9496</span>},we=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===e?<span class=\"code-string\">\"\"</span>:(e=Se[e]||e,<span class=\"code-built_in\">String</span>.fromCharCode(e))},Ie=[<span class=\"code-number\">4352</span>,<span class=\"code-number\">4384</span>,<span class=\"code-number\">4608</span>,<span class=\"code-number\">4640</span>,<span class=\"code-number\">5376</span>,<span class=\"code-number\">5408</span>,<span class=\"code-number\">5632</span>,<span class=\"code-number\">5664</span>,<span class=\"code-number\">5888</span>,<span class=\"code-number\">5920</span>,<span class=\"code-number\">4096</span>,<span class=\"code-number\">4864</span>,<span class=\"code-number\">4896</span>,<span class=\"code-number\">5120</span>,<span class=\"code-number\">5152</span>],Ee=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> e=[],t=<span class=\"code-number\">15</span>;t--;)e.push(<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">return</span> e},Ae=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.field_=t||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.dataChannel_=i||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.name_=<span class=\"code-string\">\"CC\"</span>+(<span class=\"code-number\">1</span>+(<span class=\"code-keyword\">this</span>.field_&lt;&lt;<span class=\"code-number\">1</span>|<span class=\"code-keyword\">this</span>.dataChannel_)),<span class=\"code-keyword\">this</span>.setConstants(),<span class=\"code-keyword\">this</span>.reset(),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a;<span class=\"code-keyword\">if</span>((t=<span class=\"code-number\">32639</span>&amp;e.ccData)!==<span class=\"code-keyword\">this</span>.lastControlCode_){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4096</span>==(<span class=\"code-number\">61440</span>&amp;t)?<span class=\"code-keyword\">this</span>.lastControlCode_=t:t!==<span class=\"code-keyword\">this</span>.PADDING_&amp;&amp;(<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>),n=t&gt;&gt;&gt;<span class=\"code-number\">8</span>,r=<span class=\"code-number\">255</span>&amp;t,t!==<span class=\"code-keyword\">this</span>.PADDING_)<span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.END_OF_CAPTION_)<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),i=<span class=\"code-keyword\">this</span>.displayed_,<span class=\"code-keyword\">this</span>.displayed_=<span class=\"code-keyword\">this</span>.nonDisplayed_,<span class=\"code-keyword\">this</span>.nonDisplayed_=i,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">3</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_)<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">4</span>,<span class=\"code-keyword\">this</span>.setRollUp(e.pts);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_)<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.shiftRowsUp_(),<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.BACKSPACE_)<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=Ee();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class=\"code-keyword\">this</span>.nonDisplayed_=Ee();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t===<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_)<span class=\"code-string\">\"paintOn\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.flushDisplayed(e.pts),<span class=\"code-keyword\">this</span>.displayed_=Ee()),<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"paintOn\"</span>,<span class=\"code-keyword\">this</span>.startPts_=e.pts;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isSpecialCharacter(n,r))a=we((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isExtCharacter(n,r))<span class=\"code-string\">\"popOn\"</span>===<span class=\"code-keyword\">this</span>.mode_?<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>):<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_].slice(<span class=\"code-number\">0</span>,<span class=\"code-number\">-1</span>),a=we((n=(<span class=\"code-number\">3</span>&amp;n)&lt;&lt;<span class=\"code-number\">8</span>)|r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_++;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isMidRowCode(n,r))<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,<span class=\"code-string\">\" \"</span>),<span class=\"code-keyword\">this</span>.column_++,<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>]),<span class=\"code-number\">1</span>==(<span class=\"code-number\">1</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isOffsetControlCode(n,r))<span class=\"code-keyword\">this</span>.column_+=<span class=\"code-number\">3</span>&amp;r;<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isPAC(n,r)){<span class=\"code-keyword\">var</span> s=Ie.indexOf(<span class=\"code-number\">7968</span>&amp;t);<span class=\"code-string\">\"rollUp\"</span>===<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(s-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>&lt;<span class=\"code-number\">0</span>&amp;&amp;(s=<span class=\"code-keyword\">this</span>.rollUpRows_<span class=\"code-number\">-1</span>),<span class=\"code-keyword\">this</span>.setRollUp(e.pts,s)),s!==<span class=\"code-keyword\">this</span>.row_&amp;&amp;(<span class=\"code-keyword\">this</span>.clearFormatting(e.pts),<span class=\"code-keyword\">this</span>.row_=s),<span class=\"code-number\">1</span>&amp;r&amp;&amp;<span class=\"code-number\">-1</span>===<span class=\"code-keyword\">this</span>.formatting_.indexOf(<span class=\"code-string\">\"u\"</span>)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"u\"</span>]),<span class=\"code-number\">16</span>==(<span class=\"code-number\">16</span>&amp;t)&amp;&amp;(<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">4</span>*((<span class=\"code-number\">14</span>&amp;t)&gt;&gt;<span class=\"code-number\">1</span>)),<span class=\"code-keyword\">this</span>.isColorPAC(r)&amp;&amp;<span class=\"code-number\">14</span>==(<span class=\"code-number\">14</span>&amp;r)&amp;&amp;<span class=\"code-keyword\">this</span>.addFormatting(e.pts,[<span class=\"code-string\">\"i\"</span>])}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.isNormalChar(n)&amp;&amp;(<span class=\"code-number\">0</span>===r&amp;&amp;(r=<span class=\"code-literal\">null</span>),a=we(n),a+=we(r),<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e.pts,a),<span class=\"code-keyword\">this</span>.column_+=a.length)}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>}};Ae.prototype=<span class=\"code-keyword\">new</span> H,Ae.prototype.flushDisplayed=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.displayed_.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> e.trim()}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"log\"</span>,{<span class=\"code-attr\">level</span>:<span class=\"code-string\">\"warn\"</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Skipping a malformed 608 caption at index \"</span>+t+<span class=\"code-string\">\".\"</span>}),<span class=\"code-string\">\"\"</span>}}),<span class=\"code-keyword\">this</span>).join(<span class=\"code-string\">\"\\n\"</span>).replace(<span class=\"code-regexp\">/^\\n+|\\n+$/g</span>,<span class=\"code-string\">\"\"</span>);t.length&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">startPts</span>:<span class=\"code-keyword\">this</span>.startPts_,<span class=\"code-attr\">endPts</span>:e,<span class=\"code-attr\">text</span>:t,<span class=\"code-attr\">stream</span>:<span class=\"code-keyword\">this</span>.name_})},Ae.prototype.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"popOn\"</span>,<span class=\"code-keyword\">this</span>.topRow_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.startPts_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.displayed_=Ee(),<span class=\"code-keyword\">this</span>.nonDisplayed_=Ee(),<span class=\"code-keyword\">this</span>.lastControlCode_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.column_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.rollUpRows_=<span class=\"code-number\">2</span>,<span class=\"code-keyword\">this</span>.formatting_=[]},Ae.prototype.setConstants=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.dataChannel_?(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">16</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">17</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">20</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">23</span>):<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.dataChannel_&amp;&amp;(<span class=\"code-keyword\">this</span>.BASE_=<span class=\"code-number\">24</span>,<span class=\"code-keyword\">this</span>.EXT_=<span class=\"code-number\">25</span>,<span class=\"code-keyword\">this</span>.CONTROL_=(<span class=\"code-number\">28</span>|<span class=\"code-keyword\">this</span>.field_)&lt;&lt;<span class=\"code-number\">8</span>,<span class=\"code-keyword\">this</span>.OFFSET_=<span class=\"code-number\">31</span>),<span class=\"code-keyword\">this</span>.PADDING_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.RESUME_CAPTION_LOADING_=<span class=\"code-number\">32</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.END_OF_CAPTION_=<span class=\"code-number\">47</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_2_ROWS_=<span class=\"code-number\">37</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_3_ROWS_=<span class=\"code-number\">38</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ROLL_UP_4_ROWS_=<span class=\"code-number\">39</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.CARRIAGE_RETURN_=<span class=\"code-number\">45</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.RESUME_DIRECT_CAPTIONING_=<span class=\"code-number\">41</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.BACKSPACE_=<span class=\"code-number\">33</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_DISPLAYED_MEMORY_=<span class=\"code-number\">44</span>|<span class=\"code-keyword\">this</span>.CONTROL_,<span class=\"code-keyword\">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class=\"code-number\">46</span>|<span class=\"code-keyword\">this</span>.CONTROL_},Ae.prototype.isSpecialCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">48</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},Ae.prototype.isExtCharacter=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>(e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">1</span>||e===<span class=\"code-keyword\">this</span>.EXT_+<span class=\"code-number\">2</span>)&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">63</span>},Ae.prototype.isMidRowCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.EXT_&amp;&amp;t&gt;=<span class=\"code-number\">32</span>&amp;&amp;t&lt;=<span class=\"code-number\">47</span>},Ae.prototype.isOffsetControlCode=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e===<span class=\"code-keyword\">this</span>.OFFSET_&amp;&amp;t&gt;=<span class=\"code-number\">33</span>&amp;&amp;t&lt;=<span class=\"code-number\">35</span>},Ae.prototype.isPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-keyword\">this</span>.BASE_&amp;&amp;e&lt;<span class=\"code-keyword\">this</span>.BASE_+<span class=\"code-number\">8</span>&amp;&amp;t&gt;=<span class=\"code-number\">64</span>&amp;&amp;t&lt;=<span class=\"code-number\">127</span>},Ae.prototype.isColorPAC=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">64</span>&amp;&amp;e&lt;=<span class=\"code-number\">79</span>||e&gt;=<span class=\"code-number\">96</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},Ae.prototype.isNormalChar=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;=<span class=\"code-number\">32</span>&amp;&amp;e&lt;=<span class=\"code-number\">127</span>},Ae.prototype.setRollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"rollUp\"</span>!==<span class=\"code-keyword\">this</span>.mode_&amp;&amp;(<span class=\"code-keyword\">this</span>.row_=<span class=\"code-number\">14</span>,<span class=\"code-keyword\">this</span>.mode_=<span class=\"code-string\">\"rollUp\"</span>,<span class=\"code-keyword\">this</span>.flushDisplayed(e),<span class=\"code-keyword\">this</span>.nonDisplayed_=Ee(),<span class=\"code-keyword\">this</span>.displayed_=Ee()),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t&amp;&amp;t!==<span class=\"code-keyword\">this</span>.row_)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;<span class=\"code-keyword\">this</span>.rollUpRows_;i++)<span class=\"code-keyword\">this</span>.displayed_[t-i]=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i],<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_-i]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-keyword\">this</span>.row_),<span class=\"code-keyword\">this</span>.topRow_=t-<span class=\"code-keyword\">this</span>.rollUpRows_+<span class=\"code-number\">1</span>},Ae.prototype.addFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.formatting_=<span class=\"code-keyword\">this</span>.formatting_.concat(t);<span class=\"code-keyword\">var</span> i=t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>}),<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,i)},Ae.prototype.clearFormatting=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.formatting_.length){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.formatting_.reverse().reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"&lt;/\"</span>+t+<span class=\"code-string\">\"&gt;\"</span>}),<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">this</span>.formatting_=[],<span class=\"code-keyword\">this</span>[<span class=\"code-keyword\">this</span>.mode_](e,t)}},Ae.prototype.popOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.nonDisplayed_[<span class=\"code-keyword\">this</span>.row_]=i},Ae.prototype.rollUp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i},Ae.prototype.shiftRowsUp_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-keyword\">this</span>.topRow_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.row_+<span class=\"code-number\">1</span>;e&lt;<span class=\"code-number\">15</span>;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-keyword\">this</span>.topRow_;e&lt;<span class=\"code-keyword\">this</span>.row_;e++)<span class=\"code-keyword\">this</span>.displayed_[e]=<span class=\"code-keyword\">this</span>.displayed_[e+<span class=\"code-number\">1</span>];<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=<span class=\"code-string\">\"\"</span>},Ae.prototype.paintOn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_];i+=t,<span class=\"code-keyword\">this</span>.displayed_[<span class=\"code-keyword\">this</span>.row_]=i};<span class=\"code-keyword\">var</span> Le={<span class=\"code-attr\">CaptionStream</span>:ge,<span class=\"code-attr\">Cea608Stream</span>:Ae,<span class=\"code-attr\">Cea708Stream</span>:be},Pe={<span class=\"code-attr\">H264_STREAM_TYPE</span>:<span class=\"code-number\">27</span>,<span class=\"code-attr\">ADTS_STREAM_TYPE</span>:<span class=\"code-number\">15</span>,<span class=\"code-attr\">METADATA_STREAM_TYPE</span>:<span class=\"code-number\">21</span>},ke=<span class=\"code-string\">\"shared\"</span>,xe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(e&gt;t&amp;&amp;(i=<span class=\"code-number\">-1</span>);<span class=\"code-built_in\">Math</span>.abs(t-e)&gt;<span class=\"code-number\">4294967296</span>;)e+=<span class=\"code-number\">8589934592</span>*i;<span class=\"code-keyword\">return</span> e},Oe=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.type_=t||ke,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.type_!==ke&amp;&amp;e.type!==<span class=\"code-keyword\">this</span>.type_||(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=e.dts),e.dts=xe(e.dts,n),e.pts=xe(e.pts,n),i=e.dts,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e))},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=i,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)},<span class=\"code-keyword\">this</span>.discontinuity=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.discontinuity(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}};Oe.prototype=<span class=\"code-keyword\">new</span> H;<span class=\"code-keyword\">var</span> De,Ce=Oe,Ue=xe,Re=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(n=t;n&lt;i;n++)r+=<span class=\"code-string\">\"%\"</span>+(<span class=\"code-string\">\"00\"</span>+e[n].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">return</span> r},Me=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">decodeURIComponent</span>(Re(e,t,i))},Be=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[<span class=\"code-number\">3</span>]},Ne={<span class=\"code-attr\">TXXX</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">3</span>===e.data[<span class=\"code-number\">0</span>]){<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.description=Me(e.data,<span class=\"code-number\">1</span>,t),e.value=Me(e.data,t+<span class=\"code-number\">1</span>,e.data.length).replace(<span class=\"code-regexp\">/\\0*$/</span>,<span class=\"code-string\">\"\"</span>);<span class=\"code-keyword\">break</span>}e.data=e.value}},<span class=\"code-attr\">WXXX</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">3</span>===e.data[<span class=\"code-number\">0</span>])<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">1</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.description=Me(e.data,<span class=\"code-number\">1</span>,t),e.url=Me(e.data,t+<span class=\"code-number\">1</span>,e.data.length);<span class=\"code-keyword\">break</span>}},<span class=\"code-attr\">PRIV</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.data.length;t++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===e.data[t]){e.owner=(i=e.data,<span class=\"code-built_in\">unescape</span>(Re(i,<span class=\"code-number\">0</span>,t)));<span class=\"code-keyword\">break</span>}e.privateData=e.data.subarray(t+<span class=\"code-number\">1</span>),e.data=e.privateData}};(De=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={<span class=\"code-attr\">descriptor</span>:e&amp;&amp;e.descriptor},n=<span class=\"code-number\">0</span>,r=[],a=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(De.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.dispatchType=Pe.METADATA_STREAM_TYPE.toString(<span class=\"code-number\">16</span>),i.descriptor)<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;i.descriptor.length;t++)<span class=\"code-keyword\">this</span>.dispatchType+=(<span class=\"code-string\">\"00\"</span>+i.descriptor[t].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,s,o,u;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"timed-metadata\"</span>===e.type)<span class=\"code-keyword\">if</span>(e.dataAlignmentIndicator&amp;&amp;(a=<span class=\"code-number\">0</span>,r.length=<span class=\"code-number\">0</span>),<span class=\"code-number\">0</span>===r.length&amp;&amp;(e.data.length&lt;<span class=\"code-number\">10</span>||e.data[<span class=\"code-number\">0</span>]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e.data[<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e.data[<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)))<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"log\"</span>,{<span class=\"code-attr\">level</span>:<span class=\"code-string\">\"warn\"</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Skipping unrecognized metadata packet\"</span>});<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(r.push(e),a+=e.data.byteLength,<span class=\"code-number\">1</span>===r.length&amp;&amp;(n=Be(e.data.subarray(<span class=\"code-number\">6</span>,<span class=\"code-number\">10</span>)),n+=<span class=\"code-number\">10</span>),!(a&lt;n)){<span class=\"code-keyword\">for</span>(t={<span class=\"code-attr\">data</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n),<span class=\"code-attr\">frames</span>:[],<span class=\"code-attr\">pts</span>:r[<span class=\"code-number\">0</span>].pts,<span class=\"code-attr\">dts</span>:r[<span class=\"code-number\">0</span>].dts},u=<span class=\"code-number\">0</span>;u&lt;n;)t.data.set(r[<span class=\"code-number\">0</span>].data.subarray(<span class=\"code-number\">0</span>,n-u),u),u+=r[<span class=\"code-number\">0</span>].data.byteLength,a-=r[<span class=\"code-number\">0</span>].data.byteLength,r.shift();i=<span class=\"code-number\">10</span>,<span class=\"code-number\">64</span>&amp;t.data[<span class=\"code-number\">5</span>]&amp;&amp;(i+=<span class=\"code-number\">4</span>,i+=Be(t.data.subarray(<span class=\"code-number\">10</span>,<span class=\"code-number\">14</span>)),n-=Be(t.data.subarray(<span class=\"code-number\">16</span>,<span class=\"code-number\">20</span>)));<span class=\"code-keyword\">do</span>{<span class=\"code-keyword\">if</span>((s=Be(t.data.subarray(i+<span class=\"code-number\">4</span>,i+<span class=\"code-number\">8</span>)))&lt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"log\"</span>,{<span class=\"code-attr\">level</span>:<span class=\"code-string\">\"warn\"</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Malformed ID3 frame encountered. Skipping metadata parsing.\"</span>});<span class=\"code-keyword\">if</span>((o={<span class=\"code-attr\">id</span>:<span class=\"code-built_in\">String</span>.fromCharCode(t.data[i],t.data[i+<span class=\"code-number\">1</span>],t.data[i+<span class=\"code-number\">2</span>],t.data[i+<span class=\"code-number\">3</span>]),<span class=\"code-attr\">data</span>:t.data.subarray(i+<span class=\"code-number\">10</span>,i+s+<span class=\"code-number\">10</span>)}).key=o.id,Ne[o.id]&amp;&amp;(Ne[o.id](o),<span class=\"code-string\">\"com.apple.streaming.transportStreamTimestamp\"</span>===o.owner)){<span class=\"code-keyword\">var</span> d=o.data,l=(<span class=\"code-number\">1</span>&amp;d[<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">30</span>|d[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">22</span>|d[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">14</span>|d[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">6</span>|d[<span class=\"code-number\">7</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>;l*=<span class=\"code-number\">4</span>,l+=<span class=\"code-number\">3</span>&amp;d[<span class=\"code-number\">7</span>],o.timeStamp=l,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.pts&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.dts&amp;&amp;(t.pts=o.timeStamp,t.dts=o.timeStamp),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestamp\"</span>,o)}t.frames.push(o),i+=<span class=\"code-number\">10</span>,i+=s}<span class=\"code-keyword\">while</span>(i&lt;n);<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t)}}}).prototype=<span class=\"code-keyword\">new</span> H;<span class=\"code-keyword\">var</span> Fe,qe,He,Ge=De,We=Ce,Ve=<span class=\"code-number\">188</span>;(Fe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(Ve),t=<span class=\"code-number\">0</span>;Fe.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-number\">0</span>,a=Ve;<span class=\"code-keyword\">for</span>(t?((n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+t)).set(e.subarray(<span class=\"code-number\">0</span>,t)),n.set(i,t),t=<span class=\"code-number\">0</span>):n=i;a&lt;n.byteLength;)<span class=\"code-number\">71</span>!==n[r]||<span class=\"code-number\">71</span>!==n[a]?(r++,a++):(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,n.subarray(r,a)),r+=Ve,a+=Ve);r&lt;n.byteLength&amp;&amp;(e.set(n.subarray(r),<span class=\"code-number\">0</span>),t=n.byteLength-r)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t===Ve&amp;&amp;<span class=\"code-number\">71</span>===e[<span class=\"code-number\">0</span>]&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,e),t=<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> H,(qe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n;qe.prototype.init.call(<span class=\"code-keyword\">this</span>),n=<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.packetsWaitingForPmt=[],<span class=\"code-keyword\">this</span>.programMapTable=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;n.payloadUnitStartIndicator&amp;&amp;(r+=e[r]+<span class=\"code-number\">1</span>),<span class=\"code-string\">\"pat\"</span>===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.section_number=e[<span class=\"code-number\">7</span>],t.last_section_number=e[<span class=\"code-number\">8</span>],n.pmtPid=(<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>],t.pmtPid=n.pmtPid},i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,r;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>&amp;e[<span class=\"code-number\">5</span>]){<span class=\"code-keyword\">for</span>(n.programMapTable={<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-string\">\"timed-metadata\"</span>:{}},i=<span class=\"code-number\">3</span>+((<span class=\"code-number\">15</span>&amp;e[<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">2</span>])<span class=\"code-number\">-4</span>,r=<span class=\"code-number\">12</span>+((<span class=\"code-number\">15</span>&amp;e[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">11</span>]);r&lt;i;){<span class=\"code-keyword\">var</span> a=e[r],s=(<span class=\"code-number\">31</span>&amp;e[r+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[r+<span class=\"code-number\">2</span>];a===Pe.H264_STREAM_TYPE&amp;&amp;<span class=\"code-literal\">null</span>===n.programMapTable.video?n.programMapTable.video=s:a===Pe.ADTS_STREAM_TYPE&amp;&amp;<span class=\"code-literal\">null</span>===n.programMapTable.audio?n.programMapTable.audio=s:a===Pe.METADATA_STREAM_TYPE&amp;&amp;(n.programMapTable[<span class=\"code-string\">\"timed-metadata\"</span>][s]=a),r+=<span class=\"code-number\">5</span>+((<span class=\"code-number\">15</span>&amp;e[r+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[r+<span class=\"code-number\">4</span>])}t.programMapTable=n.programMapTable}},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={},n=<span class=\"code-number\">4</span>;<span class=\"code-keyword\">if</span>(i.payloadUnitStartIndicator=!!(<span class=\"code-number\">64</span>&amp;t[<span class=\"code-number\">1</span>]),i.pid=<span class=\"code-number\">31</span>&amp;t[<span class=\"code-number\">1</span>],i.pid&lt;&lt;=<span class=\"code-number\">8</span>,i.pid|=t[<span class=\"code-number\">2</span>],(<span class=\"code-number\">48</span>&amp;t[<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>&gt;<span class=\"code-number\">1</span>&amp;&amp;(n+=t[n]+<span class=\"code-number\">1</span>),<span class=\"code-number\">0</span>===i.pid)i.type=<span class=\"code-string\">\"pat\"</span>,e(t.subarray(n),i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(i.pid===<span class=\"code-keyword\">this</span>.pmtPid)<span class=\"code-keyword\">for</span>(i.type=<span class=\"code-string\">\"pmt\"</span>,e(t.subarray(n),i),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i);<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.length;)<span class=\"code-keyword\">this</span>.processPes_.apply(<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.shift());<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.programMapTable?<span class=\"code-keyword\">this</span>.packetsWaitingForPmt.push([t,n,i]):<span class=\"code-keyword\">this</span>.processPes_(t,n,i)},<span class=\"code-keyword\">this</span>.processPes_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{i.pid===<span class=\"code-keyword\">this</span>.programMapTable.video?i.streamType=Pe.H264_STREAM_TYPE:i.pid===<span class=\"code-keyword\">this</span>.programMapTable.audio?i.streamType=Pe.ADTS_STREAM_TYPE:i.streamType=<span class=\"code-keyword\">this</span>.programMapTable[<span class=\"code-string\">\"timed-metadata\"</span>][i.pid],i.type=<span class=\"code-string\">\"pes\"</span>,i.data=e.subarray(t),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,i)}}).prototype=<span class=\"code-keyword\">new</span> H,qe.STREAM_TYPES={<span class=\"code-attr\">h264</span>:<span class=\"code-number\">27</span>,<span class=\"code-attr\">adts</span>:<span class=\"code-number\">15</span>},He=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t=<span class=\"code-keyword\">this</span>,i=!<span class=\"code-number\">1</span>,n={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},r={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},a={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.size),o={<span class=\"code-attr\">type</span>:i},u=<span class=\"code-number\">0</span>,d=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e.data.length&amp;&amp;!(e.size&lt;<span class=\"code-number\">9</span>)){<span class=\"code-keyword\">for</span>(o.trackId=e.data[<span class=\"code-number\">0</span>].pid,u=<span class=\"code-number\">0</span>;u&lt;e.data.length;u++)a=e.data[u],s.set(a.data,d),d+=a.data.byteLength;<span class=\"code-keyword\">var</span> l,c,h,f;c=o,f=(l=s)[<span class=\"code-number\">0</span>]&lt;&lt;<span class=\"code-number\">16</span>|l[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">8</span>|l[<span class=\"code-number\">2</span>],c.data=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,<span class=\"code-number\">1</span>===f&amp;&amp;(c.packetLength=<span class=\"code-number\">6</span>+(l[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">8</span>|l[<span class=\"code-number\">5</span>]),c.dataAlignmentIndicator=<span class=\"code-number\">0</span>!=(<span class=\"code-number\">4</span>&amp;l[<span class=\"code-number\">6</span>]),<span class=\"code-number\">192</span>&amp;(h=l[<span class=\"code-number\">7</span>])&amp;&amp;(c.pts=(<span class=\"code-number\">14</span>&amp;l[<span class=\"code-number\">9</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">11</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">12</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,c.pts*=<span class=\"code-number\">4</span>,c.pts+=(<span class=\"code-number\">6</span>&amp;l[<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,c.dts=c.pts,<span class=\"code-number\">64</span>&amp;h&amp;&amp;(c.dts=(<span class=\"code-number\">14</span>&amp;l[<span class=\"code-number\">14</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">15</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">16</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;l[<span class=\"code-number\">17</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;l[<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,c.dts*=<span class=\"code-number\">4</span>,c.dts+=(<span class=\"code-number\">6</span>&amp;l[<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>)),c.data=l.subarray(<span class=\"code-number\">9</span>+l[<span class=\"code-number\">8</span>])),r=<span class=\"code-string\">\"video\"</span>===i||o.packetLength&lt;=e.size,(n||r)&amp;&amp;(e.size=<span class=\"code-number\">0</span>,e.data.length=<span class=\"code-number\">0</span>),r&amp;&amp;t.trigger(<span class=\"code-string\">\"data\"</span>,o)}};He.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">o</span>)</span>{({<span class=\"code-attr\">pat</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},<span class=\"code-attr\">pes</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t;<span class=\"code-keyword\">switch</span>(o.streamType){<span class=\"code-keyword\">case</span> Pe.H264_STREAM_TYPE:e=n,t=<span class=\"code-string\">\"video\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> Pe.ADTS_STREAM_TYPE:e=r,t=<span class=\"code-string\">\"audio\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> Pe.METADATA_STREAM_TYPE:e=a,t=<span class=\"code-string\">\"timed-metadata\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span>}o.payloadUnitStartIndicator&amp;&amp;s(e,t,!<span class=\"code-number\">0</span>),e.data.push(o),e.size+=o.data.byteLength},<span class=\"code-attr\">pmt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> n={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">tracks</span>:[]};<span class=\"code-literal\">null</span>!==(e=o.programMapTable).video&amp;&amp;n.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.video,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"avc\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>}),<span class=\"code-literal\">null</span>!==e.audio&amp;&amp;n.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.audio,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>}),i=!<span class=\"code-number\">0</span>,t.trigger(<span class=\"code-string\">\"data\"</span>,n)}})[o.type]()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.size=<span class=\"code-number\">0</span>,n.data.length=<span class=\"code-number\">0</span>,r.size=<span class=\"code-number\">0</span>,r.data.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.flushStreams_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{s(n,<span class=\"code-string\">\"video\"</span>),s(r,<span class=\"code-string\">\"audio\"</span>),s(a,<span class=\"code-string\">\"timed-metadata\"</span>)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!i&amp;&amp;e){<span class=\"code-keyword\">var</span> n={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">tracks</span>:[]};<span class=\"code-literal\">null</span>!==e.video&amp;&amp;n.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.video,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"avc\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>}),<span class=\"code-literal\">null</span>!==e.audio&amp;&amp;n.tracks.push({<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:<span class=\"code-number\">0</span>},<span class=\"code-attr\">id</span>:+e.audio,<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>}),t.trigger(<span class=\"code-string\">\"data\"</span>,n)}i=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.flushStreams_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)}},He.prototype=<span class=\"code-keyword\">new</span> H;<span class=\"code-keyword\">var</span> je={<span class=\"code-attr\">PAT_PID</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">MP2T_PACKET_LENGTH</span>:Ve,<span class=\"code-attr\">TransportPacketStream</span>:Fe,<span class=\"code-attr\">TransportParseStream</span>:qe,<span class=\"code-attr\">ElementaryStream</span>:He,<span class=\"code-attr\">TimestampRolloverStream</span>:We,<span class=\"code-attr\">CaptionStream</span>:Le.CaptionStream,<span class=\"code-attr\">Cea608Stream</span>:Le.Cea608Stream,<span class=\"code-attr\">Cea708Stream</span>:Le.Cea708Stream,<span class=\"code-attr\">MetadataStream</span>:Ge};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> Xe <span class=\"code-keyword\">in</span> Pe)Pe.hasOwnProperty(Xe)&amp;&amp;(je[Xe]=Pe[Xe]);<span class=\"code-keyword\">var</span> ze,Qe=je,Ye=[<span class=\"code-number\">96e3</span>,<span class=\"code-number\">88200</span>,<span class=\"code-number\">64e3</span>,<span class=\"code-number\">48e3</span>,<span class=\"code-number\">44100</span>,<span class=\"code-number\">32e3</span>,<span class=\"code-number\">24e3</span>,<span class=\"code-number\">22050</span>,<span class=\"code-number\">16e3</span>,<span class=\"code-number\">12e3</span>,<span class=\"code-number\">11025</span>,<span class=\"code-number\">8e3</span>,<span class=\"code-number\">7350</span>];(ze=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-number\">0</span>;ze.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.skipWarn_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"log\"</span>,{<span class=\"code-attr\">level</span>:<span class=\"code-string\">\"warn\"</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"adts skiping bytes \"</span>+e+<span class=\"code-string\">\" to \"</span>+t+<span class=\"code-string\">\" in frame \"</span>+i+<span class=\"code-string\">\" outside syncword\"</span>})},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r,a,s,o,u,d=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e||(i=<span class=\"code-number\">0</span>),<span class=\"code-string\">\"audio\"</span>===n.type){<span class=\"code-keyword\">var</span> l;<span class=\"code-keyword\">for</span>(t&amp;&amp;t.length?(s=t,(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(s.byteLength+n.data.byteLength)).set(s),t.set(n.data,s.byteLength)):t=n.data;d+<span class=\"code-number\">7</span>&lt;t.length;)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>===t[d]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">246</span>&amp;t[d+<span class=\"code-number\">1</span>])){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> l&amp;&amp;(<span class=\"code-keyword\">this</span>.skipWarn_(l,d),l=<span class=\"code-literal\">null</span>),a=<span class=\"code-number\">2</span>*(<span class=\"code-number\">1</span>&amp;~t[d+<span class=\"code-number\">1</span>]),r=(<span class=\"code-number\">3</span>&amp;t[d+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">11</span>|t[d+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>|(<span class=\"code-number\">224</span>&amp;t[d+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,u=<span class=\"code-number\">9e4</span>*(o=<span class=\"code-number\">1024</span>*(<span class=\"code-number\">1</span>+(<span class=\"code-number\">3</span>&amp;t[d+<span class=\"code-number\">6</span>])))/Ye[(<span class=\"code-number\">60</span>&amp;t[d+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>],t.byteLength-d&lt;r)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">pts</span>:n.pts+i*u,<span class=\"code-attr\">dts</span>:n.dts+i*u,<span class=\"code-attr\">sampleCount</span>:o,<span class=\"code-attr\">audioobjecttype</span>:<span class=\"code-number\">1</span>+(t[d+<span class=\"code-number\">2</span>]&gt;&gt;&gt;<span class=\"code-number\">6</span>&amp;<span class=\"code-number\">3</span>),<span class=\"code-attr\">channelcount</span>:(<span class=\"code-number\">1</span>&amp;t[d+<span class=\"code-number\">2</span>])&lt;&lt;<span class=\"code-number\">2</span>|(<span class=\"code-number\">192</span>&amp;t[d+<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">6</span>,<span class=\"code-attr\">samplerate</span>:Ye[(<span class=\"code-number\">60</span>&amp;t[d+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>],<span class=\"code-attr\">samplingfrequencyindex</span>:(<span class=\"code-number\">60</span>&amp;t[d+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>,<span class=\"code-attr\">samplesize</span>:<span class=\"code-number\">16</span>,<span class=\"code-attr\">data</span>:t.subarray(d+<span class=\"code-number\">7</span>+a,d+r)}),i++,d+=r}<span class=\"code-keyword\">else</span><span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> l&amp;&amp;(l=d),d++;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> l&amp;&amp;(<span class=\"code-keyword\">this</span>.skipWarn_(l,d),l=<span class=\"code-literal\">null</span>),t=t.subarray(d)}},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> H;<span class=\"code-keyword\">var</span> Ke,$e,Je,Ze=ze,et=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.byteLength,i=<span class=\"code-number\">0</span>,n=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.length=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">8</span>*t},<span class=\"code-keyword\">this</span>.bitsAvailable=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">8</span>*t+n},<span class=\"code-keyword\">this</span>.loadWord=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r=e.byteLength-t,a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-number\">4</span>),s=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">4</span>,t);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===s)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"no bytes available\"</span>);a.set(e.subarray(r,r+s)),i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(a.buffer).getUint32(<span class=\"code-number\">0</span>),n=<span class=\"code-number\">8</span>*s,t-=s},<span class=\"code-keyword\">this</span>.skipBits=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r;n&gt;e?(i&lt;&lt;=e,n-=e):(e-=n,e-=<span class=\"code-number\">8</span>*(r=<span class=\"code-built_in\">Math</span>.floor(e/<span class=\"code-number\">8</span>)),t-=r,<span class=\"code-keyword\">this</span>.loadWord(),i&lt;&lt;=e,n-=e)},<span class=\"code-keyword\">this</span>.readBits=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.min(n,e),a=i&gt;&gt;&gt;<span class=\"code-number\">32</span>-r;<span class=\"code-keyword\">return</span>(n-=r)&gt;<span class=\"code-number\">0</span>?i&lt;&lt;=r:t&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.loadWord(),(r=e-r)&gt;<span class=\"code-number\">0</span>?a&lt;&lt;r|<span class=\"code-keyword\">this</span>.readBits(r):a},<span class=\"code-keyword\">this</span>.skipLeadingZeros=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;n;++e)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!=(i&amp;<span class=\"code-number\">2147483648</span>&gt;&gt;&gt;e))<span class=\"code-keyword\">return</span> i&lt;&lt;=e,n-=e,e;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.loadWord(),e+<span class=\"code-keyword\">this</span>.skipLeadingZeros()},<span class=\"code-keyword\">this</span>.skipUnsignedExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.skipBits(<span class=\"code-number\">1</span>+<span class=\"code-keyword\">this</span>.skipLeadingZeros())},<span class=\"code-keyword\">this</span>.skipExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.skipBits(<span class=\"code-number\">1</span>+<span class=\"code-keyword\">this</span>.skipLeadingZeros())},<span class=\"code-keyword\">this</span>.readUnsignedExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.skipLeadingZeros();<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.readBits(e+<span class=\"code-number\">1</span>)<span class=\"code-number\">-1</span>},<span class=\"code-keyword\">this</span>.readExpGolomb=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.readUnsignedExpGolomb();<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>&amp;e?<span class=\"code-number\">1</span>+e&gt;&gt;&gt;<span class=\"code-number\">1</span>:<span class=\"code-number\">-1</span>*(e&gt;&gt;&gt;<span class=\"code-number\">1</span>)},<span class=\"code-keyword\">this</span>.readBoolean=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.readBits(<span class=\"code-number\">1</span>)},<span class=\"code-keyword\">this</span>.readUnsignedByte=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.readBits(<span class=\"code-number\">8</span>)},<span class=\"code-keyword\">this</span>.loadWord()};($e=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i=<span class=\"code-number\">0</span>;$e.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r;t?((r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=t.byteLength;i&lt;a<span class=\"code-number\">-3</span>;i++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===t[i+<span class=\"code-number\">2</span>]){e=i+<span class=\"code-number\">5</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">for</span>(;e&lt;a;)<span class=\"code-keyword\">switch</span>(t[e]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">0</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-1</span>]){e+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-2</span>]){e++;<span class=\"code-keyword\">break</span>}i+<span class=\"code-number\">3</span>!==e<span class=\"code-number\">-2</span>&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>,e<span class=\"code-number\">-2</span>));<span class=\"code-keyword\">do</span>{e++}<span class=\"code-keyword\">while</span>(<span class=\"code-number\">1</span>!==t[e]&amp;&amp;e&lt;a);i=e<span class=\"code-number\">-2</span>,e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-1</span>]||<span class=\"code-number\">0</span>!==t[e<span class=\"code-number\">-2</span>]){e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>,e<span class=\"code-number\">-2</span>)),i=e<span class=\"code-number\">-2</span>,e+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:e+=<span class=\"code-number\">3</span>}t=t.subarray(i),e-=i,i=<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=<span class=\"code-literal\">null</span>,i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t&amp;&amp;t.byteLength&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,t.subarray(i+<span class=\"code-number\">3</span>)),t=<span class=\"code-literal\">null</span>,i=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.flush(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> H,Je={<span class=\"code-number\">100</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">110</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">122</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">244</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">44</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">83</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">86</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">118</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">128</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">138</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">139</span>:!<span class=\"code-number\">0</span>,<span class=\"code-number\">134</span>:!<span class=\"code-number\">0</span>},Ke=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s,o=<span class=\"code-keyword\">new</span> $e;Ke.prototype.init.call(<span class=\"code-keyword\">this</span>),e=<span class=\"code-keyword\">this</span>,<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"video\"</span>===e.type&amp;&amp;(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">s</span>)</span>{<span class=\"code-keyword\">var</span> o={<span class=\"code-attr\">trackId</span>:t,<span class=\"code-attr\">pts</span>:i,<span class=\"code-attr\">dts</span>:n,<span class=\"code-attr\">data</span>:s,<span class=\"code-attr\">nalUnitTypeCode</span>:<span class=\"code-number\">31</span>&amp;s[<span class=\"code-number\">0</span>]};<span class=\"code-keyword\">switch</span>(o.nalUnitTypeCode){<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:o.nalUnitType=<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:o.nalUnitType=<span class=\"code-string\">\"sei_rbsp\"</span>,o.escapedRBSP=r(s.subarray(<span class=\"code-number\">1</span>));<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:o.nalUnitType=<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>,o.escapedRBSP=r(s.subarray(<span class=\"code-number\">1</span>)),o.config=a(o.escapedRBSP);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:o.nalUnitType=<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:o.nalUnitType=<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>}e.trigger(<span class=\"code-string\">\"data\"</span>,o)})),o.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"done\"</span>)})),o.on(<span class=\"code-string\">\"partialdone\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"partialdone\"</span>)})),o.on(<span class=\"code-string\">\"reset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"reset\"</span>)})),o.on(<span class=\"code-string\">\"endedtimeline\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)})),<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.flush()},<span class=\"code-keyword\">this</span>.partialFlush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.partialFlush()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.reset()},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{o.endTimeline()},s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">8</span>,r=<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e;i++)<span class=\"code-number\">0</span>!==r&amp;&amp;(r=(n+t.readExpGolomb()+<span class=\"code-number\">256</span>)%<span class=\"code-number\">256</span>),n=<span class=\"code-number\">0</span>===r?n:r},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i,n=e.byteLength,r=[],a=<span class=\"code-number\">1</span>;a&lt;n<span class=\"code-number\">-2</span>;)<span class=\"code-number\">0</span>===e[a]&amp;&amp;<span class=\"code-number\">0</span>===e[a+<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-number\">3</span>===e[a+<span class=\"code-number\">2</span>]?(r.push(a+<span class=\"code-number\">2</span>),a+=<span class=\"code-number\">2</span>):a++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r.length)<span class=\"code-keyword\">return</span> e;t=n-r.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t);<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;t;s++,a++)s===r[<span class=\"code-number\">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class=\"code-keyword\">return</span> i},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u,d,l,c,h,f,p=<span class=\"code-number\">0</span>,m=<span class=\"code-number\">0</span>,g=<span class=\"code-number\">0</span>,y=<span class=\"code-number\">0</span>,v=[<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>];<span class=\"code-keyword\">if</span>(i=(t=<span class=\"code-keyword\">new</span> et(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Je[i]&amp;&amp;(<span class=\"code-number\">3</span>===(a=t.readUnsignedExpGolomb())&amp;&amp;t.skipBits(<span class=\"code-number\">1</span>),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(<span class=\"code-number\">1</span>),t.readBoolean()))<span class=\"code-keyword\">for</span>(h=<span class=\"code-number\">3</span>!==a?<span class=\"code-number\">8</span>:<span class=\"code-number\">12</span>,f=<span class=\"code-number\">0</span>;f&lt;h;f++)t.readBoolean()&amp;&amp;s(f&lt;<span class=\"code-number\">6</span>?<span class=\"code-number\">16</span>:<span class=\"code-number\">64</span>,t);<span class=\"code-keyword\">if</span>(t.skipUnsignedExpGolomb(),<span class=\"code-number\">0</span>===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===o)<span class=\"code-keyword\">for</span>(t.skipBits(<span class=\"code-number\">1</span>),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),f=<span class=\"code-number\">0</span>;f&lt;u;f++)t.skipExpGolomb();<span class=\"code-keyword\">if</span>(t.skipUnsignedExpGolomb(),t.skipBits(<span class=\"code-number\">1</span>),d=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),<span class=\"code-number\">0</span>===(c=t.readBits(<span class=\"code-number\">1</span>))&amp;&amp;t.skipBits(<span class=\"code-number\">1</span>),t.skipBits(<span class=\"code-number\">1</span>),t.readBoolean()&amp;&amp;(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&amp;&amp;t.readBoolean()){<span class=\"code-keyword\">switch</span>(t.readUnsignedByte()){<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:v=[<span class=\"code-number\">1</span>,<span class=\"code-number\">1</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">2</span>:v=[<span class=\"code-number\">12</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">3</span>:v=[<span class=\"code-number\">10</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">4</span>:v=[<span class=\"code-number\">16</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:v=[<span class=\"code-number\">40</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:v=[<span class=\"code-number\">24</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:v=[<span class=\"code-number\">20</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:v=[<span class=\"code-number\">32</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:v=[<span class=\"code-number\">80</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">10</span>:v=[<span class=\"code-number\">18</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">11</span>:v=[<span class=\"code-number\">15</span>,<span class=\"code-number\">11</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">12</span>:v=[<span class=\"code-number\">64</span>,<span class=\"code-number\">33</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">13</span>:v=[<span class=\"code-number\">160</span>,<span class=\"code-number\">99</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">14</span>:v=[<span class=\"code-number\">4</span>,<span class=\"code-number\">3</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">15</span>:v=[<span class=\"code-number\">3</span>,<span class=\"code-number\">2</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">16</span>:v=[<span class=\"code-number\">2</span>,<span class=\"code-number\">1</span>];<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">255</span>:v=[t.readUnsignedByte()&lt;&lt;<span class=\"code-number\">8</span>|t.readUnsignedByte(),t.readUnsignedByte()&lt;&lt;<span class=\"code-number\">8</span>|t.readUnsignedByte()]}v&amp;&amp;(v[<span class=\"code-number\">0</span>],v[<span class=\"code-number\">1</span>])}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">profileIdc</span>:i,<span class=\"code-attr\">levelIdc</span>:n,<span class=\"code-attr\">profileCompatibility</span>:r,<span class=\"code-attr\">width</span>:<span class=\"code-number\">16</span>*(d+<span class=\"code-number\">1</span>)<span class=\"code-number\">-2</span>*p<span class=\"code-number\">-2</span>*m,<span class=\"code-attr\">height</span>:(<span class=\"code-number\">2</span>-c)*(l+<span class=\"code-number\">1</span>)*<span class=\"code-number\">16</span><span class=\"code-number\">-2</span>*g<span class=\"code-number\">-2</span>*y,<span class=\"code-attr\">sarRatio</span>:v}}},Ke.prototype=<span class=\"code-keyword\">new</span> H;<span class=\"code-keyword\">var</span> tt,it={<span class=\"code-attr\">H264Stream</span>:Ke,<span class=\"code-attr\">NalByteStream</span>:$e},nt=[<span class=\"code-number\">96e3</span>,<span class=\"code-number\">88200</span>,<span class=\"code-number\">64e3</span>,<span class=\"code-number\">48e3</span>,<span class=\"code-number\">44100</span>,<span class=\"code-number\">32e3</span>,<span class=\"code-number\">24e3</span>,<span class=\"code-number\">22050</span>,<span class=\"code-number\">16e3</span>,<span class=\"code-number\">12e3</span>,<span class=\"code-number\">11025</span>,<span class=\"code-number\">8e3</span>,<span class=\"code-number\">7350</span>],rt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t+<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[t+<span class=\"code-number\">7</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[t+<span class=\"code-number\">8</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[t+<span class=\"code-number\">9</span>];<span class=\"code-keyword\">return</span> i=i&gt;=<span class=\"code-number\">0</span>?i:<span class=\"code-number\">0</span>,(<span class=\"code-number\">16</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">4</span>?i+<span class=\"code-number\">20</span>:i+<span class=\"code-number\">10</span>},at=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.length-i&lt;<span class=\"code-number\">10</span>||t[i]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||t[i+<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||t[i+<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)?i:e(t,i+=rt(t,i))},st=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e[<span class=\"code-number\">0</span>]&lt;&lt;<span class=\"code-number\">21</span>|e[<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">14</span>|e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">7</span>|e[<span class=\"code-number\">3</span>]},ot={<span class=\"code-attr\">isLikelyAacData</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=at(e,<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> e.length&gt;=t+<span class=\"code-number\">2</span>&amp;&amp;<span class=\"code-number\">255</span>==(<span class=\"code-number\">255</span>&amp;e[t])&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">240</span>&amp;e[t+<span class=\"code-number\">1</span>])&amp;&amp;<span class=\"code-number\">16</span>==(<span class=\"code-number\">22</span>&amp;e[t+<span class=\"code-number\">1</span>])},<span class=\"code-attr\">parseId3TagSize</span>:rt,<span class=\"code-attr\">parseAdtsSize</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=(<span class=\"code-number\">224</span>&amp;e[t+<span class=\"code-number\">5</span>])&gt;&gt;<span class=\"code-number\">5</span>,n=e[t+<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">3</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">6144</span>&amp;e[t+<span class=\"code-number\">3</span>]|n|i},<span class=\"code-attr\">parseType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e[t]===<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[t+<span class=\"code-number\">1</span>]===<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)&amp;&amp;e[t+<span class=\"code-number\">2</span>]===<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>)?<span class=\"code-string\">\"timed-metadata\"</span>:!<span class=\"code-number\">0</span>&amp;e[t]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">240</span>&amp;e[t+<span class=\"code-number\">1</span>])?<span class=\"code-string\">\"audio\"</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">parseSampleRate</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;t+<span class=\"code-number\">5</span>&lt;e.length;){<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>===e[t]&amp;&amp;<span class=\"code-number\">240</span>==(<span class=\"code-number\">246</span>&amp;e[t+<span class=\"code-number\">1</span>]))<span class=\"code-keyword\">return</span> nt[(<span class=\"code-number\">60</span>&amp;e[t+<span class=\"code-number\">2</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>];t++}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},<span class=\"code-attr\">parseAacTimestamp</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;t=<span class=\"code-number\">10</span>,<span class=\"code-number\">64</span>&amp;e[<span class=\"code-number\">5</span>]&amp;&amp;(t+=<span class=\"code-number\">4</span>,t+=st(e.subarray(<span class=\"code-number\">10</span>,<span class=\"code-number\">14</span>)));<span class=\"code-keyword\">do</span>{<span class=\"code-keyword\">if</span>((i=st(e.subarray(t+<span class=\"code-number\">4</span>,t+<span class=\"code-number\">8</span>)))&lt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"PRIV\"</span>===<span class=\"code-built_in\">String</span>.fromCharCode(e[t],e[t+<span class=\"code-number\">1</span>],e[t+<span class=\"code-number\">2</span>],e[t+<span class=\"code-number\">3</span>])){n=e.subarray(t+<span class=\"code-number\">10</span>,t+i+<span class=\"code-number\">10</span>);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;n.byteLength;r++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===n[r]){<span class=\"code-keyword\">var</span> a=<span class=\"code-built_in\">unescape</span>(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;i;n++)r+=<span class=\"code-string\">\"%\"</span>+(<span class=\"code-string\">\"00\"</span>+e[n].toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>);<span class=\"code-keyword\">return</span> r}(n,<span class=\"code-number\">0</span>,r));<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"com.apple.streaming.transportStreamTimestamp\"</span>===a){<span class=\"code-keyword\">var</span> s=n.subarray(r+<span class=\"code-number\">1</span>),o=(<span class=\"code-number\">1</span>&amp;s[<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">30</span>|s[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">22</span>|s[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">14</span>|s[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">6</span>|s[<span class=\"code-number\">7</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>;<span class=\"code-keyword\">return</span>(o*=<span class=\"code-number\">4</span>)+(<span class=\"code-number\">3</span>&amp;s[<span class=\"code-number\">7</span>])}<span class=\"code-keyword\">break</span>}}t+=<span class=\"code-number\">10</span>,t+=i}<span class=\"code-keyword\">while</span>(t&lt;e.byteLength);<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}};(tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,t=<span class=\"code-number\">0</span>;tt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.setTimestamp=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t=e},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-number\">0</span>,u=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(e.length?(s=e.length,(e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i.byteLength+s)).set(e.subarray(<span class=\"code-number\">0</span>,s)),e.set(i,s)):e=i;e.length-u&gt;=<span class=\"code-number\">3</span>;)<span class=\"code-keyword\">if</span>(e[u]!==<span class=\"code-string\">\"I\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e[u+<span class=\"code-number\">1</span>]!==<span class=\"code-string\">\"D\"</span>.charCodeAt(<span class=\"code-number\">0</span>)||e[u+<span class=\"code-number\">2</span>]!==<span class=\"code-string\">\"3\"</span>.charCodeAt(<span class=\"code-number\">0</span>))<span class=\"code-keyword\">if</span>(<span class=\"code-number\">255</span>!=(<span class=\"code-number\">255</span>&amp;e[u])||<span class=\"code-number\">240</span>!=(<span class=\"code-number\">240</span>&amp;e[u+<span class=\"code-number\">1</span>]))u++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.length-u&lt;<span class=\"code-number\">7</span>)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">if</span>(u+(o=ot.parseAdtsSize(e,u))&gt;e.length)<span class=\"code-keyword\">break</span>;a={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">data</span>:e.subarray(u,u+o),<span class=\"code-attr\">pts</span>:t,<span class=\"code-attr\">dts</span>:t},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,a),u+=o}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(e.length-u&lt;<span class=\"code-number\">10</span>)<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">if</span>(u+(o=ot.parseId3TagSize(e,u))&gt;e.length)<span class=\"code-keyword\">break</span>;r={<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"timed-metadata\"</span>,<span class=\"code-attr\">data</span>:e.subarray(u,u+o)},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,r),u+=o}n=e.length-u,e=n&gt;<span class=\"code-number\">0</span>?e.subarray(u):<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"endedtimeline\"</span>)}}).prototype=<span class=\"code-keyword\">new</span> H;<span class=\"code-keyword\">var</span> ut,dt,lt,ct,ht=tt,ft=[<span class=\"code-string\">\"audioobjecttype\"</span>,<span class=\"code-string\">\"channelcount\"</span>,<span class=\"code-string\">\"samplerate\"</span>,<span class=\"code-string\">\"samplingfrequencyindex\"</span>,<span class=\"code-string\">\"samplesize\"</span>],pt=[<span class=\"code-string\">\"width\"</span>,<span class=\"code-string\">\"height\"</span>,<span class=\"code-string\">\"profileIdc\"</span>,<span class=\"code-string\">\"levelIdc\"</span>,<span class=\"code-string\">\"profileCompatibility\"</span>,<span class=\"code-string\">\"sarRatio\"</span>],mt=it.H264Stream,gt=ot.isLikelyAacData,yt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.stream=e,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"log\"</span>,t)},vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">Object</span>.keys(t),n=<span class=\"code-number\">0</span>;n&lt;i.length;n++){<span class=\"code-keyword\">var</span> r=i[n];<span class=\"code-string\">\"headOfPipeline\"</span>!==r&amp;&amp;t[r].on&amp;&amp;t[r].on(<span class=\"code-string\">\"log\"</span>,yt.bind(e,r))}},_t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">if</span>(e.length!==t.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">if</span>(e[i]!==t[i])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>},Tt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">dts</span>:e,<span class=\"code-attr\">pts</span>:e+(i-t)},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">dts</span>:e+(n-t),<span class=\"code-attr\">pts</span>:e+(r-i)},<span class=\"code-attr\">prependedContentDuration</span>:a,<span class=\"code-attr\">baseMediaDecodeTime</span>:e}};dt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=[],r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>,s=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>;i=(t=t||{}).firstSequenceNumber||<span class=\"code-number\">0</span>,dt.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{me(e,t),e&amp;&amp;ft.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{e[i]=t[i]})),n.push(t)},<span class=\"code-keyword\">this</span>.setEarliestDts=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r=e},<span class=\"code-keyword\">this</span>.setVideoBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s=e},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{a=e},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> o,u,d,l,c,h,f;<span class=\"code-number\">0</span>!==n.length?(o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> t.minSegmentDts&gt;=i?e:(t.minSegmentDts=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,e.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.dts&gt;=i&amp;&amp;(t.minSegmentDts=<span class=\"code-built_in\">Math</span>.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!<span class=\"code-number\">0</span>)})))}(n,e,r),e.baseMediaDecodeTime=pe(e,t.keepOriginalTimestamps),f=he(e,o,a,s),e.samples=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[];<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i=e[t],n.push({<span class=\"code-attr\">size</span>:i.data.byteLength,<span class=\"code-attr\">duration</span>:<span class=\"code-number\">1024</span>});<span class=\"code-keyword\">return</span> n}(o),d=Z(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i+=e[t].data.byteLength;<span class=\"code-keyword\">return</span> i}(e));<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;<span class=\"code-keyword\">return</span> r}(o)),n=[],u=ee(i,[e]),l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u.byteLength+d.byteLength),i++,l.set(u),l.set(d,u.byteLength),fe(e),c=<span class=\"code-built_in\">Math</span>.ceil(<span class=\"code-number\">9216e4</span>/e.samplerate),o.length&amp;&amp;(h=o.length*c,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"segmentTimingInfo\"</span>,Tt(de(e.baseMediaDecodeTime,e.samplerate),o[<span class=\"code-number\">0</span>].dts,o[<span class=\"code-number\">0</span>].pts,o[<span class=\"code-number\">0</span>].dts+h,o[<span class=\"code-number\">0</span>].pts+h,f||<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:o[<span class=\"code-number\">0</span>].pts,<span class=\"code-attr\">end</span>:o[<span class=\"code-number\">0</span>].pts+h})),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:e,<span class=\"code-attr\">boxes</span>:l}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)):<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"AudioSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{fe(e),n=[],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)}},dt.prototype=<span class=\"code-keyword\">new</span> H,ut=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a=[],s=[];i=(t=t||{}).firstSequenceNumber||<span class=\"code-number\">0</span>,ut.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">delete</span> e.minPTS,<span class=\"code-keyword\">this</span>.gopCache_=[],<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{me(e,t),<span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],pt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e[t]=n[t]}),<span class=\"code-keyword\">this</span>)),<span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r,o,u,d,l,c,h,f=<span class=\"code-number\">0</span>;a.length&amp;&amp;<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>!==a[<span class=\"code-number\">0</span>].nalUnitType;)a.shift();<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===a.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>);<span class=\"code-keyword\">if</span>(n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=[];<span class=\"code-keyword\">for</span>(r.byteLength=<span class=\"code-number\">0</span>,r.nalCount=<span class=\"code-number\">0</span>,r.duration=<span class=\"code-number\">0</span>,n.byteLength=<span class=\"code-number\">0</span>,t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)<span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>===(i=e[t]).nalUnitType?(n.length&amp;&amp;(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):(<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===i.nalUnitType&amp;&amp;(n.keyFrame=!<span class=\"code-number\">0</span>),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));<span class=\"code-keyword\">return</span> r.length&amp;&amp;(!n.duration||n.duration&lt;=<span class=\"code-number\">0</span>)&amp;&amp;(n.duration=r[r.length<span class=\"code-number\">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r}(a),(o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=[],r=[];<span class=\"code-keyword\">for</span>(n.byteLength=<span class=\"code-number\">0</span>,n.nalCount=<span class=\"code-number\">0</span>,n.duration=<span class=\"code-number\">0</span>,n.pts=e[<span class=\"code-number\">0</span>].pts,n.dts=e[<span class=\"code-number\">0</span>].dts,r.byteLength=<span class=\"code-number\">0</span>,r.nalCount=<span class=\"code-number\">0</span>,r.duration=<span class=\"code-number\">0</span>,r.pts=e[<span class=\"code-number\">0</span>].pts,r.dts=e[<span class=\"code-number\">0</span>].dts,t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)(i=e[t]).keyFrame?(n.length&amp;&amp;(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));<span class=\"code-keyword\">return</span> r.length&amp;&amp;n.duration&lt;=<span class=\"code-number\">0</span>&amp;&amp;(n.duration=r[r.length<span class=\"code-number\">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r}(n))[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame||((r=<span class=\"code-keyword\">this</span>.getGopForFusion_(a[<span class=\"code-number\">0</span>],e))?(f=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>!e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].keyFrame&amp;&amp;e.length&gt;<span class=\"code-number\">1</span>&amp;&amp;(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].dts=t.dts,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].pts=t.pts,e[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].duration+=t.duration),e}(o)),s.length){<span class=\"code-keyword\">var</span> p;<span class=\"code-keyword\">if</span>(!(p=t.alignGopsAtEnd?<span class=\"code-keyword\">this</span>.alignGopsAtEnd_(o):<span class=\"code-keyword\">this</span>.alignGopsAtStart_(o)))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.gopCache_.unshift({<span class=\"code-attr\">gop</span>:o.pop(),<span class=\"code-attr\">pps</span>:e.pps,<span class=\"code-attr\">sps</span>:e.sps}),<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">6</span>,<span class=\"code-keyword\">this</span>.gopCache_.length),a=[],<span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>);fe(e),o=p}me(e,o),e.samples=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o=t||<span class=\"code-number\">0</span>,u=[];<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">for</span>(a=e[i],n=<span class=\"code-number\">0</span>;n&lt;a.length;n++)s=a[n],o+=(r=te(s,o)).size,u.push(r);<span class=\"code-keyword\">return</span> u}(o),d=Z(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,s,o=<span class=\"code-number\">0</span>,u=e.byteLength,d=e.nalCount,l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u+<span class=\"code-number\">4</span>*d),c=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(l.buffer);<span class=\"code-keyword\">for</span>(t=<span class=\"code-number\">0</span>;t&lt;e.length;t++)<span class=\"code-keyword\">for</span>(r=e[t],i=<span class=\"code-number\">0</span>;i&lt;r.length;i++)<span class=\"code-keyword\">for</span>(a=r[i],n=<span class=\"code-number\">0</span>;n&lt;a.length;n++)s=a[n],c.setUint32(o,s.data.byteLength),o+=<span class=\"code-number\">4</span>,l.set(s.data,o),o+=s.data.byteLength;<span class=\"code-keyword\">return</span> l}(o)),e.baseMediaDecodeTime=pe(e,t.keepOriginalTimestamps),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"processedGopsInfo\"</span>,o.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">pts</span>:e.pts,<span class=\"code-attr\">dts</span>:e.dts,<span class=\"code-attr\">byteLength</span>:e.byteLength}}))),c=o[<span class=\"code-number\">0</span>],h=o[o.length<span class=\"code-number\">-1</span>],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"segmentTimingInfo\"</span>,Tt(e.baseMediaDecodeTime,c.dts,c.pts,h.dts+h.duration,h.pts+h.duration,f)),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timingInfo\"</span>,{<span class=\"code-attr\">start</span>:o[<span class=\"code-number\">0</span>].pts,<span class=\"code-attr\">end</span>:o[o.length<span class=\"code-number\">-1</span>].pts+o[o.length<span class=\"code-number\">-1</span>].duration}),<span class=\"code-keyword\">this</span>.gopCache_.unshift({<span class=\"code-attr\">gop</span>:o.pop(),<span class=\"code-attr\">pps</span>:e.pps,<span class=\"code-attr\">sps</span>:e.sps}),<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-built_in\">Math</span>.min(<span class=\"code-number\">6</span>,<span class=\"code-keyword\">this</span>.gopCache_.length),a=[],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"baseMediaDecodeTime\"</span>,e.baseMediaDecodeTime),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timelineStartInfo\"</span>,e.timelineStartInfo),u=ee(i,[e]),l=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(u.byteLength+d.byteLength),i++,l.set(u),l.set(d,u.byteLength),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,{<span class=\"code-attr\">track</span>:e,<span class=\"code-attr\">boxes</span>:l}),<span class=\"code-keyword\">this</span>.resetStream_(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>,<span class=\"code-string\">\"VideoSegmentStream\"</span>)},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.resetStream_(),a=[],<span class=\"code-keyword\">this</span>.gopCache_.length=<span class=\"code-number\">0</span>,s.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"reset\"</span>)},<span class=\"code-keyword\">this</span>.resetStream_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{fe(e),n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,r=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.getGopForFusion_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i,n,r,a,s,o=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(s=<span class=\"code-number\">0</span>;s&lt;<span class=\"code-keyword\">this</span>.gopCache_.length;s++)r=(a=<span class=\"code-keyword\">this</span>.gopCache_[s]).gop,e.pps&amp;&amp;_t(e.pps[<span class=\"code-number\">0</span>],a.pps[<span class=\"code-number\">0</span>])&amp;&amp;e.sps&amp;&amp;_t(e.sps[<span class=\"code-number\">0</span>],a.sps[<span class=\"code-number\">0</span>])&amp;&amp;(r.dts&lt;e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)&gt;=<span class=\"code-number\">-1e4</span>&amp;&amp;i&lt;=<span class=\"code-number\">45e3</span>&amp;&amp;(!n||o&gt;i)&amp;&amp;(n=a,o=i));<span class=\"code-keyword\">return</span> n?n.gop:<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.alignGopsAtStart_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u,d;<span class=\"code-keyword\">for</span>(a=e.byteLength,o=e.nalCount,u=e.duration,t=i=<span class=\"code-number\">0</span>;t&lt;s.length&amp;&amp;i&lt;e.length&amp;&amp;(n=s[t],r=e[i],n.pts!==r.pts);)r.pts&gt;n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,u-=r.duration);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===i?e:i===e.length?<span class=\"code-literal\">null</span>:((d=e.slice(i)).byteLength=a,d.duration=u,d.nalCount=o,d.pts=d[<span class=\"code-number\">0</span>].pts,d.dts=d[<span class=\"code-number\">0</span>].dts,d)},<span class=\"code-keyword\">this</span>.alignGopsAtEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r,a,o,u;<span class=\"code-keyword\">for</span>(t=s.length<span class=\"code-number\">-1</span>,i=e.length<span class=\"code-number\">-1</span>,a=<span class=\"code-literal\">null</span>,o=!<span class=\"code-number\">1</span>;t&gt;=<span class=\"code-number\">0</span>&amp;&amp;i&gt;=<span class=\"code-number\">0</span>;){<span class=\"code-keyword\">if</span>(n=s[t],r=e[i],n.pts===r.pts){o=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}n.pts&gt;r.pts?t--:(t===s.length<span class=\"code-number\">-1</span>&amp;&amp;(a=i),i--)}<span class=\"code-keyword\">if</span>(!o&amp;&amp;<span class=\"code-literal\">null</span>===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===(u=o?i:a))<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> d=e.slice(u),l=d.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{<span class=\"code-attr\">byteLength</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">duration</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">nalCount</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">return</span> d.byteLength=l.byteLength,d.duration=l.duration,d.nalCount=l.nalCount,d.pts=d[<span class=\"code-number\">0</span>].pts,d.dts=d[<span class=\"code-number\">0</span>].dts,d},<span class=\"code-keyword\">this</span>.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s=e}},ut.prototype=<span class=\"code-keyword\">new</span> H,ct=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.numberOfTracks=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.metadataStream=t,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==(e=e||{}).remux?<span class=\"code-keyword\">this</span>.remuxTracks=!!e.remux:<span class=\"code-keyword\">this</span>.remuxTracks=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"boolean\"</span>==<span class=\"code-keyword\">typeof</span> e.keepOriginalTimestamps?<span class=\"code-keyword\">this</span>.keepOriginalTimestamps=e.keepOriginalTimestamps:<span class=\"code-keyword\">this</span>.keepOriginalTimestamps=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.pendingTracks=[],<span class=\"code-keyword\">this</span>.videoTrack=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.pendingBoxes=[],<span class=\"code-keyword\">this</span>.pendingCaptions=[],<span class=\"code-keyword\">this</span>.pendingMetadata=[],<span class=\"code-keyword\">this</span>.pendingBytes=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>,ct.prototype.init.call(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.text?<span class=\"code-keyword\">this</span>.pendingCaptions.push(e):e.frames?<span class=\"code-keyword\">this</span>.pendingMetadata.push(e):(<span class=\"code-keyword\">this</span>.pendingTracks.push(e.track),<span class=\"code-keyword\">this</span>.pendingBytes+=e.boxes.byteLength,<span class=\"code-string\">\"video\"</span>===e.track.type&amp;&amp;(<span class=\"code-keyword\">this</span>.videoTrack=e.track,<span class=\"code-keyword\">this</span>.pendingBoxes.push(e.boxes)),<span class=\"code-keyword\">void</span>(<span class=\"code-string\">\"audio\"</span>===e.track.type&amp;&amp;(<span class=\"code-keyword\">this</span>.audioTrack=e.track,<span class=\"code-keyword\">this</span>.pendingBoxes.unshift(e.boxes))))}},ct.prototype=<span class=\"code-keyword\">new</span> H,ct.prototype.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,a,s,o,d,l,c=<span class=\"code-number\">0</span>,h={<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">captionStreams</span>:{},<span class=\"code-attr\">metadata</span>:[],<span class=\"code-attr\">info</span>:{}},f=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingTracks.length&lt;<span class=\"code-keyword\">this</span>.numberOfTracks){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"VideoSegmentStream\"</span>!==e&amp;&amp;<span class=\"code-string\">\"AudioSegmentStream\"</span>!==e)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.remuxTracks)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.pendingTracks.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.emittedTracks++,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.emittedTracks&gt;=<span class=\"code-keyword\">this</span>.numberOfTracks&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>),<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>))}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoTrack?(f=<span class=\"code-keyword\">this</span>.videoTrack.timelineStartInfo.pts,pt.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{h.info[e]=<span class=\"code-keyword\">this</span>.videoTrack[e]}),<span class=\"code-keyword\">this</span>)):<span class=\"code-keyword\">this</span>.audioTrack&amp;&amp;(f=<span class=\"code-keyword\">this</span>.audioTrack.timelineStartInfo.pts,ft.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{h.info[e]=<span class=\"code-keyword\">this</span>.audioTrack[e]}),<span class=\"code-keyword\">this</span>)),<span class=\"code-keyword\">this</span>.videoTrack||<span class=\"code-keyword\">this</span>.audioTrack){<span class=\"code-keyword\">for</span>(<span class=\"code-number\">1</span>===<span class=\"code-keyword\">this</span>.pendingTracks.length?h.type=<span class=\"code-keyword\">this</span>.pendingTracks[<span class=\"code-number\">0</span>].type:h.type=<span class=\"code-string\">\"combined\"</span>,<span class=\"code-keyword\">this</span>.emittedTracks+=<span class=\"code-keyword\">this</span>.pendingTracks.length,s=<span class=\"code-keyword\">this</span>.pendingTracks,o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,l=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,d=r(),l=u(s),(o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(d.byteLength+l.byteLength)).set(d),o.set(l,d.byteLength),n=o,h.initSegment=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n.byteLength),h.initSegment.set(n),h.data=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-keyword\">this</span>.pendingBytes),a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-keyword\">this</span>.pendingBoxes.length;a++)h.data.set(<span class=\"code-keyword\">this</span>.pendingBoxes[a],c),c+=<span class=\"code-keyword\">this</span>.pendingBoxes[a].byteLength;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-keyword\">this</span>.pendingCaptions.length;a++)(t=<span class=\"code-keyword\">this</span>.pendingCaptions[a]).startTime=ce(t.startPts,f,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),t.endTime=ce(t.endPts,f,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),h.captionStreams[t.stream]=!<span class=\"code-number\">0</span>,h.captions.push(t);<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;<span class=\"code-keyword\">this</span>.pendingMetadata.length;a++)(i=<span class=\"code-keyword\">this</span>.pendingMetadata[a]).cueTime=ce(i.pts,f,<span class=\"code-keyword\">this</span>.keepOriginalTimestamps),h.metadata.push(i);<span class=\"code-keyword\">for</span>(h.metadata.dispatchType=<span class=\"code-keyword\">this</span>.metadataStream.dispatchType,<span class=\"code-keyword\">this</span>.pendingTracks.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.videoTrack=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.pendingBoxes.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingCaptions.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingBytes=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pendingMetadata.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"data\"</span>,h),a=<span class=\"code-number\">0</span>;a&lt;h.captions.length;a++)t=h.captions[a],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"caption\"</span>,t);<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;h.metadata.length;a++)i=h.metadata[a],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"id3Frame\"</span>,i)}<span class=\"code-keyword\">this</span>.emittedTracks&gt;=<span class=\"code-keyword\">this</span>.numberOfTracks&amp;&amp;(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"done\"</span>),<span class=\"code-keyword\">this</span>.emittedTracks=<span class=\"code-number\">0</span>)},ct.prototype.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.remuxTracks=e},(lt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n=<span class=\"code-keyword\">this</span>,r=!<span class=\"code-number\">0</span>;lt.prototype.init.call(<span class=\"code-keyword\">this</span>),e=e||{},<span class=\"code-keyword\">this</span>.baseMediaDecodeTime=e.baseMediaDecodeTime||<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxPipeline_={},<span class=\"code-keyword\">this</span>.setupAacPipeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r={};<span class=\"code-keyword\">this</span>.transmuxPipeline_=r,r.type=<span class=\"code-string\">\"aac\"</span>,r.metadataStream=<span class=\"code-keyword\">new</span> Qe.MetadataStream,r.aacStream=<span class=\"code-keyword\">new</span> ht,r.audioTimestampRolloverStream=<span class=\"code-keyword\">new</span> Qe.TimestampRolloverStream(<span class=\"code-string\">\"audio\"</span>),r.timedMetadataTimestampRolloverStream=<span class=\"code-keyword\">new</span> Qe.TimestampRolloverStream(<span class=\"code-string\">\"timed-metadata\"</span>),r.adtsStream=<span class=\"code-keyword\">new</span> Ze,r.coalesceStream=<span class=\"code-keyword\">new</span> ct(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on(<span class=\"code-string\">\"timestamp\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a</span>)</span>{<span class=\"code-string\">\"timed-metadata\"</span>!==a.type&amp;&amp;<span class=\"code-string\">\"audio\"</span>!==a.type||r.audioSegmentStream||(i=i||{<span class=\"code-attr\">timelineStartInfo</span>:{<span class=\"code-attr\">baseMediaDecodeTime</span>:n.baseMediaDecodeTime},<span class=\"code-attr\">codec</span>:<span class=\"code-string\">\"adts\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class=\"code-keyword\">new</span> dt(i,e),r.audioSegmentStream.on(<span class=\"code-string\">\"log\"</span>,n.getLogTrigger_(<span class=\"code-string\">\"audioSegmentStream\"</span>)),r.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioTimingInfo\"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!i,<span class=\"code-attr\">hasVideo</span>:!!t}))})),r.coalesceStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>)),vt(<span class=\"code-keyword\">this</span>,r)},<span class=\"code-keyword\">this</span>.setupTsPipeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r={};<span class=\"code-keyword\">this</span>.transmuxPipeline_=r,r.type=<span class=\"code-string\">\"ts\"</span>,r.metadataStream=<span class=\"code-keyword\">new</span> Qe.MetadataStream,r.packetStream=<span class=\"code-keyword\">new</span> Qe.TransportPacketStream,r.parseStream=<span class=\"code-keyword\">new</span> Qe.TransportParseStream,r.elementaryStream=<span class=\"code-keyword\">new</span> Qe.ElementaryStream,r.timestampRolloverStream=<span class=\"code-keyword\">new</span> Qe.TimestampRolloverStream,r.adtsStream=<span class=\"code-keyword\">new</span> Ze,r.h264Stream=<span class=\"code-keyword\">new</span> mt,r.captionStream=<span class=\"code-keyword\">new</span> Qe.CaptionStream(e),r.coalesceStream=<span class=\"code-keyword\">new</span> ct(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">a</span>)</span>{<span class=\"code-keyword\">var</span> s;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"metadata\"</span>===a.type){<span class=\"code-keyword\">for</span>(s=a.tracks.length;s--;)t||<span class=\"code-string\">\"video\"</span>!==a.tracks[s].type?i||<span class=\"code-string\">\"audio\"</span>!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&amp;&amp;!r.videoSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=<span class=\"code-keyword\">new</span> ut(t,e),r.videoSegmentStream.on(<span class=\"code-string\">\"log\"</span>,n.getLogTrigger_(<span class=\"code-string\">\"videoSegmentStream\"</span>)),r.videoSegmentStream.on(<span class=\"code-string\">\"timelineStartInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{i&amp;&amp;!e.keepOriginalTimestamps&amp;&amp;(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on(<span class=\"code-string\">\"processedGopsInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"gopInfo\"</span>)),r.videoSegmentStream.on(<span class=\"code-string\">\"segmentTimingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>)),r.videoSegmentStream.on(<span class=\"code-string\">\"baseMediaDecodeTime\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"videoTimingInfo\"</span>)),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&amp;&amp;!r.audioSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class=\"code-keyword\">new</span> dt(i,e),r.audioSegmentStream.on(<span class=\"code-string\">\"log\"</span>,n.getLogTrigger_(<span class=\"code-string\">\"audioSegmentStream\"</span>)),r.audioSegmentStream.on(<span class=\"code-string\">\"timingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioTimingInfo\"</span>)),r.audioSegmentStream.on(<span class=\"code-string\">\"segmentTimingInfo\"</span>,n.trigger.bind(n,<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class=\"code-string\">\"trackinfo\"</span>,{<span class=\"code-attr\">hasAudio</span>:!!i,<span class=\"code-attr\">hasVideo</span>:!!t})}})),r.coalesceStream.on(<span class=\"code-string\">\"data\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"data\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"id3Frame\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dispatchType=r.metadataStream.dispatchType,n.trigger(<span class=\"code-string\">\"id3Frame\"</span>,e)})),r.coalesceStream.on(<span class=\"code-string\">\"caption\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"caption\"</span>)),r.coalesceStream.on(<span class=\"code-string\">\"done\"</span>,<span class=\"code-keyword\">this</span>.trigger.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"done\"</span>)),vt(<span class=\"code-keyword\">this</span>,r)},<span class=\"code-keyword\">this</span>.setBaseMediaDecodeTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.transmuxPipeline_;e.keepOriginalTimestamps||(<span class=\"code-keyword\">this</span>.baseMediaDecodeTime=n),i&amp;&amp;(i.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,i.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,fe(i),r.audioTimestampRolloverStream&amp;&amp;r.audioTimestampRolloverStream.discontinuity()),t&amp;&amp;(r.videoSegmentStream&amp;&amp;(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,t.timelineStartInfo.pts=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,fe(t),r.captionStream.reset()),r.timestampRolloverStream&amp;&amp;r.timestampRolloverStream.discontinuity()},<span class=\"code-keyword\">this</span>.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},<span class=\"code-keyword\">this</span>.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.transmuxPipeline_;e.remux=t,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(t)},<span class=\"code-keyword\">this</span>.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.videoSegmentStream&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},<span class=\"code-keyword\">this</span>.getLogTrigger_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{i.stream=e,t.trigger(<span class=\"code-string\">\"log\"</span>,i)}},<span class=\"code-keyword\">this</span>.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(r){<span class=\"code-keyword\">var</span> t=gt(e);t&amp;&amp;<span class=\"code-string\">\"aac\"</span>!==<span class=\"code-keyword\">this</span>.transmuxPipeline_.type?<span class=\"code-keyword\">this</span>.setupAacPipeline():t||<span class=\"code-string\">\"ts\"</span>===<span class=\"code-keyword\">this</span>.transmuxPipeline_.type||<span class=\"code-keyword\">this</span>.setupTsPipeline(),r=!<span class=\"code-number\">1</span>}<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.push(e)},<span class=\"code-keyword\">this</span>.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.flush()},<span class=\"code-keyword\">this</span>.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.endTimeline()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.headOfPipeline.reset()},<span class=\"code-keyword\">this</span>.resetCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxPipeline_.captionStream&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxPipeline_.captionStream.reset()}}).prototype=<span class=\"code-keyword\">new</span> H;<span class=\"code-keyword\">var</span> bt,St,wt,It={<span class=\"code-attr\">Transmuxer</span>:lt,<span class=\"code-attr\">VideoSegmentStream</span>:ut,<span class=\"code-attr\">AudioSegmentStream</span>:dt,<span class=\"code-attr\">AUDIO_PROPERTIES</span>:ft,<span class=\"code-attr\">VIDEO_PROPERTIES</span>:pt,<span class=\"code-attr\">generateSegmentTimingInfo</span>:Tt},Et=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&gt;&gt;&gt;<span class=\"code-number\">0</span>},At=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">return</span> t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">0</span>]),t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">1</span>]),(t+=<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">2</span>]))+<span class=\"code-built_in\">String</span>.fromCharCode(e[<span class=\"code-number\">3</span>])},Lt=Et,Pt=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o,u=[];<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;t.byteLength;)r=Lt(t[n]&lt;&lt;<span class=\"code-number\">24</span>|t[n+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|t[n+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|t[n+<span class=\"code-number\">3</span>]),a=At(t.subarray(n+<span class=\"code-number\">4</span>,n+<span class=\"code-number\">8</span>)),s=r&gt;<span class=\"code-number\">1</span>?n+r:t.byteLength,a===i[<span class=\"code-number\">0</span>]&amp;&amp;(<span class=\"code-number\">1</span>===i.length?u.push(t.subarray(n+<span class=\"code-number\">8</span>,s)):(o=e(t.subarray(n+<span class=\"code-number\">8</span>,s),i.slice(<span class=\"code-number\">1</span>))).length&amp;&amp;(u=u.concat(o))),n=s;<span class=\"code-keyword\">return</span> u},kt=Et,xt=W.getUint64,Ot=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">isLeading</span>:(<span class=\"code-number\">12</span>&amp;e[<span class=\"code-number\">0</span>])&gt;&gt;&gt;<span class=\"code-number\">2</span>,<span class=\"code-attr\">dependsOn</span>:<span class=\"code-number\">3</span>&amp;e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">isDependedOn</span>:(<span class=\"code-number\">192</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">6</span>,<span class=\"code-attr\">hasRedundancy</span>:(<span class=\"code-number\">48</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>,<span class=\"code-attr\">paddingValue</span>:(<span class=\"code-number\">14</span>&amp;e[<span class=\"code-number\">1</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,<span class=\"code-attr\">isNonSyncSample</span>:<span class=\"code-number\">1</span>&amp;e[<span class=\"code-number\">1</span>],<span class=\"code-attr\">degradationPriority</span>:e[<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">3</span>]}},Dt=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> globalThis?globalThis:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> global?global:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> self?self:{},Ct=<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>?<span class=\"code-built_in\">window</span>:<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==Dt?Dt:<span class=\"code-string\">\"undefined\"</span>!=<span class=\"code-keyword\">typeof</span> self?self:{},Ut=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i,n=e.byteLength,r=[],a=<span class=\"code-number\">1</span>;a&lt;n<span class=\"code-number\">-2</span>;)<span class=\"code-number\">0</span>===e[a]&amp;&amp;<span class=\"code-number\">0</span>===e[a+<span class=\"code-number\">1</span>]&amp;&amp;<span class=\"code-number\">3</span>===e[a+<span class=\"code-number\">2</span>]?(r.push(a+<span class=\"code-number\">2</span>),a+=<span class=\"code-number\">2</span>):a++;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===r.length)<span class=\"code-keyword\">return</span> e;t=n-r.length,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t);<span class=\"code-keyword\">var</span> s=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(a=<span class=\"code-number\">0</span>;a&lt;t;s++,a++)s===r[<span class=\"code-number\">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class=\"code-keyword\">return</span> i},Rt=Le.CaptionStream,Mt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e,n=<span class=\"code-number\">0</span>;n&lt;t.length;n++){<span class=\"code-keyword\">var</span> r=t[n];<span class=\"code-keyword\">if</span>(i&lt;r.size)<span class=\"code-keyword\">return</span> r;i-=r.size}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},Bt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Pt(e,[<span class=\"code-string\">\"moof\"</span>,<span class=\"code-string\">\"traf\"</span>]),n=Pt(e,[<span class=\"code-string\">\"mdat\"</span>]),r={},a=[];<span class=\"code-keyword\">return</span> n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> n=i[t];a.push({<span class=\"code-attr\">mdat</span>:e,<span class=\"code-attr\">traf</span>:n})})),a.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i,n,a=e.mdat,s=e.traf,o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">trackId</span>:i.getUint32(<span class=\"code-number\">4</span>)},r=<span class=\"code-number\">1</span>&amp;n.flags[<span class=\"code-number\">2</span>],a=<span class=\"code-number\">2</span>&amp;n.flags[<span class=\"code-number\">2</span>],s=<span class=\"code-number\">8</span>&amp;n.flags[<span class=\"code-number\">2</span>],o=<span class=\"code-number\">16</span>&amp;n.flags[<span class=\"code-number\">2</span>],u=<span class=\"code-number\">32</span>&amp;n.flags[<span class=\"code-number\">2</span>],d=<span class=\"code-number\">65536</span>&amp;n.flags[<span class=\"code-number\">0</span>],l=<span class=\"code-number\">131072</span>&amp;n.flags[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">return</span> t=<span class=\"code-number\">8</span>,r&amp;&amp;(t+=<span class=\"code-number\">4</span>,n.baseDataOffset=i.getUint32(<span class=\"code-number\">12</span>),t+=<span class=\"code-number\">4</span>),a&amp;&amp;(n.sampleDescriptionIndex=i.getUint32(t),t+=<span class=\"code-number\">4</span>),s&amp;&amp;(n.defaultSampleDuration=i.getUint32(t),t+=<span class=\"code-number\">4</span>),o&amp;&amp;(n.defaultSampleSize=i.getUint32(t),t+=<span class=\"code-number\">4</span>),u&amp;&amp;(n.defaultSampleFlags=i.getUint32(t)),d&amp;&amp;(n.durationIsEmpty=!<span class=\"code-number\">0</span>),!r&amp;&amp;l&amp;&amp;(n.baseDataOffsetIsMoof=!<span class=\"code-number\">0</span>),n}(Pt(s,[<span class=\"code-string\">\"tfhd\"</span>])[<span class=\"code-number\">0</span>]),u=o.trackId,d=Pt(s,[<span class=\"code-string\">\"tfdt\"</span>]),l=d.length&gt;<span class=\"code-number\">0</span>?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>))};<span class=\"code-keyword\">return</span> <span class=\"code-number\">1</span>===t.version?t.baseMediaDecodeTime=xt(e.subarray(<span class=\"code-number\">4</span>)):t.baseMediaDecodeTime=kt(e[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|e[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[<span class=\"code-number\">7</span>]),t}(d[<span class=\"code-number\">0</span>]).baseMediaDecodeTime:<span class=\"code-number\">0</span>,c=Pt(s,[<span class=\"code-string\">\"trun\"</span>]);t===u&amp;&amp;c.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t,r=i.defaultSampleDuration||<span class=\"code-number\">0</span>,a=i.defaultSampleSize||<span class=\"code-number\">0</span>,s=i.trackId,o=[];<span class=\"code-keyword\">return</span> e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i={<span class=\"code-attr\">version</span>:e[<span class=\"code-number\">0</span>],<span class=\"code-attr\">flags</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.subarray(<span class=\"code-number\">1</span>,<span class=\"code-number\">4</span>)),<span class=\"code-attr\">samples</span>:[]},n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=<span class=\"code-number\">1</span>&amp;i.flags[<span class=\"code-number\">2</span>],a=<span class=\"code-number\">4</span>&amp;i.flags[<span class=\"code-number\">2</span>],s=<span class=\"code-number\">1</span>&amp;i.flags[<span class=\"code-number\">1</span>],o=<span class=\"code-number\">2</span>&amp;i.flags[<span class=\"code-number\">1</span>],u=<span class=\"code-number\">4</span>&amp;i.flags[<span class=\"code-number\">1</span>],d=<span class=\"code-number\">8</span>&amp;i.flags[<span class=\"code-number\">1</span>],l=n.getUint32(<span class=\"code-number\">4</span>),c=<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(r&amp;&amp;(i.dataOffset=n.getInt32(c),c+=<span class=\"code-number\">4</span>),a&amp;&amp;l&amp;&amp;(t={<span class=\"code-attr\">flags</span>:Ot(e.subarray(c,c+<span class=\"code-number\">4</span>))},c+=<span class=\"code-number\">4</span>,s&amp;&amp;(t.duration=n.getUint32(c),c+=<span class=\"code-number\">4</span>),o&amp;&amp;(t.size=n.getUint32(c),c+=<span class=\"code-number\">4</span>),d&amp;&amp;(<span class=\"code-number\">1</span>===i.version?t.compositionTimeOffset=n.getInt32(c):t.compositionTimeOffset=n.getUint32(c),c+=<span class=\"code-number\">4</span>),i.samples.push(t),l--);l--;)t={},s&amp;&amp;(t.duration=n.getUint32(c),c+=<span class=\"code-number\">4</span>),o&amp;&amp;(t.size=n.getUint32(c),c+=<span class=\"code-number\">4</span>),u&amp;&amp;(t.flags=Ot(e.subarray(c,c+<span class=\"code-number\">4</span>)),c+=<span class=\"code-number\">4</span>),d&amp;&amp;(<span class=\"code-number\">1</span>===i.version?t.compositionTimeOffset=n.getInt32(c):t.compositionTimeOffset=n.getUint32(c),c+=<span class=\"code-number\">4</span>),i.samples.push(t);<span class=\"code-keyword\">return</span> i}(e).samples;t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.duration&amp;&amp;(e.duration=r),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.size&amp;&amp;(e.size=a),e.trackId=s,e.dts=n,<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e.compositionTimeOffset&amp;&amp;(e.compositionTimeOffset=<span class=\"code-number\">0</span>),<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> n?(e.pts=n+Ct.BigInt(e.compositionTimeOffset),n+=Ct.BigInt(e.duration)):(e.pts=n+e.compositionTimeOffset,n+=e.duration)})),o=o.concat(t)})),o}(c,l,o),n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(e.buffer,e.byteOffset,e.byteLength),u={<span class=\"code-attr\">logs</span>:[],<span class=\"code-attr\">seiNals</span>:[]};<span class=\"code-keyword\">for</span>(r=<span class=\"code-number\">0</span>;r+<span class=\"code-number\">4</span>&lt;e.length;r+=a)<span class=\"code-keyword\">if</span>(a=o.getUint32(r),r+=<span class=\"code-number\">4</span>,!(a&lt;=<span class=\"code-number\">0</span>))<span class=\"code-keyword\">switch</span>(<span class=\"code-number\">31</span>&amp;e[r]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:<span class=\"code-keyword\">var</span> d=e.subarray(r+<span class=\"code-number\">1</span>,r+<span class=\"code-number\">1</span>+a),l=Mt(r,t);<span class=\"code-keyword\">if</span>(n={<span class=\"code-attr\">nalUnitType</span>:<span class=\"code-string\">\"sei_rbsp\"</span>,<span class=\"code-attr\">size</span>:a,<span class=\"code-attr\">data</span>:d,<span class=\"code-attr\">escapedRBSP</span>:Ut(d),<span class=\"code-attr\">trackId</span>:i},l)n.pts=l.pts,n.dts=l.dts,s=l;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(!s){u.logs.push({<span class=\"code-attr\">level</span>:<span class=\"code-string\">\"warn\"</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"We've encountered a nal unit without data at \"</span>+r+<span class=\"code-string\">\" for trackId \"</span>+i+<span class=\"code-string\">\". See mux.js#223.\"</span>});<span class=\"code-keyword\">break</span>}n.pts=s.pts,n.dts=s.dts}u.seiNals.push(n)}<span class=\"code-keyword\">return</span> u}(a,i,u),r[u]||(r[u]={<span class=\"code-attr\">seiNals</span>:[],<span class=\"code-attr\">logs</span>:[]}),r[u].seiNals=r[u].seiNals.concat(n.seiNals),r[u].logs=r[u].logs.concat(n.logs))})),r},Nt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">this</span>.isInitialized=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> s},<span class=\"code-keyword\">this</span>.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e=<span class=\"code-keyword\">new</span> Rt,s=!<span class=\"code-number\">0</span>,a=!!t&amp;&amp;t.isPartial,e.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!<span class=\"code-number\">0</span>})),e.on(<span class=\"code-string\">\"log\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r.logs.push(e)}))},<span class=\"code-keyword\">this</span>.isNewInit=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>!(e&amp;&amp;<span class=\"code-number\">0</span>===e.length||t&amp;&amp;<span class=\"code-string\">\"object\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;<span class=\"code-number\">0</span>===<span class=\"code-built_in\">Object</span>.keys(t).length||i===e[<span class=\"code-number\">0</span>]&amp;&amp;n===t[i])},<span class=\"code-keyword\">this</span>.parse=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,a,s</span>)</span>{<span class=\"code-keyword\">var</span> o;<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(!a||!s)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.isNewInit(a,s))i=a[<span class=\"code-number\">0</span>],n=s[i];<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===i||!n)<span class=\"code-keyword\">return</span> t.push(e),<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(;t.length&gt;<span class=\"code-number\">0</span>;){<span class=\"code-keyword\">var</span> u=t.shift();<span class=\"code-keyword\">this</span>.parse(u,a,s)}<span class=\"code-keyword\">return</span> o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n=Bt(e,t)[t]||{};<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">seiNals</span>:n.seiNals,<span class=\"code-attr\">logs</span>:n.logs,<span class=\"code-attr\">timescale</span>:i}}(e,i,n),o&amp;&amp;o.logs&amp;&amp;(r.logs=r.logs.concat(o.logs)),<span class=\"code-literal\">null</span>!==o&amp;&amp;o.seiNals?(<span class=\"code-keyword\">this</span>.pushNals(o.seiNals),<span class=\"code-keyword\">this</span>.flushStream(),r):r.logs.length?{<span class=\"code-attr\">logs</span>:r.logs,<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">captionStreams</span>:[]}:<span class=\"code-literal\">null</span>},<span class=\"code-keyword\">this</span>.pushNals=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized()||!t||<span class=\"code-number\">0</span>===t.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}))},<span class=\"code-keyword\">this</span>.flushStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;a?e.partialFlush():e.flush()},<span class=\"code-keyword\">this</span>.clearParsedCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r.captions=[],r.captionStreams={},r.logs=[]},<span class=\"code-keyword\">this</span>.resetCaptionStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.isInitialized())<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;e.reset()},<span class=\"code-keyword\">this</span>.clearAllCaptions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.clearParsedCaptions(),<span class=\"code-keyword\">this</span>.resetCaptionStream()},<span class=\"code-keyword\">this</span>.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t=[],i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>,r?<span class=\"code-keyword\">this</span>.clearParsedCaptions():r={<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">captionStreams</span>:{},<span class=\"code-attr\">logs</span>:[]},<span class=\"code-keyword\">this</span>.resetCaptionStream()},<span class=\"code-keyword\">this</span>.reset()},Ft=Et,qt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>(<span class=\"code-string\">\"00\"</span>+e.toString(<span class=\"code-number\">16</span>)).slice(<span class=\"code-number\">-2</span>)},Ht=W.getUint64;bt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Pt(t,[<span class=\"code-string\">\"moof\"</span>,<span class=\"code-string\">\"traf\"</span>]).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a=Pt(i,[<span class=\"code-string\">\"tfhd\"</span>])[<span class=\"code-number\">0</span>],s=Ft(a[<span class=\"code-number\">4</span>]&lt;&lt;<span class=\"code-number\">24</span>|a[<span class=\"code-number\">5</span>]&lt;&lt;<span class=\"code-number\">16</span>|a[<span class=\"code-number\">6</span>]&lt;&lt;<span class=\"code-number\">8</span>|a[<span class=\"code-number\">7</span>]),o=e[s]||<span class=\"code-number\">9e4</span>,u=Pt(i,[<span class=\"code-string\">\"tfdt\"</span>])[<span class=\"code-number\">0</span>],d=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(u.buffer,u.byteOffset,u.byteLength);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span>(n=<span class=\"code-number\">1</span>===u[<span class=\"code-number\">0</span>]?Ht(u.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">12</span>)):d.getUint32(<span class=\"code-number\">4</span>))?r=n/Ct.BigInt(o):<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> n||<span class=\"code-built_in\">isNaN</span>(n)||(r=n/o),r&lt;<span class=\"code-built_in\">Number</span>.MAX_SAFE_INTEGER&amp;&amp;(r=<span class=\"code-built_in\">Number</span>(r)),r&lt;t&amp;&amp;(t=r),t}),<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span><span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> i||<span class=\"code-built_in\">isFinite</span>(i)?i:<span class=\"code-number\">0</span>},wt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>===e[<span class=\"code-number\">0</span>]?<span class=\"code-number\">12</span>:<span class=\"code-number\">20</span>;<span class=\"code-keyword\">return</span> Ft(e[t]&lt;&lt;<span class=\"code-number\">24</span>|e[t+<span class=\"code-number\">1</span>]&lt;&lt;<span class=\"code-number\">16</span>|e[t+<span class=\"code-number\">2</span>]&lt;&lt;<span class=\"code-number\">8</span>|e[t+<span class=\"code-number\">3</span>])},St=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=Pt(e,[<span class=\"code-string\">\"moov\"</span>,<span class=\"code-string\">\"trak\"</span>]),i=[];<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,n,r={},a=Pt(e,[<span class=\"code-string\">\"tkhd\"</span>])[<span class=\"code-number\">0</span>];a&amp;&amp;(n=(t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(a.buffer,a.byteOffset,a.byteLength)).getUint8(<span class=\"code-number\">0</span>),r.id=<span class=\"code-number\">0</span>===n?t.getUint32(<span class=\"code-number\">12</span>):t.getUint32(<span class=\"code-number\">20</span>));<span class=\"code-keyword\">var</span> s=Pt(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"hdlr\"</span>])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=At(s.subarray(<span class=\"code-number\">8</span>,<span class=\"code-number\">12</span>));r.type=<span class=\"code-string\">\"vide\"</span>===o?<span class=\"code-string\">\"video\"</span>:<span class=\"code-string\">\"soun\"</span>===o?<span class=\"code-string\">\"audio\"</span>:o}<span class=\"code-keyword\">var</span> u=Pt(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"minf\"</span>,<span class=\"code-string\">\"stbl\"</span>,<span class=\"code-string\">\"stsd\"</span>])[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(u){<span class=\"code-keyword\">var</span> d=u.subarray(<span class=\"code-number\">8</span>);r.codec=At(d.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>));<span class=\"code-keyword\">var</span> l,c=Pt(d,[r.codec])[<span class=\"code-number\">0</span>];c&amp;&amp;(<span class=\"code-regexp\">/^[asm]vc[1-9]$/i</span>.test(r.codec)?(l=c.subarray(<span class=\"code-number\">78</span>),<span class=\"code-string\">\"avcC\"</span>===At(l.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>))&amp;&amp;l.length&gt;<span class=\"code-number\">11</span>?(r.codec+=<span class=\"code-string\">\".\"</span>,r.codec+=qt(l[<span class=\"code-number\">9</span>]),r.codec+=qt(l[<span class=\"code-number\">10</span>]),r.codec+=qt(l[<span class=\"code-number\">11</span>])):r.codec=<span class=\"code-string\">\"avc1.4d400d\"</span>):<span class=\"code-regexp\">/^mp4[a,v]$/i</span>.test(r.codec)?(l=c.subarray(<span class=\"code-number\">28</span>),<span class=\"code-string\">\"esds\"</span>===At(l.subarray(<span class=\"code-number\">4</span>,<span class=\"code-number\">8</span>))&amp;&amp;l.length&gt;<span class=\"code-number\">20</span>&amp;&amp;<span class=\"code-number\">0</span>!==l[<span class=\"code-number\">19</span>]?(r.codec+=<span class=\"code-string\">\".\"</span>+qt(l[<span class=\"code-number\">19</span>]),r.codec+=<span class=\"code-string\">\".\"</span>+qt(l[<span class=\"code-number\">20</span>]&gt;&gt;&gt;<span class=\"code-number\">2</span>&amp;<span class=\"code-number\">63</span>).replace(<span class=\"code-regexp\">/^0/</span>,<span class=\"code-string\">\"\"</span>)):r.codec=<span class=\"code-string\">\"mp4a.40.2\"</span>):r.codec=r.codec.toLowerCase())}<span class=\"code-keyword\">var</span> h=Pt(e,[<span class=\"code-string\">\"mdia\"</span>,<span class=\"code-string\">\"mdhd\"</span>])[<span class=\"code-number\">0</span>];h&amp;&amp;(r.timescale=wt(h)),i.push(r)})),i};<span class=\"code-keyword\">var</span> Gt=bt,Wt=St,Vt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">31</span>&amp;e[<span class=\"code-number\">1</span>];<span class=\"code-keyword\">return</span>(t&lt;&lt;=<span class=\"code-number\">8</span>)|e[<span class=\"code-number\">2</span>]},jt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!!(<span class=\"code-number\">64</span>&amp;e[<span class=\"code-number\">1</span>])},Xt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>(<span class=\"code-number\">48</span>&amp;e[<span class=\"code-number\">3</span>])&gt;&gt;&gt;<span class=\"code-number\">4</span>&gt;<span class=\"code-number\">1</span>&amp;&amp;(t+=e[<span class=\"code-number\">4</span>]+<span class=\"code-number\">1</span>),t},zt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">switch</span>(e){<span class=\"code-keyword\">case</span> <span class=\"code-number\">5</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">6</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"sei_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">7</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"seq_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">8</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"pic_parameter_set_rbsp\"</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">9</span>:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"access_unit_delimiter_rbsp\"</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},Qt={<span class=\"code-attr\">parseType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Vt(e);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===i?<span class=\"code-string\">\"pat\"</span>:i===t?<span class=\"code-string\">\"pmt\"</span>:t?<span class=\"code-string\">\"pes\"</span>:<span class=\"code-literal\">null</span>},<span class=\"code-attr\">parsePat</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=jt(e),i=<span class=\"code-number\">4</span>+Xt(e);<span class=\"code-keyword\">return</span> t&amp;&amp;(i+=e[i]+<span class=\"code-number\">1</span>),(<span class=\"code-number\">31</span>&amp;e[i+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[i+<span class=\"code-number\">11</span>]},<span class=\"code-attr\">parsePmt</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={},i=jt(e),n=<span class=\"code-number\">4</span>+Xt(e);<span class=\"code-keyword\">if</span>(i&amp;&amp;(n+=e[n]+<span class=\"code-number\">1</span>),<span class=\"code-number\">1</span>&amp;e[n+<span class=\"code-number\">5</span>]){<span class=\"code-keyword\">var</span> r;r=<span class=\"code-number\">3</span>+((<span class=\"code-number\">15</span>&amp;e[n+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[n+<span class=\"code-number\">2</span>])<span class=\"code-number\">-4</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a=<span class=\"code-number\">12</span>+((<span class=\"code-number\">15</span>&amp;e[n+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[n+<span class=\"code-number\">11</span>]);a&lt;r;){<span class=\"code-keyword\">var</span> s=n+a;t[(<span class=\"code-number\">31</span>&amp;e[s+<span class=\"code-number\">1</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[s+<span class=\"code-number\">2</span>]]=e[s],a+=<span class=\"code-number\">5</span>+((<span class=\"code-number\">15</span>&amp;e[s+<span class=\"code-number\">3</span>])&lt;&lt;<span class=\"code-number\">8</span>|e[s+<span class=\"code-number\">4</span>])}<span class=\"code-keyword\">return</span> t}},<span class=\"code-attr\">parsePayloadUnitStartIndicator</span>:jt,<span class=\"code-attr\">parsePesType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">switch</span>(t[Vt(e)]){<span class=\"code-keyword\">case</span> Pe.H264_STREAM_TYPE:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"video\"</span>;<span class=\"code-keyword\">case</span> Pe.ADTS_STREAM_TYPE:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"audio\"</span>;<span class=\"code-keyword\">case</span> Pe.METADATA_STREAM_TYPE:<span class=\"code-keyword\">return</span><span class=\"code-string\">\"timed-metadata\"</span>;<span class=\"code-keyword\">default</span>:<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},<span class=\"code-attr\">parsePesTime</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!jt(e))<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">4</span>+Xt(e);<span class=\"code-keyword\">if</span>(t&gt;=e.byteLength)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i,n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">return</span> <span class=\"code-number\">192</span>&amp;(i=e[t+<span class=\"code-number\">7</span>])&amp;&amp;((n={}).pts=(<span class=\"code-number\">14</span>&amp;e[t+<span class=\"code-number\">9</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">10</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">11</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">12</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,n.pts*=<span class=\"code-number\">4</span>,n.pts+=(<span class=\"code-number\">6</span>&amp;e[t+<span class=\"code-number\">13</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>,n.dts=n.pts,<span class=\"code-number\">64</span>&amp;i&amp;&amp;(n.dts=(<span class=\"code-number\">14</span>&amp;e[t+<span class=\"code-number\">14</span>])&lt;&lt;<span class=\"code-number\">27</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">15</span>])&lt;&lt;<span class=\"code-number\">20</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">16</span>])&lt;&lt;<span class=\"code-number\">12</span>|(<span class=\"code-number\">255</span>&amp;e[t+<span class=\"code-number\">17</span>])&lt;&lt;<span class=\"code-number\">5</span>|(<span class=\"code-number\">254</span>&amp;e[t+<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">3</span>,n.dts*=<span class=\"code-number\">4</span>,n.dts+=(<span class=\"code-number\">6</span>&amp;e[t+<span class=\"code-number\">18</span>])&gt;&gt;&gt;<span class=\"code-number\">1</span>)),n},<span class=\"code-attr\">videoPacketContainsKeyFrame</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">4</span>+Xt(e),i=e.subarray(t),n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>,a=!<span class=\"code-number\">1</span>;r&lt;i.byteLength<span class=\"code-number\">-3</span>;r++)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===i[r+<span class=\"code-number\">2</span>]){n=r+<span class=\"code-number\">5</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">for</span>(;n&lt;i.byteLength;)<span class=\"code-keyword\">switch</span>(i[n]){<span class=\"code-keyword\">case</span> <span class=\"code-number\">0</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-1</span>]){n+=<span class=\"code-number\">2</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-2</span>]){n++;<span class=\"code-keyword\">break</span>}r+<span class=\"code-number\">3</span>!==n<span class=\"code-number\">-2</span>&amp;&amp;<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===zt(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">do</span>{n++}<span class=\"code-keyword\">while</span>(<span class=\"code-number\">1</span>!==i[n]&amp;&amp;n&lt;i.length);r=n<span class=\"code-number\">-2</span>,n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> <span class=\"code-number\">1</span>:<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-1</span>]||<span class=\"code-number\">0</span>!==i[n<span class=\"code-number\">-2</span>]){n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===zt(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>),r=n<span class=\"code-number\">-2</span>,n+=<span class=\"code-number\">3</span>;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:n+=<span class=\"code-number\">3</span>}<span class=\"code-keyword\">return</span> i=i.subarray(r),n-=r,r=<span class=\"code-number\">0</span>,i&amp;&amp;i.byteLength&gt;<span class=\"code-number\">3</span>&amp;&amp;<span class=\"code-string\">\"slice_layer_without_partitioning_rbsp_idr\"</span>===zt(<span class=\"code-number\">31</span>&amp;i[r+<span class=\"code-number\">3</span>])&amp;&amp;(a=!<span class=\"code-number\">0</span>),a}},Yt=Ue,Kt={};Kt.ts=Qt,Kt.aac=ot;<span class=\"code-keyword\">var</span> $t=se,Jt=<span class=\"code-number\">188</span>,Zt=<span class=\"code-number\">71</span>,ei=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r,a,s,o=<span class=\"code-number\">0</span>,u=Jt,d=!<span class=\"code-number\">1</span>;u&lt;=e.byteLength;)<span class=\"code-keyword\">if</span>(e[o]!==Zt||e[u]!==Zt&amp;&amp;u!==e.byteLength)o++,u++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(n=e.subarray(o,u),<span class=\"code-string\">\"pes\"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;a&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"audio\"</span>,i.audio.push(s),d=!<span class=\"code-number\">0</span>)),d)<span class=\"code-keyword\">break</span>;o+=Jt,u+=Jt}<span class=\"code-keyword\">for</span>(o=(u=e.byteLength)-Jt,d=!<span class=\"code-number\">1</span>;o&gt;=<span class=\"code-number\">0</span>;)<span class=\"code-keyword\">if</span>(e[o]!==Zt||e[u]!==Zt&amp;&amp;u!==e.byteLength)o--,u--;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(n=e.subarray(o,u),<span class=\"code-string\">\"pes\"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;a&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"audio\"</span>,i.audio.push(s),d=!<span class=\"code-number\">0</span>)),d)<span class=\"code-keyword\">break</span>;o-=Jt,u-=Jt}},ti=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r,a,s,o,u,d,l=<span class=\"code-number\">0</span>,c=Jt,h=!<span class=\"code-number\">1</span>,f={<span class=\"code-attr\">data</span>:[],<span class=\"code-attr\">size</span>:<span class=\"code-number\">0</span>};c&lt;e.byteLength;)<span class=\"code-keyword\">if</span>(e[l]!==Zt||e[c]!==Zt)l++,c++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(n=e.subarray(l,c),<span class=\"code-string\">\"pes\"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"video\"</span>===r&amp;&amp;(a&amp;&amp;!h&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"video\"</span>,i.video.push(s),h=!<span class=\"code-number\">0</span>),!i.firstKeyFrame))){<span class=\"code-keyword\">if</span>(a&amp;&amp;<span class=\"code-number\">0</span>!==f.size){<span class=\"code-keyword\">for</span>(o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(f.size),u=<span class=\"code-number\">0</span>;f.data.length;)d=f.data.shift(),o.set(d,u),u+=d.byteLength;<span class=\"code-keyword\">if</span>(Kt.ts.videoPacketContainsKeyFrame(o)){<span class=\"code-keyword\">var</span> p=Kt.ts.parsePesTime(o);p?(i.firstKeyFrame=p,i.firstKeyFrame.type=<span class=\"code-string\">\"video\"</span>):<span class=\"code-built_in\">console</span>.warn(<span class=\"code-string\">\"Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.\"</span>)}f.size=<span class=\"code-number\">0</span>}f.data.push(n),f.size+=n.byteLength}<span class=\"code-keyword\">if</span>(h&amp;&amp;i.firstKeyFrame)<span class=\"code-keyword\">break</span>;l+=Jt,c+=Jt}<span class=\"code-keyword\">for</span>(l=(c=e.byteLength)-Jt,h=!<span class=\"code-number\">1</span>;l&gt;=<span class=\"code-number\">0</span>;)<span class=\"code-keyword\">if</span>(e[l]!==Zt||e[c]!==Zt)l--,c--;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(n=e.subarray(l,c),<span class=\"code-string\">\"pes\"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class=\"code-string\">\"video\"</span>===r&amp;&amp;a&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class=\"code-string\">\"video\"</span>,i.video.push(s),h=!<span class=\"code-number\">0</span>)),h)<span class=\"code-keyword\">break</span>;l-=Jt,c-=Jt}},ii=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span> i=Kt.aac.isLikelyAacData(e)?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t,i=!<span class=\"code-number\">1</span>,n=<span class=\"code-number\">0</span>,r=<span class=\"code-literal\">null</span>,a=<span class=\"code-literal\">null</span>,s=<span class=\"code-number\">0</span>,o=<span class=\"code-number\">0</span>;e.length-o&gt;=<span class=\"code-number\">3</span>;){<span class=\"code-keyword\">switch</span>(Kt.aac.parseType(e,o)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"timed-metadata\"</span>:<span class=\"code-keyword\">if</span>(e.length-o&lt;<span class=\"code-number\">10</span>){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>((s=Kt.aac.parseId3TagSize(e,o))&gt;e.length){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-literal\">null</span>===a&amp;&amp;(t=e.subarray(o,o+s),a=Kt.aac.parseAacTimestamp(t)),o+=s;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"audio\"</span>:<span class=\"code-keyword\">if</span>(e.length-o&lt;<span class=\"code-number\">7</span>){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-keyword\">if</span>((s=Kt.aac.parseAdtsSize(e,o))&gt;e.length){i=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">break</span>}<span class=\"code-literal\">null</span>===r&amp;&amp;(t=e.subarray(o,o+s),r=Kt.aac.parseSampleRate(t)),n++,o+=s;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">default</span>:o++}<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===r||<span class=\"code-literal\">null</span>===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> u=$t/r;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">audio</span>:[{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">dts</span>:a,<span class=\"code-attr\">pts</span>:a},{<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">dts</span>:a+<span class=\"code-number\">1024</span>*n*u,<span class=\"code-attr\">pts</span>:a+<span class=\"code-number\">1024</span>*n*u}]}}(e):<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={<span class=\"code-attr\">pid</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">table</span>:<span class=\"code-literal\">null</span>},i={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">0</span>,r=Jt;r&lt;e.byteLength;)<span class=\"code-keyword\">if</span>(e[n]!==Zt||e[r]!==Zt)n++,r++;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">switch</span>(i=e.subarray(n,r),Kt.ts.parseType(i,t.pid)){<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pat\"</span>:t.pid=Kt.ts.parsePat(i);<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span><span class=\"code-string\">\"pmt\"</span>:<span class=\"code-keyword\">var</span> a=Kt.ts.parsePmt(i);t.table=t.table||{},<span class=\"code-built_in\">Object</span>.keys(a).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.table[e]=a[e]}))}n+=Jt,r+=Jt}}(e,t),t.table)<span class=\"code-keyword\">if</span>(t.table.hasOwnProperty(n))<span class=\"code-keyword\">switch</span>(t.table[n]){<span class=\"code-keyword\">case</span> Pe.H264_STREAM_TYPE:i.video=[],ti(e,t,i),<span class=\"code-number\">0</span>===i.video.length&amp;&amp;<span class=\"code-keyword\">delete</span> i.video;<span class=\"code-keyword\">break</span>;<span class=\"code-keyword\">case</span> Pe.ADTS_STREAM_TYPE:i.audio=[],ei(e,t,i),<span class=\"code-number\">0</span>===i.audio.length&amp;&amp;<span class=\"code-keyword\">delete</span> i.audio}<span class=\"code-keyword\">return</span> i}(e),i&amp;&amp;(i.audio||i.video)?(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(e.audio&amp;&amp;e.audio.length){<span class=\"code-keyword\">var</span> i=t;(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i||<span class=\"code-built_in\">isNaN</span>(i))&amp;&amp;(i=e.audio[<span class=\"code-number\">0</span>].dts),e.audio.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dts=Yt(e.dts,i),e.pts=Yt(e.pts,i),e.dtsTime=e.dts/$t,e.ptsTime=e.pts/$t}))}<span class=\"code-keyword\">if</span>(e.video&amp;&amp;e.video.length){<span class=\"code-keyword\">var</span> n=t;<span class=\"code-keyword\">if</span>((<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n||<span class=\"code-built_in\">isNaN</span>(n))&amp;&amp;(n=e.video[<span class=\"code-number\">0</span>].dts),e.video.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.dts=Yt(e.dts,n),e.pts=Yt(e.pts,n),e.dtsTime=e.dts/$t,e.ptsTime=e.pts/$t})),e.firstKeyFrame){<span class=\"code-keyword\">var</span> r=e.firstKeyFrame;r.dts=Yt(r.dts,n),r.pts=Yt(r.pts,n),r.dtsTime=r.dts/$t,r.ptsTime=r.pts/$t}}}(i,t),i):<span class=\"code-literal\">null</span>},ni=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.options=t||{},<span class=\"code-keyword\">this</span>.self=e,<span class=\"code-keyword\">this</span>.init()}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.init=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer.dispose(),<span class=\"code-keyword\">this</span>.transmuxer=<span class=\"code-keyword\">new</span> It.Transmuxer(<span class=\"code-keyword\">this</span>.options),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.initSegment;t.initSegment={<span class=\"code-attr\">data</span>:i.buffer,<span class=\"code-attr\">byteOffset</span>:i.byteOffset,<span class=\"code-attr\">byteLength</span>:i.byteLength};<span class=\"code-keyword\">var</span> n=t.data;t.data=n.buffer,e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"data\"</span>,<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">byteOffset</span>:n.byteOffset,<span class=\"code-attr\">byteLength</span>:n.byteLength},[t.data])})),t.on(<span class=\"code-string\">\"done\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"done\"</span>})})),t.on(<span class=\"code-string\">\"gopInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"gopInfo\"</span>,<span class=\"code-attr\">gopInfo</span>:t})})),t.on(<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">decode</span>:ue(t.start.dts),<span class=\"code-attr\">presentation</span>:ue(t.start.pts)},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">decode</span>:ue(t.end.dts),<span class=\"code-attr\">presentation</span>:ue(t.end.pts)},<span class=\"code-attr\">baseMediaDecodeTime</span>:ue(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=ue(t.prependedContentDuration)),e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>,<span class=\"code-attr\">videoSegmentTimingInfo</span>:i})})),t.on(<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i={<span class=\"code-attr\">start</span>:{<span class=\"code-attr\">decode</span>:ue(t.start.dts),<span class=\"code-attr\">presentation</span>:ue(t.start.pts)},<span class=\"code-attr\">end</span>:{<span class=\"code-attr\">decode</span>:ue(t.end.dts),<span class=\"code-attr\">presentation</span>:ue(t.end.pts)},<span class=\"code-attr\">baseMediaDecodeTime</span>:ue(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=ue(t.prependedContentDuration)),e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>,<span class=\"code-attr\">audioSegmentTimingInfo</span>:i})})),t.on(<span class=\"code-string\">\"id3Frame\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"id3Frame\"</span>,<span class=\"code-attr\">id3Frame</span>:t})})),t.on(<span class=\"code-string\">\"caption\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"caption\"</span>,<span class=\"code-attr\">caption</span>:t})})),t.on(<span class=\"code-string\">\"trackinfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"trackinfo\"</span>,<span class=\"code-attr\">trackInfo</span>:t})})),t.on(<span class=\"code-string\">\"audioTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"audioTimingInfo\"</span>,<span class=\"code-attr\">audioTimingInfo</span>:{<span class=\"code-attr\">start</span>:ue(t.start),<span class=\"code-attr\">end</span>:ue(t.end)}})})),t.on(<span class=\"code-string\">\"videoTimingInfo\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"videoTimingInfo\"</span>,<span class=\"code-attr\">videoTimingInfo</span>:{<span class=\"code-attr\">start</span>:ue(t.start),<span class=\"code-attr\">end</span>:ue(t.end)}})})),t.on(<span class=\"code-string\">\"log\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"log\"</span>,<span class=\"code-attr\">log</span>:t})}))}(<span class=\"code-keyword\">this</span>.self,<span class=\"code-keyword\">this</span>.transmuxer)},t.pushMp4Captions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.captionParser||(<span class=\"code-keyword\">this</span>.captionParser=<span class=\"code-keyword\">new</span> Nt,<span class=\"code-keyword\">this</span>.captionParser.init());<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.data,e.byteOffset,e.byteLength),i=<span class=\"code-keyword\">this</span>.captionParser.parse(t,e.trackIds,e.timescales);<span class=\"code-keyword\">this</span>.self.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"mp4Captions\"</span>,<span class=\"code-attr\">captions</span>:i&amp;&amp;i.captions||[],<span class=\"code-attr\">logs</span>:i&amp;&amp;i.logs||[],<span class=\"code-attr\">data</span>:t.buffer},[t.buffer])},t.probeMp4StartTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.timescales,i=e.data,n=Gt(t,i);<span class=\"code-keyword\">this</span>.self.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"probeMp4StartTime\"</span>,<span class=\"code-attr\">startTime</span>:n,<span class=\"code-attr\">data</span>:i},[i.buffer])},t.probeMp4Tracks=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.data,i=Wt(t);<span class=\"code-keyword\">this</span>.self.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"probeMp4Tracks\"</span>,<span class=\"code-attr\">tracks</span>:i,<span class=\"code-attr\">data</span>:t},[t.buffer])},t.probeTs=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.data,i=e.baseStartTime,n=<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> i||<span class=\"code-built_in\">isNaN</span>(i)?<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>:i*se,r=ii(t,n),a=<span class=\"code-literal\">null</span>;r&amp;&amp;((a={<span class=\"code-attr\">hasVideo</span>:r.video&amp;&amp;<span class=\"code-number\">2</span>===r.video.length||!<span class=\"code-number\">1</span>,<span class=\"code-attr\">hasAudio</span>:r.audio&amp;&amp;<span class=\"code-number\">2</span>===r.audio.length||!<span class=\"code-number\">1</span>}).hasVideo&amp;&amp;(a.videoStart=r.video[<span class=\"code-number\">0</span>].ptsTime),a.hasAudio&amp;&amp;(a.audioStart=r.audio[<span class=\"code-number\">0</span>].ptsTime)),<span class=\"code-keyword\">this</span>.self.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"probeTs\"</span>,<span class=\"code-attr\">result</span>:a,<span class=\"code-attr\">data</span>:t},[t.buffer])},t.clearAllMp4Captions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.captionParser&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.captionParser&amp;&amp;<span class=\"code-keyword\">this</span>.captionParser.clearParsedCaptions()},t.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.data,e.byteOffset,e.byteLength);<span class=\"code-keyword\">this</span>.transmuxer.push(t)},t.reset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.reset()},t.setTimestampOffset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.timestampOffset||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">this</span>.transmuxer.setBaseMediaDecodeTime(<span class=\"code-built_in\">Math</span>.round(oe(t)))},t.setAudioAppendStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.setAudioAppendStart(<span class=\"code-built_in\">Math</span>.ceil(oe(e.appendStart)))},t.setRemux=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.setRemux(e.remux)},t.flush=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.flush(),self.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"done\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"transmuxed\"</span>})},t.endTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.endTimeline(),self.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"endedtimeline\"</span>,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"transmuxed\"</span>})},t.alignGopsWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"init\"</span>===e.data.action&amp;&amp;e.data.options?<span class=\"code-keyword\">this</span>.messageHandlers=<span class=\"code-keyword\">new</span> ni(self,e.data.options):(<span class=\"code-keyword\">this</span>.messageHandlers||(<span class=\"code-keyword\">this</span>.messageHandlers=<span class=\"code-keyword\">new</span> ni(self)),e.data&amp;&amp;e.data.action&amp;&amp;<span class=\"code-string\">\"init\"</span>!==e.data.action&amp;&amp;<span class=\"code-keyword\">this</span>.messageHandlers[e.data.action]&amp;&amp;<span class=\"code-keyword\">this</span>.messageHandlers[e.data.action](e.data))}}))),hi=ui(ci),fi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,s=e.onData,o=e.onTrackInfo,u=e.onAudioTimingInfo,d=e.onVideoTimingInfo,l=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,h=e.onId3,f=e.onCaptions,p=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,y=e.isEndOfTimeline,v={<span class=\"code-attr\">buffer</span>:[]},_=y;<span class=\"code-keyword\">if</span>(t.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{t.currentTransmux===e&amp;&amp;(<span class=\"code-string\">\"data\"</span>===i.data.action&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.data.segment,r=n.type,a=n.initSegment,s=n.captions,o=n.captionStreams,u=n.metadata,d=n.videoFrameDtsTime,l=n.videoFramePtsTime;t.buffer.push({<span class=\"code-attr\">captions</span>:s,<span class=\"code-attr\">captionStreams</span>:o,<span class=\"code-attr\">metadata</span>:u});<span class=\"code-keyword\">var</span> c=e.data.segment.boxes||{<span class=\"code-attr\">data</span>:e.data.segment.data},h={<span class=\"code-attr\">type</span>:r,<span class=\"code-attr\">data</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(c.data,c.data.byteOffset,c.data.byteLength),<span class=\"code-attr\">initSegment</span>:<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.data,a.byteOffset,a.byteLength)};<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==d&amp;&amp;(h.videoFrameDtsTime=d),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==l&amp;&amp;(h.videoFramePtsTime=l),i(h)}(i,v,s),<span class=\"code-string\">\"trackinfo\"</span>===i.data.action&amp;&amp;o(i.data.trackInfo),<span class=\"code-string\">\"gopInfo\"</span>===i.data.action&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.gopInfo=e.data.gopInfo}(i,v),<span class=\"code-string\">\"audioTimingInfo\"</span>===i.data.action&amp;&amp;u(i.data.audioTimingInfo),<span class=\"code-string\">\"videoTimingInfo\"</span>===i.data.action&amp;&amp;d(i.data.videoTimingInfo),<span class=\"code-string\">\"videoSegmentTimingInfo\"</span>===i.data.action&amp;&amp;l(i.data.videoSegmentTimingInfo),<span class=\"code-string\">\"audioSegmentTimingInfo\"</span>===i.data.action&amp;&amp;c(i.data.audioSegmentTimingInfo),<span class=\"code-string\">\"id3Frame\"</span>===i.data.action&amp;&amp;h([i.data.id3Frame],i.data.id3Frame.dispatchType),<span class=\"code-string\">\"caption\"</span>===i.data.action&amp;&amp;f(i.data.caption),<span class=\"code-string\">\"endedtimeline\"</span>===i.data.action&amp;&amp;(_=!<span class=\"code-number\">1</span>,m()),<span class=\"code-string\">\"log\"</span>===i.data.action&amp;&amp;g(i.data.log),<span class=\"code-string\">\"transmuxed\"</span>===i.data.type&amp;&amp;(_||(t.onmessage=<span class=\"code-literal\">null</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({<span class=\"code-attr\">transmuxedData</span>:v,<span class=\"code-attr\">callback</span>:p}),pi(t))))},n&amp;&amp;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setAudioAppendStart\"</span>,<span class=\"code-attr\">appendStart</span>:n}),<span class=\"code-built_in\">Array</span>.isArray(r)&amp;&amp;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"alignGopsWith\"</span>,<span class=\"code-attr\">gopsToAlignWith</span>:r}),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==a&amp;&amp;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setRemux\"</span>,<span class=\"code-attr\">remux</span>:a}),i.byteLength){<span class=\"code-keyword\">var</span> T=i <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>?i:i.buffer,b=i <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>?<span class=\"code-number\">0</span>:i.byteOffset;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"push\"</span>,<span class=\"code-attr\">data</span>:T,<span class=\"code-attr\">byteOffset</span>:b,<span class=\"code-attr\">byteLength</span>:i.byteLength},[T])}y&amp;&amp;t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"endTimeline\"</span>}),t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"flush\"</span>})},pi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.currentTransmux=<span class=\"code-literal\">null</span>,e.transmuxQueue.length&amp;&amp;(e.currentTransmux=e.transmuxQueue.shift(),<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e.currentTransmux?e.currentTransmux():fi(e.currentTransmux))},mi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.postMessage({<span class=\"code-attr\">action</span>:t}),pi(e)},gi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t.currentTransmux)<span class=\"code-keyword\">return</span> t.currentTransmux=e,<span class=\"code-keyword\">void</span> mi(t,e);t.transmuxQueue.push(mi.bind(<span class=\"code-literal\">null</span>,t,e))}(<span class=\"code-string\">\"reset\"</span>,e)},yi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.transmuxer,i=e.endAction||e.action,n=e.callback,r=m({},e,{<span class=\"code-attr\">endAction</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">transmuxer</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">callback</span>:<span class=\"code-literal\">null</span>});<span class=\"code-keyword\">if</span>(t.addEventListener(<span class=\"code-string\">\"message\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">r</span>(<span class=\"code-params\">a</span>)</span>{a.data.action===i&amp;&amp;(t.removeEventListener(<span class=\"code-string\">\"message\"</span>,r),a.data.data&amp;&amp;(a.data.data=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(a.data.data,e.byteOffset||<span class=\"code-number\">0</span>,e.byteLength||a.data.data.byteLength),e.data&amp;&amp;(e.data=a.data.data)),n(a.data))})),e.data){<span class=\"code-keyword\">var</span> a=e.data <span class=\"code-keyword\">instanceof</span> <span class=\"code-built_in\">ArrayBuffer</span>;r.byteOffset=a?<span class=\"code-number\">0</span>:e.data.byteOffset,r.byteLength=e.data.byteLength;<span class=\"code-keyword\">var</span> s=[a?e.data:e.data.buffer];t.postMessage(r,s)}<span class=\"code-keyword\">else</span> t.postMessage(r)},vi=<span class=\"code-number\">-101</span>,_i=<span class=\"code-number\">-102</span>,Ti=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.abort()}))},bi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> t.timedout?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request timed-out at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:vi,<span class=\"code-attr\">xhr</span>:t}:t.aborted?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request aborted at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:_i,<span class=\"code-attr\">xhr</span>:t}:e?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"HLS request errored at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>,<span class=\"code-attr\">xhr</span>:t}:<span class=\"code-string\">\"arraybuffer\"</span>===t.responseType&amp;&amp;<span class=\"code-number\">0</span>===t.response.byteLength?{<span class=\"code-attr\">status</span>:t.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Empty HLS response at URL: \"</span>+t.uri,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>,<span class=\"code-attr\">xhr</span>:t}:<span class=\"code-literal\">null</span>},Si=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=r.response,s=bi(n,r);<span class=\"code-keyword\">if</span>(s)<span class=\"code-keyword\">return</span> i(s,e);<span class=\"code-keyword\">if</span>(<span class=\"code-number\">16</span>!==a.byteLength)<span class=\"code-keyword\">return</span> i({<span class=\"code-attr\">status</span>:r.status,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Invalid HLS key at URL: \"</span>+r.uri,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>,<span class=\"code-attr\">xhr</span>:r},e);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">DataView</span>(a),u=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([o.getUint32(<span class=\"code-number\">0</span>),o.getUint32(<span class=\"code-number\">4</span>),o.getUint32(<span class=\"code-number\">8</span>),o.getUint32(<span class=\"code-number\">12</span>)]),d=<span class=\"code-number\">0</span>;d&lt;t.length;d++)t[d].bytes=u;<span class=\"code-keyword\">return</span> i(<span class=\"code-literal\">null</span>,e)}},wi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=Jt(e.map.bytes);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mp4\"</span>!==i){<span class=\"code-keyword\">var</span> n=e.map.resolvedUri||e.map.uri;<span class=\"code-keyword\">return</span> t({<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Found unsupported \"</span>+(i||<span class=\"code-string\">\"unknown\"</span>)+<span class=\"code-string\">\" container for initialization segment at URL: \"</span>+n,<span class=\"code-attr\">code</span>:<span class=\"code-number\">2</span>})}yi({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"probeMp4Tracks\"</span>,<span class=\"code-attr\">data</span>:e.map.bytes,<span class=\"code-attr\">transmuxer</span>:e.transmuxer,<span class=\"code-attr\">callback</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.tracks,r=i.data;<span class=\"code-keyword\">return</span> e.map.bytes=r,n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> t.id&amp;&amp;t.timescale&amp;&amp;(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(<span class=\"code-literal\">null</span>)}})},Ii=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.isEndOfTimeline,l=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog,p=t.map&amp;&amp;t.map.tracks||{},m=<span class=\"code-built_in\">Boolean</span>(p.audio&amp;&amp;p.video),g=r.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"start\"</span>),y=r.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"end\"</span>),v=r.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"start\"</span>),_=r.bind(<span class=\"code-literal\">null</span>,t,<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"end\"</span>);yi({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"probeTs\"</span>,<span class=\"code-attr\">transmuxer</span>:t.transmuxer,<span class=\"code-attr\">data</span>:i,<span class=\"code-attr\">baseStartTime</span>:t.baseStartTime,<span class=\"code-attr\">callback</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.bytes=i=e.data;<span class=\"code-keyword\">var</span> r=e.result;r&amp;&amp;(n(t,{<span class=\"code-attr\">hasAudio</span>:r.hasAudio,<span class=\"code-attr\">hasVideo</span>:r.hasVideo,<span class=\"code-attr\">isMuxed</span>:m}),n=<span class=\"code-literal\">null</span>,r.hasAudio&amp;&amp;!m&amp;&amp;g(r.audioStart),r.hasVideo&amp;&amp;v(r.videoStart),g=<span class=\"code-literal\">null</span>,v=<span class=\"code-literal\">null</span>),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.transmuxer.currentTransmux)<span class=\"code-keyword\">return</span> e.transmuxer.currentTransmux=e,<span class=\"code-keyword\">void</span> fi(e);e.transmuxer.transmuxQueue.push(e)}({<span class=\"code-attr\">bytes</span>:i,<span class=\"code-attr\">transmuxer</span>:t.transmuxer,<span class=\"code-attr\">audioAppendStart</span>:t.audioAppendStart,<span class=\"code-attr\">gopsToAlignWith</span>:t.gopsToAlignWith,<span class=\"code-attr\">remux</span>:m,<span class=\"code-attr\">onData</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.type=<span class=\"code-string\">\"combined\"</span>===e.type?<span class=\"code-string\">\"video\"</span>:e.type,c(t,e)},<span class=\"code-attr\">onTrackInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n&amp;&amp;(m&amp;&amp;(e.isMuxed=!<span class=\"code-number\">0</span>),n(t,e))},<span class=\"code-attr\">onAudioTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{g&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.start&amp;&amp;(g(e.start),g=<span class=\"code-literal\">null</span>),y&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.end&amp;&amp;y(e.end)},<span class=\"code-attr\">onVideoTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{v&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.start&amp;&amp;(v(e.start),v=<span class=\"code-literal\">null</span>),_&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.end&amp;&amp;_(e.end)},<span class=\"code-attr\">onVideoSegmentTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{a(e)},<span class=\"code-attr\">onAudioSegmentTimingInfo</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s(e)},<span class=\"code-attr\">onId3</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{o(t,e,i)},<span class=\"code-attr\">onCaptions</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{u(t,[e])},<span class=\"code-attr\">isEndOfTimeline</span>:d,<span class=\"code-attr\">onEndedTimeline</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{l()},<span class=\"code-attr\">onTransmuxerLog</span>:f,<span class=\"code-attr\">onDone</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{h&amp;&amp;(e.type=<span class=\"code-string\">\"combined\"</span>===e.type?<span class=\"code-string\">\"video\"</span>:e.type,h(<span class=\"code-literal\">null</span>,t,e))}})}})},Ei=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.bytes,n=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,h=e.dataFn,f=e.doneFn,p=e.onTransmuxerLog,m=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(i);<span class=\"code-keyword\">if</span>(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> Mt(e,[<span class=\"code-string\">\"moof\"</span>]).length&gt;<span class=\"code-number\">0</span>}(m)){t.isFmp4=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> g=t.map.tracks,y={<span class=\"code-attr\">isFmp4</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">hasVideo</span>:!!g.video,<span class=\"code-attr\">hasAudio</span>:!!g.audio};g.audio&amp;&amp;g.audio.codec&amp;&amp;<span class=\"code-string\">\"enca\"</span>!==g.audio.codec&amp;&amp;(y.audioCodec=g.audio.codec),g.video&amp;&amp;g.video.codec&amp;&amp;<span class=\"code-string\">\"encv\"</span>!==g.video.codec&amp;&amp;(y.videoCodec=g.video.codec),g.video&amp;&amp;g.audio&amp;&amp;(y.isMuxed=!<span class=\"code-number\">0</span>),n(t,y);<span class=\"code-keyword\">var</span> v=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{h(t,{<span class=\"code-attr\">data</span>:m,<span class=\"code-attr\">type</span>:y.hasAudio&amp;&amp;!y.isMuxed?<span class=\"code-string\">\"audio\"</span>:<span class=\"code-string\">\"video\"</span>}),e&amp;&amp;e.length&amp;&amp;d(t,e),f(<span class=\"code-literal\">null</span>,t,{})};yi({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"probeMp4StartTime\"</span>,<span class=\"code-attr\">timescales</span>:t.map.timescales,<span class=\"code-attr\">data</span>:m,<span class=\"code-attr\">transmuxer</span>:t.transmuxer,<span class=\"code-attr\">callback</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> n=e.data,s=e.startTime;i=n.buffer,t.bytes=m=n,y.hasAudio&amp;&amp;!y.isMuxed&amp;&amp;a(t,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"start\"</span>,s),y.hasVideo&amp;&amp;a(t,<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"start\"</span>,s),g.video&amp;&amp;n.byteLength&amp;&amp;t.transmuxer?yi({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"pushMp4Captions\"</span>,<span class=\"code-attr\">endAction</span>:<span class=\"code-string\">\"mp4Captions\"</span>,<span class=\"code-attr\">transmuxer</span>:t.transmuxer,<span class=\"code-attr\">data</span>:m,<span class=\"code-attr\">timescales</span>:t.map.timescales,<span class=\"code-attr\">trackIds</span>:[g.video.id],<span class=\"code-attr\">callback</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i=e.data.buffer,t.bytes=m=e.data,e.logs.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{p(r.default.mergeOptions(e,{<span class=\"code-attr\">stream</span>:<span class=\"code-string\">\"mp4CaptionParser\"</span>}))})),v(e.captions)}}):v()}})}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t.transmuxer){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t.container&amp;&amp;(t.container=Jt(m)),<span class=\"code-string\">\"ts\"</span>!==t.container&amp;&amp;<span class=\"code-string\">\"aac\"</span>!==t.container)<span class=\"code-keyword\">return</span> n(t,{<span class=\"code-attr\">hasAudio</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">hasVideo</span>:!<span class=\"code-number\">1</span>}),<span class=\"code-keyword\">void</span> f(<span class=\"code-literal\">null</span>,t,{});Ii({<span class=\"code-attr\">segment</span>:t,<span class=\"code-attr\">bytes</span>:i,<span class=\"code-attr\">trackInfoFn</span>:n,<span class=\"code-attr\">timingInfoFn</span>:a,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:o,<span class=\"code-attr\">id3Fn</span>:u,<span class=\"code-attr\">captionsFn</span>:d,<span class=\"code-attr\">isEndOfTimeline</span>:l,<span class=\"code-attr\">endedTimelineFn</span>:c,<span class=\"code-attr\">dataFn</span>:h,<span class=\"code-attr\">doneFn</span>:f,<span class=\"code-attr\">onTransmuxerLog</span>:p})}<span class=\"code-keyword\">else</span> f(<span class=\"code-literal\">null</span>,t,{})},Ai=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n=e.id,r=e.key,a=e.encryptedBytes,s=e.decryptionWorker;s.addEventListener(<span class=\"code-string\">\"message\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">if</span>(i.data.source===n){s.removeEventListener(<span class=\"code-string\">\"message\"</span>,e);<span class=\"code-keyword\">var</span> r=i.data.decrypted;t(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r.bytes,r.byteOffset,r.byteLength))}})),i=r.bytes.slice?r.bytes.slice():<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(<span class=\"code-built_in\">Array</span>.prototype.slice.call(r.bytes)),s.postMessage(Be({<span class=\"code-attr\">source</span>:n,<span class=\"code-attr\">encrypted</span>:a,<span class=\"code-attr\">key</span>:i,<span class=\"code-attr\">iv</span>:r.iv}),[a.buffer,i.buffer])},Li=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.xhr,i=e.xhrOptions,n=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,u=e.trackInfoFn,d=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,h=e.id3Fn,f=e.captionsFn,p=e.isEndOfTimeline,m=e.endedTimelineFn,g=e.dataFn,y=e.doneFn,v=e.onTransmuxerLog,_=[],T=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.isEndOfTimeline,l=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog,p=<span class=\"code-number\">0</span>,m=!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,g</span>)</span>{<span class=\"code-keyword\">if</span>(!m){<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> m=!<span class=\"code-number\">0</span>,Ti(t),h(e,g);<span class=\"code-keyword\">if</span>((p+=<span class=\"code-number\">1</span>)===t.length){<span class=\"code-keyword\">var</span> y=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(g.encryptedBytes)<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.decryptionWorker,i=e.segment,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.isEndOfTimeline,l=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog;Ai({<span class=\"code-attr\">id</span>:i.requestId,<span class=\"code-attr\">key</span>:i.key,<span class=\"code-attr\">encryptedBytes</span>:i.encryptedBytes,<span class=\"code-attr\">decryptionWorker</span>:t},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.bytes=e,Ei({<span class=\"code-attr\">segment</span>:i,<span class=\"code-attr\">bytes</span>:i.bytes,<span class=\"code-attr\">trackInfoFn</span>:n,<span class=\"code-attr\">timingInfoFn</span>:r,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:a,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">id3Fn</span>:o,<span class=\"code-attr\">captionsFn</span>:u,<span class=\"code-attr\">isEndOfTimeline</span>:d,<span class=\"code-attr\">endedTimelineFn</span>:l,<span class=\"code-attr\">dataFn</span>:c,<span class=\"code-attr\">doneFn</span>:h,<span class=\"code-attr\">onTransmuxerLog</span>:f})}))}({<span class=\"code-attr\">decryptionWorker</span>:i,<span class=\"code-attr\">segment</span>:g,<span class=\"code-attr\">trackInfoFn</span>:n,<span class=\"code-attr\">timingInfoFn</span>:r,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:a,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">id3Fn</span>:o,<span class=\"code-attr\">captionsFn</span>:u,<span class=\"code-attr\">isEndOfTimeline</span>:d,<span class=\"code-attr\">endedTimelineFn</span>:l,<span class=\"code-attr\">dataFn</span>:c,<span class=\"code-attr\">doneFn</span>:h,<span class=\"code-attr\">onTransmuxerLog</span>:f});Ei({<span class=\"code-attr\">segment</span>:g,<span class=\"code-attr\">bytes</span>:g.bytes,<span class=\"code-attr\">trackInfoFn</span>:n,<span class=\"code-attr\">timingInfoFn</span>:r,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:a,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:s,<span class=\"code-attr\">id3Fn</span>:o,<span class=\"code-attr\">captionsFn</span>:u,<span class=\"code-attr\">isEndOfTimeline</span>:d,<span class=\"code-attr\">endedTimelineFn</span>:l,<span class=\"code-attr\">dataFn</span>:c,<span class=\"code-attr\">doneFn</span>:h,<span class=\"code-attr\">onTransmuxerLog</span>:f})};<span class=\"code-keyword\">if</span>(g.endOfAllRequests=<span class=\"code-built_in\">Date</span>.now(),g.map&amp;&amp;g.map.encryptedBytes&amp;&amp;!g.map.bytes)<span class=\"code-keyword\">return</span> Ai({<span class=\"code-attr\">decryptionWorker</span>:i,<span class=\"code-attr\">id</span>:g.requestId+<span class=\"code-string\">\"-init\"</span>,<span class=\"code-attr\">encryptedBytes</span>:g.map.encryptedBytes,<span class=\"code-attr\">key</span>:g.map.key},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{g.map.bytes=e,wi(g,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> Ti(t),h(e,g);y()}))}));y()}}}}({<span class=\"code-attr\">activeXhrs</span>:_,<span class=\"code-attr\">decryptionWorker</span>:n,<span class=\"code-attr\">trackInfoFn</span>:u,<span class=\"code-attr\">timingInfoFn</span>:d,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:l,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:c,<span class=\"code-attr\">id3Fn</span>:h,<span class=\"code-attr\">captionsFn</span>:f,<span class=\"code-attr\">isEndOfTimeline</span>:p,<span class=\"code-attr\">endedTimelineFn</span>:m,<span class=\"code-attr\">dataFn</span>:g,<span class=\"code-attr\">doneFn</span>:y,<span class=\"code-attr\">onTransmuxerLog</span>:v});<span class=\"code-keyword\">if</span>(a.key&amp;&amp;!a.key.bytes){<span class=\"code-keyword\">var</span> b=[a.key];a.map&amp;&amp;!a.map.bytes&amp;&amp;a.map.key&amp;&amp;a.map.key.resolvedUri===a.key.resolvedUri&amp;&amp;b.push(a.map.key);<span class=\"code-keyword\">var</span> S=t(r.default.mergeOptions(i,{<span class=\"code-attr\">uri</span>:a.key.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>}),Si(a,b,T));_.push(S)}<span class=\"code-keyword\">if</span>(a.map&amp;&amp;!a.map.bytes){<span class=\"code-keyword\">if</span>(a.map.key&amp;&amp;(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri)){<span class=\"code-keyword\">var</span> w=t(r.default.mergeOptions(i,{<span class=\"code-attr\">uri</span>:a.map.key.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>}),Si(a,[a.map.key],T));_.push(w)}<span class=\"code-keyword\">var</span> I=r.default.mergeOptions(i,{<span class=\"code-attr\">uri</span>:a.map.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:xe(a.map)}),E=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.finishProcessingFn;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=bi(e,n);<span class=\"code-keyword\">if</span>(r)<span class=\"code-keyword\">return</span> i(r,t);<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(n.response);<span class=\"code-keyword\">if</span>(t.map.key)<span class=\"code-keyword\">return</span> t.map.encryptedBytes=a,i(<span class=\"code-literal\">null</span>,t);t.map.bytes=a,wi(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> e.xhr=n,e.status=n.status,i(e,t);i(<span class=\"code-literal\">null</span>,t)}))}}({<span class=\"code-attr\">segment</span>:a,<span class=\"code-attr\">finishProcessingFn</span>:T}),A=t(I,E);_.push(A)}<span class=\"code-keyword\">var</span> L=r.default.mergeOptions(i,{<span class=\"code-attr\">uri</span>:a.part&amp;&amp;a.part.resolvedUri||a.resolvedUri,<span class=\"code-attr\">responseType</span>:<span class=\"code-string\">\"arraybuffer\"</span>,<span class=\"code-attr\">headers</span>:xe(a)}),P=t(L,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.finishProcessingFn,n=e.responseType;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,r</span>)</span>{<span class=\"code-keyword\">var</span> a=bi(e,r);<span class=\"code-keyword\">if</span>(a)<span class=\"code-keyword\">return</span> i(a,t);<span class=\"code-keyword\">var</span> s=<span class=\"code-string\">\"arraybuffer\"</span>!==n&amp;&amp;r.responseText?<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">ArrayBuffer</span>(e.length)),i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)t[i]=e.charCodeAt(i);<span class=\"code-keyword\">return</span> t.buffer}(r.responseText.substring(t.lastReachedChar||<span class=\"code-number\">0</span>)):r.response;<span class=\"code-keyword\">return</span> t.stats=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">bandwidth</span>:e.bandwidth,<span class=\"code-attr\">bytesReceived</span>:e.bytesReceived||<span class=\"code-number\">0</span>,<span class=\"code-attr\">roundTripTime</span>:e.roundTripTime||<span class=\"code-number\">0</span>}}(r),t.key?t.encryptedBytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(s):t.bytes=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(s),i(<span class=\"code-literal\">null</span>,t)}}({<span class=\"code-attr\">segment</span>:a,<span class=\"code-attr\">finishProcessingFn</span>:T,<span class=\"code-attr\">responseType</span>:L.responseType}));P.addEventListener(<span class=\"code-string\">\"progress\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.progressFn;<span class=\"code-keyword\">return</span> e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!e.target.aborted)<span class=\"code-keyword\">return</span> t.stats=r.default.mergeOptions(t.stats,(a=(n=e).target,(s={<span class=\"code-attr\">bandwidth</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">bytesReceived</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">roundTripTime</span>:<span class=\"code-built_in\">Date</span>.now()-a.requestTime||<span class=\"code-number\">0</span>}).bytesReceived=n.loaded,s.bandwidth=<span class=\"code-built_in\">Math</span>.floor(s.bytesReceived/s.roundTripTime*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>),s)),!t.stats.firstBytesReceivedAt&amp;&amp;t.stats.bytesReceived&amp;&amp;(t.stats.firstBytesReceivedAt=<span class=\"code-built_in\">Date</span>.now()),i(e,t);<span class=\"code-keyword\">var</span> n,a,s}}({<span class=\"code-attr\">segment</span>:a,<span class=\"code-attr\">progressFn</span>:o,<span class=\"code-attr\">trackInfoFn</span>:u,<span class=\"code-attr\">timingInfoFn</span>:d,<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:l,<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:c,<span class=\"code-attr\">id3Fn</span>:h,<span class=\"code-attr\">captionsFn</span>:f,<span class=\"code-attr\">isEndOfTimeline</span>:p,<span class=\"code-attr\">endedTimelineFn</span>:m,<span class=\"code-attr\">dataFn</span>:g})),_.push(P);<span class=\"code-keyword\">var</span> k={};<span class=\"code-keyword\">return</span> _.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.addEventListener(<span class=\"code-string\">\"loadend\"</span>,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.loadendState,i=e.abortFn;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.target.aborted&amp;&amp;i&amp;&amp;!t.calledAbortFn&amp;&amp;(i(),t.calledAbortFn=!<span class=\"code-number\">0</span>)}}({<span class=\"code-attr\">loadendState</span>:k,<span class=\"code-attr\">abortFn</span>:s}))})),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> Ti(_)}},Pi=p(<span class=\"code-string\">\"CodecUtils\"</span>),ki=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.attributes||{};<span class=\"code-keyword\">return</span> e&amp;&amp;e.mediaGroups&amp;&amp;e.mediaGroups.AUDIO&amp;&amp;i.AUDIO&amp;&amp;e.mediaGroups.AUDIO[i.AUDIO]},xi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t={};<span class=\"code-keyword\">return</span> e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaType,n=e.type,r=e.details;t[i]=t[i]||[],t[i].push(O(<span class=\"code-string\">\"\"</span>+n+r))})),<span class=\"code-built_in\">Object</span>.keys(t).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(t[e].length&gt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> Pi(<span class=\"code-string\">\"multiple \"</span>+e+<span class=\"code-string\">\" codecs found as attributes: \"</span>+t[e].join(<span class=\"code-string\">\", \"</span>)+<span class=\"code-string\">\". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.\"</span>),<span class=\"code-keyword\">void</span>(t[e]=<span class=\"code-literal\">null</span>);t[e]=t[e][<span class=\"code-number\">0</span>]})),t},Oi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> e.audio&amp;&amp;t++,e.video&amp;&amp;t++,t},Di=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.attributes||{},n=xi(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes||{};<span class=\"code-keyword\">if</span>(t.CODECS)<span class=\"code-keyword\">return</span> D(t.CODECS)}(t)||[]);<span class=\"code-keyword\">if</span>(ki(e,t)&amp;&amp;!n.audio&amp;&amp;!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!ki(e,t))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r <span class=\"code-keyword\">in</span> n)<span class=\"code-keyword\">if</span>(!n[r].uri&amp;&amp;!n[r].playlists)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}(e,t)){<span class=\"code-keyword\">var</span> r=xi(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e.mediaGroups.AUDIO||!t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=e.mediaGroups.AUDIO[t];<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i){<span class=\"code-keyword\">var</span> r=i[n];<span class=\"code-keyword\">if</span>(r.default&amp;&amp;r.playlists)<span class=\"code-keyword\">return</span> D(r.playlists[<span class=\"code-number\">0</span>].attributes.CODECS)}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}(e,i.AUDIO)||[]);r.audio&amp;&amp;(n.audio=r.audio)}<span class=\"code-keyword\">return</span> n},Ci=p(<span class=\"code-string\">\"PlaylistSelector\"</span>),Ui=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e&amp;&amp;e.playlist){<span class=\"code-keyword\">var</span> t=e.playlist;<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">JSON</span>.stringify({<span class=\"code-attr\">id</span>:t.id,<span class=\"code-attr\">bandwidth</span>:e.bandwidth,<span class=\"code-attr\">width</span>:e.width,<span class=\"code-attr\">height</span>:e.height,<span class=\"code-attr\">codecs</span>:t.attributes&amp;&amp;t.attributes.CODECS||<span class=\"code-string\">\"\"</span>})}},Ri=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"\"</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">window</span>.getComputedStyle(e);<span class=\"code-keyword\">return</span> i?i[t]:<span class=\"code-string\">\"\"</span>},Mi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.slice();e.sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,n</span>)</span>{<span class=\"code-keyword\">var</span> r=t(e,n);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===r?i.indexOf(e)-i.indexOf(n):r}))},Bi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;<span class=\"code-keyword\">return</span> e.attributes.BANDWIDTH&amp;&amp;(i=e.attributes.BANDWIDTH),i=i||<span class=\"code-built_in\">window</span>.Number.MAX_VALUE,t.attributes.BANDWIDTH&amp;&amp;(n=t.attributes.BANDWIDTH),i-(n||<span class=\"code-built_in\">window</span>.Number.MAX_VALUE)},Ni=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> s={<span class=\"code-attr\">bandwidth</span>:t,<span class=\"code-attr\">width</span>:i,<span class=\"code-attr\">height</span>:n,<span class=\"code-attr\">limitRenditionByPlayerDimensions</span>:r},o=e.playlists;ce.isAudioOnly(e)&amp;&amp;(o=a.getAudioTrackPlaylists_(),s.audioOnly=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> u=o.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.attributes&amp;&amp;e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width,i=e.attributes&amp;&amp;e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.height;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">bandwidth</span>:e.attributes&amp;&amp;e.attributes.BANDWIDTH||<span class=\"code-built_in\">window</span>.Number.MAX_VALUE,<span class=\"code-attr\">width</span>:t,<span class=\"code-attr\">height</span>:i,<span class=\"code-attr\">playlist</span>:e}}));Mi(u,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth-t.bandwidth}));<span class=\"code-keyword\">var</span> d=(u=u.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!ce.isIncompatible(e.playlist)}))).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> ce.isEnabled(e.playlist)}));d.length||(d=u.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!ce.isDisabled(e.playlist)})));<span class=\"code-keyword\">var</span> l=d.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth*si.BANDWIDTH_VARIANCE&lt;t})),c=l[l.length<span class=\"code-number\">-1</span>],h=l.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===c.bandwidth}))[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(!<span class=\"code-number\">1</span>===r){<span class=\"code-keyword\">var</span> f=h||d[<span class=\"code-number\">0</span>]||u[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(f&amp;&amp;f.playlist){<span class=\"code-keyword\">var</span> p=<span class=\"code-string\">\"sortedPlaylistReps\"</span>;<span class=\"code-keyword\">return</span> h&amp;&amp;(p=<span class=\"code-string\">\"bandwidthBestRep\"</span>),d[<span class=\"code-number\">0</span>]&amp;&amp;(p=<span class=\"code-string\">\"enabledPlaylistReps\"</span>),Ci(<span class=\"code-string\">\"choosing \"</span>+Ui(f)+<span class=\"code-string\">\" using \"</span>+p+<span class=\"code-string\">\" with options\"</span>,s),f.playlist}<span class=\"code-keyword\">return</span> Ci(<span class=\"code-string\">\"could not choose a playlist with options\"</span>,s),<span class=\"code-literal\">null</span>}<span class=\"code-keyword\">var</span> m=l.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width&amp;&amp;e.height}));Mi(m,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.width-t.width}));<span class=\"code-keyword\">var</span> g=m.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width===i&amp;&amp;e.height===n}));c=g[g.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">var</span> y,v,_,T,b=g.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===c.bandwidth}))[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(b||(v=(y=m.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width&gt;i||e.height&gt;n}))).filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.width===y[<span class=\"code-number\">0</span>].width&amp;&amp;e.height===y[<span class=\"code-number\">0</span>].height})),c=v[v.length<span class=\"code-number\">-1</span>],_=v.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.bandwidth===c.bandwidth}))[<span class=\"code-number\">0</span>]),a.experimentalLeastPixelDiffSelector){<span class=\"code-keyword\">var</span> S=m.map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.pixelDiff=<span class=\"code-built_in\">Math</span>.abs(e.width-i)+<span class=\"code-built_in\">Math</span>.abs(e.height-n),e}));Mi(S,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),T=S[<span class=\"code-number\">0</span>]}<span class=\"code-keyword\">var</span> w=T||_||b||h||d[<span class=\"code-number\">0</span>]||u[<span class=\"code-number\">0</span>];<span class=\"code-keyword\">if</span>(w&amp;&amp;w.playlist){<span class=\"code-keyword\">var</span> I=<span class=\"code-string\">\"sortedPlaylistReps\"</span>;<span class=\"code-keyword\">return</span> T?I=<span class=\"code-string\">\"leastPixelDiffRep\"</span>:_?I=<span class=\"code-string\">\"resolutionPlusOneRep\"</span>:b?I=<span class=\"code-string\">\"resolutionBestRep\"</span>:h?I=<span class=\"code-string\">\"bandwidthBestRep\"</span>:d[<span class=\"code-number\">0</span>]&amp;&amp;(I=<span class=\"code-string\">\"enabledPlaylistReps\"</span>),Ci(<span class=\"code-string\">\"choosing \"</span>+Ui(w)+<span class=\"code-string\">\" using \"</span>+I+<span class=\"code-string\">\" with options\"</span>,s),w.playlist}<span class=\"code-keyword\">return</span> Ci(<span class=\"code-string\">\"could not choose a playlist with options\"</span>,s),<span class=\"code-literal\">null</span>}},Fi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.useDevicePixelRatio&amp;&amp;<span class=\"code-built_in\">window</span>.devicePixelRatio||<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span> Ni(<span class=\"code-keyword\">this</span>.playlists.master,<span class=\"code-keyword\">this</span>.systemBandwidth,<span class=\"code-built_in\">parseInt</span>(Ri(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"width\"</span>),<span class=\"code-number\">10</span>)*e,<span class=\"code-built_in\">parseInt</span>(Ri(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"height\"</span>),<span class=\"code-number\">10</span>)*e,<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions,<span class=\"code-keyword\">this</span>.masterPlaylistController_)},qi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r;<span class=\"code-keyword\">if</span>(i&amp;&amp;i.cues)<span class=\"code-keyword\">for</span>(n=i.cues.length;n--;)(r=i.cues[n]).startTime&gt;=e&amp;&amp;r.endTime&lt;=t&amp;&amp;i.removeCue(r)},Hi=<span class=\"code-number\">9e4</span>,Gi=Hi,Wi=(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e*Hi},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e*t},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e/Hi},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e/t},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;<span class=\"code-built_in\">isFinite</span>(e)}),Vi=<span class=\"code-number\">1</span>/<span class=\"code-number\">60</span>,ji=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.startOfSegment,i=e.duration,n=e.segment,r=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,u=a.segments,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===u?[]:u,l=e.mediaIndex,c=e.partIndex,h=e.timeline,f=d.length<span class=\"code-number\">-1</span>,p=<span class=\"code-string\">\"mediaIndex/partIndex increment\"</span>;e.getMediaInfoForTime?p=<span class=\"code-string\">\"getMediaInfoForTime (\"</span>+e.getMediaInfoForTime+<span class=\"code-string\">\")\"</span>:e.isSyncRequest&amp;&amp;(p=<span class=\"code-string\">\"getSyncSegmentCandidate (isSyncRequest)\"</span>),e.independent&amp;&amp;(p+=<span class=\"code-string\">\" with independent \"</span>+e.independent);<span class=\"code-keyword\">var</span> m=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> c,g=e.segment.uri?<span class=\"code-string\">\"segment\"</span>:<span class=\"code-string\">\"pre-segment\"</span>,y=m?$({<span class=\"code-attr\">preloadSegment</span>:n})<span class=\"code-number\">-1</span>:<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span> g+<span class=\"code-string\">\" [\"</span>+(s+l)+<span class=\"code-string\">\"/\"</span>+(s+f)+<span class=\"code-string\">\"]\"</span>+(m?<span class=\"code-string\">\" part [\"</span>+c+<span class=\"code-string\">\"/\"</span>+y+<span class=\"code-string\">\"]\"</span>:<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\" segment start/end [\"</span>+n.start+<span class=\"code-string\">\" =&gt; \"</span>+n.end+<span class=\"code-string\">\"]\"</span>+(m?<span class=\"code-string\">\" part start/end [\"</span>+r.start+<span class=\"code-string\">\" =&gt; \"</span>+r.end+<span class=\"code-string\">\"]\"</span>:<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\" startOfSegment [\"</span>+t+<span class=\"code-string\">\"] duration [\"</span>+i+<span class=\"code-string\">\"] timeline [\"</span>+h+<span class=\"code-string\">\"] selected by [\"</span>+p+<span class=\"code-string\">\"] playlist [\"</span>+o+<span class=\"code-string\">\"]\"</span>},Xi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e+<span class=\"code-string\">\"TimingInfo\"</span>},zi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;<span class=\"code-keyword\">if</span>(i===n)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"audio\"</span>===r){<span class=\"code-keyword\">var</span> s=t.lastTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"main\"</span>});<span class=\"code-keyword\">return</span>!s||s.to!==n}<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"main\"</span>===r&amp;&amp;a){<span class=\"code-keyword\">var</span> o=t.pendingTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>});<span class=\"code-keyword\">return</span>!o||o.to!==n}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},Qi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segmentDuration,i=e.maxDuration;<span class=\"code-keyword\">return</span>!!t&amp;&amp;<span class=\"code-built_in\">Math</span>.round(t)&gt;i+N},Yi=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">if</span>(n=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>,!t)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"Initialization settings are required\"</span>);<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> t.currentTime)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"No currentTime getter specified\"</span>);<span class=\"code-keyword\">if</span>(!t.mediaSource)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"No MediaSource specified\"</span>);<span class=\"code-keyword\">return</span> n.bandwidth=t.bandwidth,n.throughput={<span class=\"code-attr\">rate</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">count</span>:<span class=\"code-number\">0</span>},n.roundTrip=<span class=\"code-literal\">NaN</span>,n.resetStats_(),n.mediaIndex=<span class=\"code-literal\">null</span>,n.partIndex=<span class=\"code-literal\">null</span>,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n.startingMediaInfo_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_=<span class=\"code-string\">\"INIT\"</span>,n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!<span class=\"code-number\">0</span>,n.parse708captions_=t.parse708captions,n.captionServices_=t.captionServices,n.experimentalExactManifestTimings=t.experimentalExactManifestTimings,n.checkBufferTimeout_=<span class=\"code-literal\">null</span>,n.error_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,n.currentTimeline_=<span class=\"code-number\">-1</span>,n.pendingSegment_=<span class=\"code-literal\">null</span>,n.xhrOptions_=<span class=\"code-literal\">null</span>,n.pendingSegments_=[],n.audioDisabled_=!<span class=\"code-number\">1</span>,n.isPendingTimestampOffset_=!<span class=\"code-number\">1</span>,n.gopBuffer_=[],n.timeMapping_=<span class=\"code-number\">0</span>,n.safeAppend_=r.default.browser.IE_VERSION&gt;=<span class=\"code-number\">11</span>,n.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>},n.playlistOfLastInitSegment_={<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={<span class=\"code-attr\">id3</span>:[],<span class=\"code-attr\">caption</span>:[]},n.waitingOnRemove_=!<span class=\"code-number\">1</span>,n.quotaExceededErrorRetryTimeout_=<span class=\"code-literal\">null</span>,n.activeInitSegmentId_=<span class=\"code-literal\">null</span>,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={<span class=\"code-attr\">segmentIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> n.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>)},n.syncController_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.isEndOfStream_()||(n.ended_=!<span class=\"code-number\">1</span>)})),n.fetchAtBuffer_=!<span class=\"code-number\">1</span>,n.logger_=p(<span class=\"code-string\">\"SegmentLoader[\"</span>+n.loaderType_+<span class=\"code-string\">\"]\"</span>),<span class=\"code-built_in\">Object</span>.defineProperty(s(n),<span class=\"code-string\">\"state\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state_},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e!==<span class=\"code-keyword\">this</span>.state_&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-keyword\">this</span>.state_+<span class=\"code-string\">\" -&gt; \"</span>+e),<span class=\"code-keyword\">this</span>.state_=e,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"statechange\"</span>))}}),n.sourceUpdater_.on(<span class=\"code-string\">\"ready\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class=\"code-string\">\"main\"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class=\"code-string\">\"pendingtimelinechange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class=\"code-string\">\"audio\"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class=\"code-string\">\"timelinechange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.hasEnoughInfoToLoad_()&amp;&amp;n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),n}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.createTransmuxer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">new</span> hi;t.currentTransmux=<span class=\"code-literal\">null</span>,t.transmuxQueue=[];<span class=\"code-keyword\">var</span> i=t.terminate;<span class=\"code-keyword\">return</span> t.terminate=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.currentTransmux=<span class=\"code-literal\">null</span>,t.transmuxQueue.length=<span class=\"code-number\">0</span>,i.call(t)},t.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"init\"</span>,<span class=\"code-attr\">options</span>:e}),t}({<span class=\"code-attr\">remux</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">alignGopsAtEnd</span>:<span class=\"code-keyword\">this</span>.safeAppend_,<span class=\"code-attr\">keepOriginalTimestamps</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">parse708captions</span>:<span class=\"code-keyword\">this</span>.parse708captions_,<span class=\"code-attr\">captionServices</span>:<span class=\"code-keyword\">this</span>.captionServices_})},i.resetStats_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaBytesTransferred=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequests=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsAborted=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsTimedout=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaRequestsErrored=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaTransferDuration=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaSecondsLoaded=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.mediaAppends=<span class=\"code-number\">0</span>},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"DISPOSED\"</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.abort_(),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.terminate(),<span class=\"code-keyword\">this</span>.resetStats_(),<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.syncController_&amp;&amp;<span class=\"code-keyword\">this</span>.triggerSyncInfoUpdate_&amp;&amp;<span class=\"code-keyword\">this</span>.syncController_.off(<span class=\"code-string\">\"syncinfoupdate\"</span>,<span class=\"code-keyword\">this</span>.triggerSyncInfoUpdate_),<span class=\"code-keyword\">this</span>.off()},i.setAudio=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.audioDisabled_=!e,e?<span class=\"code-keyword\">this</span>.appendInitSegment_.audio=!<span class=\"code-number\">0</span>:<span class=\"code-keyword\">this</span>.sourceUpdater_.removeAudio(<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.duration_())},i.abort=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"WAITING\"</span>===<span class=\"code-keyword\">this</span>.state?(<span class=\"code-keyword\">this</span>.abort_(),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_()):<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;(<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>)},i.abort_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;<span class=\"code-keyword\">this</span>.pendingSegment_.abortRequests&amp;&amp;<span class=\"code-keyword\">this</span>.pendingSegment_.abortRequests(),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.callQueue_=[],<span class=\"code-keyword\">this</span>.loadQueue_=[],<span class=\"code-keyword\">this</span>.metadataQueue_.id3=[],<span class=\"code-keyword\">this</span>.metadataQueue_.caption=[],<span class=\"code-keyword\">this</span>.timelineChangeController_.clearPendingTimelineChange(<span class=\"code-keyword\">this</span>.loaderType_),<span class=\"code-keyword\">this</span>.waitingOnRemove_=!<span class=\"code-number\">1</span>,<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.quotaExceededErrorRetryTimeout_),<span class=\"code-keyword\">this</span>.quotaExceededErrorRetryTimeout_=<span class=\"code-literal\">null</span>},i.checkForAbort_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"APPENDING\"</span>!==<span class=\"code-keyword\">this</span>.state||<span class=\"code-keyword\">this</span>.pendingSegment_?!<span class=\"code-keyword\">this</span>.pendingSegment_||<span class=\"code-keyword\">this</span>.pendingSegment_.requestId!==e:(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,!<span class=\"code-number\">0</span>)},i.error=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"error occurred:\"</span>,e),<span class=\"code-keyword\">this</span>.error_=e),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.error_},i.endOfStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ended_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;gi(<span class=\"code-keyword\">this</span>.transmuxer_),<span class=\"code-keyword\">this</span>.gopBuffer_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"ended\"</span>)},i.buffered_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.getMediaInfo_();<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.sourceUpdater_||!e)<span class=\"code-keyword\">return</span> r.default.createTimeRanges();<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_){<span class=\"code-keyword\">var</span> t=e.hasAudio,i=e.hasVideo,n=e.isMuxed;<span class=\"code-keyword\">if</span>(i&amp;&amp;t&amp;&amp;!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;!n)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceUpdater_.buffered();<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceUpdater_.videoBuffered()}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.sourceUpdater_.audioBuffered()},i.initSegmentForMap=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=!<span class=\"code-number\">1</span>),!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=Ne(e),n=<span class=\"code-keyword\">this</span>.initSegments_[i];<span class=\"code-keyword\">return</span> t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.initSegments_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">byterange</span>:e.byterange,<span class=\"code-attr\">bytes</span>:e.bytes,<span class=\"code-attr\">tracks</span>:e.tracks,<span class=\"code-attr\">timescales</span>:e.timescales}),n||e},i.segmentKey=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=!<span class=\"code-number\">1</span>),!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=Fe(e),n=<span class=\"code-keyword\">this</span>.keyCache_[i];<span class=\"code-keyword\">this</span>.cacheEncryptionKeys_&amp;&amp;t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.keyCache_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">bytes</span>:e.bytes});<span class=\"code-keyword\">var</span> r={<span class=\"code-attr\">resolvedUri</span>:(n||e).resolvedUri};<span class=\"code-keyword\">return</span> n&amp;&amp;(r.bytes=n.bytes),r},i.couldBeginLoading_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.playlist_&amp;&amp;!<span class=\"code-keyword\">this</span>.paused()},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.monitorBuffer_(),<span class=\"code-keyword\">this</span>.playlist_)<span class=\"code-keyword\">return</span><span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_()?<span class=\"code-keyword\">this</span>.init_():<span class=\"code-keyword\">void</span>(!<span class=\"code-keyword\">this</span>.couldBeginLoading_()||<span class=\"code-string\">\"READY\"</span>!==<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-string\">\"INIT\"</span>!==<span class=\"code-keyword\">this</span>.state||(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>))},i.init_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.resetEverything(),<span class=\"code-keyword\">this</span>.monitorBuffer_()},i.playlist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={}),e){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.playlist_,n=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.playlist_=e,<span class=\"code-keyword\">this</span>.xhrOptions_=t,<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;(e.syncInfo={<span class=\"code-attr\">mediaSequence</span>:e.mediaSequence,<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>},<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;<span class=\"code-keyword\">this</span>.syncController_.setDateTimeMappingForStart(e));<span class=\"code-keyword\">var</span> r=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(i&amp;&amp;(i.id?r=i.id:i.uri&amp;&amp;(r=i.uri)),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"playlist update [\"</span>+r+<span class=\"code-string\">\" =&gt; \"</span>+(e.id||e.uri)+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.init_();<span class=\"code-keyword\">if</span>(!i||i.uri!==e.uri)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex&amp;&amp;(e.endList?<span class=\"code-keyword\">this</span>.resyncLoader():<span class=\"code-keyword\">this</span>.resetLoader()),<span class=\"code-keyword\">this</span>.currentMediaInfo_=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>,<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"playlistupdate\"</span>);<span class=\"code-keyword\">var</span> a=e.mediaSequence-i.mediaSequence;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"live window shift [\"</span>+a+<span class=\"code-string\">\"]\"</span>),<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex)<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.mediaIndex-=a,<span class=\"code-keyword\">this</span>.mediaIndex&lt;<span class=\"code-number\">0</span>)<span class=\"code-keyword\">this</span>.mediaIndex=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.partIndex=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">this</span>.playlist_.segments[<span class=\"code-keyword\">this</span>.mediaIndex];<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.partIndex&amp;&amp;(!s.parts||!s.parts.length||!s.parts[<span class=\"code-keyword\">this</span>.partIndex])){<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">this</span>.mediaIndex;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"currently processing part (index \"</span>+<span class=\"code-keyword\">this</span>.partIndex+<span class=\"code-string\">\") no longer exists.\"</span>),<span class=\"code-keyword\">this</span>.resetLoader(),<span class=\"code-keyword\">this</span>.mediaIndex=o}}n&amp;&amp;(n.mediaIndex-=a,n.mediaIndex&lt;<span class=\"code-number\">0</span>?(n.mediaIndex=<span class=\"code-literal\">null</span>,n.partIndex=<span class=\"code-literal\">null</span>):(n.mediaIndex&gt;=<span class=\"code-number\">0</span>&amp;&amp;(n.segment=e.segments[n.mediaIndex]),n.partIndex&gt;=<span class=\"code-number\">0</span>&amp;&amp;n.segment.parts&amp;&amp;(n.part=n.segment.parts[n.partIndex]))),<span class=\"code-keyword\">this</span>.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;(<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=<span class=\"code-literal\">null</span>)},i.paused=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.checkBufferTimeout_},i.resetEverything=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.ended_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.resetLoader(),<span class=\"code-keyword\">this</span>.remove(<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,e),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;(<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearAllMp4Captions\"</span>}),<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"reset\"</span>}))},i.resetLoader=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.fetchAtBuffer_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.resyncLoader()},i.resyncLoader=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;gi(<span class=\"code-keyword\">this</span>.transmuxer_),<span class=\"code-keyword\">this</span>.mediaIndex=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.partIndex=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.callQueue_=[],<span class=\"code-keyword\">this</span>.loadQueue_=[],<span class=\"code-keyword\">this</span>.metadataQueue_.id3=[],<span class=\"code-keyword\">this</span>.metadataQueue_.caption=[],<span class=\"code-keyword\">this</span>.abort(),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearParsedMp4Captions\"</span>})},i.remove=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{}),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=!<span class=\"code-number\">1</span>),t===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;(t=<span class=\"code-keyword\">this</span>.duration_()),t&lt;=e)<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"skipping remove because end ${end} is &lt;= start ${start}\"</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.sourceUpdater_&amp;&amp;<span class=\"code-keyword\">this</span>.getMediaInfo_()){<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">1</span>,a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-number\">0</span>==--r&amp;&amp;i()};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s <span class=\"code-keyword\">in</span>!n&amp;&amp;<span class=\"code-keyword\">this</span>.audioDisabled_||(r++,<span class=\"code-keyword\">this</span>.sourceUpdater_.removeAudio(e,t,a)),(n||<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_)&amp;&amp;(<span class=\"code-keyword\">this</span>.gopBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Math</span>.ceil((t-n)*Gi),a=<span class=\"code-built_in\">Math</span>.ceil((i-n)*Gi),s=e.slice(),o=e.length;o--&amp;&amp;!(e[o].pts&lt;=a););<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===o)<span class=\"code-keyword\">return</span> s;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=o+<span class=\"code-number\">1</span>;u--&amp;&amp;!(e[u].pts&lt;=r););<span class=\"code-keyword\">return</span> u=<span class=\"code-built_in\">Math</span>.max(u,<span class=\"code-number\">0</span>),s.splice(u,o-u+<span class=\"code-number\">1</span>),s}(<span class=\"code-keyword\">this</span>.gopBuffer_,e,t,<span class=\"code-keyword\">this</span>.timeMapping_),r++,<span class=\"code-keyword\">this</span>.sourceUpdater_.removeVideo(e,t,a)),<span class=\"code-keyword\">this</span>.inbandTextTracks_)qi(e,t,<span class=\"code-keyword\">this</span>.inbandTextTracks_[s]);qi(e,t,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_),a()}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"skipping remove because no source updater or starting media info\"</span>)},i.monitorBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=<span class=\"code-built_in\">window</span>.setTimeout(<span class=\"code-keyword\">this</span>.monitorBufferTick_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">1</span>)},i.monitorBufferTick_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-string\">\"READY\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.fillBuffer_(),<span class=\"code-keyword\">this</span>.checkBufferTimeout_&amp;&amp;<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.checkBufferTimeout_),<span class=\"code-keyword\">this</span>.checkBufferTimeout_=<span class=\"code-built_in\">window</span>.setTimeout(<span class=\"code-keyword\">this</span>.monitorBufferTick_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">500</span>)},i.fillBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.sourceUpdater_.updating()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.chooseNextRequest_();e&amp;&amp;(<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.timestampOffset&amp;&amp;(<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.timelineChangeController_.pendingTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">from</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">to</span>:e.timeline})),<span class=\"code-keyword\">this</span>.loadSegment_(e))}},i.isEndOfStream_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.mediaIndex),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=<span class=\"code-keyword\">this</span>.playlist_),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-keyword\">this</span>.partIndex),!t||!<span class=\"code-keyword\">this</span>.mediaSource_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> n=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e&amp;&amp;t.segments[e],r=e+<span class=\"code-number\">1</span>===t.segments.length,a=!n||!n.parts||i+<span class=\"code-number\">1</span>===n.parts.length;<span class=\"code-keyword\">return</span> t.endList&amp;&amp;<span class=\"code-string\">\"open\"</span>===<span class=\"code-keyword\">this</span>.mediaSource_.readyState&amp;&amp;r&amp;&amp;a},i.chooseNextRequest_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.buffered_(),t=j(e)||<span class=\"code-number\">0</span>,i=X(e,<span class=\"code-keyword\">this</span>.currentTime_()),n=!<span class=\"code-keyword\">this</span>.hasPlayed_()&amp;&amp;i&gt;=<span class=\"code-number\">1</span>,r=i&gt;=<span class=\"code-keyword\">this</span>.goalBufferLength_(),a=<span class=\"code-keyword\">this</span>.playlist_.segments;<span class=\"code-keyword\">if</span>(!a.length||n||r)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">this</span>.syncPoint_=<span class=\"code-keyword\">this</span>.syncPoint_||<span class=\"code-keyword\">this</span>.syncController_.getSyncPoint(<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-keyword\">this</span>.currentTime_());<span class=\"code-keyword\">var</span> s={<span class=\"code-attr\">partIndex</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">mediaIndex</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">startOfSegment</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-attr\">isSyncRequest</span>:<span class=\"code-built_in\">Boolean</span>(!<span class=\"code-keyword\">this</span>.syncPoint_)};<span class=\"code-keyword\">if</span>(s.isSyncRequest)s.mediaIndex=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{t=t||[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=[],r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;a&lt;t.length;a++){<span class=\"code-keyword\">var</span> s=t[a];<span class=\"code-keyword\">if</span>(e===s.timeline&amp;&amp;(n.push(a),(r+=s.duration)&gt;i))<span class=\"code-keyword\">return</span> a}<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===n.length?<span class=\"code-number\">0</span>:n[n.length<span class=\"code-number\">-1</span>]}(<span class=\"code-keyword\">this</span>.currentTimeline_,a,t);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex){<span class=\"code-keyword\">var</span> o=a[<span class=\"code-keyword\">this</span>.mediaIndex],u=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.partIndex?<span class=\"code-keyword\">this</span>.partIndex:<span class=\"code-number\">-1</span>;s.startOfSegment=o.end?o.end:t,o.parts&amp;&amp;o.parts[u+<span class=\"code-number\">1</span>]?(s.mediaIndex=<span class=\"code-keyword\">this</span>.mediaIndex,s.partIndex=u+<span class=\"code-number\">1</span>):s.mediaIndex=<span class=\"code-keyword\">this</span>.mediaIndex+<span class=\"code-number\">1</span>}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> d=ce.getMediaInfoForTime({<span class=\"code-attr\">experimentalExactManifestTimings</span>:<span class=\"code-keyword\">this</span>.experimentalExactManifestTimings,<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.playlist_,<span class=\"code-attr\">currentTime</span>:<span class=\"code-keyword\">this</span>.fetchAtBuffer_?t:<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-attr\">startingPartIndex</span>:<span class=\"code-keyword\">this</span>.syncPoint_.partIndex,<span class=\"code-attr\">startingSegmentIndex</span>:<span class=\"code-keyword\">this</span>.syncPoint_.segmentIndex,<span class=\"code-attr\">startTime</span>:<span class=\"code-keyword\">this</span>.syncPoint_.time}),l=d.segmentIndex,c=d.startTime,h=d.partIndex;s.getMediaInfoForTime=<span class=\"code-keyword\">this</span>.fetchAtBuffer_?<span class=\"code-string\">\"bufferedEnd \"</span>+t:<span class=\"code-string\">\"currentTime \"</span>+<span class=\"code-keyword\">this</span>.currentTime_(),s.mediaIndex=l,s.startOfSegment=c,s.partIndex=h}<span class=\"code-keyword\">var</span> f=a[s.mediaIndex],p=f&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> s.partIndex&amp;&amp;f.parts&amp;&amp;f.parts[s.partIndex];<span class=\"code-keyword\">if</span>(!f||<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> s.partIndex&amp;&amp;!p)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> s.partIndex&amp;&amp;f.parts&amp;&amp;(s.partIndex=<span class=\"code-number\">0</span>,p=f.parts[<span class=\"code-number\">0</span>]),!i&amp;&amp;p&amp;&amp;!p.independent)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===s.partIndex){<span class=\"code-keyword\">var</span> m=a[s.mediaIndex<span class=\"code-number\">-1</span>],g=m.parts&amp;&amp;m.parts.length&amp;&amp;m.parts[m.parts.length<span class=\"code-number\">-1</span>];g&amp;&amp;g.independent&amp;&amp;(s.mediaIndex-=<span class=\"code-number\">1</span>,s.partIndex=m.parts.length<span class=\"code-number\">-1</span>,s.independent=<span class=\"code-string\">\"previous segment\"</span>)}<span class=\"code-keyword\">else</span> f.parts[s.partIndex<span class=\"code-number\">-1</span>].independent&amp;&amp;(s.partIndex-=<span class=\"code-number\">1</span>,s.independent=<span class=\"code-string\">\"previous part\"</span>);<span class=\"code-keyword\">var</span> y=<span class=\"code-keyword\">this</span>.mediaSource_&amp;&amp;<span class=\"code-string\">\"ended\"</span>===<span class=\"code-keyword\">this</span>.mediaSource_.readyState;<span class=\"code-keyword\">return</span> s.mediaIndex&gt;=a.length<span class=\"code-number\">-1</span>&amp;&amp;y&amp;&amp;!<span class=\"code-keyword\">this</span>.seeking_()?<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.generateSegmentInfo_(s)},i.generateSegmentInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.independent,i=e.playlist,n=e.mediaIndex,r=e.startOfSegment,a=e.isSyncRequest,s=e.partIndex,o=e.forceTimestampOffset,u=e.getMediaInfoForTime,d=i.segments[n],l=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> s&amp;&amp;d.parts[s],c={<span class=\"code-attr\">requestId</span>:<span class=\"code-string\">\"segment-loader-\"</span>+<span class=\"code-built_in\">Math</span>.random(),<span class=\"code-attr\">uri</span>:l&amp;&amp;l.resolvedUri||d.resolvedUri,<span class=\"code-attr\">mediaIndex</span>:n,<span class=\"code-attr\">partIndex</span>:l?s:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">isSyncRequest</span>:a,<span class=\"code-attr\">startOfSegment</span>:r,<span class=\"code-attr\">playlist</span>:i,<span class=\"code-attr\">bytes</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">encryptedBytes</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">timestampOffset</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">timeline</span>:d.timeline,<span class=\"code-attr\">duration</span>:l&amp;&amp;l.duration||d.duration,<span class=\"code-attr\">segment</span>:d,<span class=\"code-attr\">part</span>:l,<span class=\"code-attr\">byteLength</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">transmuxer</span>:<span class=\"code-keyword\">this</span>.transmuxer_,<span class=\"code-attr\">getMediaInfoForTime</span>:u,<span class=\"code-attr\">independent</span>:t},h=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==o?o:<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_;c.timestampOffset=<span class=\"code-keyword\">this</span>.timestampOffsetForSegment_({<span class=\"code-attr\">segmentTimeline</span>:d.timeline,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">startOfSegment</span>:r,<span class=\"code-attr\">buffered</span>:<span class=\"code-keyword\">this</span>.buffered_(),<span class=\"code-attr\">overrideCheck</span>:h});<span class=\"code-keyword\">var</span> f=j(<span class=\"code-keyword\">this</span>.sourceUpdater_.audioBuffered());<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> f&amp;&amp;(c.audioAppendStart=f-<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset()),<span class=\"code-keyword\">this</span>.sourceUpdater_.videoBuffered().length&amp;&amp;(c.gopsToAlignWith=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>==t||!e.length)<span class=\"code-keyword\">return</span>[];<span class=\"code-keyword\">var</span> n,r=<span class=\"code-built_in\">Math</span>.ceil((t-i+<span class=\"code-number\">3</span>)*Gi);<span class=\"code-keyword\">for</span>(n=<span class=\"code-number\">0</span>;n&lt;e.length&amp;&amp;!(e[n].pts&gt;r);n++);<span class=\"code-keyword\">return</span> e.slice(n)}(<span class=\"code-keyword\">this</span>.gopBuffer_,<span class=\"code-keyword\">this</span>.currentTime_()-<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(),<span class=\"code-keyword\">this</span>.timeMapping_)),c},i.timestampOffsetForSegment_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> i=(t=e).segmentTimeline,n=t.currentTimeline,r=t.startOfSegment,a=t.buffered,t.overrideCheck||i!==n?i&lt;n?r:a.length?a.end(a.length<span class=\"code-number\">-1</span>):r:<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> t,i,n,r,a},i.earlyAbortWhenNeeded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.vhs_.tech_.paused()&amp;&amp;<span class=\"code-keyword\">this</span>.xhrOptions_.timeout&amp;&amp;<span class=\"code-keyword\">this</span>.playlist_.attributes.BANDWIDTH&amp;&amp;!(<span class=\"code-built_in\">Date</span>.now()-(e.firstBytesReceivedAt||<span class=\"code-built_in\">Date</span>.now())&lt;<span class=\"code-number\">1e3</span>)){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.currentTime_(),i=e.bandwidth,n=<span class=\"code-keyword\">this</span>.pendingSegment_.duration,r=ce.estimateSegmentRequestTime(n,i,<span class=\"code-keyword\">this</span>.playlist_,e.bytesReceived),a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-number\">1</span>),((e.length?e.end(e.length<span class=\"code-number\">-1</span>):<span class=\"code-number\">0</span>)-t)/i}(<span class=\"code-keyword\">this</span>.buffered_(),t,<span class=\"code-keyword\">this</span>.vhs_.tech_.playbackRate())<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">if</span>(!(r&lt;=a)){<span class=\"code-keyword\">var</span> s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.currentTime,i=e.bandwidth,n=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,u=e.master.playlists.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!ce.isIncompatible(e)})),d=u.filter(ce.isEnabled);d.length||(d=u.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!ce.isDisabled(e)})));<span class=\"code-keyword\">var</span> l=d.filter(ce.hasAttribute.bind(<span class=\"code-literal\">null</span>,<span class=\"code-string\">\"BANDWIDTH\"</span>)).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> u=o.getSyncPoint(e,n,s,t)?<span class=\"code-number\">1</span>:<span class=\"code-number\">2</span>;<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">playlist</span>:e,<span class=\"code-attr\">rebufferingImpact</span>:ce.estimateSegmentRequestTime(r,i,e)*u-a}})),c=l.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.rebufferingImpact&lt;=<span class=\"code-number\">0</span>}));<span class=\"code-keyword\">return</span> Mi(c,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> Bi(t.playlist,e.playlist)})),c.length?c[<span class=\"code-number\">0</span>]:(Mi(l,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.rebufferingImpact-t.rebufferingImpact})),l[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>)}({<span class=\"code-attr\">master</span>:<span class=\"code-keyword\">this</span>.vhs_.playlists.master,<span class=\"code-attr\">currentTime</span>:t,<span class=\"code-attr\">bandwidth</span>:i,<span class=\"code-attr\">duration</span>:<span class=\"code-keyword\">this</span>.duration_(),<span class=\"code-attr\">segmentDuration</span>:n,<span class=\"code-attr\">timeUntilRebuffer</span>:a,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">syncController</span>:<span class=\"code-keyword\">this</span>.syncController_});<span class=\"code-keyword\">if</span>(s){<span class=\"code-keyword\">var</span> o=r-a-s.rebufferingImpact,u=<span class=\"code-number\">.5</span>;a&lt;=N&amp;&amp;(u=<span class=\"code-number\">1</span>),!s.playlist||s.playlist.uri===<span class=\"code-keyword\">this</span>.playlist_.uri||o&lt;u||(<span class=\"code-keyword\">this</span>.bandwidth=s.playlist.attributes.BANDWIDTH*si.BANDWIDTH_VARIANCE+<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"earlyabort\"</span>))}}}},i.handleAbort_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Aborting \"</span>+ji(e)),<span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>},i.handleProgress_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(t.stats),<span class=\"code-keyword\">this</span>.checkForAbort_(t.requestId)||<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"progress\"</span>)},i.handleTrackInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)||<span class=\"code-keyword\">this</span>.checkForIllegalMediaSwitch(t)||(t=t||{},<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e&amp;&amp;!t||!e&amp;&amp;t||e&amp;&amp;!t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(e===t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-built_in\">Object</span>.keys(e).sort(),n=<span class=\"code-built_in\">Object</span>.keys(t).sort();<span class=\"code-keyword\">if</span>(i.length!==n.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-number\">0</span>;r&lt;i.length;r++){<span class=\"code-keyword\">var</span> a=i[r];<span class=\"code-keyword\">if</span>(a!==n[r])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(e[a]!==t[a])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}(<span class=\"code-keyword\">this</span>.currentMediaInfo_,t)||(<span class=\"code-keyword\">this</span>.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>},<span class=\"code-keyword\">this</span>.startingMediaInfo_=t,<span class=\"code-keyword\">this</span>.currentMediaInfo_=t,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"trackinfo update\"</span>,t),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"trackinfo\"</span>)),<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)||(<span class=\"code-keyword\">this</span>.pendingSegment_.trackInfo=t,<span class=\"code-keyword\">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class=\"code-keyword\">this</span>.processCallQueue_()))},i.handleTimingInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)){<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.pendingSegment_,a=Xi(t);r[a]=r[a]||{},r[a][i]=n,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"timinginfo: \"</span>+t+<span class=\"code-string\">\" - \"</span>+i+<span class=\"code-string\">\" - \"</span>+n),<span class=\"code-keyword\">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class=\"code-keyword\">this</span>.processCallQueue_()}},i.handleCaptions_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId))<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==t.length)<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_.hasAppendedData_){<span class=\"code-keyword\">var</span> n=<span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()?<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset():<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r[e.stream]=r[e.stream]||{<span class=\"code-attr\">startTime</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">captions</span>:[],<span class=\"code-attr\">endTime</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">var</span> t=r[e.stream];t.startTime=<span class=\"code-built_in\">Math</span>.min(t.startTime,e.startTime+n),t.endTime=<span class=\"code-built_in\">Math</span>.max(t.endTime,e.endTime+n),t.captions.push(e)})),<span class=\"code-built_in\">Object</span>.keys(r).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=r[e],a=t.startTime,s=t.endTime,o=t.captions,u=i.inbandTextTracks_;i.logger_(<span class=\"code-string\">\"adding cues from \"</span>+a+<span class=\"code-string\">\" -&gt; \"</span>+s+<span class=\"code-string\">\" for \"</span>+e),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e[i]){t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-608\"</span>}),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-608\"</span>});<span class=\"code-keyword\">var</span> n=i;<span class=\"code-regexp\">/^cc708_/</span>.test(i)&amp;&amp;(n=<span class=\"code-string\">\"SERVICE\"</span>+i.split(<span class=\"code-string\">\"_\"</span>)[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">var</span> r=t.textTracks().getTrackById(n);<span class=\"code-keyword\">if</span>(r)e[i]=r;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> a=i,s=i,o=!<span class=\"code-number\">1</span>,u=(t.options_.vhs&amp;&amp;t.options_.vhs.captionServices||{})[n];u&amp;&amp;(a=u.label,s=u.language,o=u.default),e[i]=t.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"captions\"</span>,<span class=\"code-attr\">id</span>:n,<span class=\"code-attr\">default</span>:o,<span class=\"code-attr\">label</span>:a,<span class=\"code-attr\">language</span>:s},!<span class=\"code-number\">1</span>).track}}}(u,i.vhs_.tech_,e),qi(a,s,u[e]),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;<span class=\"code-keyword\">if</span>(i){<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">window</span>.WebKitDataCue||<span class=\"code-built_in\">window</span>.VTTCue;i.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=e.stream;t[i].addCue(<span class=\"code-keyword\">new</span> r(e.startTime+n,e.endTime+n,e.text))}))}}({<span class=\"code-attr\">captionArray</span>:o,<span class=\"code-attr\">inbandTextTracks</span>:u,<span class=\"code-attr\">timestampOffset</span>:n})})),<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearParsedMp4Captions\"</span>})}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.metadataQueue_.caption.push(<span class=\"code-keyword\">this</span>.handleCaptions_.bind(<span class=\"code-keyword\">this</span>,e,t));<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"SegmentLoader received no captions from a caption event\"</span>)},i.handleId3_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId))<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_.hasAppendedData_){<span class=\"code-keyword\">var</span> n=<span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()?<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset():<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset();!<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">label</span>:<span class=\"code-string\">\"Timed Metadata\"</span>},!<span class=\"code-number\">1</span>).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(<span class=\"code-keyword\">this</span>.inbandTextTracks_,i,<span class=\"code-keyword\">this</span>.vhs_.tech_),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.inbandTextTracks,i=e.metadataArray,n=e.timestampOffset,a=e.videoDuration;<span class=\"code-keyword\">if</span>(i){<span class=\"code-keyword\">var</span> s=<span class=\"code-built_in\">window</span>.WebKitDataCue||<span class=\"code-built_in\">window</span>.VTTCue,o=t.metadataTrack_;<span class=\"code-keyword\">if</span>(o&amp;&amp;(i.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.cueTime+n;!(<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> t||<span class=\"code-built_in\">window</span>.isNaN(t)||t&lt;<span class=\"code-number\">0</span>)&amp;&amp;t&lt;<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;e.frames.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">new</span> s(t,t,e.value||e.url||e.data||<span class=\"code-string\">\"\"</span>);i.frame=e,i.value=e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-built_in\">Object</span>.defineProperties(e.frame,{<span class=\"code-attr\">id</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"cue.frame.id is deprecated. Use cue.value.key instead.\"</span>),e.value.key}},<span class=\"code-attr\">value</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"cue.frame.value is deprecated. Use cue.value.data instead.\"</span>),e.value.data}},<span class=\"code-attr\">privateData</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"cue.frame.privateData is deprecated. Use cue.value.data instead.\"</span>),e.value.data}}})}(i),o.addCue(i)}))})),o.cues&amp;&amp;o.cues.length)){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=o.cues,d=[],l=<span class=\"code-number\">0</span>;l&lt;u.length;l++)u[l]&amp;&amp;d.push(u[l]);<span class=\"code-keyword\">var</span> c=d.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e[t.startTime]||[];<span class=\"code-keyword\">return</span> i.push(t),e[t.startTime]=i,e}),{}),h=<span class=\"code-built_in\">Object</span>.keys(c).sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Number</span>(e)-<span class=\"code-built_in\">Number</span>(t)}));h.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=c[e],n=<span class=\"code-built_in\">Number</span>(h[t+<span class=\"code-number\">1</span>])||a;i.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.endTime=n}))}))}}}({<span class=\"code-attr\">inbandTextTracks</span>:<span class=\"code-keyword\">this</span>.inbandTextTracks_,<span class=\"code-attr\">metadataArray</span>:t,<span class=\"code-attr\">timestampOffset</span>:n,<span class=\"code-attr\">videoDuration</span>:<span class=\"code-keyword\">this</span>.duration_()})}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.metadataQueue_.id3.push(<span class=\"code-keyword\">this</span>.handleId3_.bind(<span class=\"code-keyword\">this</span>,e,t,i))},i.processMetadataQueue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.metadataQueue_.id3.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()})),<span class=\"code-keyword\">this</span>.metadataQueue_.caption.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()})),<span class=\"code-keyword\">this</span>.metadataQueue_.id3=[],<span class=\"code-keyword\">this</span>.metadataQueue_.caption=[]},i.processCallQueue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.callQueue_;<span class=\"code-keyword\">this</span>.callQueue_=[],e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()}))},i.processLoadQueue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.loadQueue_;<span class=\"code-keyword\">this</span>.loadQueue_=[],e.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e()}))},i.hasEnoughInfoToLoad_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"audio\"</span>!==<span class=\"code-keyword\">this</span>.loaderType_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">return</span>!(!e||<span class=\"code-keyword\">this</span>.getCurrentMediaInfo_()&amp;&amp;zi({<span class=\"code-attr\">timelineChangeController</span>:<span class=\"code-keyword\">this</span>.timelineChangeController_,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">segmentTimeline</span>:e.timeline,<span class=\"code-attr\">loaderType</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">audioDisabled</span>:<span class=\"code-keyword\">this</span>.audioDisabled_}))},i.getCurrentMediaInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.pendingSegment_),e&amp;&amp;e.trackInfo||<span class=\"code-keyword\">this</span>.currentMediaInfo_},i.getMediaInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.pendingSegment_),<span class=\"code-keyword\">this</span>.getCurrentMediaInfo_(e)||<span class=\"code-keyword\">this</span>.startingMediaInfo_},i.hasEnoughInfoToAppend_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.sourceUpdater_.ready())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.waitingOnRemove_||<span class=\"code-keyword\">this</span>.quotaExceededErrorRetryTimeout_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.pendingSegment_,t=<span class=\"code-keyword\">this</span>.getCurrentMediaInfo_();<span class=\"code-keyword\">if</span>(!e||!t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;<span class=\"code-keyword\">return</span>!(n&amp;&amp;!e.videoTimingInfo||i&amp;&amp;!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;!r&amp;&amp;!e.audioTimingInfo||zi({<span class=\"code-attr\">timelineChangeController</span>:<span class=\"code-keyword\">this</span>.timelineChangeController_,<span class=\"code-attr\">currentTimeline</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">segmentTimeline</span>:e.timeline,<span class=\"code-attr\">loaderType</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">audioDisabled</span>:<span class=\"code-keyword\">this</span>.audioDisabled_}))},i.handleData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId))<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.callQueue_.length&amp;&amp;<span class=\"code-keyword\">this</span>.hasEnoughInfoToAppend_()){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.setTimeMapping_(i.timeline),<span class=\"code-keyword\">this</span>.updateMediaSecondsLoaded_(i.part||i.segment),<span class=\"code-string\">\"closed\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource_.readyState){<span class=\"code-keyword\">if</span>(e.map&amp;&amp;(e.map=<span class=\"code-keyword\">this</span>.initSegmentForMap(e.map,!<span class=\"code-number\">0</span>),i.segment.map=e.map),e.key&amp;&amp;<span class=\"code-keyword\">this</span>.segmentKey(e.key,!<span class=\"code-number\">0</span>),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"fmp4\"</span>),i.timingInfo.start=i[Xi(t.type)].start;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> n,r=<span class=\"code-keyword\">this</span>.getCurrentMediaInfo_(),a=<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;r&amp;&amp;r.hasVideo;a&amp;&amp;(n=i.videoTimingInfo.start),i.timingInfo.start=<span class=\"code-keyword\">this</span>.trueSegmentStart_({<span class=\"code-attr\">currentStart</span>:i.timingInfo.start,<span class=\"code-attr\">playlist</span>:i.playlist,<span class=\"code-attr\">mediaIndex</span>:i.mediaIndex,<span class=\"code-attr\">currentVideoTimestampOffset</span>:<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(),<span class=\"code-attr\">useVideoTimingInfo</span>:a,<span class=\"code-attr\">firstVideoFrameTimeForData</span>:n,<span class=\"code-attr\">videoTimingInfo</span>:i.videoTimingInfo,<span class=\"code-attr\">audioTimingInfo</span>:i.audioTimingInfo})}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.updateAppendInitSegmentStatus(i,t.type),<span class=\"code-keyword\">this</span>.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){<span class=\"code-keyword\">this</span>.updateTimingInfoEnd_(i),<span class=\"code-keyword\">this</span>.syncController_.saveSegmentTimingInfo({<span class=\"code-attr\">segmentInfo</span>:i,<span class=\"code-attr\">shouldSaveTimelineMapping</span>:<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_});<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">this</span>.chooseNextRequest_();<span class=\"code-keyword\">if</span>(s.mediaIndex!==i.mediaIndex||s.partIndex!==i.partIndex)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"sync segment was incorrect, not appending\"</span>);<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"sync segment was correct, appending\"</span>)}i.hasAppendedData_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.processMetadataQueue_(),<span class=\"code-keyword\">this</span>.appendData_(i,t)}}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.callQueue_.push(<span class=\"code-keyword\">this</span>.handleData_.bind(<span class=\"code-keyword\">this</span>,e,t))},i.updateAppendInitSegmentStatus=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-string\">\"main\"</span>!==<span class=\"code-keyword\">this</span>.loaderType_||<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e.timestampOffset||e.changedTimestampOffset||(<span class=\"code-keyword\">this</span>.appendInitSegment_={<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">this</span>.playlistOfLastInitSegment_[t]!==e.playlist&amp;&amp;(<span class=\"code-keyword\">this</span>.appendInitSegment_[t]=!<span class=\"code-number\">0</span>)},i.getInitSegmentAndUpdateState_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.initSegment,n=e.map,r=e.playlist;<span class=\"code-keyword\">if</span>(n){<span class=\"code-keyword\">var</span> a=Ne(n);<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.activeInitSegmentId_===a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;i=<span class=\"code-keyword\">this</span>.initSegmentForMap(n,!<span class=\"code-number\">0</span>).bytes,<span class=\"code-keyword\">this</span>.activeInitSegmentId_=a}<span class=\"code-keyword\">return</span> i&amp;&amp;<span class=\"code-keyword\">this</span>.appendInitSegment_[t]?(<span class=\"code-keyword\">this</span>.playlistOfLastInitSegment_[t]=r,<span class=\"code-keyword\">this</span>.appendInitSegment_[t]=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.activeInitSegmentId_=<span class=\"code-literal\">null</span>,i):<span class=\"code-literal\">null</span>},i.handleQuotaExceededError_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>,n=e.segmentInfo,r=e.type,a=e.bytes,s=<span class=\"code-keyword\">this</span>.sourceUpdater_.audioBuffered(),o=<span class=\"code-keyword\">this</span>.sourceUpdater_.videoBuffered();s.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: \"</span>+V(s).join(<span class=\"code-string\">\", \"</span>)),o.length&gt;<span class=\"code-number\">1</span>&amp;&amp;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: \"</span>+V(o).join(<span class=\"code-string\">\", \"</span>));<span class=\"code-keyword\">var</span> u=s.length?s.start(<span class=\"code-number\">0</span>):<span class=\"code-number\">0</span>,d=s.length?s.end(s.length<span class=\"code-number\">-1</span>):<span class=\"code-number\">0</span>,l=o.length?o.start(<span class=\"code-number\">0</span>):<span class=\"code-number\">0</span>,c=o.length?o.end(o.length<span class=\"code-number\">-1</span>):<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(d-u&lt;=<span class=\"code-number\">1</span>&amp;&amp;c-l&lt;=<span class=\"code-number\">1</span>)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: \"</span>+a.byteLength+<span class=\"code-string\">\", audio buffer: \"</span>+V(s).join(<span class=\"code-string\">\", \"</span>)+<span class=\"code-string\">\", video buffer: \"</span>+V(o).join(<span class=\"code-string\">\", \"</span>)+<span class=\"code-string\">\", \"</span>),<span class=\"code-keyword\">this</span>.error({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Quota exceeded error with append of a single segment of content\"</span>,<span class=\"code-attr\">excludeUntil</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>);<span class=\"code-keyword\">this</span>.waitingOnRemove_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.callQueue_.push(<span class=\"code-keyword\">this</span>.appendToSourceBuffer_.bind(<span class=\"code-keyword\">this</span>,{<span class=\"code-attr\">segmentInfo</span>:n,<span class=\"code-attr\">type</span>:r,<span class=\"code-attr\">bytes</span>:a}));<span class=\"code-keyword\">var</span> h=<span class=\"code-keyword\">this</span>.currentTime_()<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to \"</span>+h),<span class=\"code-keyword\">this</span>.remove(<span class=\"code-number\">0</span>,h,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.logger_(<span class=\"code-string\">\"On QUOTA_EXCEEDED_ERR, retrying append in 1s\"</span>),i.waitingOnRemove_=!<span class=\"code-number\">1</span>,i.quotaExceededErrorRetryTimeout_=<span class=\"code-built_in\">window</span>.setTimeout((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.logger_(<span class=\"code-string\">\"On QUOTA_EXCEEDED_ERR, re-processing call queue\"</span>),i.quotaExceededErrorRetryTimeout_=<span class=\"code-literal\">null</span>,i.processCallQueue_()}),<span class=\"code-number\">1e3</span>)}),!<span class=\"code-number\">0</span>)},i.handleAppendError_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.segmentInfo,n=e.type,r=e.bytes;t&amp;&amp;(<span class=\"code-number\">22</span>!==t.code?(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Received non QUOTA_EXCEEDED_ERR on append\"</span>,t),<span class=\"code-keyword\">this</span>.error(n+<span class=\"code-string\">\" append of \"</span>+r.length+<span class=\"code-string\">\"b failed for segment #\"</span>+i.mediaIndex+<span class=\"code-string\">\" in playlist \"</span>+i.playlist.id),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appenderror\"</span>)):<span class=\"code-keyword\">this</span>.handleQuotaExceededError_({<span class=\"code-attr\">segmentInfo</span>:i,<span class=\"code-attr\">type</span>:n,<span class=\"code-attr\">bytes</span>:r}))},i.appendToSourceBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n,r=e.segmentInfo,a=e.type,s=e.initSegment,o=e.data,u=e.bytes;<span class=\"code-keyword\">if</span>(!u){<span class=\"code-keyword\">var</span> d=[o],l=o.byteLength;s&amp;&amp;(d.unshift(s),l+=s.byteLength),n=<span class=\"code-number\">0</span>,(t={<span class=\"code-attr\">bytes</span>:l,<span class=\"code-attr\">segments</span>:d}).bytes&amp;&amp;(i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.bytes),t.segments.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.set(e,n),n+=e.byteLength}))),u=i}<span class=\"code-keyword\">this</span>.sourceUpdater_.appendBuffer({<span class=\"code-attr\">segmentInfo</span>:r,<span class=\"code-attr\">type</span>:a,<span class=\"code-attr\">bytes</span>:u},<span class=\"code-keyword\">this</span>.handleAppendError_.bind(<span class=\"code-keyword\">this</span>,{<span class=\"code-attr\">segmentInfo</span>:r,<span class=\"code-attr\">type</span>:a,<span class=\"code-attr\">bytes</span>:u}))},i.handleSegmentTimingInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;t===<span class=\"code-keyword\">this</span>.pendingSegment_.requestId){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.pendingSegment_.segment,r=e+<span class=\"code-string\">\"TimingInfo\"</span>;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||<span class=\"code-number\">0</span>,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.type,n=t.data;<span class=\"code-keyword\">if</span>(n&amp;&amp;n.byteLength&amp;&amp;(<span class=\"code-string\">\"audio\"</span>!==i||!<span class=\"code-keyword\">this</span>.audioDisabled_)){<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.getInitSegmentAndUpdateState_({<span class=\"code-attr\">type</span>:i,<span class=\"code-attr\">initSegment</span>:t.initSegment,<span class=\"code-attr\">playlist</span>:e.playlist,<span class=\"code-attr\">map</span>:e.isFmp4?e.segment.map:<span class=\"code-literal\">null</span>});<span class=\"code-keyword\">this</span>.appendToSourceBuffer_({<span class=\"code-attr\">segmentInfo</span>:e,<span class=\"code-attr\">type</span>:i,<span class=\"code-attr\">initSegment</span>:r,<span class=\"code-attr\">data</span>:n})}},i.loadSegment_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING\"</span>,<span class=\"code-keyword\">this</span>.pendingSegment_=e,<span class=\"code-keyword\">this</span>.trimBackBuffer_(e),<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.timestampOffset&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_&amp;&amp;<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"clearAllMp4Captions\"</span>}),<span class=\"code-keyword\">this</span>.hasEnoughInfoToLoad_()?<span class=\"code-keyword\">this</span>.updateTransmuxerAndRequestSegment_(e):<span class=\"code-keyword\">this</span>.loadQueue_.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=m({},e,{<span class=\"code-attr\">forceTimestampOffset</span>:!<span class=\"code-number\">0</span>});m(e,t.generateSegmentInfo_(i)),t.isPendingTimestampOffset_=!<span class=\"code-number\">1</span>,t.updateTransmuxerAndRequestSegment_(e)}))},i.updateTransmuxerAndRequestSegment_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&amp;&amp;(<span class=\"code-keyword\">this</span>.gopBuffer_.length=<span class=\"code-number\">0</span>,e.gopsToAlignWith=[],<span class=\"code-keyword\">this</span>.timeMapping_=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"reset\"</span>}),<span class=\"code-keyword\">this</span>.transmuxer_.postMessage({<span class=\"code-attr\">action</span>:<span class=\"code-string\">\"setTimestampOffset\"</span>,<span class=\"code-attr\">timestampOffset</span>:e.timestampOffset}));<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.createSimplifiedSegmentObj_(e),n=<span class=\"code-keyword\">this</span>.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex,a=e.timeline!==<span class=\"code-keyword\">this</span>.currentTimeline_&amp;&amp;e.timeline&gt;<span class=\"code-number\">0</span>,s=n||r&amp;&amp;a;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Requesting \"</span>+ji(e)),i.map&amp;&amp;!i.map.bytes&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"going to request init segment.\"</span>),<span class=\"code-keyword\">this</span>.appendInitSegment_={<span class=\"code-attr\">video</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">audio</span>:!<span class=\"code-number\">0</span>}),e.abortRequests=Li({<span class=\"code-attr\">xhr</span>:<span class=\"code-keyword\">this</span>.vhs_.xhr,<span class=\"code-attr\">xhrOptions</span>:<span class=\"code-keyword\">this</span>.xhrOptions_,<span class=\"code-attr\">decryptionWorker</span>:<span class=\"code-keyword\">this</span>.decrypter_,<span class=\"code-attr\">segment</span>:i,<span class=\"code-attr\">abortFn</span>:<span class=\"code-keyword\">this</span>.handleAbort_.bind(<span class=\"code-keyword\">this</span>,e),<span class=\"code-attr\">progressFn</span>:<span class=\"code-keyword\">this</span>.handleProgress_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">trackInfoFn</span>:<span class=\"code-keyword\">this</span>.handleTrackInfo_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">timingInfoFn</span>:<span class=\"code-keyword\">this</span>.handleTimingInfo_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">videoSegmentTimingInfoFn</span>:<span class=\"code-keyword\">this</span>.handleSegmentTimingInfo_.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"video\"</span>,e.requestId),<span class=\"code-attr\">audioSegmentTimingInfoFn</span>:<span class=\"code-keyword\">this</span>.handleSegmentTimingInfo_.bind(<span class=\"code-keyword\">this</span>,<span class=\"code-string\">\"audio\"</span>,e.requestId),<span class=\"code-attr\">captionsFn</span>:<span class=\"code-keyword\">this</span>.handleCaptions_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">isEndOfTimeline</span>:s,<span class=\"code-attr\">endedTimelineFn</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.logger_(<span class=\"code-string\">\"received endedtimeline callback\"</span>)},<span class=\"code-attr\">id3Fn</span>:<span class=\"code-keyword\">this</span>.handleId3_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">dataFn</span>:<span class=\"code-keyword\">this</span>.handleData_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">doneFn</span>:<span class=\"code-keyword\">this</span>.segmentRequestFinished_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-attr\">onTransmuxerLog</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.message,r=i.level,a=i.stream;t.logger_(ji(e)+<span class=\"code-string\">\" logged from transmuxer stream \"</span>+a+<span class=\"code-string\">\" as a \"</span>+r+<span class=\"code-string\">\": \"</span>+n)}})},i.trimBackBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=t-si.BACK_BUFFER_LENGTH;e.length&amp;&amp;(n=<span class=\"code-built_in\">Math</span>.max(n,e.start(<span class=\"code-number\">0</span>)));<span class=\"code-keyword\">var</span> r=t-i;<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(r,n)}(<span class=\"code-keyword\">this</span>.seekable_(),<span class=\"code-keyword\">this</span>.currentTime_(),<span class=\"code-keyword\">this</span>.playlist_.targetDuration||<span class=\"code-number\">10</span>);t&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.remove(<span class=\"code-number\">0</span>,t)},i.createSimplifiedSegmentObj_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segment,i=e.part,n={<span class=\"code-attr\">resolvedUri</span>:i?i.resolvedUri:t.resolvedUri,<span class=\"code-attr\">byterange</span>:i?i.byterange:t.byterange,<span class=\"code-attr\">requestId</span>:e.requestId,<span class=\"code-attr\">transmuxer</span>:e.transmuxer,<span class=\"code-attr\">audioAppendStart</span>:e.audioAppendStart,<span class=\"code-attr\">gopsToAlignWith</span>:e.gopsToAlignWith,<span class=\"code-attr\">part</span>:e.part},r=e.playlist.segments[e.mediaIndex<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">if</span>(r&amp;&amp;r.timeline===t.timeline&amp;&amp;(r.videoTimingInfo?n.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&amp;&amp;(n.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){<span class=\"code-keyword\">var</span> a=t.key.iv||<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,<span class=\"code-number\">0</span>,e.mediaIndex+e.playlist.mediaSequence]);n.key=<span class=\"code-keyword\">this</span>.segmentKey(t.key),n.key.iv=a}<span class=\"code-keyword\">return</span> t.map&amp;&amp;(n.map=<span class=\"code-keyword\">this</span>.initSegmentForMap(t.map)),n},i.saveTransferStats_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.mediaRequests+=<span class=\"code-number\">1</span>,e&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaBytesTransferred+=e.bytesReceived,<span class=\"code-keyword\">this</span>.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.pendingSegment_.byteLength=t.bytesReceived,e&lt;Vi?<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Ignoring segment's bandwidth because its duration of \"</span>+e+<span class=\"code-string\">\" is less than the min to record 0.016666666666666666\"</span>):(<span class=\"code-keyword\">this</span>.bandwidth=t.bandwidth,<span class=\"code-keyword\">this</span>.roundTrip=t.roundTripTime)},i.handleTimeout_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mediaRequestsTimedout+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.bandwidth=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.roundTrip=<span class=\"code-literal\">NaN</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>)},i.segmentRequestFinished_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.callQueue_.length)<span class=\"code-keyword\">this</span>.callQueue_.push(<span class=\"code-keyword\">this</span>.segmentRequestFinished_.bind(<span class=\"code-keyword\">this</span>,e,t,i));<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.saveTransferStats_(t.stats),<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;t.requestId===<span class=\"code-keyword\">this</span>.pendingSegment_.requestId){<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,e.code===_i)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.pause(),e.code===vi?<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.handleTimeout_():(<span class=\"code-keyword\">this</span>.mediaRequestsErrored+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.error(e),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>))}<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&amp;&amp;(<span class=\"code-keyword\">this</span>.gopBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!t.length)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">if</span>(i)<span class=\"code-keyword\">return</span> t.slice();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=t[<span class=\"code-number\">0</span>].pts,r=<span class=\"code-number\">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;=n);r++);<span class=\"code-keyword\">return</span> e.slice(<span class=\"code-number\">0</span>,r).concat(t)}(<span class=\"code-keyword\">this</span>.gopBuffer_,i.gopInfo,<span class=\"code-keyword\">this</span>.safeAppend_)),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"APPENDING\"</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appending\"</span>),<span class=\"code-keyword\">this</span>.waitForAppendsToComplete_(n)}},i.setTimeMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.syncController_.mappingForTimeline(e);<span class=\"code-literal\">null</span>!==t&amp;&amp;(<span class=\"code-keyword\">this</span>.timeMapping_=t)},i.updateMediaSecondsLoaded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.start&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.end?<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=e.end-e.start:<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>!==e&amp;&amp;(<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;e!==<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()||!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;e!==<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,u=e.audioTimingInfo;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t)<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">if</span>(!s)<span class=\"code-keyword\">return</span> u.start;<span class=\"code-keyword\">var</span> d=i.segments[n<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>!==n&amp;&amp;d&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==d.start&amp;&amp;d.end===r+a?o.start:r},i.waitForAppendsToComplete_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.getCurrentMediaInfo_(e);<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"No starting media returned, likely due to an unsupported media format.\"</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>);<span class=\"code-keyword\">var</span> i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,a=<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;n,s=!<span class=\"code-keyword\">this</span>.audioDisabled_&amp;&amp;i&amp;&amp;!r;<span class=\"code-keyword\">if</span>(e.waitingOnAppends=<span class=\"code-number\">0</span>,!e.hasAppendedData_)<span class=\"code-keyword\">return</span> e.timingInfo||<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> e.timestampOffset||(<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_=!<span class=\"code-number\">0</span>),e.timingInfo={<span class=\"code-attr\">start</span>:<span class=\"code-number\">0</span>},e.waitingOnAppends++,<span class=\"code-keyword\">this</span>.isPendingTimestampOffset_||(<span class=\"code-keyword\">this</span>.updateSourceBufferTimestampOffset_(e),<span class=\"code-keyword\">this</span>.processMetadataQueue_()),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.checkAppendsDone_(e);a&amp;&amp;e.waitingOnAppends++,s&amp;&amp;e.waitingOnAppends++,a&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.videoQueueCallback(<span class=\"code-keyword\">this</span>.checkAppendsDone_.bind(<span class=\"code-keyword\">this</span>,e)),s&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.audioQueueCallback(<span class=\"code-keyword\">this</span>.checkAppendsDone_.bind(<span class=\"code-keyword\">this</span>,e))},i.checkAppendsDone_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.checkForAbort_(e.requestId)||(e.waitingOnAppends--,<span class=\"code-number\">0</span>===e.waitingOnAppends&amp;&amp;<span class=\"code-keyword\">this</span>.handleAppendsDone_())},i.checkForIllegalMediaSwitch=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"main\"</span>===e&amp;&amp;t&amp;&amp;i?i.hasAudio||i.hasVideo?t.hasVideo&amp;&amp;!i.hasVideo?<span class=\"code-string\">\"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.\"</span>:!t.hasVideo&amp;&amp;i.hasVideo?<span class=\"code-string\">\"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.\"</span>:<span class=\"code-literal\">null</span>:<span class=\"code-string\">\"Neither audio nor video found in segment.\"</span>:<span class=\"code-literal\">null</span>}(<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-keyword\">this</span>.getCurrentMediaInfo_(),e);<span class=\"code-keyword\">return</span>!!t&amp;&amp;(<span class=\"code-keyword\">this</span>.error({<span class=\"code-attr\">message</span>:t,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>}),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>),!<span class=\"code-number\">0</span>)},i.updateSourceBufferTimestampOffset_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==e.timestampOffset&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.timingInfo.start&amp;&amp;!e.changedTimestampOffset&amp;&amp;<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_){<span class=\"code-keyword\">var</span> t=!<span class=\"code-number\">1</span>;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!<span class=\"code-number\">0</span>,e.timestampOffset!==<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset()&amp;&amp;(<span class=\"code-keyword\">this</span>.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!<span class=\"code-number\">0</span>),e.timestampOffset!==<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset()&amp;&amp;(<span class=\"code-keyword\">this</span>.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!<span class=\"code-number\">0</span>),t&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestampoffset\"</span>)}},i.updateTimingInfoEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.timingInfo=e.timingInfo||{};<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.getMediaInfo_(),i=<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_&amp;&amp;t&amp;&amp;t.hasVideo&amp;&amp;e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&amp;&amp;(e.timingInfo.end=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.end?i.end:i.start+e.duration)},i.handleAppendsDone_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.pendingSegment_&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appendsdone\"</span>),!<span class=\"code-keyword\">this</span>.pendingSegment_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_());<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.updateTimingInfoEnd_(e),<span class=\"code-keyword\">this</span>.shouldSaveSegmentTimingInfo_&amp;&amp;<span class=\"code-keyword\">this</span>.syncController_.saveSegmentTimingInfo({<span class=\"code-attr\">segmentInfo</span>:e,<span class=\"code-attr\">shouldSaveTimelineMapping</span>:<span class=\"code-string\">\"main\"</span>===<span class=\"code-keyword\">this</span>.loaderType_});<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"hls\"</span>!==t)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i,n,r=(i={<span class=\"code-attr\">audioTimingInfo</span>:e.audioTimingInfo,<span class=\"code-attr\">videoTimingInfo</span>:e.videoTimingInfo},n=<span class=\"code-number\">0</span>,[<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=i[e+<span class=\"code-string\">\"TimingInfo\"</span>];<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> r,a=t.start,s=t.end;<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> a||<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> s?r=<span class=\"code-built_in\">window</span>.BigInt(s)-<span class=\"code-built_in\">window</span>.BigInt(a):<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> a&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> s&amp;&amp;(r=s-a),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==r&amp;&amp;r&gt;n&amp;&amp;(n=r)}})),<span class=\"code-string\">\"bigint\"</span>==<span class=\"code-keyword\">typeof</span> n&amp;&amp;n&lt;<span class=\"code-built_in\">Number</span>.MAX_SAFE_INTEGER&amp;&amp;(n=<span class=\"code-built_in\">Number</span>(n)),n);<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> a=e.playlist.targetDuration,s=Qi({<span class=\"code-attr\">segmentDuration</span>:r,<span class=\"code-attr\">maxDuration</span>:<span class=\"code-number\">2</span>*a}),o=Qi({<span class=\"code-attr\">segmentDuration</span>:r,<span class=\"code-attr\">maxDuration</span>:a}),u=<span class=\"code-string\">\"Segment with index \"</span>+e.mediaIndex+<span class=\"code-string\">\" from playlist \"</span>+e.playlist.id+<span class=\"code-string\">\" has a duration of \"</span>+r+<span class=\"code-string\">\" when the reported duration is \"</span>+e.duration+<span class=\"code-string\">\" and the target duration is \"</span>+a+<span class=\"code-string\">\". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1\"</span>;<span class=\"code-keyword\">return</span> s||o?{<span class=\"code-attr\">severity</span>:s?<span class=\"code-string\">\"warn\"</span>:<span class=\"code-string\">\"info\"</span>,<span class=\"code-attr\">message</span>:u}:<span class=\"code-literal\">null</span>}(e,<span class=\"code-keyword\">this</span>.sourceType_);<span class=\"code-keyword\">if</span>(t&amp;&amp;(<span class=\"code-string\">\"warn\"</span>===t.severity?r.default.log.warn(t.message):<span class=\"code-keyword\">this</span>.logger_(t.message)),<span class=\"code-keyword\">this</span>.recordThroughput_(e),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,!e.isSyncRequest||(<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),e.hasAppendedData_)){<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Appended \"</span>+ji(e)),<span class=\"code-keyword\">this</span>.addSegmentMetadataCue_(e),<span class=\"code-keyword\">this</span>.fetchAtBuffer_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.currentTimeline_!==e.timeline&amp;&amp;(<span class=\"code-keyword\">this</span>.timelineChangeController_.lastTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-keyword\">this</span>.loaderType_,<span class=\"code-attr\">from</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">to</span>:e.timeline}),<span class=\"code-string\">\"main\"</span>!==<span class=\"code-keyword\">this</span>.loaderType_||<span class=\"code-keyword\">this</span>.audioDisabled_||<span class=\"code-keyword\">this</span>.timelineChangeController_.lastTimelineChange({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">from</span>:<span class=\"code-keyword\">this</span>.currentTimeline_,<span class=\"code-attr\">to</span>:e.timeline})),<span class=\"code-keyword\">this</span>.currentTimeline_=e.timeline,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>);<span class=\"code-keyword\">var</span> i=e.segment,n=e.part,a=i.end&amp;&amp;<span class=\"code-keyword\">this</span>.currentTime_()-i.end&gt;<span class=\"code-number\">3</span>*e.playlist.targetDuration,s=n&amp;&amp;n.end&amp;&amp;<span class=\"code-keyword\">this</span>.currentTime_()-n.end&gt;<span class=\"code-number\">3</span>*e.playlist.partTargetDuration;<span class=\"code-keyword\">if</span>(a||s)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"bad \"</span>+(a?<span class=\"code-string\">\"segment\"</span>:<span class=\"code-string\">\"part\"</span>)+<span class=\"code-string\">\" \"</span>+ji(e)),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.resetEverything();<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.mediaIndex&amp;&amp;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"progress\"</span>),<span class=\"code-keyword\">this</span>.mediaIndex=e.mediaIndex,<span class=\"code-keyword\">this</span>.partIndex=e.partIndex,<span class=\"code-keyword\">this</span>.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&amp;&amp;<span class=\"code-keyword\">this</span>.endOfStream(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appended\"</span>),e.hasAppendedData_&amp;&amp;<span class=\"code-keyword\">this</span>.mediaAppends++,<span class=\"code-keyword\">this</span>.paused()||<span class=\"code-keyword\">this</span>.monitorBuffer_()}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Throwing away un-appended sync request \"</span>+ji(e))},i.recordThroughput_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e.duration&lt;Vi)<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Ignoring segment's throughput because its duration of \"</span>+e.duration+<span class=\"code-string\">\" is less than the min to record 0.016666666666666666\"</span>);<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.throughput.rate,i=<span class=\"code-built_in\">Date</span>.now()-e.endOfAllRequests+<span class=\"code-number\">1</span>,n=<span class=\"code-built_in\">Math</span>.floor(e.byteLength/i*<span class=\"code-number\">8</span>*<span class=\"code-number\">1e3</span>);<span class=\"code-keyword\">this</span>.throughput.rate+=(n-t)/++<span class=\"code-keyword\">this</span>.throughput.count}},i.addSegmentMetadataCue_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.segmentMetadataTrack_){<span class=\"code-keyword\">var</span> t=e.segment,i=t.start,n=t.end;<span class=\"code-keyword\">if</span>(Wi(i)&amp;&amp;Wi(n)){qi(i,n,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_);<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">window</span>.WebKitDataCue||<span class=\"code-built_in\">window</span>.VTTCue,a={<span class=\"code-attr\">custom</span>:t.custom,<span class=\"code-attr\">dateTimeObject</span>:t.dateTimeObject,<span class=\"code-attr\">dateTimeString</span>:t.dateTimeString,<span class=\"code-attr\">bandwidth</span>:e.playlist.attributes.BANDWIDTH,<span class=\"code-attr\">resolution</span>:e.playlist.attributes.RESOLUTION,<span class=\"code-attr\">codecs</span>:e.playlist.attributes.CODECS,<span class=\"code-attr\">byteLength</span>:e.byteLength,<span class=\"code-attr\">uri</span>:e.uri,<span class=\"code-attr\">timeline</span>:e.timeline,<span class=\"code-attr\">playlist</span>:e.playlist.id,<span class=\"code-attr\">start</span>:i,<span class=\"code-attr\">end</span>:n},s=<span class=\"code-keyword\">new</span> r(i,n,<span class=\"code-built_in\">JSON</span>.stringify(a));s.value=a,<span class=\"code-keyword\">this</span>.segmentMetadataTrack_.addCue(s)}}},t}(r.default.EventTarget);<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">Ki</span>(<span class=\"code-params\"></span>)</span>{}<span class=\"code-keyword\">var</span> $i,Ji=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e?e:e.replace(<span class=\"code-regexp\">/./</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.toUpperCase()}))},Zi=[<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>],en=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">return</span> i&amp;&amp;i.updating||t.queuePending[e]},tn=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==i.queue.length){<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>,r=i.queue[n];<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mediaSource\"</span>!==r.type){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mediaSource\"</span>!==t&amp;&amp;i.ready()&amp;&amp;<span class=\"code-string\">\"closed\"</span>!==i.mediaSource.readyState&amp;&amp;!en(t,i)){<span class=\"code-keyword\">if</span>(r.type!==t){<span class=\"code-keyword\">if</span>(n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"mediaSource\"</span>===n.type)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(n.type===e)<span class=\"code-keyword\">return</span> i}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}(t,i.queue),<span class=\"code-literal\">null</span>===n)<span class=\"code-keyword\">return</span>;r=i.queue[n]}<span class=\"code-keyword\">return</span> i.queue.splice(n,<span class=\"code-number\">1</span>),i.queuePending[t]=r,r.action(t,i),r.doneFn?<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>:(i.queuePending[t]=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">void</span> e(t,i))}}<span class=\"code-keyword\">else</span> i.updating()||<span class=\"code-string\">\"closed\"</span>===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&amp;&amp;r.doneFn(),e(<span class=\"code-string\">\"audio\"</span>,i),e(<span class=\"code-string\">\"video\"</span>,i))}},nn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>],n=Ji(e);i&amp;&amp;(i.removeEventListener(<span class=\"code-string\">\"updateend\"</span>,t[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"UpdateEnd_\"</span>]),i.removeEventListener(<span class=\"code-string\">\"error\"</span>,t[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"Error_\"</span>]),t.codecs[e]=<span class=\"code-literal\">null</span>,t[e+<span class=\"code-string\">\"Buffer\"</span>]=<span class=\"code-literal\">null</span>)},rn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;t&amp;&amp;<span class=\"code-number\">-1</span>!==<span class=\"code-built_in\">Array</span>.prototype.indexOf.call(e.sourceBuffers,t)},an=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=r[n+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">if</span>(rn(r.mediaSource,a)){r.logger_(<span class=\"code-string\">\"Appending segment \"</span>+t.mediaIndex+<span class=\"code-string\">\"'s \"</span>+e.length+<span class=\"code-string\">\" bytes to \"</span>+n+<span class=\"code-string\">\"Buffer\"</span>);<span class=\"code-keyword\">try</span>{a.appendBuffer(e)}<span class=\"code-keyword\">catch</span>(e){r.logger_(<span class=\"code-string\">\"Error with code \"</span>+e.code+<span class=\"code-string\">\" \"</span>+(<span class=\"code-number\">22</span>===e.code?<span class=\"code-string\">\"(QUOTA_EXCEEDED_ERR) \"</span>:<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\"when appending segment \"</span>+t.mediaIndex+<span class=\"code-string\">\" to \"</span>+n+<span class=\"code-string\">\"Buffer\"</span>),r.queuePending[n]=<span class=\"code-literal\">null</span>,i(e)}}}},sn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=n[i+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">if</span>(rn(n.mediaSource,r)){n.logger_(<span class=\"code-string\">\"Removing \"</span>+e+<span class=\"code-string\">\" to \"</span>+t+<span class=\"code-string\">\" from \"</span>+i+<span class=\"code-string\">\"Buffer\"</span>);<span class=\"code-keyword\">try</span>{r.remove(e,t)}<span class=\"code-keyword\">catch</span>(r){n.logger_(<span class=\"code-string\">\"Remove \"</span>+e+<span class=\"code-string\">\" to \"</span>+t+<span class=\"code-string\">\" from \"</span>+i+<span class=\"code-string\">\"Buffer failed\"</span>)}}}},on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i[t+<span class=\"code-string\">\"Buffer\"</span>];rn(i.mediaSource,n)&amp;&amp;(i.logger_(<span class=\"code-string\">\"Setting \"</span>+t+<span class=\"code-string\">\"timestampOffset to \"</span>+e),n.timestampOffset=e)}},un=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{e()}},dn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"open\"</span>===t.mediaSource.readyState){t.logger_(<span class=\"code-string\">\"Calling mediaSource endOfStream(\"</span>+(e||<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\")\"</span>);<span class=\"code-keyword\">try</span>{t.mediaSource.endOfStream(e)}<span class=\"code-keyword\">catch</span>(e){r.default.log.warn(<span class=\"code-string\">\"Failed to call media source endOfStream\"</span>,e)}}}},ln=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=Ji(e),r=U(t);i.logger_(<span class=\"code-string\">\"Adding \"</span>+e+<span class=\"code-string\">\"Buffer with codec \"</span>+t+<span class=\"code-string\">\" to mediaSource\"</span>);<span class=\"code-keyword\">var</span> a=i.mediaSource.addSourceBuffer(r);a.addEventListener(<span class=\"code-string\">\"updateend\"</span>,i[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"UpdateEnd_\"</span>]),a.addEventListener(<span class=\"code-string\">\"error\"</span>,i[<span class=\"code-string\">\"on\"</span>+n+<span class=\"code-string\">\"Error_\"</span>]),i.codecs[e]=t,i[e+<span class=\"code-string\">\"Buffer\"</span>]=a}},cn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">if</span>(nn(e,t),rn(t.mediaSource,i)){t.logger_(<span class=\"code-string\">\"Removing \"</span>+e+<span class=\"code-string\">\"Buffer with codec \"</span>+t.codecs[e]+<span class=\"code-string\">\" from mediaSource\"</span>);<span class=\"code-keyword\">try</span>{t.mediaSource.removeSourceBuffer(i)}<span class=\"code-keyword\">catch</span>(t){r.default.log.warn(<span class=\"code-string\">\"Failed to removeSourceBuffer \"</span>+e+<span class=\"code-string\">\"Buffer\"</span>,t)}}}},hn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i[t+<span class=\"code-string\">\"Buffer\"</span>],r=U(e);rn(i.mediaSource,n)&amp;&amp;i.codecs[t]!==e&amp;&amp;(i.logger_(<span class=\"code-string\">\"changing \"</span>+t+<span class=\"code-string\">\"Buffer codec from \"</span>+i.codecs[t]+<span class=\"code-string\">\" to \"</span>+e),n.changeType(r),i.codecs[t]=e)}},fn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,a=e.name;i.queue.push({<span class=\"code-attr\">type</span>:t,<span class=\"code-attr\">action</span>:n,<span class=\"code-attr\">doneFn</span>:r,<span class=\"code-attr\">name</span>:a}),tn(t,i)},pn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">if</span>(t.queuePending[e]){<span class=\"code-keyword\">var</span> n=t.queuePending[e].doneFn;t.queuePending[e]=<span class=\"code-literal\">null</span>,n&amp;&amp;n(t[e+<span class=\"code-string\">\"Error_\"</span>])}tn(e,t)}},mn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span>(i=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).mediaSource=t,i.sourceopenListener_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> tn(<span class=\"code-string\">\"mediaSource\"</span>,s(i))},i.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,i.sourceopenListener_),i.logger_=p(<span class=\"code-string\">\"SourceUpdater\"</span>),i.audioTimestampOffset_=<span class=\"code-number\">0</span>,i.videoTimestampOffset_=<span class=\"code-number\">0</span>,i.queue=[],i.queuePending={<span class=\"code-attr\">audio</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">video</span>:<span class=\"code-literal\">null</span>},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!<span class=\"code-number\">1</span>,i.codecs={},i.onVideoUpdateEnd_=pn(<span class=\"code-string\">\"video\"</span>,s(i)),i.onAudioUpdateEnd_=pn(<span class=\"code-string\">\"audio\"</span>,s(i)),i.onVideoError_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.videoError_=e},i.onAudioError_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.audioError_=e},i.createdSourceBuffers_=!<span class=\"code-number\">1</span>,i.initializedEme_=!<span class=\"code-number\">1</span>,i.triggeredReady_=!<span class=\"code-number\">1</span>,i}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.initializedEme=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.initializedEme_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.triggerReady()},i.hasCreatedSourceBuffers=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.createdSourceBuffers_},i.hasInitializedAnyEme=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.initializedEme_},i.ready=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.hasCreatedSourceBuffers()&amp;&amp;<span class=\"code-keyword\">this</span>.hasInitializedAnyEme()},i.createSourceBuffers=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.hasCreatedSourceBuffers()||(<span class=\"code-keyword\">this</span>.addOrChangeSourceBuffers(e),<span class=\"code-keyword\">this</span>.createdSourceBuffers_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"createdsourcebuffers\"</span>),<span class=\"code-keyword\">this</span>.triggerReady())},i.triggerReady=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ready()&amp;&amp;!<span class=\"code-keyword\">this</span>.triggeredReady_&amp;&amp;(<span class=\"code-keyword\">this</span>.triggeredReady_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"ready\"</span>))},i.addSourceBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:ln(e,t),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"addSourceBuffer\"</span>})},i.abort=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{fn({<span class=\"code-attr\">type</span>:e,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"open\"</span>===t.mediaSource.readyState){<span class=\"code-keyword\">var</span> i=t[e+<span class=\"code-string\">\"Buffer\"</span>];<span class=\"code-keyword\">if</span>(rn(t.mediaSource,i)){t.logger_(<span class=\"code-string\">\"calling abort on \"</span>+e+<span class=\"code-string\">\"Buffer\"</span>);<span class=\"code-keyword\">try</span>{i.abort()}<span class=\"code-keyword\">catch</span>(t){r.default.log.warn(<span class=\"code-string\">\"Failed to abort on \"</span>+e+<span class=\"code-string\">\"Buffer\"</span>,t)}}}},<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"abort\"</span>})},i.removeSourceBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.canRemoveSourceBuffer()?fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:cn(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"removeSourceBuffer\"</span>}):r.default.log.error(<span class=\"code-string\">\"removeSourceBuffer is not supported!\"</span>)},i.canRemoveSourceBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!r.default.browser.IE_VERSION&amp;&amp;!r.default.browser.IS_FIREFOX&amp;&amp;<span class=\"code-built_in\">window</span>.MediaSource&amp;&amp;<span class=\"code-built_in\">window</span>.MediaSource.prototype&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>.MediaSource.prototype.removeSourceBuffer},t.canChangeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">window</span>.SourceBuffer&amp;&amp;<span class=\"code-built_in\">window</span>.SourceBuffer.prototype&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>.SourceBuffer.prototype.changeType},i.canChangeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.constructor.canChangeType()},i.changeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.canChangeType()?fn({<span class=\"code-attr\">type</span>:e,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:hn(t),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"changeType\"</span>}):r.default.log.error(<span class=\"code-string\">\"changeType is not supported!\"</span>)},i.addOrChangeSourceBuffers=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(!e||<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> e||<span class=\"code-number\">0</span>===<span class=\"code-built_in\">Object</span>.keys(e).length)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Cannot addOrChangeSourceBuffers to undefined codecs\"</span>);<span class=\"code-built_in\">Object</span>.keys(e).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=e[i];<span class=\"code-keyword\">if</span>(!t.hasCreatedSourceBuffers())<span class=\"code-keyword\">return</span> t.addSourceBuffer(i,n);t.canChangeType()&amp;&amp;t.changeType(i,n)}))},i.appendBuffer=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>,n=e.segmentInfo,r=e.type,a=e.bytes;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.processedAppend_=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"audio\"</span>===r&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer&amp;&amp;!<span class=\"code-keyword\">this</span>.videoAppendQueued_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.push([e,t]),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"delayed audio append of \"</span>+a.length+<span class=\"code-string\">\" until video append\"</span>);<span class=\"code-keyword\">if</span>(fn({<span class=\"code-attr\">type</span>:r,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:an(a,n||{<span class=\"code-attr\">mediaIndex</span>:<span class=\"code-number\">-1</span>},t),<span class=\"code-attr\">doneFn</span>:t,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"appendBuffer\"</span>}),<span class=\"code-string\">\"video\"</span>===r){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoAppendQueued_=!<span class=\"code-number\">0</span>,!<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.length)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">var</span> s=<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.slice();<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"queuing delayed audio \"</span>+s.length+<span class=\"code-string\">\" appendBuffers\"</span>),<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.length=<span class=\"code-number\">0</span>,s.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.appendBuffer.apply(i,e)}))}},i.audioBuffered=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> rn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.audioBuffer)&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer.buffered?<span class=\"code-keyword\">this</span>.audioBuffer.buffered:r.default.createTimeRange()},i.videoBuffered=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> rn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.videoBuffer)&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer.buffered?<span class=\"code-keyword\">this</span>.videoBuffer.buffered:r.default.createTimeRange()},i.buffered=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=rn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.videoBuffer)?<span class=\"code-keyword\">this</span>.videoBuffer:<span class=\"code-literal\">null</span>,t=rn(<span class=\"code-keyword\">this</span>.mediaSource,<span class=\"code-keyword\">this</span>.audioBuffer)?<span class=\"code-keyword\">this</span>.audioBuffer:<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">return</span> t&amp;&amp;!e?<span class=\"code-keyword\">this</span>.audioBuffered():e&amp;&amp;!t?<span class=\"code-keyword\">this</span>.videoBuffered():<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>,a=<span class=\"code-number\">0</span>,s=[],o=[];<span class=\"code-keyword\">if</span>(!(e&amp;&amp;e.length&amp;&amp;t&amp;&amp;t.length))<span class=\"code-keyword\">return</span> r.default.createTimeRange();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=e.length;u--;)s.push({<span class=\"code-attr\">time</span>:e.start(u),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"start\"</span>}),s.push({<span class=\"code-attr\">time</span>:e.end(u),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"end\"</span>});<span class=\"code-keyword\">for</span>(u=t.length;u--;)s.push({<span class=\"code-attr\">time</span>:t.start(u),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"start\"</span>}),s.push({<span class=\"code-attr\">time</span>:t.end(u),<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"end\"</span>});<span class=\"code-keyword\">for</span>(s.sort((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.time-t.time})),u=<span class=\"code-number\">0</span>;u&lt;s.length;u++)<span class=\"code-string\">\"start\"</span>===s[u].type?<span class=\"code-number\">2</span>==++a&amp;&amp;(i=s[u].time):<span class=\"code-string\">\"end\"</span>===s[u].type&amp;&amp;<span class=\"code-number\">1</span>==--a&amp;&amp;(n=s[u].time),<span class=\"code-literal\">null</span>!==i&amp;&amp;<span class=\"code-literal\">null</span>!==n&amp;&amp;(o.push([i,n]),i=<span class=\"code-literal\">null</span>,n=<span class=\"code-literal\">null</span>);<span class=\"code-keyword\">return</span> r.default.createTimeRanges(o)}(<span class=\"code-keyword\">this</span>.audioBuffered(),<span class=\"code-keyword\">this</span>.videoBuffered())},i.setDuration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=Ki),fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:(i=e,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.logger_(<span class=\"code-string\">\"Setting mediaSource duration to \"</span>+i);<span class=\"code-keyword\">try</span>{e.mediaSource.duration=i}<span class=\"code-keyword\">catch</span>(e){r.default.log.warn(<span class=\"code-string\">\"Failed to set media source duration\"</span>,e)}}),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"duration\"</span>,<span class=\"code-attr\">doneFn</span>:t})},i.endOfStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-literal\">null</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=Ki),<span class=\"code-string\">\"string\"</span>!=<span class=\"code-keyword\">typeof</span> e&amp;&amp;(e=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>),fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediaSource\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:dn(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"endOfStream\"</span>,<span class=\"code-attr\">doneFn</span>:t})},i.removeAudio=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=Ki),<span class=\"code-keyword\">this</span>.audioBuffered().length&amp;&amp;<span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.audioBuffered().end(<span class=\"code-number\">0</span>)?fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:sn(e,t),<span class=\"code-attr\">doneFn</span>:i,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"remove\"</span>}):i()},i.removeVideo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=Ki),<span class=\"code-keyword\">this</span>.videoBuffered().length&amp;&amp;<span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.videoBuffered().end(<span class=\"code-number\">0</span>)?fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:sn(e,t),<span class=\"code-attr\">doneFn</span>:i,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"remove\"</span>}):i()},i.updating=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>!(!en(<span class=\"code-string\">\"audio\"</span>,<span class=\"code-keyword\">this</span>)&amp;&amp;!en(<span class=\"code-string\">\"video\"</span>,<span class=\"code-keyword\">this</span>))},i.audioTimestampOffset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;<span class=\"code-keyword\">this</span>.audioBuffer&amp;&amp;<span class=\"code-keyword\">this</span>.audioTimestampOffset_!==e&amp;&amp;(fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:on(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"timestampOffset\"</span>}),<span class=\"code-keyword\">this</span>.audioTimestampOffset_=e),<span class=\"code-keyword\">this</span>.audioTimestampOffset_},i.videoTimestampOffset=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;<span class=\"code-keyword\">this</span>.videoBuffer&amp;&amp;<span class=\"code-keyword\">this</span>.videoTimestampOffset!==e&amp;&amp;(fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:on(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"timestampOffset\"</span>}),<span class=\"code-keyword\">this</span>.videoTimestampOffset_=e),<span class=\"code-keyword\">this</span>.videoTimestampOffset_},i.audioQueueCallback=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.audioBuffer&amp;&amp;fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"audio\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:un(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"callback\"</span>})},i.videoQueueCallback=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.videoBuffer&amp;&amp;fn({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"video\"</span>,<span class=\"code-attr\">sourceUpdater</span>:<span class=\"code-keyword\">this</span>,<span class=\"code-attr\">action</span>:un(e),<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"callback\"</span>})},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),Zi.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+<span class=\"code-string\">\"QueueCallback\"</span>]((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> nn(t,e)}))})),<span class=\"code-keyword\">this</span>.videoAppendQueued_=!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.delayedAudioAppendQueue_.length=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.sourceopenListener_&amp;&amp;<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.sourceopenListener_),<span class=\"code-keyword\">this</span>.off()},t}(r.default.EventTarget),gn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">decodeURIComponent</span>(<span class=\"code-built_in\">escape</span>(<span class=\"code-built_in\">String</span>.fromCharCode.apply(<span class=\"code-literal\">null</span>,e)))},yn=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(<span class=\"code-string\">\"\\n\\n\"</span>.split(<span class=\"code-string\">\"\"</span>).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.charCodeAt(<span class=\"code-number\">0</span>)}))),vn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i={}),(n=e.call(<span class=\"code-keyword\">this</span>,t,i)||<span class=\"code-keyword\">this</span>).mediaSource_=<span class=\"code-literal\">null</span>,n.subtitlesTrack_=<span class=\"code-literal\">null</span>,n.loaderType_=<span class=\"code-string\">\"subtitle\"</span>,n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!<span class=\"code-number\">1</span>,n}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.createTransmuxer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},i.buffered_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.subtitlesTrack_||!<span class=\"code-keyword\">this</span>.subtitlesTrack_.cues||!<span class=\"code-keyword\">this</span>.subtitlesTrack_.cues.length)<span class=\"code-keyword\">return</span> r.default.createTimeRanges();<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.subtitlesTrack_.cues,t=e[<span class=\"code-number\">0</span>].startTime,i=e[e.length<span class=\"code-number\">-1</span>].startTime;<span class=\"code-keyword\">return</span> r.default.createTimeRanges([[t,i]])},i.initSegmentForMap=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t=!<span class=\"code-number\">1</span>),!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=Ne(e),n=<span class=\"code-keyword\">this</span>.initSegments_[i];<span class=\"code-keyword\">if</span>(t&amp;&amp;!n&amp;&amp;e.bytes){<span class=\"code-keyword\">var</span> r=yn.byteLength+e.bytes.byteLength,a=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(r);a.set(e.bytes),a.set(yn,e.bytes.byteLength),<span class=\"code-keyword\">this</span>.initSegments_[i]=n={<span class=\"code-attr\">resolvedUri</span>:e.resolvedUri,<span class=\"code-attr\">byterange</span>:e.byterange,<span class=\"code-attr\">bytes</span>:a}}<span class=\"code-keyword\">return</span> n||e},i.couldBeginLoading_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.playlist_&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_&amp;&amp;!<span class=\"code-keyword\">this</span>.paused()},i.init_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.resetEverything(),<span class=\"code-keyword\">this</span>.monitorBuffer_()},i.track=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e||(<span class=\"code-keyword\">this</span>.subtitlesTrack_=e,<span class=\"code-string\">\"INIT\"</span>===<span class=\"code-keyword\">this</span>.state&amp;&amp;<span class=\"code-keyword\">this</span>.couldBeginLoading_()&amp;&amp;<span class=\"code-keyword\">this</span>.init_()),<span class=\"code-keyword\">this</span>.subtitlesTrack_},i.remove=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{qi(e,t,<span class=\"code-keyword\">this</span>.subtitlesTrack_)},i.fillBuffer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.chooseNextRequest_();<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===<span class=\"code-keyword\">this</span>.syncController_.timestampOffsetForTimeline(t.timeline))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.syncController_.one(<span class=\"code-string\">\"timestampoffset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.state=<span class=\"code-string\">\"READY\"</span>,e.paused()||e.monitorBuffer_()})),<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING_ON_TIMELINE\"</span>);<span class=\"code-keyword\">this</span>.loadSegment_(t)}},i.timestampOffsetForSegment_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},i.chooseNextRequest_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.skipEmptySegments_(e.prototype.chooseNextRequest_.call(<span class=\"code-keyword\">this</span>))},i.skipEmptySegments_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">for</span>(;e&amp;&amp;e.segment.empty;){<span class=\"code-keyword\">if</span>(e.mediaIndex+<span class=\"code-number\">1</span>&gt;=e.playlist.segments.length){e=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">break</span>}e=<span class=\"code-keyword\">this</span>.generateSegmentInfo_({<span class=\"code-attr\">playlist</span>:e.playlist,<span class=\"code-attr\">mediaIndex</span>:e.mediaIndex+<span class=\"code-number\">1</span>,<span class=\"code-attr\">startOfSegment</span>:e.startOfSegment+e.duration,<span class=\"code-attr\">isSyncRequest</span>:e.isSyncRequest})}<span class=\"code-keyword\">return</span> e},i.stopForError=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.error(e),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">this</span>.pause(),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>)},i.segmentRequestFinished_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.subtitlesTrack_){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.saveTransferStats_(t.stats),!<span class=\"code-keyword\">this</span>.pendingSegment_)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>);<span class=\"code-keyword\">if</span>(e)<span class=\"code-keyword\">return</span> e.code===vi&amp;&amp;<span class=\"code-keyword\">this</span>.handleTimeout_(),e.code===_i?<span class=\"code-keyword\">this</span>.mediaRequestsAborted+=<span class=\"code-number\">1</span>:<span class=\"code-keyword\">this</span>.mediaRequestsErrored+=<span class=\"code-number\">1</span>,<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.stopForError(e);<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.pendingSegment_;<span class=\"code-keyword\">this</span>.saveBandwidthRelatedStats_(r.duration,t.stats),<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"APPENDING\"</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"appending\"</span>);<span class=\"code-keyword\">var</span> a=r.segment;<span class=\"code-keyword\">if</span>(a.map&amp;&amp;(a.map.bytes=t.map.bytes),r.bytes=t.bytes,<span class=\"code-string\">\"function\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>.WebVTT&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_&amp;&amp;<span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_){<span class=\"code-keyword\">var</span> s,o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class=\"code-string\">\"vttjsloaded\"</span>,s),n.stopForError({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Error loading vtt.js\"</span>})};<span class=\"code-keyword\">return</span> s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class=\"code-string\">\"vttjserror\"</span>,o),n.segmentRequestFinished_(e,t,i)},<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"WAITING_ON_VTTJS\"</span>,<span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_.one(<span class=\"code-string\">\"vttjsloaded\"</span>,s),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.subtitlesTrack_.tech_.one(<span class=\"code-string\">\"vttjserror\"</span>,o)}a.requested=!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">this</span>.parseVTTCues_(r)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.stopForError({<span class=\"code-attr\">message</span>:e.message})}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.updateTimeMapping_(r,<span class=\"code-keyword\">this</span>.syncController_.timelines[r.timeline],<span class=\"code-keyword\">this</span>.playlist_),r.cues.length?r.timingInfo={<span class=\"code-attr\">start</span>:r.cues[<span class=\"code-number\">0</span>].startTime,<span class=\"code-attr\">end</span>:r.cues[r.cues.length<span class=\"code-number\">-1</span>].endTime}:r.timingInfo={<span class=\"code-attr\">start</span>:r.startOfSegment,<span class=\"code-attr\">end</span>:r.startOfSegment+r.duration},r.isSyncRequest)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>),<span class=\"code-keyword\">this</span>.pendingSegment_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">void</span>(<span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>);r.byteLength=r.bytes.byteLength,<span class=\"code-keyword\">this</span>.mediaSecondsLoaded+=a.duration,r.cues.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.VTTCue(e.startTime,e.endTime,e.text):e)})),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.cues;<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=[],r=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>;a&lt;t.length;a++)t[i].startTime===t[a].startTime&amp;&amp;t[i].endTime===t[a].endTime&amp;&amp;t[i].text===t[a].text&amp;&amp;++r&gt;<span class=\"code-number\">1</span>&amp;&amp;n.push(t[a]);n.length&amp;&amp;n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span> e.removeCue(t)}))}}(<span class=\"code-keyword\">this</span>.subtitlesTrack_),<span class=\"code-keyword\">this</span>.handleAppendsDone_()}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.state=<span class=\"code-string\">\"READY\"</span>},i.handleData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},i.updateTimingInfoEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{},i.parseVTTCues_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i=!<span class=\"code-number\">1</span>;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> <span class=\"code-built_in\">window</span>.TextDecoder?t=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.TextDecoder(<span class=\"code-string\">\"utf8\"</span>):(t=<span class=\"code-built_in\">window</span>.WebVTT.StringDecoder(),i=!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.WebVTT.Parser(<span class=\"code-built_in\">window</span>,<span class=\"code-built_in\">window</span>.vttjs,t);<span class=\"code-keyword\">if</span>(e.cues=[],e.timestampmap={<span class=\"code-attr\">MPEGTS</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">LOCAL</span>:<span class=\"code-number\">0</span>},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.timestampmap=t},n.onparsingerror=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{r.default.log.warn(<span class=\"code-string\">\"Error encountered when parsing cues: \"</span>+e.message)},e.segment.map){<span class=\"code-keyword\">var</span> a=e.segment.map.bytes;i&amp;&amp;(a=gn(a)),n.parse(a)}<span class=\"code-keyword\">var</span> s=e.bytes;i&amp;&amp;(s=gn(s)),n.parse(s),n.flush()},i.updateTimeMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=e.segment;<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(e.cues.length){<span class=\"code-keyword\">var</span> r=e.timestampmap,a=r.MPEGTS/Gi-r.LOCAL+t.mapping;<span class=\"code-keyword\">if</span>(e.cues.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.startTime+=a,e.endTime+=a})),!i.syncInfo){<span class=\"code-keyword\">var</span> s=e.cues[<span class=\"code-number\">0</span>].startTime,o=e.cues[e.cues.length<span class=\"code-number\">-1</span>].startTime;i.syncInfo={<span class=\"code-attr\">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class=\"code-attr\">time</span>:<span class=\"code-built_in\">Math</span>.min(s,o-n.duration)}}}<span class=\"code-keyword\">else</span> n.empty=!<span class=\"code-number\">0</span>},t}(Yi),_n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e.cues,n=<span class=\"code-number\">0</span>;n&lt;i.length;n++){<span class=\"code-keyword\">var</span> r=i[n];<span class=\"code-keyword\">if</span>(t&gt;=r.adStartTime&amp;&amp;t&lt;=r.adEndTime)<span class=\"code-keyword\">return</span> r}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},Tn=[{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"VOD\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">return</span> i!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?{<span class=\"code-attr\">time</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">segmentIndex</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">partIndex</span>:<span class=\"code-literal\">null</span>}:<span class=\"code-literal\">null</span>}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"ProgramDateTime\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">Object</span>.keys(e.timelineToDatetimeMappings).length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> a=<span class=\"code-literal\">null</span>,s=<span class=\"code-literal\">null</span>,o=Y(t);r=r||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=<span class=\"code-number\">0</span>;u&lt;o.length;u++){<span class=\"code-keyword\">var</span> d=o[t.endList||<span class=\"code-number\">0</span>===r?u:o.length-(u+<span class=\"code-number\">1</span>)],l=d.segment,c=e.timelineToDatetimeMappings[l.timeline];<span class=\"code-keyword\">if</span>(c&amp;&amp;l.dateTimeObject){<span class=\"code-keyword\">var</span> h=l.dateTimeObject.getTime()/<span class=\"code-number\">1e3</span>+c;<span class=\"code-keyword\">if</span>(l.parts&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> d.partIndex)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> f=<span class=\"code-number\">0</span>;f&lt;d.partIndex;f++)h+=l.parts[f].duration;<span class=\"code-keyword\">var</span> p=<span class=\"code-built_in\">Math</span>.abs(r-h);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==s&amp;&amp;(<span class=\"code-number\">0</span>===p||s&lt;p))<span class=\"code-keyword\">break</span>;s=p,a={<span class=\"code-attr\">time</span>:h,<span class=\"code-attr\">segmentIndex</span>:d.segmentIndex,<span class=\"code-attr\">partIndex</span>:d.partIndex}}}<span class=\"code-keyword\">return</span> a}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Segment\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=<span class=\"code-literal\">null</span>,s=<span class=\"code-literal\">null</span>;r=r||<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> o=Y(t),u=<span class=\"code-number\">0</span>;u&lt;o.length;u++){<span class=\"code-keyword\">var</span> d=o[t.endList||<span class=\"code-number\">0</span>===r?u:o.length-(u+<span class=\"code-number\">1</span>)],l=d.segment,c=d.part&amp;&amp;d.part.start||l&amp;&amp;l.start;<span class=\"code-keyword\">if</span>(l.timeline===n&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==c){<span class=\"code-keyword\">var</span> h=<span class=\"code-built_in\">Math</span>.abs(r-c);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==s&amp;&amp;s&lt;h)<span class=\"code-keyword\">break</span>;(!a||<span class=\"code-literal\">null</span>===s||s&gt;=h)&amp;&amp;(s=h,a={<span class=\"code-attr\">time</span>:c,<span class=\"code-attr\">segmentIndex</span>:d.segmentIndex,<span class=\"code-attr\">partIndex</span>:d.partIndex})}}<span class=\"code-keyword\">return</span> a}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Discontinuity\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(r=r||<span class=\"code-number\">0</span>,t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s=<span class=\"code-literal\">null</span>,o=<span class=\"code-number\">0</span>;o&lt;t.discontinuityStarts.length;o++){<span class=\"code-keyword\">var</span> u=t.discontinuityStarts[o],d=t.discontinuitySequence+o+<span class=\"code-number\">1</span>,l=e.discontinuities[d];<span class=\"code-keyword\">if</span>(l){<span class=\"code-keyword\">var</span> c=<span class=\"code-built_in\">Math</span>.abs(r-l.time);<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==s&amp;&amp;s&lt;c)<span class=\"code-keyword\">break</span>;(!a||<span class=\"code-literal\">null</span>===s||s&gt;=c)&amp;&amp;(s=c,a={<span class=\"code-attr\">time</span>:l.time,<span class=\"code-attr\">segmentIndex</span>:u,<span class=\"code-attr\">partIndex</span>:<span class=\"code-literal\">null</span>})}}<span class=\"code-keyword\">return</span> a}},{<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"Playlist\"</span>,<span class=\"code-attr\">run</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r</span>)</span>{<span class=\"code-keyword\">return</span> t.syncInfo?{<span class=\"code-attr\">time</span>:t.syncInfo.time,<span class=\"code-attr\">segmentIndex</span>:t.syncInfo.mediaSequence-t.mediaSequence,<span class=\"code-attr\">partIndex</span>:<span class=\"code-literal\">null</span>}:<span class=\"code-literal\">null</span>}}],bn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">return</span>(i=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=p(<span class=\"code-string\">\"SyncController\"</span>),i}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.getSyncPoint=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.runStrategies_(e,t,i,n);<span class=\"code-keyword\">return</span> r.length?<span class=\"code-keyword\">this</span>.selectSyncPoint_(r,{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"time\"</span>,<span class=\"code-attr\">value</span>:n}):<span class=\"code-literal\">null</span>},i.getExpiredTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!e||!e.segments)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.runStrategies_(e,t,e.discontinuitySequence,<span class=\"code-number\">0</span>);<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.selectSyncPoint_(i,{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"segmentIndex\"</span>,<span class=\"code-attr\">value</span>:<span class=\"code-number\">0</span>});<span class=\"code-keyword\">return</span> n.segmentIndex&gt;<span class=\"code-number\">0</span>&amp;&amp;(n.time*=<span class=\"code-number\">-1</span>),<span class=\"code-built_in\">Math</span>.abs(n.time+te({<span class=\"code-attr\">defaultDuration</span>:e.targetDuration,<span class=\"code-attr\">durationList</span>:e.segments,<span class=\"code-attr\">startIndex</span>:n.segmentIndex,<span class=\"code-attr\">endIndex</span>:<span class=\"code-number\">0</span>}))},i.runStrategies_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=[],a=<span class=\"code-number\">0</span>;a&lt;Tn.length;a++){<span class=\"code-keyword\">var</span> s=Tn[a],o=s.run(<span class=\"code-keyword\">this</span>,e,t,i,n);o&amp;&amp;(o.strategy=s.name,r.push({<span class=\"code-attr\">strategy</span>:s.name,<span class=\"code-attr\">syncPoint</span>:o}))}<span class=\"code-keyword\">return</span> r},i.selectSyncPoint_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=e[<span class=\"code-number\">0</span>].syncPoint,n=<span class=\"code-built_in\">Math</span>.abs(e[<span class=\"code-number\">0</span>].syncPoint[t.key]-t.value),r=e[<span class=\"code-number\">0</span>].strategy,a=<span class=\"code-number\">1</span>;a&lt;e.length;a++){<span class=\"code-keyword\">var</span> s=<span class=\"code-built_in\">Math</span>.abs(e[a].syncPoint[t.key]-t.value);s&lt;n&amp;&amp;(n=s,i=e[a].syncPoint,r=e[a].strategy)}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"syncPoint for [\"</span>+t.key+<span class=\"code-string\">\": \"</span>+t.value+<span class=\"code-string\">\"] chosen with strategy [\"</span>+r+<span class=\"code-string\">\"]: [time:\"</span>+i.time+<span class=\"code-string\">\", segmentIndex:\"</span>+i.segmentIndex+(<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i.partIndex?<span class=\"code-string\">\",partIndex:\"</span>+i.partIndex:<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\"]\"</span>),i},i.saveExpiredSegmentInfo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaSequence-e.mediaSequence;<span class=\"code-keyword\">if</span>(i&gt;<span class=\"code-number\">86400</span>)r.default.log.warn(<span class=\"code-string\">\"Not saving expired segment info. Media sequence gap \"</span>+i+<span class=\"code-string\">\" is too large.\"</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=i<span class=\"code-number\">-1</span>;n&gt;=<span class=\"code-number\">0</span>;n--){<span class=\"code-keyword\">var</span> a=e.segments[n];<span class=\"code-keyword\">if</span>(a&amp;&amp;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==a.start){t.syncInfo={<span class=\"code-attr\">mediaSequence</span>:e.mediaSequence+n,<span class=\"code-attr\">time</span>:a.start},<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"playlist refresh sync: [time:\"</span>+t.syncInfo.time+<span class=\"code-string\">\", mediaSequence: \"</span>+t.syncInfo.mediaSequence+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"syncinfoupdate\"</span>);<span class=\"code-keyword\">break</span>}}},i.setDateTimeMappingForStart=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.timelineToDatetimeMappings={},e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class=\"code-number\">0</span>].dateTimeObject){<span class=\"code-keyword\">var</span> t=e.segments[<span class=\"code-number\">0</span>],i=t.dateTimeObject.getTime()/<span class=\"code-number\">1e3</span>;<span class=\"code-keyword\">this</span>.timelineToDatetimeMappings[t.timeline]=-i}},i.saveSegmentTimingInfo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.segmentInfo,i=e.shouldSaveTimelineMapping,n=<span class=\"code-keyword\">this</span>.calculateSegmentTimeMapping_(t,t.timingInfo,i),r=t.segment;n&amp;&amp;(<span class=\"code-keyword\">this</span>.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={<span class=\"code-attr\">mediaSequence</span>:t.playlist.mediaSequence+t.mediaIndex,<span class=\"code-attr\">time</span>:r.start}));<span class=\"code-keyword\">var</span> a=r.dateTimeObject;r.discontinuity&amp;&amp;i&amp;&amp;a&amp;&amp;(<span class=\"code-keyword\">this</span>.timelineToDatetimeMappings[r.timeline]=-a.getTime()/<span class=\"code-number\">1e3</span>)},i.timestampOffsetForTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.timelines[e]?<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.timelines[e].time},i.mappingForTimeline=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.timelines[e]?<span class=\"code-literal\">null</span>:<span class=\"code-keyword\">this</span>.timelines[e].mapping},i.calculateSegmentTimeMapping_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a=e.segment,s=e.part,o=<span class=\"code-keyword\">this</span>.timelines[e.timeline];<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> e.timestampOffset)o={<span class=\"code-attr\">time</span>:e.startOfSegment,<span class=\"code-attr\">mapping</span>:e.startOfSegment-t.start},i&amp;&amp;(<span class=\"code-keyword\">this</span>.timelines[e.timeline]=o,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timestampoffset\"</span>),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"time mapping for timeline \"</span>+e.timeline+<span class=\"code-string\">\": [time: \"</span>+o.time+<span class=\"code-string\">\"] [mapping: \"</span>+o.mapping+<span class=\"code-string\">\"]\"</span>)),n=e.startOfSegment,r=t.end+o.mapping;<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">if</span>(!o)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;n=t.start+o.mapping,r=t.end+o.mapping}<span class=\"code-keyword\">return</span> s&amp;&amp;(s.start=n,s.end=r),(!a.start||n&lt;a.start)&amp;&amp;(a.start=n),a.end=r,!<span class=\"code-number\">0</span>},i.saveDiscontinuitySyncInfo_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.segment;<span class=\"code-keyword\">if</span>(i.discontinuity)<span class=\"code-keyword\">this</span>.discontinuities[i.timeline]={<span class=\"code-attr\">time</span>:i.start,<span class=\"code-attr\">accuracy</span>:<span class=\"code-number\">0</span>};<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;t.discontinuityStarts.length;n++){<span class=\"code-keyword\">var</span> r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+<span class=\"code-number\">1</span>,s=r-e.mediaIndex,o=<span class=\"code-built_in\">Math</span>.abs(s);<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.discontinuities[a]||<span class=\"code-keyword\">this</span>.discontinuities[a].accuracy&gt;o){<span class=\"code-keyword\">var</span> u;u=s&lt;<span class=\"code-number\">0</span>?i.start-te({<span class=\"code-attr\">defaultDuration</span>:t.targetDuration,<span class=\"code-attr\">durationList</span>:t.segments,<span class=\"code-attr\">startIndex</span>:e.mediaIndex,<span class=\"code-attr\">endIndex</span>:r}):i.end+te({<span class=\"code-attr\">defaultDuration</span>:t.targetDuration,<span class=\"code-attr\">durationList</span>:t.segments,<span class=\"code-attr\">startIndex</span>:e.mediaIndex+<span class=\"code-number\">1</span>,<span class=\"code-attr\">endIndex</span>:r}),<span class=\"code-keyword\">this</span>.discontinuities[a]={<span class=\"code-attr\">time</span>:u,<span class=\"code-attr\">accuracy</span>:o}}}},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.off()},t}(r.default.EventTarget),Sn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.clearPendingTimelineChange=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.pendingTimelineChanges_[e]=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"pendingtimelinechange\"</span>)},i.pendingTimelineChange=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.from,n=e.to;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n&amp;&amp;(<span class=\"code-keyword\">this</span>.pendingTimelineChanges_[t]={<span class=\"code-attr\">type</span>:t,<span class=\"code-attr\">from</span>:i,<span class=\"code-attr\">to</span>:n},<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"pendingtimelinechange\"</span>)),<span class=\"code-keyword\">this</span>.pendingTimelineChanges_[t]},i.lastTimelineChange=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.type,i=e.from,n=e.to;<span class=\"code-keyword\">return</span><span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> i&amp;&amp;<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n&amp;&amp;(<span class=\"code-keyword\">this</span>.lastTimelineChanges_[t]={<span class=\"code-attr\">type</span>:t,<span class=\"code-attr\">from</span>:i,<span class=\"code-attr\">to</span>:n},<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.pendingTimelineChanges_[t],<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"timelinechange\"</span>)),<span class=\"code-keyword\">this</span>.lastTimelineChanges_[t]},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.pendingTimelineChanges_={},<span class=\"code-keyword\">this</span>.lastTimelineChanges_={},<span class=\"code-keyword\">this</span>.off()},t}(r.default.EventTarget),wn=di(li((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">return</span> e(i={<span class=\"code-attr\">path</span>:t,<span class=\"code-attr\">exports</span>:{},<span class=\"code-attr\">require</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\"</span>)}(<span class=\"code-literal\">null</span>==t&amp;&amp;i.path)}},i.exports),i.exports}<span class=\"code-keyword\">var</span> t=e((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;t.length;i++){<span class=\"code-keyword\">var</span> n=t[i];n.enumerable=n.enumerable||!<span class=\"code-number\">1</span>,n.configurable=!<span class=\"code-number\">0</span>,<span class=\"code-string\">\"value\"</span><span class=\"code-keyword\">in</span> n&amp;&amp;(n.writable=!<span class=\"code-number\">0</span>),<span class=\"code-built_in\">Object</span>.defineProperty(e,n.key,n)}}e.exports=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i,n</span>)</span>{<span class=\"code-keyword\">return</span> i&amp;&amp;t(e.prototype,i),n&amp;&amp;t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>})),i=e((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">i,n</span>)</span>{<span class=\"code-keyword\">return</span> e.exports=t=<span class=\"code-built_in\">Object</span>.setPrototypeOf||<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>,t(i,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>})),n=e((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.exports=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.prototype=<span class=\"code-built_in\">Object</span>.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!<span class=\"code-number\">0</span>})),r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.on=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">this</span>.listeners[e]||(<span class=\"code-keyword\">this</span>.listeners[e]=[]),<span class=\"code-keyword\">this</span>.listeners[e].push(t)},t.off=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.listeners[e])<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.listeners[e].indexOf(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.listeners[e]=<span class=\"code-keyword\">this</span>.listeners[e].slice(<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.listeners[e].splice(i,<span class=\"code-number\">1</span>),i&gt;<span class=\"code-number\">-1</span>},t.trigger=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.listeners[e];<span class=\"code-keyword\">if</span>(t)<span class=\"code-keyword\">if</span>(<span class=\"code-number\">2</span>===<span class=\"code-built_in\">arguments</span>.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.length,n=<span class=\"code-number\">0</span>;n&lt;i;++n)t[n].call(<span class=\"code-keyword\">this</span>,<span class=\"code-built_in\">arguments</span>[<span class=\"code-number\">1</span>]);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>,<span class=\"code-number\">1</span>),a=t.length,s=<span class=\"code-number\">0</span>;s&lt;a;++s)t[s].apply(<span class=\"code-keyword\">this</span>,r)},t.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.listeners={}},t.pipe=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.on(<span class=\"code-string\">\"data\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.push(t)}))},e}(),a=<span class=\"code-literal\">null</span>,s=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t,i,n;a||(a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t,i,n,r,a,s,o,u=[[[],[],[],[],[]],[[],[],[],[],[]]],d=u[<span class=\"code-number\">0</span>],l=u[<span class=\"code-number\">1</span>],c=d[<span class=\"code-number\">4</span>],h=l[<span class=\"code-number\">4</span>],f=[],p=[];<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-number\">256</span>;e++)p[(f[e]=e&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(e&gt;&gt;<span class=\"code-number\">7</span>))^e]=e;<span class=\"code-keyword\">for</span>(t=i=<span class=\"code-number\">0</span>;!c[t];t^=n||<span class=\"code-number\">1</span>,i=p[i]||<span class=\"code-number\">1</span>)<span class=\"code-keyword\">for</span>(a=(a=i^i&lt;&lt;<span class=\"code-number\">1</span>^i&lt;&lt;<span class=\"code-number\">2</span>^i&lt;&lt;<span class=\"code-number\">3</span>^i&lt;&lt;<span class=\"code-number\">4</span>)&gt;&gt;<span class=\"code-number\">8</span>^<span class=\"code-number\">255</span>&amp;a^<span class=\"code-number\">99</span>,c[t]=a,h[a]=t,o=<span class=\"code-number\">16843009</span>*f[r=f[n=f[t]]]^<span class=\"code-number\">65537</span>*r^<span class=\"code-number\">257</span>*n^<span class=\"code-number\">16843008</span>*t,s=<span class=\"code-number\">257</span>*f[a]^<span class=\"code-number\">16843008</span>*a,e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-number\">4</span>;e++)d[e][t]=s=s&lt;&lt;<span class=\"code-number\">24</span>^s&gt;&gt;&gt;<span class=\"code-number\">8</span>,l[e][a]=o=o&lt;&lt;<span class=\"code-number\">24</span>^o&gt;&gt;&gt;<span class=\"code-number\">8</span>;<span class=\"code-keyword\">for</span>(e=<span class=\"code-number\">0</span>;e&lt;<span class=\"code-number\">5</span>;e++)d[e]=d[e].slice(<span class=\"code-number\">0</span>),l[e]=l[e].slice(<span class=\"code-number\">0</span>);<span class=\"code-keyword\">return</span> u}()),<span class=\"code-keyword\">this</span>._tables=[[a[<span class=\"code-number\">0</span>][<span class=\"code-number\">0</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">1</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">2</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">3</span>].slice(),a[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>].slice()],[a[<span class=\"code-number\">1</span>][<span class=\"code-number\">0</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">1</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">2</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">3</span>].slice(),a[<span class=\"code-number\">1</span>][<span class=\"code-number\">4</span>].slice()]];<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">0</span>][<span class=\"code-number\">4</span>],s=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],o=e.length,u=<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">4</span>!==o&amp;&amp;<span class=\"code-number\">6</span>!==o&amp;&amp;<span class=\"code-number\">8</span>!==o)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Invalid aes key size\"</span>);<span class=\"code-keyword\">var</span> d=e.slice(<span class=\"code-number\">0</span>),l=[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>._key=[d,l],t=o;t&lt;<span class=\"code-number\">4</span>*o+<span class=\"code-number\">28</span>;t++)n=d[t<span class=\"code-number\">-1</span>],(t%o==<span class=\"code-number\">0</span>||<span class=\"code-number\">8</span>===o&amp;&amp;t%o==<span class=\"code-number\">4</span>)&amp;&amp;(n=r[n&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^r[n&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^r[n&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^r[<span class=\"code-number\">255</span>&amp;n],t%o==<span class=\"code-number\">0</span>&amp;&amp;(n=n&lt;&lt;<span class=\"code-number\">8</span>^n&gt;&gt;&gt;<span class=\"code-number\">24</span>^u&lt;&lt;<span class=\"code-number\">24</span>,u=u&lt;&lt;<span class=\"code-number\">1</span>^<span class=\"code-number\">283</span>*(u&gt;&gt;<span class=\"code-number\">7</span>))),d[t]=d[t-o]^n;<span class=\"code-keyword\">for</span>(i=<span class=\"code-number\">0</span>;t;i++,t--)n=d[<span class=\"code-number\">3</span>&amp;i?t:t<span class=\"code-number\">-4</span>],l[i]=t&lt;=<span class=\"code-number\">4</span>||i&lt;<span class=\"code-number\">4</span>?n:s[<span class=\"code-number\">0</span>][r[n&gt;&gt;&gt;<span class=\"code-number\">24</span>]]^s[<span class=\"code-number\">1</span>][r[n&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]]^s[<span class=\"code-number\">2</span>][r[n&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]]^s[<span class=\"code-number\">3</span>][r[<span class=\"code-number\">255</span>&amp;n]]}<span class=\"code-keyword\">return</span> e.prototype.decrypt=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n,r,a</span>)</span>{<span class=\"code-keyword\">var</span> s,o,u,d,l=<span class=\"code-keyword\">this</span>._key[<span class=\"code-number\">1</span>],c=e^l[<span class=\"code-number\">0</span>],h=n^l[<span class=\"code-number\">1</span>],f=i^l[<span class=\"code-number\">2</span>],p=t^l[<span class=\"code-number\">3</span>],m=l.length/<span class=\"code-number\">4</span><span class=\"code-number\">-2</span>,g=<span class=\"code-number\">4</span>,y=<span class=\"code-keyword\">this</span>._tables[<span class=\"code-number\">1</span>],v=y[<span class=\"code-number\">0</span>],_=y[<span class=\"code-number\">1</span>],T=y[<span class=\"code-number\">2</span>],b=y[<span class=\"code-number\">3</span>],S=y[<span class=\"code-number\">4</span>];<span class=\"code-keyword\">for</span>(d=<span class=\"code-number\">0</span>;d&lt;m;d++)s=v[c&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[h&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^T[f&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^b[<span class=\"code-number\">255</span>&amp;p]^l[g],o=v[h&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[f&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^T[p&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^b[<span class=\"code-number\">255</span>&amp;c]^l[g+<span class=\"code-number\">1</span>],u=v[f&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[p&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^T[c&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^b[<span class=\"code-number\">255</span>&amp;h]^l[g+<span class=\"code-number\">2</span>],p=v[p&gt;&gt;&gt;<span class=\"code-number\">24</span>]^_[c&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]^T[h&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]^b[<span class=\"code-number\">255</span>&amp;f]^l[g+<span class=\"code-number\">3</span>],g+=<span class=\"code-number\">4</span>,c=s,h=o,f=u;<span class=\"code-keyword\">for</span>(d=<span class=\"code-number\">0</span>;d&lt;<span class=\"code-number\">4</span>;d++)r[(<span class=\"code-number\">3</span>&amp;-d)+a]=S[c&gt;&gt;&gt;<span class=\"code-number\">24</span>]&lt;&lt;<span class=\"code-number\">24</span>^S[h&gt;&gt;<span class=\"code-number\">16</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">16</span>^S[f&gt;&gt;<span class=\"code-number\">8</span>&amp;<span class=\"code-number\">255</span>]&lt;&lt;<span class=\"code-number\">8</span>^S[<span class=\"code-number\">255</span>&amp;p]^l[g++],s=c,c=h,h=f,f=p,p=s},e}(),o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t;<span class=\"code-keyword\">return</span>(t=e.call(<span class=\"code-keyword\">this</span>,r)||<span class=\"code-keyword\">this</span>).jobs=[],t.delay=<span class=\"code-number\">1</span>,t.timeout_=<span class=\"code-literal\">null</span>,t}n(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.processJob_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.jobs.shift()(),<span class=\"code-keyword\">this</span>.jobs.length?<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay):<span class=\"code-keyword\">this</span>.timeout_=<span class=\"code-literal\">null</span>},i.push=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.jobs.push(e),<span class=\"code-keyword\">this</span>.timeout_||(<span class=\"code-keyword\">this</span>.timeout_=setTimeout(<span class=\"code-keyword\">this</span>.processJob_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.delay))},t}(r),u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e&lt;&lt;<span class=\"code-number\">24</span>|(<span class=\"code-number\">65280</span>&amp;e)&lt;&lt;<span class=\"code-number\">8</span>|(<span class=\"code-number\">16711680</span>&amp;e)&gt;&gt;<span class=\"code-number\">8</span>|e&gt;&gt;&gt;<span class=\"code-number\">24</span>},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i,n,r</span>)</span>{<span class=\"code-keyword\">var</span> a=e.STEP,s=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(t.buffer),d=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.byteLength),l=<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">this</span>.asyncStream_=<span class=\"code-keyword\">new</span> o,<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(s.subarray(l,l+a),i,n,d)),l=a;l&lt;s.length;l+=a)n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>([u(s[l<span class=\"code-number\">-4</span>]),u(s[l<span class=\"code-number\">-3</span>]),u(s[l<span class=\"code-number\">-2</span>]),u(s[l<span class=\"code-number\">-1</span>])]),<span class=\"code-keyword\">this</span>.asyncStream_.push(<span class=\"code-keyword\">this</span>.decryptChunk_(s.subarray(l,l+a),i,n,d));<span class=\"code-keyword\">this</span>.asyncStream_.push((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{\n","<span class=\"code-comment\">/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */</span>\n","<span class=\"code-keyword\">var</span> e;\n","<span class=\"code-comment\">/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */</span>r(<span class=\"code-literal\">null</span>,(e=d).subarray(<span class=\"code-number\">0</span>,e.byteLength-e[e.byteLength<span class=\"code-number\">-1</span>]))}))}<span class=\"code-keyword\">return</span> e.prototype.decryptChunk_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,o,d,l,c,h,f,p=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class=\"code-number\">2</span>),m=<span class=\"code-keyword\">new</span> s(<span class=\"code-built_in\">Array</span>.prototype.slice.call(t)),g=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(e.byteLength),y=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Int32Array</span>(g.buffer);<span class=\"code-keyword\">for</span>(n=i[<span class=\"code-number\">0</span>],r=i[<span class=\"code-number\">1</span>],a=i[<span class=\"code-number\">2</span>],o=i[<span class=\"code-number\">3</span>],f=<span class=\"code-number\">0</span>;f&lt;p.length;f+=<span class=\"code-number\">4</span>)d=u(p[f]),l=u(p[f+<span class=\"code-number\">1</span>]),c=u(p[f+<span class=\"code-number\">2</span>]),h=u(p[f+<span class=\"code-number\">3</span>]),m.decrypt(d,l,c,h,y,f),y[f]=u(y[f]^n),y[f+<span class=\"code-number\">1</span>]=u(y[f+<span class=\"code-number\">1</span>]^r),y[f+<span class=\"code-number\">2</span>]=u(y[f+<span class=\"code-number\">2</span>]^a),y[f+<span class=\"code-number\">3</span>]=u(y[f+<span class=\"code-number\">3</span>]^o),n=d,r=l,a=c,o=h;<span class=\"code-keyword\">return</span> g}(e,t,i);n.set(r,e.byteOffset)}},t(e,<span class=\"code-literal\">null</span>,[{<span class=\"code-attr\">key</span>:<span class=\"code-string\">\"STEP\"</span>,<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">32e3</span>}}]),e}();self.onmessage=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.data,i=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint8Array</span>(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(t.key.bytes,t.key.byteOffset,t.key.byteLength/<span class=\"code-number\">4</span>),r=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Uint32Array</span>(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/<span class=\"code-number\">4</span>);<span class=\"code-keyword\">new</span> d(i,n,r,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r;self.postMessage((n={<span class=\"code-attr\">source</span>:t.source,<span class=\"code-attr\">decrypted</span>:i},r={},<span class=\"code-built_in\">Object</span>.keys(n).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=n[e];<span class=\"code-built_in\">ArrayBuffer</span>.isView(t)?r[e]={<span class=\"code-attr\">bytes</span>:t.buffer,<span class=\"code-attr\">byteOffset</span>:t.byteOffset,<span class=\"code-attr\">byteLength</span>:t.byteLength}:r[e]=t})),r),[i.buffer])}))}}))),In=ui(wn),En=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.default?<span class=\"code-string\">\"main\"</span>:<span class=\"code-string\">\"alternative\"</span>;<span class=\"code-keyword\">return</span> e.characteristics&amp;&amp;e.characteristics.indexOf(<span class=\"code-string\">\"public.accessibility.describes-video\"</span>)&gt;=<span class=\"code-number\">0</span>&amp;&amp;(t=<span class=\"code-string\">\"main-desc\"</span>),t},An=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{e.abort(),e.pause(),t&amp;&amp;t.activePlaylistLoader&amp;&amp;(t.activePlaylistLoader.pause(),t.activePlaylistLoader=<span class=\"code-literal\">null</span>)},Ln=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{t.activePlaylistLoader=e,e.load()},Pn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;An(i,n);<span class=\"code-keyword\">var</span> s=n.activeTrack(),o=n.activeGroup(),u=(o.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.default}))[<span class=\"code-number\">0</span>]||o[<span class=\"code-number\">0</span>]).id,d=n.tracks[u];<span class=\"code-keyword\">if</span>(s!==d){<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> l <span class=\"code-keyword\">in</span> r.default.log.warn(<span class=\"code-string\">\"Problem encountered loading the alternate audio track.Switching back to default.\"</span>),n.tracks)n.tracks[l].enabled=n.tracks[l]===d;n.onTrackChanged()}<span class=\"code-keyword\">else</span> a({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Problem encountered loading the default audio track.\"</span>})}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e];r.default.log.warn(<span class=\"code-string\">\"Problem encountered loading the subtitle track.Disabling subtitle track.\"</span>),An(i,n);<span class=\"code-keyword\">var</span> a=n.activeTrack();a&amp;&amp;(a.mode=<span class=\"code-string\">\"disabled\"</span>),n.onTrackChanged()}}},kn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=t.media();a.playlist(e,r),(!n.paused()||e.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class=\"code-string\">\"error\"</span>,Pn[e](e,i))}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class=\"code-string\">\"error\"</span>,Pn[e](e,i))}},xn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.vhs,n=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,u=t.mediaTypes[e],d=u.groups,l=u.tracks,c=u.logger_,h=t.masterPlaylistLoader,f=le(h.master);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> p <span class=\"code-keyword\">in</span> o[e]&amp;&amp;<span class=\"code-number\">0</span>!==<span class=\"code-built_in\">Object</span>.keys(o[e]).length||(o[e]={<span class=\"code-attr\">main</span>:{<span class=\"code-attr\">default</span>:{<span class=\"code-attr\">default</span>:!<span class=\"code-number\">0</span>}}},f&amp;&amp;(o[e].main.default.playlists=h.master.playlists)),o[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> m <span class=\"code-keyword\">in</span> d[p]||(d[p]=[]),o[e][p]){<span class=\"code-keyword\">var</span> g=o[e][p][m],y=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(f?(c(<span class=\"code-string\">\"AUDIO group '\"</span>+p+<span class=\"code-string\">\"' label '\"</span>+m+<span class=\"code-string\">\"' is a master playlist\"</span>),g.isMasterPlaylist=!<span class=\"code-number\">0</span>,y=<span class=\"code-literal\">null</span>):y=<span class=\"code-string\">\"vhs-json\"</span>===n&amp;&amp;g.playlists?<span class=\"code-keyword\">new</span> Ee(g.playlists[<span class=\"code-number\">0</span>],i,s):g.resolvedUri?<span class=\"code-keyword\">new</span> Ee(g.resolvedUri,i,s):g.playlists&amp;&amp;<span class=\"code-string\">\"dash\"</span>===n?<span class=\"code-keyword\">new</span> ai(g.playlists[<span class=\"code-number\">0</span>],i,s,h):<span class=\"code-literal\">null</span>,g=r.default.mergeOptions({<span class=\"code-attr\">id</span>:m,<span class=\"code-attr\">playlistLoader</span>:y},g),kn[e](e,g.playlistLoader,t),d[p].push(g),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===l[m]){<span class=\"code-keyword\">var</span> v=<span class=\"code-keyword\">new</span> r.default.AudioTrack({<span class=\"code-attr\">id</span>:m,<span class=\"code-attr\">kind</span>:En(g),<span class=\"code-attr\">enabled</span>:!<span class=\"code-number\">1</span>,<span class=\"code-attr\">language</span>:g.language,<span class=\"code-attr\">default</span>:g.default,<span class=\"code-attr\">label</span>:m});l[m]=v}}a.on(<span class=\"code-string\">\"error\"</span>,Pn[e](e,t))},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.tech,n=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,d=t.mediaTypes[e],l=d.groups,c=d.tracks,h=t.masterPlaylistLoader;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> f <span class=\"code-keyword\">in</span> u[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> p <span class=\"code-keyword\">in</span> l[f]||(l[f]=[]),u[e][f])<span class=\"code-keyword\">if</span>(!u[e][f][p].forced){<span class=\"code-keyword\">var</span> m=u[e][f][p],g=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"hls\"</span>===a)g=<span class=\"code-keyword\">new</span> Ee(m.resolvedUri,n,o);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"dash\"</span>===a){<span class=\"code-keyword\">if</span>(!m.playlists.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.excludeUntil!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>})).length)<span class=\"code-keyword\">return</span>;g=<span class=\"code-keyword\">new</span> ai(m.playlists[<span class=\"code-number\">0</span>],n,o,h)}<span class=\"code-keyword\">else</span><span class=\"code-string\">\"vhs-json\"</span>===a&amp;&amp;(g=<span class=\"code-keyword\">new</span> Ee(m.playlists?m.playlists[<span class=\"code-number\">0</span>]:m.resolvedUri,n,o));<span class=\"code-keyword\">if</span>(m=r.default.mergeOptions({<span class=\"code-attr\">id</span>:p,<span class=\"code-attr\">playlistLoader</span>:g},m),kn[e](e,m.playlistLoader,t),l[f].push(m),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===c[p]){<span class=\"code-keyword\">var</span> y=i.addRemoteTextTrack({<span class=\"code-attr\">id</span>:p,<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"subtitles\"</span>,<span class=\"code-attr\">default</span>:m.default&amp;&amp;m.autoselect,<span class=\"code-attr\">language</span>:m.language,<span class=\"code-attr\">label</span>:p},!<span class=\"code-number\">1</span>).track;c[p]=y}}s.on(<span class=\"code-string\">\"error\"</span>,Pn[e](e,t))},<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.tech,n=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u <span class=\"code-keyword\">in</span> n[e])<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> d <span class=\"code-keyword\">in</span> s[u]||(s[u]=[]),n[e][u]){<span class=\"code-keyword\">var</span> l=n[e][u][d];<span class=\"code-keyword\">if</span>(<span class=\"code-regexp\">/^(?:CC|SERVICE)/</span>.test(l.instreamId)){<span class=\"code-keyword\">var</span> c=i.options_.vhs&amp;&amp;i.options_.vhs.captionServices||{},h={<span class=\"code-attr\">label</span>:d,<span class=\"code-attr\">language</span>:l.language,<span class=\"code-attr\">instreamId</span>:l.instreamId,<span class=\"code-attr\">default</span>:l.default&amp;&amp;l.autoselect};<span class=\"code-keyword\">if</span>(c[h.instreamId]&amp;&amp;(h=r.default.mergeOptions(h,c[h.instreamId])),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===h.default&amp;&amp;<span class=\"code-keyword\">delete</span> h.default,s[u].push(r.default.mergeOptions({<span class=\"code-attr\">id</span>:d},l)),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o[d]){<span class=\"code-keyword\">var</span> f=i.addRemoteTextTrack({<span class=\"code-attr\">id</span>:h.instreamId,<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"captions\"</span>,<span class=\"code-attr\">default</span>:h.default,<span class=\"code-attr\">language</span>:h.language,<span class=\"code-attr\">label</span>:h.label},!<span class=\"code-number\">1</span>).track;o[d]=f}}}}},On=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>;n&lt;t.length;n++){<span class=\"code-keyword\">if</span>(ue(i,t[n]))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(t[n].playlists&amp;&amp;e(t[n].playlists,i))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},Dn={<span class=\"code-attr\">AUDIO</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaTypes[e].tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-keyword\">if</span>(i[n].enabled)<span class=\"code-keyword\">return</span> i[n];<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},<span class=\"code-attr\">SUBTITLES</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaTypes[e].tracks;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"showing\"</span>===i[n].mode||<span class=\"code-string\">\"hidden\"</span>===i[n].mode)<span class=\"code-keyword\">return</span> i[n];<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}}},Cn=[<span class=\"code-string\">\"mediaRequests\"</span>,<span class=\"code-string\">\"mediaRequestsAborted\"</span>,<span class=\"code-string\">\"mediaRequestsTimedout\"</span>,<span class=\"code-string\">\"mediaRequestsErrored\"</span>,<span class=\"code-string\">\"mediaTransferDuration\"</span>,<span class=\"code-string\">\"mediaBytesTransferred\"</span>,<span class=\"code-string\">\"mediaAppends\"</span>],Un=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.audioSegmentLoader_[e]+<span class=\"code-keyword\">this</span>.mainSegmentLoader_[e]},Rn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i;i=e.call(<span class=\"code-keyword\">this</span>)||<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">var</span> n=t.src,a=t.handleManifestRedirects,o=t.withCredentials,u=t.tech,d=t.bandwidth,l=t.externVhs,c=t.useCueTags,h=t.blacklistDuration,f=t.enableLowInitialPlaylist,m=t.sourceType,g=t.cacheEncryptionKeys,y=t.experimentalBufferBasedABR,v=t.experimentalLeastPixelDiffSelector,_=t.captionServices;<span class=\"code-keyword\">if</span>(!n)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"A non-empty playlist URL or JSON manifest string is required\"</span>);<span class=\"code-keyword\">var</span> T=t.maxPlaylistRetries;<span class=\"code-literal\">null</span>==T&amp;&amp;(T=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>),$i=l,i.experimentalBufferBasedABR=<span class=\"code-built_in\">Boolean</span>(y),i.experimentalLeastPixelDiffSelector=<span class=\"code-built_in\">Boolean</span>(v),i.withCredentials=o,i.tech_=u,i.vhs_=u.vhs,i.sourceType_=m,i.useCueTags_=c,i.blacklistDuration=h,i.maxPlaylistRetries=T,i.enableLowInitialPlaylist=f,i.useCueTags_&amp;&amp;(i.cueTagsTrack_=i.tech_.addTextTrack(<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-string\">\"ad-cues\"</span>),i.cueTagsTrack_.inBandMetadataTrackDispatchType=<span class=\"code-string\">\"\"</span>),i.requestOptions_={<span class=\"code-attr\">withCredentials</span>:o,<span class=\"code-attr\">handleManifestRedirects</span>:a,<span class=\"code-attr\">maxPlaylistRetries</span>:T,<span class=\"code-attr\">timeout</span>:<span class=\"code-literal\">null</span>},i.on(<span class=\"code-string\">\"error\"</span>,i.pauseLoading),i.mediaTypes_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e={};<span class=\"code-keyword\">return</span>[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>,<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e[t]={<span class=\"code-attr\">groups</span>:{},<span class=\"code-attr\">tracks</span>:{},<span class=\"code-attr\">activePlaylistLoader</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">activeGroup</span>:Ki,<span class=\"code-attr\">activeTrack</span>:Ki,<span class=\"code-attr\">getActiveGroup</span>:Ki,<span class=\"code-attr\">onGroupChanged</span>:Ki,<span class=\"code-attr\">onTrackChanged</span>:Ki,<span class=\"code-attr\">lastTrack_</span>:<span class=\"code-literal\">null</span>,<span class=\"code-attr\">logger_</span>:p(<span class=\"code-string\">\"MediaGroups[\"</span>+t+<span class=\"code-string\">\"]\"</span>)}})),e}(),i.mediaSource=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(s(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(s(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(s(i)),i.mediaSource.addEventListener(<span class=\"code-string\">\"durationchange\"</span>,i.handleDurationChange_),i.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,i.handleSourceOpen_),i.mediaSource.addEventListener(<span class=\"code-string\">\"sourceended\"</span>,i.handleSourceEnded_),i.seekable_=r.default.createTimeRanges(),i.hasPlayed_=!<span class=\"code-number\">1</span>,i.syncController_=<span class=\"code-keyword\">new</span> bn(t),i.segmentMetadataTrack_=u.addRemoteTextTrack({<span class=\"code-attr\">kind</span>:<span class=\"code-string\">\"metadata\"</span>,<span class=\"code-attr\">label</span>:<span class=\"code-string\">\"segment-metadata\"</span>},!<span class=\"code-number\">1</span>).track,i.decrypter_=<span class=\"code-keyword\">new</span> In,i.sourceUpdater_=<span class=\"code-keyword\">new</span> mn(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=<span class=\"code-keyword\">new</span> Sn;<span class=\"code-keyword\">var</span> b={<span class=\"code-attr\">vhs</span>:i.vhs_,<span class=\"code-attr\">parse708captions</span>:t.parse708captions,<span class=\"code-attr\">captionServices</span>:_,<span class=\"code-attr\">mediaSource</span>:i.mediaSource,<span class=\"code-attr\">currentTime</span>:i.tech_.currentTime.bind(i.tech_),<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.seekable()},<span class=\"code-attr\">seeking</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.seeking()},<span class=\"code-attr\">duration</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.duration()},<span class=\"code-attr\">hasPlayed</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.hasPlayed_},<span class=\"code-attr\">goalBufferLength</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.goalBufferLength()},<span class=\"code-attr\">bandwidth</span>:d,<span class=\"code-attr\">syncController</span>:i.syncController_,<span class=\"code-attr\">decrypter</span>:i.decrypter_,<span class=\"code-attr\">sourceType</span>:i.sourceType_,<span class=\"code-attr\">inbandTextTracks</span>:i.inbandTextTracks_,<span class=\"code-attr\">cacheEncryptionKeys</span>:g,<span class=\"code-attr\">sourceUpdater</span>:i.sourceUpdater_,<span class=\"code-attr\">timelineChangeController</span>:i.timelineChangeController_,<span class=\"code-attr\">experimentalExactManifestTimings</span>:t.experimentalExactManifestTimings};i.masterPlaylistLoader_=<span class=\"code-string\">\"dash\"</span>===i.sourceType_?<span class=\"code-keyword\">new</span> ai(n,i.vhs_,i.requestOptions_):<span class=\"code-keyword\">new</span> Ee(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=<span class=\"code-keyword\">new</span> Yi(r.default.mergeOptions(b,{<span class=\"code-attr\">segmentMetadataTrack</span>:i.segmentMetadataTrack_,<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"main\"</span>}),t),i.audioSegmentLoader_=<span class=\"code-keyword\">new</span> Yi(r.default.mergeOptions(b,{<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"audio\"</span>}),t),i.subtitleSegmentLoader_=<span class=\"code-keyword\">new</span> vn(r.default.mergeOptions(b,{<span class=\"code-attr\">loaderType</span>:<span class=\"code-string\">\"vtt\"</span>,<span class=\"code-attr\">featuresNativeTextTracks</span>:i.tech_.featuresNativeTextTracks}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&amp;&amp;(i.masterPlaylistLoader_.one(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.startABRTimer_()})),i.tech_.on(<span class=\"code-string\">\"pause\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.stopABRTimer_()})),i.tech_.on(<span class=\"code-string\">\"play\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.startABRTimer_()}))),Cn.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i[e+<span class=\"code-string\">\"_\"</span>]=Un.bind(s(i),e)})),i.logger_=p(<span class=\"code-string\">\"MPC\"</span>),i.triggeredFmp4Usage=!<span class=\"code-number\">1</span>,<span class=\"code-string\">\"none\"</span>===i.tech_.preload()?(i.loadOnPlay_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.loadOnPlay_=<span class=\"code-literal\">null</span>,i.masterPlaylistLoader_.load()},i.tech_.one(<span class=\"code-string\">\"play\"</span>,i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=<span class=\"code-number\">-1</span>,i.mainAppendsToLoadedData__=<span class=\"code-number\">-1</span>,i.audioAppendsToLoadedData__=<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">var</span> S=<span class=\"code-string\">\"none\"</span>===i.tech_.preload()?<span class=\"code-string\">\"play\"</span>:<span class=\"code-string\">\"loadstart\"</span>;<span class=\"code-keyword\">return</span> i.tech_.one(S,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-built_in\">Date</span>.now();i.tech_.one(<span class=\"code-string\">\"loadeddata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.timeToLoadedData__=<span class=\"code-built_in\">Date</span>.now()-e,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends}))})),i}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.mainAppendsToLoadedData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.audioAppendsToLoadedData__},i.appendsToLoadedData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.mainAppendsToLoadedData_(),t=<span class=\"code-keyword\">this</span>.audioAppendsToLoadedData_();<span class=\"code-keyword\">return</span><span class=\"code-number\">-1</span>===e||<span class=\"code-number\">-1</span>===t?<span class=\"code-number\">-1</span>:e+t},i.timeToLoadedData_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.timeToLoadedData__},i.checkABR_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.selectPlaylist();e&amp;&amp;<span class=\"code-keyword\">this</span>.shouldSwitchToMedia_(e)&amp;&amp;<span class=\"code-keyword\">this</span>.switchMedia_(e,<span class=\"code-string\">\"abr\"</span>)},i.switchMedia_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.media(),r=n&amp;&amp;(n.id||n.uri),a=e.id||e.uri;r&amp;&amp;r!==a&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"switch media \"</span>+r+<span class=\"code-string\">\" -&gt; \"</span>+a+<span class=\"code-string\">\" from \"</span>+t),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-rendition-change-\"</span>+t})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media(e,i)},i.startABRTimer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.stopABRTimer_(),<span class=\"code-keyword\">this</span>.abrTimer_=<span class=\"code-built_in\">window</span>.setInterval((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> e.checkABR_()}),<span class=\"code-number\">250</span>)},i.stopABRTimer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.scrubbing&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.scrubbing()||(<span class=\"code-built_in\">window</span>.clearInterval(<span class=\"code-keyword\">this</span>.abrTimer_),<span class=\"code-keyword\">this</span>.abrTimer_=<span class=\"code-literal\">null</span>)},i.getAudioTrackPlaylists_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.master(),t=e&amp;&amp;e.playlists||[];<span class=\"code-keyword\">if</span>(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">var</span> i,n=e.mediaGroups.AUDIO,r=<span class=\"code-built_in\">Object</span>.keys(n);<span class=\"code-keyword\">if</span>(<span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.groups).length)i=<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activeTrack();<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> a=n.main||r.length&amp;&amp;n[r[<span class=\"code-number\">0</span>]];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s <span class=\"code-keyword\">in</span> a)<span class=\"code-keyword\">if</span>(a[s].default){i={<span class=\"code-attr\">label</span>:s};<span class=\"code-keyword\">break</span>}}<span class=\"code-keyword\">if</span>(!i)<span class=\"code-keyword\">return</span> t;<span class=\"code-keyword\">var</span> o=[];<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u <span class=\"code-keyword\">in</span> n)<span class=\"code-keyword\">if</span>(n[u][i.label]){<span class=\"code-keyword\">var</span> d=n[u][i.label];<span class=\"code-keyword\">if</span>(d.playlists&amp;&amp;d.playlists.length)o.push.apply(o,d.playlists);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(d.uri)o.push(d);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(e.playlists.length)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> l=<span class=\"code-number\">0</span>;l&lt;e.playlists.length;l++){<span class=\"code-keyword\">var</span> c=e.playlists[l];c.attributes&amp;&amp;c.attributes.AUDIO&amp;&amp;c.attributes.AUDIO===u&amp;&amp;o.push(c)}}<span class=\"code-keyword\">return</span> o.length?o:t},i.setupMasterPlaylistLoaderListeners_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media(),i=<span class=\"code-number\">1.5</span>*t.targetDuration*<span class=\"code-number\">1e3</span>;oe(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class=\"code-number\">0</span>:e.requestOptions_.timeout=i,t.endList&amp;&amp;<span class=\"code-string\">\"none\"</span>!==e.tech_.preload()&amp;&amp;(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>,<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{xn[t](t,e)}));<span class=\"code-keyword\">var</span> t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs,a=e.segmentLoaders,s=a.AUDIO,o=a.main;[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{t[i].activeGroup=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{<span class=\"code-keyword\">var</span> n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> s=<span class=\"code-literal\">null</span>;a.attributes[e]&amp;&amp;(s=r[a.attributes[e]]);<span class=\"code-keyword\">var</span> o=<span class=\"code-built_in\">Object</span>.keys(r);<span class=\"code-keyword\">if</span>(!s)<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"AUDIO\"</span>===e&amp;&amp;o.length&gt;<span class=\"code-number\">1</span>&amp;&amp;le(t.master))<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u=<span class=\"code-number\">0</span>;u&lt;o.length;u++){<span class=\"code-keyword\">var</span> d=r[o[u]];<span class=\"code-keyword\">if</span>(On(d,a)){s=d;<span class=\"code-keyword\">break</span>}}<span class=\"code-keyword\">else</span> r.main?s=r.main:<span class=\"code-number\">1</span>===o.length&amp;&amp;(s=r[o[<span class=\"code-number\">0</span>]]);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?s:<span class=\"code-literal\">null</span>!==i&amp;&amp;s&amp;&amp;s.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.id===i.id}))[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>}}(i,e),t[i].activeTrack=Dn[i](i,e),t[i].onGroupChanged=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.getActiveGroup(),u=a.activePlaylistLoader,d=a.lastGroup_;o&amp;&amp;d&amp;&amp;o.id===d.id||(a.lastGroup_=o,a.lastTrack_=s,An(n,a),o&amp;&amp;!o.isMasterPlaylist&amp;&amp;(o.playlistLoader?(n.resyncLoader(),Ln(o.playlistLoader,a)):u&amp;&amp;r.resetEverything()))}}(i,e),t[i].onGroupChanging=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=<span class=\"code-literal\">null</span>,i.abort(),i.pause()}}(i,e),t[i].onTrackChanged=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> i=t.masterPlaylistLoader,n=t.segmentLoaders,r=n[e],a=n.main,s=t.mediaTypes[e],o=s.activeTrack(),u=s.getActiveGroup(),d=s.activePlaylistLoader,l=s.lastTrack_;<span class=\"code-keyword\">if</span>((!l||!o||l.id!==o.id)&amp;&amp;(s.lastGroup_=u,s.lastTrack_=o,An(r,s),u)){<span class=\"code-keyword\">if</span>(u.isMasterPlaylist){<span class=\"code-keyword\">if</span>(!o||!l||o.id===l.id)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">var</span> c=t.vhs.masterPlaylistController_,h=c.selectPlaylist();<span class=\"code-keyword\">if</span>(c.media()===h)<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">return</span> s.logger_(<span class=\"code-string\">\"track change. Switching master audio from \"</span>+l.id+<span class=\"code-string\">\" to \"</span>+o.id),i.pause(),a.resetEverything(),<span class=\"code-keyword\">void</span> c.fastQualityChange_(h)}<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"AUDIO\"</span>===e){<span class=\"code-keyword\">if</span>(!u.playlistLoader)<span class=\"code-keyword\">return</span> a.setAudio(!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> a.resetEverything();r.setAudio(!<span class=\"code-number\">0</span>),a.setAudio(!<span class=\"code-number\">1</span>)}d!==u.playlistLoader?(r.track&amp;&amp;r.track(o),r.resetEverything(),Ln(u.playlistLoader,s)):Ln(u.playlistLoader,s)}}}(i,e),t[i].getActiveGroup=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=t.mediaTypes;<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=i[e].activeTrack();<span class=\"code-keyword\">return</span> t?i[e].activeGroup(t):<span class=\"code-literal\">null</span>}}(i,e)}));<span class=\"code-keyword\">var</span> u=t.AUDIO.activeGroup();<span class=\"code-keyword\">if</span>(u){<span class=\"code-keyword\">var</span> d=(u.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e.default}))[<span class=\"code-number\">0</span>]||u[<span class=\"code-number\">0</span>]).id;t.AUDIO.tracks[d].enabled=!<span class=\"code-number\">0</span>,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!<span class=\"code-number\">1</span>),s.setAudio(!<span class=\"code-number\">0</span>)):o.setAudio(!<span class=\"code-number\">0</span>)}i.on(<span class=\"code-string\">\"mediachange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e].onGroupChanged()}))})),i.on(<span class=\"code-string\">\"mediachanging\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t[e].onGroupChanging()}))}));<span class=\"code-keyword\">var</span> l=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.AUDIO.onTrackChanged(),n.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-audio-change\"</span>}),n.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-audio-change\"</span>})};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> c <span class=\"code-keyword\">in</span> n.audioTracks().addEventListener(<span class=\"code-string\">\"change\"</span>,l),n.remoteTextTracks().addEventListener(<span class=\"code-string\">\"change\"</span>,t.SUBTITLES.onTrackChanged),r.on(<span class=\"code-string\">\"dispose\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{n.audioTracks().removeEventListener(<span class=\"code-string\">\"change\"</span>,l),n.remoteTextTracks().removeEventListener(<span class=\"code-string\">\"change\"</span>,t.SUBTITLES.onTrackChanged)})),n.clearTracks(<span class=\"code-string\">\"audio\"</span>),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[c])}({<span class=\"code-attr\">sourceType</span>:e.sourceType_,<span class=\"code-attr\">segmentLoaders</span>:{<span class=\"code-attr\">AUDIO</span>:e.audioSegmentLoader_,<span class=\"code-attr\">SUBTITLES</span>:e.subtitleSegmentLoader_,<span class=\"code-attr\">main</span>:e.mainSegmentLoader_},<span class=\"code-attr\">tech</span>:e.tech_,<span class=\"code-attr\">requestOptions</span>:e.requestOptions_,<span class=\"code-attr\">masterPlaylistLoader</span>:e.masterPlaylistLoader_,<span class=\"code-attr\">vhs</span>:e.vhs_,<span class=\"code-attr\">master</span>:e.master(),<span class=\"code-attr\">mediaTypes</span>:e.mediaTypes_,<span class=\"code-attr\">blacklistCurrentPlaylist</span>:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger(<span class=\"code-string\">\"selectedinitialmedia\"</span>):e.mediaTypes_.AUDIO.activePlaylistLoader.one(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"selectedinitialmedia\"</span>)}))})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"loadedplaylist\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.loadOnPlay_&amp;&amp;e.tech_.off(<span class=\"code-string\">\"play\"</span>,e.loadOnPlay_);<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(!t){<span class=\"code-keyword\">var</span> i;<span class=\"code-keyword\">if</span>(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&amp;&amp;(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(e.initialMedia_=i,e.switchMedia_(e.initialMedia_,<span class=\"code-string\">\"initial\"</span>),<span class=\"code-string\">\"vhs-json\"</span>!==e.sourceType_||!e.initialMedia_.segments)<span class=\"code-keyword\">return</span>;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"mediachanging\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"mediachange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media(),i=<span class=\"code-number\">1.5</span>*t.targetDuration*<span class=\"code-number\">1e3</span>;oe(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class=\"code-number\">0</span>:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"mediachange\"</span>,<span class=\"code-attr\">bubbles</span>:!<span class=\"code-number\">0</span>})})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"playlistunchanged\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistLoader_.media();<span class=\"code-string\">\"playlist-unchanged\"</span>!==t.lastExcludeReason_&amp;&amp;e.stuckAtPlaylistEnd_(t)&amp;&amp;(e.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Playlist no longer updating.\"</span>,<span class=\"code-attr\">reason</span>:<span class=\"code-string\">\"playlist-unchanged\"</span>}),e.tech_.trigger(<span class=\"code-string\">\"playliststuck\"</span>))})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"renditiondisabled\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-rendition-disabled\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-disabled\"</span>})})),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.on(<span class=\"code-string\">\"renditionenabled\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-rendition-enabled\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-enabled\"</span>})}))},i.handleUpdatedMediaPlaylist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.useCueTags_&amp;&amp;<span class=\"code-keyword\">this</span>.updateAdCues_(e),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.playlist(e,<span class=\"code-keyword\">this</span>.requestOptions_),<span class=\"code-keyword\">this</span>.updateDuration(!e.endList),<span class=\"code-keyword\">this</span>.tech_.paused()||(<span class=\"code-keyword\">this</span>.mainSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.audioSegmentLoader_&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.load())},i.triggerPresenceUsage_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaGroups||{},n=!<span class=\"code-number\">0</span>,r=<span class=\"code-built_in\">Object</span>.keys(i.AUDIO);<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> a <span class=\"code-keyword\">in</span> i.AUDIO)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> s <span class=\"code-keyword\">in</span> i.AUDIO[a])i.AUDIO[a][s].uri||(n=!<span class=\"code-number\">1</span>);n&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-demuxed\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-demuxed\"</span>})),<span class=\"code-built_in\">Object</span>.keys(i.SUBTITLES).length&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-webvtt\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-webvtt\"</span>})),$i.Playlist.isAes(t)&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-aes\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-aes\"</span>})),r.length&amp;&amp;<span class=\"code-built_in\">Object</span>.keys(i.AUDIO[r[<span class=\"code-number\">0</span>]]).length&gt;<span class=\"code-number\">1</span>&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-alternate-audio\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-alternate-audio\"</span>})),<span class=\"code-keyword\">this</span>.useCueTags_&amp;&amp;(<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-playlist-cue-tags\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-playlist-cue-tags\"</span>}))},i.shouldSwitchToMedia_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()||<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.pendingMedia_,i=<span class=\"code-keyword\">this</span>.tech_.currentTime(),n=<span class=\"code-keyword\">this</span>.bufferLowWaterLine(),a=<span class=\"code-keyword\">this</span>.bufferHighWaterLine();<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.currentPlaylist,i=e.buffered,n=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,u=e.duration,d=e.experimentalBufferBasedABR,l=e.log;<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"We received no playlist to switch to. Please check your stream.\"</span>),!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> c=<span class=\"code-string\">\"allowing switch \"</span>+(t&amp;&amp;t.id||<span class=\"code-string\">\"null\"</span>)+<span class=\"code-string\">\" -&gt; \"</span>+a.id;<span class=\"code-keyword\">if</span>(!t)<span class=\"code-keyword\">return</span> l(c+<span class=\"code-string\">\" as current playlist is not set\"</span>),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(a.id===t.id)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> h=<span class=\"code-built_in\">Boolean</span>(H(i,n).length);<span class=\"code-keyword\">if</span>(!t.endList)<span class=\"code-keyword\">return</span> h||<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> t.partTargetDuration?(l(c+<span class=\"code-string\">\" as current playlist is live\"</span>),!<span class=\"code-number\">0</span>):(l(<span class=\"code-string\">\"not \"</span>+c+<span class=\"code-string\">\" as current playlist is live llhls, but currentTime isn't in buffered.\"</span>),!<span class=\"code-number\">1</span>);<span class=\"code-keyword\">var</span> f=X(i,n),p=d?si.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:si.MAX_BUFFER_LOW_WATER_LINE;<span class=\"code-keyword\">if</span>(u&lt;p)<span class=\"code-keyword\">return</span> l(c+<span class=\"code-string\">\" as duration &lt; max low water line (\"</span>+u+<span class=\"code-string\">\" &lt; \"</span>+p+<span class=\"code-string\">\")\"</span>),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> m=a.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;<span class=\"code-keyword\">if</span>(m&lt;g&amp;&amp;(!d||f&lt;o)){<span class=\"code-keyword\">var</span> y=c+<span class=\"code-string\">\" as next bandwidth &lt; current bandwidth (\"</span>+m+<span class=\"code-string\">\" &lt; \"</span>+g+<span class=\"code-string\">\")\"</span>;<span class=\"code-keyword\">return</span> d&amp;&amp;(y+=<span class=\"code-string\">\" and forwardBuffer &lt; bufferHighWaterLine (\"</span>+f+<span class=\"code-string\">\" &lt; \"</span>+o+<span class=\"code-string\">\")\"</span>),l(y),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">if</span>((!d||m&gt;g)&amp;&amp;f&gt;=s){<span class=\"code-keyword\">var</span> v=c+<span class=\"code-string\">\" as forwardBuffer &gt;= bufferLowWaterLine (\"</span>+f+<span class=\"code-string\">\" &gt;= \"</span>+s+<span class=\"code-string\">\")\"</span>;<span class=\"code-keyword\">return</span> d&amp;&amp;(v+=<span class=\"code-string\">\" and next bandwidth &gt; current bandwidth (\"</span>+m+<span class=\"code-string\">\" &gt; \"</span>+g+<span class=\"code-string\">\")\"</span>),l(v),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span> l(<span class=\"code-string\">\"not \"</span>+c+<span class=\"code-string\">\" as no switching criteria met\"</span>),!<span class=\"code-number\">1</span>}({<span class=\"code-attr\">buffered</span>:<span class=\"code-keyword\">this</span>.tech_.buffered(),<span class=\"code-attr\">currentTime</span>:i,<span class=\"code-attr\">currentPlaylist</span>:t,<span class=\"code-attr\">nextPlaylist</span>:e,<span class=\"code-attr\">bufferLowWaterLine</span>:n,<span class=\"code-attr\">bufferHighWaterLine</span>:a,<span class=\"code-attr\">duration</span>:<span class=\"code-keyword\">this</span>.duration(),<span class=\"code-attr\">experimentalBufferBasedABR</span>:<span class=\"code-keyword\">this</span>.experimentalBufferBasedABR,<span class=\"code-attr\">log</span>:<span class=\"code-keyword\">this</span>.logger_})},i.setupSegmentLoaderListeners_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.experimentalBufferBasedABR||(<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"bandwidthupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&amp;&amp;e.switchMedia_(t,<span class=\"code-string\">\"bandwidthupdate\"</span>),e.tech_.trigger(<span class=\"code-string\">\"bandwidthupdate\"</span>)})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"progress\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"progress\"</span>)}))),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"appenderror\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.error=e.mainSegmentLoader_.error_,e.trigger(<span class=\"code-string\">\"error\"</span>)})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onSyncInfoUpdate_()})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"timestampoffset\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-timestamp-offset\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-timestamp-offset\"</span>})})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"syncinfoupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.onSyncInfoUpdate_()})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"appenderror\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.error=e.audioSegmentLoader_.error_,e.trigger(<span class=\"code-string\">\"error\"</span>)})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"ended\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.logger_(<span class=\"code-string\">\"main segment loader ended\"</span>),e.onEndOfStream()})),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"earlyabort\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.experimentalBufferBasedABR||(e.delegateLoaders_(<span class=\"code-string\">\"all\"</span>,[<span class=\"code-string\">\"abort\"</span>]),e.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Aborted early because there isn't enough bandwidth to complete the request without rebuffering.\"</span>},<span class=\"code-number\">120</span>))}));<span class=\"code-keyword\">var</span> t=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!e.sourceUpdater_.hasCreatedSourceBuffers())<span class=\"code-keyword\">return</span> e.tryToCreateSourceBuffers_();<span class=\"code-keyword\">var</span> t=e.getCodecsOrExclude_();t&amp;&amp;e.sourceUpdater_.addOrChangeSourceBuffers(t)};<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"trackinfo\"</span>,t),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"trackinfo\"</span>,t),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.on(<span class=\"code-string\">\"fmp4\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-fmp4\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-fmp4\"</span>}),e.triggeredFmp4Usage=!<span class=\"code-number\">0</span>)})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"fmp4\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-fmp4\"</span>}),e.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-fmp4\"</span>}),e.triggeredFmp4Usage=!<span class=\"code-number\">0</span>)})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.on(<span class=\"code-string\">\"ended\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.logger_(<span class=\"code-string\">\"audioSegmentLoader ended\"</span>),e.onEndOfStream()}))},i.mediaSecondsLoaded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.max(<span class=\"code-keyword\">this</span>.audioSegmentLoader_.mediaSecondsLoaded+<span class=\"code-keyword\">this</span>.mainSegmentLoader_.mediaSecondsLoaded)},i.load=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.mainSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.load(),<span class=\"code-keyword\">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.load()},i.smoothQualityChange_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.selectPlaylist()),<span class=\"code-keyword\">this</span>.fastQualityChange_(e)},i.fastQualityChange_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e=<span class=\"code-keyword\">this</span>.selectPlaylist()),e!==<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()?(<span class=\"code-keyword\">this</span>.switchMedia_(e,<span class=\"code-string\">\"fast-quality\"</span>),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetEverything((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r.default.browser.IE_VERSION||r.default.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+<span class=\"code-number\">.04</span>):t.tech_.setCurrentTime(t.tech_.currentTime())}))):<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"skipping fastQualityChange because new media is same as old\"</span>)},i.play=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.setupFirstPlay()){<span class=\"code-keyword\">this</span>.tech_.ended()&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(<span class=\"code-number\">0</span>),<span class=\"code-keyword\">this</span>.hasPlayed_&amp;&amp;<span class=\"code-keyword\">this</span>.load();<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.seekable();<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.tech_.duration()===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.currentTime()&lt;e.start(<span class=\"code-number\">0</span>)?<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e.end(e.length<span class=\"code-number\">-1</span>)):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}},i.setupFirstPlay=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(!t||<span class=\"code-keyword\">this</span>.tech_.paused()||<span class=\"code-keyword\">this</span>.hasPlayed_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!t.endList){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.seekable();<span class=\"code-keyword\">if</span>(!i.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(r.default.browser.IE_VERSION&amp;&amp;<span class=\"code-number\">0</span>===<span class=\"code-keyword\">this</span>.tech_.readyState())<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.tech_.one(<span class=\"code-string\">\"loadedmetadata\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.trigger(<span class=\"code-string\">\"firstplay\"</span>),e.tech_.setCurrentTime(i.end(<span class=\"code-number\">0</span>)),e.hasPlayed_=!<span class=\"code-number\">0</span>})),!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"firstplay\"</span>),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(i.end(<span class=\"code-number\">0</span>))}<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.hasPlayed_=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.load(),!<span class=\"code-number\">0</span>},i.handleSourceOpen_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tryToCreateSourceBuffers_(),<span class=\"code-keyword\">this</span>.tech_.autoplay()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.play();<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e.then&amp;&amp;e.then(<span class=\"code-literal\">null</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{}))}<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"sourceopen\"</span>)},i.handleSourceEnded_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.inbandTextTracks_.metadataTrack_){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.inbandTextTracks_.metadataTrack_.cues;<span class=\"code-keyword\">if</span>(e&amp;&amp;e.length){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.duration();e[e.length<span class=\"code-number\">-1</span>].endTime=<span class=\"code-built_in\">isNaN</span>(t)||<span class=\"code-built_in\">Math</span>.abs(t)===<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>?<span class=\"code-built_in\">Number</span>.MAX_VALUE:t}}},i.handleDurationChange_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"durationchange\"</span>)},i.onEndOfStream=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.mainSegmentLoader_.ended_;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&amp;&amp;<span class=\"code-keyword\">this</span>.audioSegmentLoader_.ended_:<span class=\"code-keyword\">this</span>.audioSegmentLoader_.ended_}e&amp;&amp;(<span class=\"code-keyword\">this</span>.stopABRTimer_(),<span class=\"code-keyword\">this</span>.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.seekable().length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(e,<span class=\"code-keyword\">this</span>.duration());<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>===t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> i=$i.Playlist.playlistEnd(e,t),n=<span class=\"code-keyword\">this</span>.tech_.currentTime(),r=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(!r.length)<span class=\"code-keyword\">return</span> i-n&lt;=F;<span class=\"code-keyword\">var</span> a=r.end(r.length<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">return</span> a-n&lt;=F&amp;&amp;i-a&lt;=F},i.blacklistCurrentPlaylist=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e&amp;&amp;(e={});<span class=\"code-keyword\">var</span> i=e.playlist||<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(t=t||e.blacklistDuration||<span class=\"code-keyword\">this</span>.blacklistDuration,!i)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error=e,<span class=\"code-keyword\">void</span>(<span class=\"code-string\">\"open\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource.readyState?<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>):<span class=\"code-keyword\">this</span>.sourceUpdater_.endOfStream(<span class=\"code-string\">\"network\"</span>));i.playlistErrors_++;<span class=\"code-keyword\">var</span> n,a=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master.playlists,s=a.filter(ae),o=<span class=\"code-number\">1</span>===s.length&amp;&amp;s[<span class=\"code-number\">0</span>]===i;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">1</span>===a.length&amp;&amp;t!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"Problem encountered with playlist \"</span>+i.id+<span class=\"code-string\">\". Trying again since it is the only playlist.\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"retryplaylist\"</span>),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.load(o);<span class=\"code-keyword\">if</span>(o){<span class=\"code-keyword\">var</span> u=!<span class=\"code-number\">1</span>;a.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e!==i){<span class=\"code-keyword\">var</span> t=e.excludeUntil;<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==t&amp;&amp;t!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;(u=!<span class=\"code-number\">0</span>,<span class=\"code-keyword\">delete</span> e.excludeUntil)}})),u&amp;&amp;(r.default.log.warn(<span class=\"code-string\">\"Removing other playlists from the exclusion list because the last rendition is about to be excluded.\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"retryplaylist\"</span>))}n=i.playlistErrors_&gt;<span class=\"code-keyword\">this</span>.maxPlaylistRetries?<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>:<span class=\"code-built_in\">Date</span>.now()+<span class=\"code-number\">1e3</span>*t,i.excludeUntil=n,e.reason&amp;&amp;(i.lastExcludeReason_=e.reason),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"blacklistplaylist\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-rendition-blacklisted\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-rendition-blacklisted\"</span>});<span class=\"code-keyword\">var</span> d=<span class=\"code-keyword\">this</span>.selectPlaylist();<span class=\"code-keyword\">if</span>(!d)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.error=<span class=\"code-string\">\"Playback cannot continue. No available working or supported playlists.\"</span>,<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"error\"</span>);<span class=\"code-keyword\">var</span> l=e.internal?<span class=\"code-keyword\">this</span>.logger_:r.default.log.warn,c=e.message?<span class=\"code-string\">\" \"</span>+e.message:<span class=\"code-string\">\"\"</span>;l((e.internal?<span class=\"code-string\">\"Internal problem\"</span>:<span class=\"code-string\">\"Problem\"</span>)+<span class=\"code-string\">\" encountered with playlist \"</span>+i.id+<span class=\"code-string\">\".\"</span>+c+<span class=\"code-string\">\" Switching to playlist \"</span>+d.id+<span class=\"code-string\">\".\"</span>),d.attributes.AUDIO!==i.attributes.AUDIO&amp;&amp;<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"audio\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]),d.attributes.SUBTITLES!==i.attributes.SUBTITLES&amp;&amp;<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"subtitle\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]),<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"main\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]);<span class=\"code-keyword\">var</span> h=d.targetDuration/<span class=\"code-number\">2</span>*<span class=\"code-number\">1e3</span>||<span class=\"code-number\">5e3</span>,f=<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> d.lastRequest&amp;&amp;<span class=\"code-built_in\">Date</span>.now()-d.lastRequest&lt;=h;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.switchMedia_(d,<span class=\"code-string\">\"exclude\"</span>,o||f)},i.pauseLoading=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.delegateLoaders_(<span class=\"code-string\">\"all\"</span>,[<span class=\"code-string\">\"abort\"</span>,<span class=\"code-string\">\"pause\"</span>]),<span class=\"code-keyword\">this</span>.stopABRTimer_()},i.delegateLoaders_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>,n=[],r=<span class=\"code-string\">\"all\"</span>===e;(r||<span class=\"code-string\">\"main\"</span>===e)&amp;&amp;n.push(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_);<span class=\"code-keyword\">var</span> a=[];(r||<span class=\"code-string\">\"audio\"</span>===e)&amp;&amp;a.push(<span class=\"code-string\">\"AUDIO\"</span>),(r||<span class=\"code-string\">\"subtitle\"</span>===e)&amp;&amp;(a.push(<span class=\"code-string\">\"CLOSED-CAPTIONS\"</span>),a.push(<span class=\"code-string\">\"SUBTITLES\"</span>)),a.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=i.mediaTypes_[e]&amp;&amp;i.mediaTypes_[e].activePlaylistLoader;t&amp;&amp;n.push(t)})),[<span class=\"code-string\">\"main\"</span>,<span class=\"code-string\">\"audio\"</span>,<span class=\"code-string\">\"subtitle\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> r=i[t+<span class=\"code-string\">\"SegmentLoader_\"</span>];!r||e!==t&amp;&amp;<span class=\"code-string\">\"all\"</span>!==e||n.push(r)})),n.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> t.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> e[t]&amp;&amp;e[t]()}))}))},i.setCurrentTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=H(<span class=\"code-keyword\">this</span>.tech_.buffered(),e);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media().segments?t&amp;&amp;t.length?e:(<span class=\"code-keyword\">this</span>.mainSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.abort(),<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(<span class=\"code-keyword\">this</span>.audioSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.abort()),<span class=\"code-keyword\">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;(<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.resetEverything(),<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.abort()),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.load()):<span class=\"code-number\">0</span>},i.duration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.masterPlaylistLoader_)<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">return</span> e?e.endList?<span class=\"code-keyword\">this</span>.mediaSource?<span class=\"code-keyword\">this</span>.mediaSource.duration:$i.Playlist.duration(e):<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>:<span class=\"code-number\">0</span>},i.seekable=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.seekable_},i.onSyncInfoUpdate_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media();<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(t,<span class=\"code-keyword\">this</span>.duration());<span class=\"code-keyword\">if</span>(<span class=\"code-literal\">null</span>!==i){<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master,a=$i.Playlist.seekable(t,i,$i.Playlist.liveEdgeDelay(n,t));<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>!==a.length){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class=\"code-keyword\">if</span>(t=<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader.media(),<span class=\"code-literal\">null</span>===(i=<span class=\"code-keyword\">this</span>.syncController_.getExpiredTime(t,<span class=\"code-keyword\">this</span>.duration())))<span class=\"code-keyword\">return</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-number\">0</span>===(e=$i.Playlist.seekable(t,i,$i.Playlist.liveEdgeDelay(n,t))).length)<span class=\"code-keyword\">return</span>}<span class=\"code-keyword\">var</span> s,o;<span class=\"code-keyword\">this</span>.seekable_&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.length&amp;&amp;(s=<span class=\"code-keyword\">this</span>.seekable_.end(<span class=\"code-number\">0</span>),o=<span class=\"code-keyword\">this</span>.seekable_.start(<span class=\"code-number\">0</span>)),e?e.start(<span class=\"code-number\">0</span>)&gt;a.end(<span class=\"code-number\">0</span>)||a.start(<span class=\"code-number\">0</span>)&gt;e.end(<span class=\"code-number\">0</span>)?<span class=\"code-keyword\">this</span>.seekable_=a:<span class=\"code-keyword\">this</span>.seekable_=r.default.createTimeRanges([[e.start(<span class=\"code-number\">0</span>)&gt;a.start(<span class=\"code-number\">0</span>)?e.start(<span class=\"code-number\">0</span>):a.start(<span class=\"code-number\">0</span>),e.end(<span class=\"code-number\">0</span>)&lt;a.end(<span class=\"code-number\">0</span>)?e.end(<span class=\"code-number\">0</span>):a.end(<span class=\"code-number\">0</span>)]]):<span class=\"code-keyword\">this</span>.seekable_=a,<span class=\"code-keyword\">this</span>.seekable_&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.length&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.end(<span class=\"code-number\">0</span>)===s&amp;&amp;<span class=\"code-keyword\">this</span>.seekable_.start(<span class=\"code-number\">0</span>)===o||(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"seekable updated [\"</span>+W(<span class=\"code-keyword\">this</span>.seekable_)+<span class=\"code-string\">\"]\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"seekablechanged\"</span>))}}}}},i.updateDuration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.updateDuration_&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.updateDuration_),<span class=\"code-keyword\">this</span>.updateDuration_=<span class=\"code-literal\">null</span>),<span class=\"code-string\">\"open\"</span>!==<span class=\"code-keyword\">this</span>.mediaSource.readyState)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.updateDuration_=<span class=\"code-keyword\">this</span>.updateDuration.bind(<span class=\"code-keyword\">this</span>,e),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.mediaSource.addEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.updateDuration_);<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.seekable();<span class=\"code-keyword\">if</span>(!t.length)<span class=\"code-keyword\">return</span>;(<span class=\"code-built_in\">isNaN</span>(<span class=\"code-keyword\">this</span>.mediaSource.duration)||<span class=\"code-keyword\">this</span>.mediaSource.duration&lt;t.end(t.length<span class=\"code-number\">-1</span>))&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.setDuration(t.end(t.length<span class=\"code-number\">-1</span>))}<span class=\"code-keyword\">else</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>.tech_.buffered(),n=$i.Playlist.duration(<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media());i.length&gt;<span class=\"code-number\">0</span>&amp;&amp;(n=<span class=\"code-built_in\">Math</span>.max(n,i.end(i.length<span class=\"code-number\">-1</span>))),<span class=\"code-keyword\">this</span>.mediaSource.duration!==n&amp;&amp;<span class=\"code-keyword\">this</span>.sourceUpdater_.setDuration(n)}},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.trigger(<span class=\"code-string\">\"dispose\"</span>),<span class=\"code-keyword\">this</span>.decrypter_.terminate(),<span class=\"code-keyword\">this</span>.masterPlaylistLoader_.dispose(),<span class=\"code-keyword\">this</span>.mainSegmentLoader_.dispose(),<span class=\"code-keyword\">this</span>.loadOnPlay_&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.off(<span class=\"code-string\">\"play\"</span>,<span class=\"code-keyword\">this</span>.loadOnPlay_),[<span class=\"code-string\">\"AUDIO\"</span>,<span class=\"code-string\">\"SUBTITLES\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=e.mediaTypes_[t].groups;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n <span class=\"code-keyword\">in</span> i)i[n].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e.playlistLoader&amp;&amp;e.playlistLoader.dispose()}))})),<span class=\"code-keyword\">this</span>.audioSegmentLoader_.dispose(),<span class=\"code-keyword\">this</span>.subtitleSegmentLoader_.dispose(),<span class=\"code-keyword\">this</span>.sourceUpdater_.dispose(),<span class=\"code-keyword\">this</span>.timelineChangeController_.dispose(),<span class=\"code-keyword\">this</span>.stopABRTimer_(),<span class=\"code-keyword\">this</span>.updateDuration_&amp;&amp;<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.updateDuration_),<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"durationchange\"</span>,<span class=\"code-keyword\">this</span>.handleDurationChange_),<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceopen\"</span>,<span class=\"code-keyword\">this</span>.handleSourceOpen_),<span class=\"code-keyword\">this</span>.mediaSource.removeEventListener(<span class=\"code-string\">\"sourceended\"</span>,<span class=\"code-keyword\">this</span>.handleSourceEnded_),<span class=\"code-keyword\">this</span>.off()},i.master=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_.master},i.media=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistLoader_.media()||<span class=\"code-keyword\">this</span>.initialMedia_},i.areMediaTypesKnown_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=!!<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader,t=!!<span class=\"code-keyword\">this</span>.mainSegmentLoader_.getCurrentMediaInfo_(),i=!e||!!<span class=\"code-keyword\">this</span>.audioSegmentLoader_.getCurrentMediaInfo_();<span class=\"code-keyword\">return</span>!(!t||!i)},i.getCodecsOrExclude_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t={<span class=\"code-attr\">main</span>:<span class=\"code-keyword\">this</span>.mainSegmentLoader_.getCurrentMediaInfo_()||{},<span class=\"code-attr\">audio</span>:<span class=\"code-keyword\">this</span>.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;<span class=\"code-keyword\">var</span> i=Di(<span class=\"code-keyword\">this</span>.master(),<span class=\"code-keyword\">this</span>.media()),n={},r=!!<span class=\"code-keyword\">this</span>.mediaTypes_.AUDIO.activePlaylistLoader;<span class=\"code-keyword\">if</span>(t.main.hasVideo&amp;&amp;(n.video=i.video||t.main.videoCodec||<span class=\"code-string\">\"avc1.4d400d\"</span>),t.main.isMuxed&amp;&amp;(n.video+=<span class=\"code-string\">\",\"</span>+(i.audio||t.main.audioCodec||B)),(t.main.hasAudio&amp;&amp;!t.main.isMuxed||t.audio.hasAudio||r)&amp;&amp;(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||B,t.audio.isFmp4=t.main.hasAudio&amp;&amp;!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){<span class=\"code-keyword\">var</span> a,s={};<span class=\"code-keyword\">if</span>([<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(n.hasOwnProperty(e)&amp;&amp;(r=t[e].isFmp4,o=n[e],!(r?R(o):M(o)))){<span class=\"code-keyword\">var</span> i=t[e].isFmp4?<span class=\"code-string\">\"browser\"</span>:<span class=\"code-string\">\"muxer\"</span>;s[i]=s[i]||[],s[i].push(n[e]),<span class=\"code-string\">\"audio\"</span>===e&amp;&amp;(a=i)}<span class=\"code-keyword\">var</span> r,o})),r&amp;&amp;a&amp;&amp;<span class=\"code-keyword\">this</span>.media().attributes.AUDIO){<span class=\"code-keyword\">var</span> o=<span class=\"code-keyword\">this</span>.media().attributes.AUDIO;<span class=\"code-keyword\">this</span>.master().playlists.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{(t.attributes&amp;&amp;t.attributes.AUDIO)===o&amp;&amp;t!==e.media()&amp;&amp;(t.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)})),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"excluding audio group \"</span>+o+<span class=\"code-string\">\" as \"</span>+a+<span class=\"code-string\">' does not support codec(s): \"'</span>+n.audio+<span class=\"code-string\">'\"'</span>)}<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">Object</span>.keys(s).length){<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;!<span class=\"code-keyword\">this</span>.sourceUpdater_.canChangeType()){<span class=\"code-keyword\">var</span> u=[];<span class=\"code-keyword\">if</span>([<span class=\"code-string\">\"video\"</span>,<span class=\"code-string\">\"audio\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">var</span> i=(D(e.sourceUpdater_.codecs[t]||<span class=\"code-string\">\"\"</span>)[<span class=\"code-number\">0</span>]||{}).type,r=(D(n[t]||<span class=\"code-string\">\"\"</span>)[<span class=\"code-number\">0</span>]||{}).type;i&amp;&amp;r&amp;&amp;i.toLowerCase()!==r.toLowerCase()&amp;&amp;u.push(<span class=\"code-string\">'\"'</span>+e.sourceUpdater_.codecs[t]+<span class=\"code-string\">'\" -&gt; \"'</span>+n[t]+<span class=\"code-string\">'\"'</span>)})),u.length)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.blacklistCurrentPlaylist({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.media(),<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Codec switching not supported: \"</span>+u.join(<span class=\"code-string\">\", \"</span>)+<span class=\"code-string\">\".\"</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>})}<span class=\"code-keyword\">return</span> n}<span class=\"code-keyword\">var</span> d=<span class=\"code-built_in\">Object</span>.keys(s).reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e&amp;&amp;(e+=<span class=\"code-string\">\", \"</span>),e+(t+<span class=\"code-string\">' does not support codec(s): \"'</span>)+s[t].join(<span class=\"code-string\">\",\"</span>)+<span class=\"code-string\">'\"'</span>}),<span class=\"code-string\">\"\"</span>)+<span class=\"code-string\">\".\"</span>;<span class=\"code-keyword\">this</span>.blacklistCurrentPlaylist({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.media(),<span class=\"code-attr\">internal</span>:!<span class=\"code-number\">0</span>,<span class=\"code-attr\">message</span>:d,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>})}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">this</span>.blacklistCurrentPlaylist({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.media(),<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Could not determine codecs for playlist.\"</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>})},i.tryToCreateSourceBuffers_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"open\"</span>===<span class=\"code-keyword\">this</span>.mediaSource.readyState&amp;&amp;!<span class=\"code-keyword\">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;<span class=\"code-keyword\">this</span>.areMediaTypesKnown_()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.getCodecsOrExclude_();<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">this</span>.sourceUpdater_.createSourceBuffers(e);<span class=\"code-keyword\">var</span> t=[e.video,e.audio].filter(<span class=\"code-built_in\">Boolean</span>).join(<span class=\"code-string\">\",\"</span>);<span class=\"code-keyword\">this</span>.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.master().playlists,i=[];<span class=\"code-built_in\">Object</span>.keys(t).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">n</span>)</span>{<span class=\"code-keyword\">var</span> r=t[n];<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===i.indexOf(r.id)){i.push(r.id);<span class=\"code-keyword\">var</span> a=Di(e.master,r),s=[];!a.audio||M(a.audio)||R(a.audio)||s.push(<span class=\"code-string\">\"audio codec \"</span>+a.audio),!a.video||M(a.video)||R(a.video)||s.push(<span class=\"code-string\">\"video codec \"</span>+a.video),a.text&amp;&amp;<span class=\"code-string\">\"stpp.ttml.im1t\"</span>===a.text&amp;&amp;s.push(<span class=\"code-string\">\"text codec \"</span>+a.text),s.length&amp;&amp;(r.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,e.logger_(<span class=\"code-string\">\"excluding \"</span>+r.id+<span class=\"code-string\">\" for unsupported: \"</span>+s.join(<span class=\"code-string\">\", \"</span>)))}}))},i.excludeIncompatibleVariants_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>,i=[],n=<span class=\"code-keyword\">this</span>.master().playlists,r=xi(D(e)),a=Oi(r),s=r.video&amp;&amp;D(r.video)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>,o=r.audio&amp;&amp;D(r.audio)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>;<span class=\"code-built_in\">Object</span>.keys(n).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> r=n[e];<span class=\"code-keyword\">if</span>(<span class=\"code-number\">-1</span>===i.indexOf(r.id)&amp;&amp;r.excludeUntil!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>){i.push(r.id);<span class=\"code-keyword\">var</span> u=[],d=Di(t.masterPlaylistLoader_.master,r),l=Oi(d);<span class=\"code-keyword\">if</span>(d.audio||d.video){<span class=\"code-keyword\">if</span>(l!==a&amp;&amp;u.push(<span class=\"code-string\">'codec count \"'</span>+l+<span class=\"code-string\">'\" !== \"'</span>+a+<span class=\"code-string\">'\"'</span>),!t.sourceUpdater_.canChangeType()){<span class=\"code-keyword\">var</span> c=d.video&amp;&amp;D(d.video)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>,h=d.audio&amp;&amp;D(d.audio)[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>;c&amp;&amp;s&amp;&amp;c.type.toLowerCase()!==s.type.toLowerCase()&amp;&amp;u.push(<span class=\"code-string\">'video codec \"'</span>+c.type+<span class=\"code-string\">'\" !== \"'</span>+s.type+<span class=\"code-string\">'\"'</span>),h&amp;&amp;o&amp;&amp;h.type.toLowerCase()!==o.type.toLowerCase()&amp;&amp;u.push(<span class=\"code-string\">'audio codec \"'</span>+h.type+<span class=\"code-string\">'\" !== \"'</span>+o.type+<span class=\"code-string\">'\"'</span>)}u.length&amp;&amp;(r.excludeUntil=<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>,t.logger_(<span class=\"code-string\">\"blacklisting \"</span>+r.id+<span class=\"code-string\">\": \"</span>+u.join(<span class=\"code-string\">\" &amp;&amp; \"</span>)))}}}))},i.updateAdCues_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">0</span>,i=<span class=\"code-keyword\">this</span>.seekable();i.length&amp;&amp;(t=i.start(<span class=\"code-number\">0</span>)),<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=<span class=\"code-number\">0</span>),e.segments)<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> n,r=i,a=<span class=\"code-number\">0</span>;a&lt;e.segments.length;a++){<span class=\"code-keyword\">var</span> s=e.segments[a];<span class=\"code-keyword\">if</span>(n||(n=_n(t,r+s.duration/<span class=\"code-number\">2</span>)),n){<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"cueIn\"</span><span class=\"code-keyword\">in</span> s){n.endTime=r,n.adEndTime=r,r+=s.duration,n=<span class=\"code-literal\">null</span>;<span class=\"code-keyword\">continue</span>}<span class=\"code-keyword\">if</span>(r&lt;n.endTime){r+=s.duration;<span class=\"code-keyword\">continue</span>}n.endTime+=s.duration}<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"cueOut\"</span><span class=\"code-keyword\">in</span> s&amp;&amp;((n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,n.adEndTime=r+<span class=\"code-built_in\">parseFloat</span>(s.cueOut),t.addCue(n)),<span class=\"code-string\">\"cueOutCont\"</span><span class=\"code-keyword\">in</span> s){<span class=\"code-keyword\">var</span> o=s.cueOutCont.split(<span class=\"code-string\">\"/\"</span>).map(<span class=\"code-built_in\">parseFloat</span>),u=o[<span class=\"code-number\">0</span>],d=o[<span class=\"code-number\">1</span>];(n=<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">window</span>.VTTCue(r,r+s.duration,<span class=\"code-string\">\"\"</span>)).adStartTime=r-u,n.adEndTime=n.adStartTime+d,t.addCue(n)}r+=s.duration}}(e,<span class=\"code-keyword\">this</span>.cueTagsTrack_,t)},i.goalBufferLength=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=si.GOAL_BUFFER_LENGTH,i=si.GOAL_BUFFER_LENGTH_RATE,n=<span class=\"code-built_in\">Math</span>.max(t,si.MAX_GOAL_BUFFER_LENGTH);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(t+e*i,n)},i.bufferLowWaterLine=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=si.BUFFER_LOW_WATER_LINE,i=si.BUFFER_LOW_WATER_LINE_RATE,n=<span class=\"code-built_in\">Math</span>.max(t,si.MAX_BUFFER_LOW_WATER_LINE),r=<span class=\"code-built_in\">Math</span>.max(t,si.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.min(t+e*i,<span class=\"code-keyword\">this</span>.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> si.BUFFER_HIGH_WATER_LINE},t}(r.default.EventTarget),Mn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">var</span> n,r,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?<span class=\"code-string\">\"smooth\"</span>:<span class=\"code-string\">\"fast\"</span>)+<span class=\"code-string\">\"QualityChange_\"</span>].bind(s);<span class=\"code-keyword\">if</span>(t.attributes){<span class=\"code-keyword\">var</span> u=t.attributes.RESOLUTION;<span class=\"code-keyword\">this</span>.width=u&amp;&amp;u.width,<span class=\"code-keyword\">this</span>.height=u&amp;&amp;u.height,<span class=\"code-keyword\">this</span>.bandwidth=t.attributes.BANDWIDTH}<span class=\"code-keyword\">this</span>.codecs=Di(s.master(),t),<span class=\"code-keyword\">this</span>.playlist=t,<span class=\"code-keyword\">this</span>.id=i,<span class=\"code-keyword\">this</span>.enabled=(n=e.playlists,r=t.id,a=o,<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=n.master.playlists[r],i=re(t),s=ae(t);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===e?s:(e?<span class=\"code-keyword\">delete</span> t.disabled:t.disabled=!<span class=\"code-number\">0</span>,e===s||i||(a(),e?n.trigger(<span class=\"code-string\">\"renditionenabled\"</span>):n.trigger(<span class=\"code-string\">\"renditiondisabled\"</span>)),e)})},Bn=[<span class=\"code-string\">\"seeking\"</span>,<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-string\">\"pause\"</span>,<span class=\"code-string\">\"playing\"</span>,<span class=\"code-string\">\"error\"</span>],Nn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">this</span>.masterPlaylistController_=e.masterPlaylistController,<span class=\"code-keyword\">this</span>.tech_=e.tech,<span class=\"code-keyword\">this</span>.seekable=e.seekable,<span class=\"code-keyword\">this</span>.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,<span class=\"code-keyword\">this</span>.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,<span class=\"code-keyword\">this</span>.media=e.media,<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.lastRecordedTime=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.timer_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_=<span class=\"code-literal\">null</span>,<span class=\"code-keyword\">this</span>.logger_=p(<span class=\"code-string\">\"PlaybackWatcher\"</span>),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"initialize\"</span>);<span class=\"code-keyword\">var</span> i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.monitorCurrentTime_()},n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.monitorCurrentTime_()},r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.techWaiting_()},a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.cancelTimer_()},s=<span class=\"code-keyword\">this</span>.masterPlaylistController_,o=[<span class=\"code-string\">\"main\"</span>,<span class=\"code-string\">\"subtitle\"</span>,<span class=\"code-string\">\"audio\"</span>],u={};o.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{u[e]={<span class=\"code-attr\">reset</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.resetSegmentDownloads_(e)},<span class=\"code-attr\">updateend</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> t.checkSegmentDownloads_(e)}},s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].on(<span class=\"code-string\">\"appendsdone\"</span>,u[e].updateend),s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].on(<span class=\"code-string\">\"playlistupdate\"</span>,u[e].reset),t.tech_.on([<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-string\">\"seeking\"</span>],u[e].reset)}));<span class=\"code-keyword\">var</span> d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{[<span class=\"code-string\">\"main\"</span>,<span class=\"code-string\">\"audio\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{s[i+<span class=\"code-string\">\"SegmentLoader_\"</span>][e](<span class=\"code-string\">\"appended\"</span>,t.seekingAppendCheck_)}))};<span class=\"code-keyword\">this</span>.seekingAppendCheck_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.fixesBadSeeks_()&amp;&amp;(t.consecutiveUpdates=<span class=\"code-number\">0</span>,t.lastRecordedTime=t.tech_.currentTime(),d(<span class=\"code-string\">\"off\"</span>))},<span class=\"code-keyword\">this</span>.clearSeekingAppendCheck_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> d(<span class=\"code-string\">\"off\"</span>)},<span class=\"code-keyword\">this</span>.watchForBadSeeking_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.clearSeekingAppendCheck_(),d(<span class=\"code-string\">\"on\"</span>)},<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-keyword\">this</span>.clearSeekingAppendCheck_),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"seeking\"</span>,<span class=\"code-keyword\">this</span>.watchForBadSeeking_),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"waiting\"</span>,r),<span class=\"code-keyword\">this</span>.tech_.on(Bn,a),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"canplay\"</span>,n),<span class=\"code-keyword\">this</span>.tech_.one(<span class=\"code-string\">\"play\"</span>,i),<span class=\"code-keyword\">this</span>.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.clearSeekingAppendCheck_(),t.logger_(<span class=\"code-string\">\"dispose\"</span>),t.tech_.off(<span class=\"code-string\">\"waiting\"</span>,r),t.tech_.off(Bn,a),t.tech_.off(<span class=\"code-string\">\"canplay\"</span>,n),t.tech_.off(<span class=\"code-string\">\"play\"</span>,i),t.tech_.off(<span class=\"code-string\">\"seeking\"</span>,t.watchForBadSeeking_),t.tech_.off(<span class=\"code-string\">\"seeked\"</span>,t.clearSeekingAppendCheck_),o.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].off(<span class=\"code-string\">\"appendsdone\"</span>,u[e].updateend),s[e+<span class=\"code-string\">\"SegmentLoader_\"</span>].off(<span class=\"code-string\">\"playlistupdate\"</span>,u[e].reset),t.tech_.off([<span class=\"code-string\">\"seeked\"</span>,<span class=\"code-string\">\"seeking\"</span>],u[e].reset)})),t.checkCurrentTimeTimeout_&amp;&amp;<span class=\"code-built_in\">window</span>.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}<span class=\"code-keyword\">var</span> t=e.prototype;<span class=\"code-keyword\">return</span> t.monitorCurrentTime_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.checkCurrentTime_(),<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_&amp;&amp;<span class=\"code-built_in\">window</span>.clearTimeout(<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_),<span class=\"code-keyword\">this</span>.checkCurrentTimeTimeout_=<span class=\"code-built_in\">window</span>.setTimeout(<span class=\"code-keyword\">this</span>.monitorCurrentTime_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">250</span>)},t.resetSegmentDownloads_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistController_[e+<span class=\"code-string\">\"SegmentLoader_\"</span>];<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"resetting possible stalled download count for \"</span>+e+<span class=\"code-string\">\" loader\"</span>),<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"Buffered_\"</span>]=t.buffered_()},t.checkSegmentDownloads_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.masterPlaylistController_,i=t[e+<span class=\"code-string\">\"SegmentLoader_\"</span>],n=i.buffered_(),r=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(e===t)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">if</span>(!e&amp;&amp;t||!t&amp;&amp;e)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(e.length!==t.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-number\">0</span>;i&lt;e.length;i++)<span class=\"code-keyword\">if</span>(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}(<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"Buffered_\"</span>],n);<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"Buffered_\"</span>]=n,r?<span class=\"code-keyword\">this</span>.resetSegmentDownloads_(e):(<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]++,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"found #\"</span>+<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]+<span class=\"code-string\">\" \"</span>+e+<span class=\"code-string\">\" appends that did not increase buffer (possible stalled download)\"</span>,{<span class=\"code-attr\">playlistId</span>:i.playlist_&amp;&amp;i.playlist_.id,<span class=\"code-attr\">buffered</span>:V(n)}),<span class=\"code-keyword\">this</span>[e+<span class=\"code-string\">\"StalledDownloads_\"</span>]&lt;<span class=\"code-number\">10</span>||(<span class=\"code-keyword\">this</span>.logger_(e+<span class=\"code-string\">\" loader stalled download exclusion\"</span>),<span class=\"code-keyword\">this</span>.resetSegmentDownloads_(e),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-\"</span>+e+<span class=\"code-string\">\"-download-exclusion\"</span>}),<span class=\"code-string\">\"subtitle\"</span>!==e&amp;&amp;t.blacklistCurrentPlaylist({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Excessive \"</span>+e+<span class=\"code-string\">\" segment downloading detected.\"</span>},<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>)))},t.checkCurrentTime_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.tech_.paused()&amp;&amp;!<span class=\"code-keyword\">this</span>.tech_.seeking()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.lastRecordedTime===e&amp;&amp;(!t.length||e+F&gt;=t.end(t.length<span class=\"code-number\">-1</span>)))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.techWaiting_();<span class=\"code-keyword\">this</span>.consecutiveUpdates&gt;=<span class=\"code-number\">5</span>&amp;&amp;e===<span class=\"code-keyword\">this</span>.lastRecordedTime?(<span class=\"code-keyword\">this</span>.consecutiveUpdates++,<span class=\"code-keyword\">this</span>.waiting_()):e===<span class=\"code-keyword\">this</span>.lastRecordedTime?<span class=\"code-keyword\">this</span>.consecutiveUpdates++:(<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.lastRecordedTime=e)}},t.cancelTimer_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.consecutiveUpdates=<span class=\"code-number\">0</span>,<span class=\"code-keyword\">this</span>.timer_&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"cancelTimer_\"</span>),clearTimeout(<span class=\"code-keyword\">this</span>.timer_)),<span class=\"code-keyword\">this</span>.timer_=<span class=\"code-literal\">null</span>},t.fixesBadSeeks_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.tech_.seeking())<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> e,t=<span class=\"code-keyword\">this</span>.seekable(),i=<span class=\"code-keyword\">this</span>.tech_.currentTime();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.afterSeekableWindow_(t,i,<span class=\"code-keyword\">this</span>.media(),<span class=\"code-keyword\">this</span>.allowSeeksWithinUnsafeLiveWindow)&amp;&amp;(e=t.end(t.length<span class=\"code-number\">-1</span>)),<span class=\"code-keyword\">this</span>.beforeSeekableWindow_(t,i)){<span class=\"code-keyword\">var</span> n=t.start(<span class=\"code-number\">0</span>);e=n+(n===t.end(<span class=\"code-number\">0</span>)?<span class=\"code-number\">0</span>:F)}<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e)<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Trying to seek outside of seekable at time \"</span>+i+<span class=\"code-string\">\" with seekable range \"</span>+W(t)+<span class=\"code-string\">\". Seeking to \"</span>+e+<span class=\"code-string\">\".\"</span>),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> r=<span class=\"code-keyword\">this</span>.masterPlaylistController_.sourceUpdater_,a=<span class=\"code-keyword\">this</span>.tech_.buffered(),s=r.audioBuffer?r.audioBuffered():<span class=\"code-literal\">null</span>,o=r.videoBuffer?r.videoBuffered():<span class=\"code-literal\">null</span>,u=<span class=\"code-keyword\">this</span>.media(),d=u.partTargetDuration?u.partTargetDuration:<span class=\"code-number\">2</span>*(u.targetDuration-N),l=[s,o],c=<span class=\"code-number\">0</span>;c&lt;l.length;c++)<span class=\"code-keyword\">if</span>(l[c]&amp;&amp;X(l[c],i)&lt;d)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> h=G(a,i);<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>!==h.length&amp;&amp;(e=h.start(<span class=\"code-number\">0</span>)+F,<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Buffered region starts (\"</span>+h.start(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\")  just beyond seek point (\"</span>+i+<span class=\"code-string\">\"). Seeking to \"</span>+e+<span class=\"code-string\">\".\"</span>),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e),!<span class=\"code-number\">0</span>)},t.waiting_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-keyword\">this</span>.techWaiting_()){<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.tech_.currentTime(),t=<span class=\"code-keyword\">this</span>.tech_.buffered(),i=H(t,e);<span class=\"code-keyword\">return</span> i.length&amp;&amp;e+<span class=\"code-number\">3</span>&lt;=i.end(<span class=\"code-number\">0</span>)?(<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(e),<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Stopped at \"</span>+e+<span class=\"code-string\">\" while inside a buffered region [\"</span>+i.start(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\" -&gt; \"</span>+i.end(<span class=\"code-number\">0</span>)+<span class=\"code-string\">\"]. Attempting to resume playback by seeking to the current time.\"</span>),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-unknown-waiting\"</span>}),<span class=\"code-keyword\">void</span> <span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-unknown-waiting\"</span>})):<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>}},t.techWaiting_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.seekable(),t=<span class=\"code-keyword\">this</span>.tech_.currentTime();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.tech_.seeking()||<span class=\"code-literal\">null</span>!==<span class=\"code-keyword\">this</span>.timer_)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.beforeSeekableWindow_(e,t)){<span class=\"code-keyword\">var</span> i=e.end(e.length<span class=\"code-number\">-1</span>);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Fell out of live window at time \"</span>+t+<span class=\"code-string\">\". Seeking to live point (seekable end) \"</span>+i),<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(i),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-live-resync\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-live-resync\"</span>}),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=<span class=\"code-keyword\">this</span>.tech_.buffered();<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.videoUnderflow_({<span class=\"code-attr\">audioBuffered</span>:n.audioBuffered(),<span class=\"code-attr\">videoBuffered</span>:n.videoBuffered(),<span class=\"code-attr\">currentTime</span>:t}))<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(t),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-video-underflow\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-video-underflow\"</span>}),!<span class=\"code-number\">0</span>;<span class=\"code-keyword\">var</span> a=G(r,t);<span class=\"code-keyword\">if</span>(a.length&gt;<span class=\"code-number\">0</span>){<span class=\"code-keyword\">var</span> s=a.start(<span class=\"code-number\">0</span>)-t;<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Stopped at \"</span>+t+<span class=\"code-string\">\", setting timer for \"</span>+s+<span class=\"code-string\">\", seeking to \"</span>+a.start(<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-keyword\">this</span>.timer_=setTimeout(<span class=\"code-keyword\">this</span>.skipTheGap_.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-number\">1e3</span>*s,t),!<span class=\"code-number\">0</span>}<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>},t.afterSeekableWindow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=!<span class=\"code-number\">1</span>),!e.length)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> r=e.end(e.length<span class=\"code-number\">-1</span>)+F;<span class=\"code-keyword\">return</span>!i.endList&amp;&amp;n&amp;&amp;(r=e.end(e.length<span class=\"code-number\">-1</span>)+<span class=\"code-number\">3</span>*i.targetDuration),t&gt;r},t.beforeSeekableWindow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span>!!(e.length&amp;&amp;e.start(<span class=\"code-number\">0</span>)&gt;<span class=\"code-number\">0</span>&amp;&amp;t&lt;e.start(<span class=\"code-number\">0</span>)-<span class=\"code-keyword\">this</span>.liveRangeSafeTimeDelta)},t.videoUnderflow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;<span class=\"code-keyword\">if</span>(t){<span class=\"code-keyword\">var</span> r;<span class=\"code-keyword\">if</span>(t.length&amp;&amp;i.length){<span class=\"code-keyword\">var</span> a=H(t,n<span class=\"code-number\">-3</span>),s=H(t,n),o=H(i,n);o.length&amp;&amp;!s.length&amp;&amp;a.length&amp;&amp;(r={<span class=\"code-attr\">start</span>:a.end(<span class=\"code-number\">0</span>),<span class=\"code-attr\">end</span>:o.end(<span class=\"code-number\">0</span>)})}<span class=\"code-keyword\">else</span> G(t,n).length||(r=<span class=\"code-keyword\">this</span>.gapFromVideoUnderflow_(t,n));<span class=\"code-keyword\">return</span>!!r&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"Encountered a gap in video from \"</span>+r.start+<span class=\"code-string\">\" to \"</span>+r.end+<span class=\"code-string\">\". Seeking to current time \"</span>+n),!<span class=\"code-number\">0</span>)}},t.skipTheGap_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-keyword\">this</span>.tech_.buffered(),i=<span class=\"code-keyword\">this</span>.tech_.currentTime(),n=G(t,i);<span class=\"code-keyword\">this</span>.cancelTimer_(),<span class=\"code-number\">0</span>!==n.length&amp;&amp;i===e&amp;&amp;(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"skipTheGap_:\"</span>,<span class=\"code-string\">\"currentTime:\"</span>,i,<span class=\"code-string\">\"scheduled currentTime:\"</span>,e,<span class=\"code-string\">\"nextRange start:\"</span>,n.start(<span class=\"code-number\">0</span>)),<span class=\"code-keyword\">this</span>.tech_.setCurrentTime(n.start(<span class=\"code-number\">0</span>)+N),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-gap-skip\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-gap-skip\"</span>}))},t.gapFromVideoUnderflow_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(e.length&lt;<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span> r.default.createTimeRanges();<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> t=[],i=<span class=\"code-number\">1</span>;i&lt;e.length;i++){<span class=\"code-keyword\">var</span> n=e.end(i<span class=\"code-number\">-1</span>),a=e.start(i);t.push([n,a])}<span class=\"code-keyword\">return</span> r.default.createTimeRanges(t)}(e),n=<span class=\"code-number\">0</span>;n&lt;i.length;n++){<span class=\"code-keyword\">var</span> a=i.start(n),s=i.end(n);<span class=\"code-keyword\">if</span>(t-a&lt;<span class=\"code-number\">4</span>&amp;&amp;t-a&gt;<span class=\"code-number\">2</span>)<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">start</span>:a,<span class=\"code-attr\">end</span>:s}}<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>},e}(),Fn={<span class=\"code-attr\">errorInterval</span>:<span class=\"code-number\">30</span>,<span class=\"code-attr\">getSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> e(<span class=\"code-keyword\">this</span>.tech({<span class=\"code-attr\">IWillNotUseThisInPlugins</span>:!<span class=\"code-number\">0</span>}).currentSource_||<span class=\"code-keyword\">this</span>.currentSource())}},qn=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">0</span>,a=<span class=\"code-number\">0</span>,s=r.default.mergeOptions(Fn,i);t.ready((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-error-reload-initialized\"</span>}),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload-initialized\"</span>})}));<span class=\"code-keyword\">var</span> o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{a&amp;&amp;t.currentTime(a)},u=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-literal\">null</span>!=e&amp;&amp;(a=t.duration()!==<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>&amp;&amp;t.currentTime()||<span class=\"code-number\">0</span>,t.one(<span class=\"code-string\">\"loadedmetadata\"</span>,o),t.src(e),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-error-reload\"</span>}),t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload\"</span>}),t.play())},d=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Date</span>.now()-n&lt;<span class=\"code-number\">1e3</span>*s.errorInterval?(t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-error-reload-canceled\"</span>}),<span class=\"code-keyword\">void</span> t.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-error-reload-canceled\"</span>})):s.getSource&amp;&amp;<span class=\"code-string\">\"function\"</span>==<span class=\"code-keyword\">typeof</span> s.getSource?(n=<span class=\"code-built_in\">Date</span>.now(),s.getSource.call(t,u)):<span class=\"code-keyword\">void</span> r.default.log.error(<span class=\"code-string\">\"ERROR: reloadSourceOnError - The option getSource must be a function!\"</span>)},l=<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">e</span>(<span class=\"code-params\"></span>)</span>{t.off(<span class=\"code-string\">\"loadedmetadata\"</span>,o),t.off(<span class=\"code-string\">\"error\"</span>,d),t.off(<span class=\"code-string\">\"dispose\"</span>,e)};t.on(<span class=\"code-string\">\"error\"</span>,d),t.on(<span class=\"code-string\">\"dispose\"</span>,l),t.reloadSourceOnError=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i</span>)</span>{l(),e(t,i)}},Hn=<span class=\"code-string\">\"2.12.1\"</span>,Gn={<span class=\"code-attr\">PlaylistLoader</span>:Ee,<span class=\"code-attr\">Playlist</span>:ce,<span class=\"code-attr\">utils</span>:He,<span class=\"code-attr\">STANDARD_PLAYLIST_SELECTOR</span>:Fi,<span class=\"code-attr\">INITIAL_PLAYLIST_SELECTOR</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.playlists.master.playlists.filter(ce.isEnabled);<span class=\"code-keyword\">return</span> Mi(t,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> Bi(e,t)})),t.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span>!!Di(e.playlists.master,t).video}))[<span class=\"code-number\">0</span>]||<span class=\"code-literal\">null</span>},<span class=\"code-attr\">lastBandwidthSelector</span>:Fi,<span class=\"code-attr\">movingAverageBandwidthSelector</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-number\">-1</span>,i=<span class=\"code-number\">-1</span>;<span class=\"code-keyword\">if</span>(e&lt;<span class=\"code-number\">0</span>||e&gt;<span class=\"code-number\">1</span>)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Moving average bandwidth decay must be between 0 and 1.\"</span>);<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> n=<span class=\"code-keyword\">this</span>.useDevicePixelRatio&amp;&amp;<span class=\"code-built_in\">window</span>.devicePixelRatio||<span class=\"code-number\">1</span>;<span class=\"code-keyword\">return</span> t&lt;<span class=\"code-number\">0</span>&amp;&amp;(t=<span class=\"code-keyword\">this</span>.systemBandwidth,i=<span class=\"code-keyword\">this</span>.systemBandwidth),<span class=\"code-keyword\">this</span>.systemBandwidth&gt;<span class=\"code-number\">0</span>&amp;&amp;<span class=\"code-keyword\">this</span>.systemBandwidth!==i&amp;&amp;(t=e*<span class=\"code-keyword\">this</span>.systemBandwidth+(<span class=\"code-number\">1</span>-e)*t,i=<span class=\"code-keyword\">this</span>.systemBandwidth),Ni(<span class=\"code-keyword\">this</span>.playlists.master,t,<span class=\"code-built_in\">parseInt</span>(Ri(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"width\"</span>),<span class=\"code-number\">10</span>)*n,<span class=\"code-built_in\">parseInt</span>(Ri(<span class=\"code-keyword\">this</span>.tech_.el(),<span class=\"code-string\">\"height\"</span>),<span class=\"code-number\">10</span>)*n,<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions,<span class=\"code-keyword\">this</span>.masterPlaylistController_)}},<span class=\"code-attr\">comparePlaylistBandwidth</span>:Bi,<span class=\"code-attr\">comparePlaylistResolution</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i,n;<span class=\"code-keyword\">return</span> e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width&amp;&amp;(i=e.attributes.RESOLUTION.width),i=i||<span class=\"code-built_in\">window</span>.Number.MAX_VALUE,t.attributes.RESOLUTION&amp;&amp;t.attributes.RESOLUTION.width&amp;&amp;(n=t.attributes.RESOLUTION.width),i===(n=n||<span class=\"code-built_in\">window</span>.Number.MAX_VALUE)&amp;&amp;e.attributes.BANDWIDTH&amp;&amp;t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},<span class=\"code-attr\">xhr</span>:ke()};<span class=\"code-built_in\">Object</span>.keys(si).forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-built_in\">Object</span>.defineProperty(Gn,e,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"using Vhs.\"</span>+e+<span class=\"code-string\">\" is UNSAFE be sure you know what you are doing\"</span>),si[e]},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{r.default.log.warn(<span class=\"code-string\">\"using Vhs.\"</span>+e+<span class=\"code-string\">\" is UNSAFE be sure you know what you are doing\"</span>),<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> t||t&lt;<span class=\"code-number\">0</span>?r.default.log.warn(<span class=\"code-string\">\"value of Vhs.\"</span>+e+<span class=\"code-string\">\" must be greater than or equal to 0\"</span>):si[e]=t}})}));<span class=\"code-keyword\">var</span> Wn=<span class=\"code-string\">\"videojs-vhs\"</span>,Vn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i=t.media(),n=<span class=\"code-number\">-1</span>,r=<span class=\"code-number\">0</span>;r&lt;e.length;r++)<span class=\"code-keyword\">if</span>(e[r].id===i.id){n=r;<span class=\"code-keyword\">break</span>}e.selectedIndex_=n,e.trigger({<span class=\"code-attr\">selectedIndex</span>:n,<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"change\"</span>})};Gn.canPlaySource=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"HLS is no longer a tech. Please remove it from your player's techOrder.\"</span>)};<span class=\"code-keyword\">var</span> jn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> n={};t&amp;&amp;t.attributes&amp;&amp;t.attributes.CODECS&amp;&amp;(n=xi(D(t.attributes.CODECS))),i&amp;&amp;i.attributes&amp;&amp;i.attributes.CODECS&amp;&amp;(n.audio=i.attributes.CODECS);<span class=\"code-keyword\">var</span> a=U(n.video),s=U(n.audio),o={};<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> u <span class=\"code-keyword\">in</span> e)o[u]={},s&amp;&amp;(o[u].audioContentType=s),a&amp;&amp;(o[u].videoContentType=a),t.contentProtection&amp;&amp;t.contentProtection[u]&amp;&amp;t.contentProtection[u].pssh&amp;&amp;(o[u].pssh=t.contentProtection[u].pssh),<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> e[u]&amp;&amp;(o[u].url=e[u]);<span class=\"code-keyword\">return</span> r.default.mergeOptions(e,o)},Xn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> e.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{<span class=\"code-keyword\">if</span>(!i.contentProtection)<span class=\"code-keyword\">return</span> e;<span class=\"code-keyword\">var</span> n=t.reduce((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> n=i.contentProtection[t];<span class=\"code-keyword\">return</span> n&amp;&amp;n.pssh&amp;&amp;(e[t]={<span class=\"code-attr\">pssh</span>:n.pssh}),e}),{});<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Object</span>.keys(n).length&amp;&amp;e.push(n),e}),[])},zn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;<span class=\"code-keyword\">if</span>(!t.eme.initializeMediaKeys)<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Promise</span>.resolve();<span class=\"code-keyword\">var</span> a=n?r.concat([n]):r,s=Xn(a,<span class=\"code-built_in\">Object</span>.keys(i)),o=[],u=[];<span class=\"code-keyword\">return</span> s.forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{u.push(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Promise</span>((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,i</span>)</span>{t.tech_.one(<span class=\"code-string\">\"keysessioncreated\"</span>,e)}))),o.push(<span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Promise</span>((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">i,n</span>)</span>{t.eme.initializeMediaKeys({<span class=\"code-attr\">keySystems</span>:e},(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{e?n(e):i()}))})))})),<span class=\"code-built_in\">Promise</span>.race([<span class=\"code-built_in\">Promise</span>.all(o),<span class=\"code-built_in\">Promise</span>.race(u)])},Qn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.player,i=e.sourceKeySystems,n=e.media,a=e.audioMedia,s=jn(i,n,a);<span class=\"code-keyword\">return</span>!(!s||(t.currentSource().keySystems=s,s&amp;&amp;!t.eme&amp;&amp;(r.default.log.warn(<span class=\"code-string\">\"DRM encrypted source cannot be decrypted without a DRM plugin\"</span>),<span class=\"code-number\">1</span>)))},Yn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">window</span>.localStorage)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-built_in\">window</span>.localStorage.getItem(Wn);<span class=\"code-keyword\">if</span>(!e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">try</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">JSON</span>.parse(e)}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>}},Kn=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>===e.toLowerCase().indexOf(<span class=\"code-string\">\"data:application/vnd.videojs.vhs+json,\"</span>)?<span class=\"code-built_in\">JSON</span>.parse(e.substring(e.indexOf(<span class=\"code-string\">\",\"</span>)+<span class=\"code-number\">1</span>)):e};Gn.supportsNativeHls=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">document</span>||!<span class=\"code-built_in\">document</span>.createElement)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> e=<span class=\"code-built_in\">document</span>.createElement(<span class=\"code-string\">\"video\"</span>);<span class=\"code-keyword\">return</span>!!r.default.getTech(<span class=\"code-string\">\"Html5\"</span>).isSupported()&amp;&amp;[<span class=\"code-string\">\"application/vnd.apple.mpegurl\"</span>,<span class=\"code-string\">\"audio/mpegurl\"</span>,<span class=\"code-string\">\"audio/x-mpegurl\"</span>,<span class=\"code-string\">\"application/x-mpegurl\"</span>,<span class=\"code-string\">\"video/x-mpegurl\"</span>,<span class=\"code-string\">\"video/mpegurl\"</span>,<span class=\"code-string\">\"application/mpegurl\"</span>].some((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-regexp\">/maybe|probably/i</span>.test(e.canPlayType(t))}))}(),Gn.supportsNativeDash=!!(<span class=\"code-built_in\">document</span>&amp;&amp;<span class=\"code-built_in\">document</span>.createElement&amp;&amp;r.default.getTech(<span class=\"code-string\">\"Html5\"</span>).isSupported())&amp;&amp;<span class=\"code-regexp\">/maybe|probably/i</span>.test(<span class=\"code-built_in\">document</span>.createElement(<span class=\"code-string\">\"video\"</span>).canPlayType(<span class=\"code-string\">\"application/dash+xml\"</span>)),Gn.supportsTypeNatively=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span><span class=\"code-string\">\"hls\"</span>===e?Gn.supportsNativeHls:<span class=\"code-string\">\"dash\"</span>===e&amp;&amp;Gn.supportsNativeDash},Gn.isSupported=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"HLS is no longer a tech. Please remove it from your player's techOrder.\"</span>)};<span class=\"code-keyword\">var</span> $n=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">t</span>(<span class=\"code-params\">t,i,n</span>)</span>{<span class=\"code-keyword\">var</span> a;<span class=\"code-keyword\">if</span>(a=e.call(<span class=\"code-keyword\">this</span>,i,r.default.mergeOptions(n.hls,n.vhs))||<span class=\"code-keyword\">this</span>,n.hls&amp;&amp;<span class=\"code-built_in\">Object</span>.keys(n.hls).length&amp;&amp;r.default.log.warn(<span class=\"code-string\">\"Using hls options is deprecated. Use vhs instead.\"</span>),<span class=\"code-string\">\"number\"</span>==<span class=\"code-keyword\">typeof</span> n.initialBandwidth&amp;&amp;(a.options_.bandwidth=n.initialBandwidth),a.logger_=p(<span class=\"code-string\">\"VhsHandler\"</span>),i.options_&amp;&amp;i.options_.playerId){<span class=\"code-keyword\">var</span> o=r.default(i.options_.playerId);o.hasOwnProperty(<span class=\"code-string\">\"hls\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(o,<span class=\"code-string\">\"hls\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"player.hls is deprecated. Use player.tech().vhs instead.\"</span>),i.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-player-access\"</span>}),s(a)},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),o.hasOwnProperty(<span class=\"code-string\">\"vhs\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(o,<span class=\"code-string\">\"vhs\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"player.vhs is deprecated. Use player.tech().vhs instead.\"</span>),i.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-player-access\"</span>}),s(a)},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),o.hasOwnProperty(<span class=\"code-string\">\"dash\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(o,<span class=\"code-string\">\"dash\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"player.dash is deprecated. Use player.tech().vhs instead.\"</span>),s(a)},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),a.player_=o}<span class=\"code-keyword\">if</span>(a.tech_=i,a.source_=t,a.stats={},a.ignoreNextSeekingEvent_=!<span class=\"code-number\">1</span>,a.setOptions_(),a.options_.overrideNative&amp;&amp;i.overrideNativeAudioTracks&amp;&amp;i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!<span class=\"code-number\">0</span>),i.overrideNativeVideoTracks(!<span class=\"code-number\">0</span>);<span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span>(a.options_.overrideNative&amp;&amp;(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"Overriding native HLS requires emulated tracks. See https://git.io/vMpjB\"</span>);<span class=\"code-keyword\">return</span> a.on(<span class=\"code-built_in\">document</span>,[<span class=\"code-string\">\"fullscreenchange\"</span>,<span class=\"code-string\">\"webkitfullscreenchange\"</span>,<span class=\"code-string\">\"mozfullscreenchange\"</span>,<span class=\"code-string\">\"MSFullscreenChange\"</span>],(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=<span class=\"code-built_in\">document</span>.fullscreenElement||<span class=\"code-built_in\">document</span>.webkitFullscreenElement||<span class=\"code-built_in\">document</span>.mozFullScreenElement||<span class=\"code-built_in\">document</span>.msFullscreenElement;t&amp;&amp;t.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()})),a.on(a.tech_,<span class=\"code-string\">\"seeking\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ignoreNextSeekingEvent_?<span class=\"code-keyword\">this</span>.ignoreNextSeekingEvent_=!<span class=\"code-number\">1</span>:<span class=\"code-keyword\">this</span>.setCurrentTime(<span class=\"code-keyword\">this</span>.tech_.currentTime())})),a.on(a.tech_,<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.error()&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_.pauseLoading()})),a.on(a.tech_,<span class=\"code-string\">\"play\"</span>,a.play),a}u(t,e);<span class=\"code-keyword\">var</span> i=t.prototype;<span class=\"code-keyword\">return</span> i.setOptions_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.options_.withCredentials=<span class=\"code-keyword\">this</span>.options_.withCredentials||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.handleManifestRedirects=!<span class=\"code-number\">1</span>!==<span class=\"code-keyword\">this</span>.options_.handleManifestRedirects,<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions=!<span class=\"code-number\">1</span>!==<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions,<span class=\"code-keyword\">this</span>.options_.useDevicePixelRatio=<span class=\"code-keyword\">this</span>.options_.useDevicePixelRatio||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.smoothQualityChange=<span class=\"code-keyword\">this</span>.options_.smoothQualityChange||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==<span class=\"code-keyword\">this</span>.source_.useBandwidthFromLocalStorage?<span class=\"code-keyword\">this</span>.source_.useBandwidthFromLocalStorage:<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.useNetworkInformationApi=<span class=\"code-keyword\">this</span>.options_.useNetworkInformationApi||!<span class=\"code-number\">1</span>,<span class=\"code-keyword\">this</span>.options_.customTagParsers=<span class=\"code-keyword\">this</span>.options_.customTagParsers||[],<span class=\"code-keyword\">this</span>.options_.customTagMappers=<span class=\"code-keyword\">this</span>.options_.customTagMappers||[],<span class=\"code-keyword\">this</span>.options_.cacheEncryptionKeys=<span class=\"code-keyword\">this</span>.options_.cacheEncryptionKeys||!<span class=\"code-number\">1</span>,<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.blacklistDuration&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.blacklistDuration=<span class=\"code-number\">300</span>),<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;<span class=\"code-keyword\">this</span>.options_.useBandwidthFromLocalStorage){<span class=\"code-keyword\">var</span> t=Yn();t&amp;&amp;t.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.bandwidth=t.bandwidth,<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-bandwidth-from-local-storage\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-bandwidth-from-local-storage\"</span>})),t&amp;&amp;t.throughput&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.throughput=t.throughput,<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"vhs-throughput-from-local-storage\"</span>}),<span class=\"code-keyword\">this</span>.tech_.trigger({<span class=\"code-attr\">type</span>:<span class=\"code-string\">\"usage\"</span>,<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"hls-throughput-from-local-storage\"</span>}))}<span class=\"code-string\">\"number\"</span>!=<span class=\"code-keyword\">typeof</span> <span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.options_.bandwidth=si.INITIAL_BANDWIDTH),<span class=\"code-keyword\">this</span>.options_.enableLowInitialPlaylist=<span class=\"code-keyword\">this</span>.options_.enableLowInitialPlaylist&amp;&amp;<span class=\"code-keyword\">this</span>.options_.bandwidth===si.INITIAL_BANDWIDTH,[<span class=\"code-string\">\"withCredentials\"</span>,<span class=\"code-string\">\"useDevicePixelRatio\"</span>,<span class=\"code-string\">\"limitRenditionByPlayerDimensions\"</span>,<span class=\"code-string\">\"bandwidth\"</span>,<span class=\"code-string\">\"smoothQualityChange\"</span>,<span class=\"code-string\">\"customTagParsers\"</span>,<span class=\"code-string\">\"customTagMappers\"</span>,<span class=\"code-string\">\"handleManifestRedirects\"</span>,<span class=\"code-string\">\"cacheEncryptionKeys\"</span>,<span class=\"code-string\">\"playlistSelector\"</span>,<span class=\"code-string\">\"initialPlaylistSelector\"</span>,<span class=\"code-string\">\"experimentalBufferBasedABR\"</span>,<span class=\"code-string\">\"liveRangeSafeTimeDelta\"</span>,<span class=\"code-string\">\"experimentalLLHLS\"</span>,<span class=\"code-string\">\"useNetworkInformationApi\"</span>,<span class=\"code-string\">\"experimentalExactManifestTimings\"</span>,<span class=\"code-string\">\"experimentalLeastPixelDiffSelector\"</span>].forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==e.source_[t]&amp;&amp;(e.options_[t]=e.source_[t])})),<span class=\"code-keyword\">this</span>.limitRenditionByPlayerDimensions=<span class=\"code-keyword\">this</span>.options_.limitRenditionByPlayerDimensions,<span class=\"code-keyword\">this</span>.useDevicePixelRatio=<span class=\"code-keyword\">this</span>.options_.useDevicePixelRatio},i.src=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">var</span> i=<span class=\"code-keyword\">this</span>;<span class=\"code-keyword\">if</span>(e){<span class=\"code-keyword\">this</span>.setOptions_(),<span class=\"code-keyword\">this</span>.options_.src=Kn(<span class=\"code-keyword\">this</span>.source_.src),<span class=\"code-keyword\">this</span>.options_.tech=<span class=\"code-keyword\">this</span>.tech_,<span class=\"code-keyword\">this</span>.options_.externVhs=Gn,<span class=\"code-keyword\">this</span>.options_.sourceType=Ce(t),<span class=\"code-keyword\">this</span>.options_.seekTo=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{i.tech_.setCurrentTime(e)},<span class=\"code-keyword\">this</span>.options_.smoothQualityChange&amp;&amp;r.default.log.warn(<span class=\"code-string\">\"smoothQualityChange is deprecated and will be removed in the next major version\"</span>),<span class=\"code-keyword\">this</span>.masterPlaylistController_=<span class=\"code-keyword\">new</span> Rn(<span class=\"code-keyword\">this</span>.options_);<span class=\"code-keyword\">var</span> n=r.default.mergeOptions({<span class=\"code-attr\">liveRangeSafeTimeDelta</span>:F},<span class=\"code-keyword\">this</span>.options_,{<span class=\"code-attr\">seekable</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.seekable()},<span class=\"code-attr\">media</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.media()},<span class=\"code-attr\">masterPlaylistController</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_});<span class=\"code-keyword\">this</span>.playbackWatcher_=<span class=\"code-keyword\">new</span> Nn(n),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"error\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=r.default.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;<span class=\"code-string\">\"object\"</span>!=<span class=\"code-keyword\">typeof</span> t||t.code?<span class=\"code-string\">\"string\"</span>==<span class=\"code-keyword\">typeof</span> t&amp;&amp;(t={<span class=\"code-attr\">message</span>:t,<span class=\"code-attr\">code</span>:<span class=\"code-number\">3</span>}):t.code=<span class=\"code-number\">3</span>,e.error(t)}));<span class=\"code-keyword\">var</span> a=<span class=\"code-keyword\">this</span>.options_.experimentalBufferBasedABR?Gn.movingAverageBandwidthSelector(<span class=\"code-number\">.55</span>):Gn.STANDARD_PLAYLIST_SELECTOR;<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist=<span class=\"code-keyword\">this</span>.selectPlaylist?<span class=\"code-keyword\">this</span>.selectPlaylist.bind(<span class=\"code-keyword\">this</span>):a.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectInitialPlaylist=Gn.INITIAL_PLAYLIST_SELECTOR.bind(<span class=\"code-keyword\">this</span>),<span class=\"code-keyword\">this</span>.playlists=<span class=\"code-keyword\">this</span>.masterPlaylistController_.masterPlaylistLoader_,<span class=\"code-keyword\">this</span>.mediaSource=<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaSource,<span class=\"code-built_in\">Object</span>.defineProperties(<span class=\"code-keyword\">this</span>,{<span class=\"code-attr\">selectPlaylist</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.selectPlaylist=e.bind(<span class=\"code-keyword\">this</span>)}},<span class=\"code-attr\">throughput</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.count=<span class=\"code-number\">1</span>}},<span class=\"code-attr\">bandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=<span class=\"code-built_in\">window</span>.navigator.connection||<span class=\"code-built_in\">window</span>.navigator.mozConnection||<span class=\"code-built_in\">window</span>.navigator.webkitConnection,i=<span class=\"code-number\">1e7</span>;<span class=\"code-keyword\">if</span>(<span class=\"code-keyword\">this</span>.options_.useNetworkInformationApi&amp;&amp;t){<span class=\"code-keyword\">var</span> n=<span class=\"code-number\">1e3</span>*t.downlink*<span class=\"code-number\">1e3</span>;e=n&gt;=i&amp;&amp;e&gt;=i?<span class=\"code-built_in\">Math</span>.max(e,n):n}<span class=\"code-keyword\">return</span> e},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,<span class=\"code-keyword\">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput={<span class=\"code-attr\">rate</span>:<span class=\"code-number\">0</span>,<span class=\"code-attr\">count</span>:<span class=\"code-number\">0</span>}}},<span class=\"code-attr\">systemBandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e,t=<span class=\"code-number\">1</span>/(<span class=\"code-keyword\">this</span>.bandwidth||<span class=\"code-number\">1</span>);<span class=\"code-keyword\">return</span> e=<span class=\"code-keyword\">this</span>.throughput&gt;<span class=\"code-number\">0</span>?<span class=\"code-number\">1</span>/<span class=\"code-keyword\">this</span>.throughput:<span class=\"code-number\">0</span>,<span class=\"code-built_in\">Math</span>.floor(<span class=\"code-number\">1</span>/(t+e))},<span class=\"code-attr\">set</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{r.default.log.error(<span class=\"code-string\">'The \"systemBandwidth\" property is read-only'</span>)}}}),<span class=\"code-keyword\">this</span>.options_.bandwidth&amp;&amp;(<span class=\"code-keyword\">this</span>.bandwidth=<span class=\"code-keyword\">this</span>.options_.bandwidth),<span class=\"code-keyword\">this</span>.options_.throughput&amp;&amp;(<span class=\"code-keyword\">this</span>.throughput=<span class=\"code-keyword\">this</span>.options_.throughput),<span class=\"code-built_in\">Object</span>.defineProperties(<span class=\"code-keyword\">this</span>.stats,{<span class=\"code-attr\">bandwidth</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.bandwidth||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequests</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequests_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsAborted</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequestsAborted_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsTimedout</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequestsTimedout_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaRequestsErrored</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaRequestsErrored_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaTransferDuration</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaTransferDuration_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaBytesTransferred</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaBytesTransferred_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaSecondsLoaded</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaSecondsLoaded_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mediaAppends</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mediaAppends_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">mainAppendsToLoadedData</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.mainAppendsToLoadedData_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">audioAppendsToLoadedData</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.audioAppendsToLoadedData_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">appendsToLoadedData</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.appendsToLoadedData_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">timeToLoadedData</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.masterPlaylistController_.timeToLoadedData_()||<span class=\"code-number\">0</span>},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">buffered</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> V(i.tech_.buffered())},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentTime</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.currentTime()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentSource</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.currentSource_},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">currentTech</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.name_},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">duration</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.duration()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">master</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.playlists.master},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">playerDimensions</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.currentDimensions()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">seekable</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> V(i.tech_.seekable())},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">timestamp</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Date</span>.now()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>},<span class=\"code-attr\">videoPlaybackQuality</span>:{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> i.tech_.getVideoPlaybackQuality()},<span class=\"code-attr\">enumerable</span>:!<span class=\"code-number\">0</span>}}),<span class=\"code-keyword\">this</span>.tech_.one(<span class=\"code-string\">\"canplay\"</span>,<span class=\"code-keyword\">this</span>.masterPlaylistController_.setupFirstPlay.bind(<span class=\"code-keyword\">this</span>.masterPlaylistController_)),<span class=\"code-keyword\">this</span>.tech_.on(<span class=\"code-string\">\"bandwidthupdate\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.options_.useBandwidthFromLocalStorage&amp;&amp;<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">if</span>(!<span class=\"code-built_in\">window</span>.localStorage)<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>;<span class=\"code-keyword\">var</span> t=Yn();t=t?r.default.mergeOptions(t,e):e;<span class=\"code-keyword\">try</span>{<span class=\"code-built_in\">window</span>.localStorage.setItem(Wn,<span class=\"code-built_in\">JSON</span>.stringify(t))}<span class=\"code-keyword\">catch</span>(e){<span class=\"code-keyword\">return</span>!<span class=\"code-number\">1</span>}}({<span class=\"code-attr\">bandwidth</span>:i.bandwidth,<span class=\"code-attr\">throughput</span>:<span class=\"code-built_in\">Math</span>.round(i.throughput)})})),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"selectedinitialmedia\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e;(e=i).representations=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t=e.masterPlaylistController_.master(),i=le(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;<span class=\"code-keyword\">return</span> i?i.filter((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">return</span>!re(e)})).map((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t,i</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> Mn(e,t,t.id)})):[]}})),<span class=\"code-keyword\">this</span>.masterPlaylistController_.sourceUpdater_.on(<span class=\"code-string\">\"createdsourcebuffers\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{i.setupEme_()})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-keyword\">this</span>.masterPlaylistController_,<span class=\"code-string\">\"progress\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.tech_.trigger(<span class=\"code-string\">\"progress\"</span>)})),<span class=\"code-keyword\">this</span>.on(<span class=\"code-keyword\">this</span>.masterPlaylistController_,<span class=\"code-string\">\"firstplay\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.ignoreNextSeekingEvent_=!<span class=\"code-number\">0</span>})),<span class=\"code-keyword\">this</span>.setupQualityLevels_(),<span class=\"code-keyword\">this</span>.tech_.el()&amp;&amp;(<span class=\"code-keyword\">this</span>.mediaSourceUrl_=<span class=\"code-built_in\">window</span>.URL.createObjectURL(<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaSource),<span class=\"code-keyword\">this</span>.tech_.src(<span class=\"code-keyword\">this</span>.mediaSourceUrl_))}},i.setupEme_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=<span class=\"code-keyword\">this</span>.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=Qn({<span class=\"code-attr\">player</span>:<span class=\"code-keyword\">this</span>.player_,<span class=\"code-attr\">sourceKeySystems</span>:<span class=\"code-keyword\">this</span>.source_.keySystems,<span class=\"code-attr\">media</span>:<span class=\"code-keyword\">this</span>.playlists.media(),<span class=\"code-attr\">audioMedia</span>:t&amp;&amp;t.media()});<span class=\"code-keyword\">this</span>.player_.tech_.on(<span class=\"code-string\">\"keystatuschange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{<span class=\"code-string\">\"output-restricted\"</span>===t.status&amp;&amp;e.masterPlaylistController_.blacklistCurrentPlaylist({<span class=\"code-attr\">playlist</span>:e.masterPlaylistController_.media(),<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"DRM keystatus changed to \"</span>+t.status+<span class=\"code-string\">\". Playlist will fail to play. Check for HDCP content.\"</span>,<span class=\"code-attr\">blacklistDuration</span>:<span class=\"code-number\">1</span>/<span class=\"code-number\">0</span>})})),<span class=\"code-number\">11</span>!==r.default.browser.IE_VERSION&amp;&amp;i?(<span class=\"code-keyword\">this</span>.logger_(<span class=\"code-string\">\"waiting for EME key session creation\"</span>),zn({<span class=\"code-attr\">player</span>:<span class=\"code-keyword\">this</span>.player_,<span class=\"code-attr\">sourceKeySystems</span>:<span class=\"code-keyword\">this</span>.source_.keySystems,<span class=\"code-attr\">audioMedia</span>:t&amp;&amp;t.media(),<span class=\"code-attr\">mainPlaylists</span>:<span class=\"code-keyword\">this</span>.playlists.master.playlists}).then((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{e.logger_(<span class=\"code-string\">\"created EME key session\"</span>),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">t</span>)</span>{e.logger_(<span class=\"code-string\">\"error while creating EME key session\"</span>,t),e.player_.error({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Failed to initialize media keys for EME\"</span>,<span class=\"code-attr\">code</span>:<span class=\"code-number\">3</span>})}))):<span class=\"code-keyword\">this</span>.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> e=<span class=\"code-keyword\">this</span>,t=r.default.players[<span class=\"code-keyword\">this</span>.tech_.options_.playerId];t&amp;&amp;t.qualityLevels&amp;&amp;!<span class=\"code-keyword\">this</span>.qualityLevels_&amp;&amp;(<span class=\"code-keyword\">this</span>.qualityLevels_=t.qualityLevels(),<span class=\"code-keyword\">this</span>.masterPlaylistController_.on(<span class=\"code-string\">\"selectedinitialmedia\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">var</span> t,i;t=e.qualityLevels_,(i=e).representations().forEach((<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{t.addQualityLevel(e)})),Vn(t,i.playlists)})),<span class=\"code-keyword\">this</span>.playlists.on(<span class=\"code-string\">\"mediachange\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{Vn(e.qualityLevels_,e.playlists)})))},t.version=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span>{<span class=\"code-string\">\"@videojs/http-streaming\"</span>:Hn,<span class=\"code-string\">\"mux.js\"</span>:<span class=\"code-string\">\"6.0.0\"</span>,<span class=\"code-string\">\"mpd-parser\"</span>:<span class=\"code-string\">\"0.20.0\"</span>,<span class=\"code-string\">\"m3u8-parser\"</span>:<span class=\"code-string\">\"4.7.0\"</span>,<span class=\"code-string\">\"aes-decrypter\"</span>:<span class=\"code-string\">\"3.1.2\"</span>}},i.version=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.constructor.version()},i.canChangeType=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> mn.canChangeType()},i.play=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.play()},i.setCurrentTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">this</span>.masterPlaylistController_.setCurrentTime(e)},i.duration=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.duration()},i.seekable=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.masterPlaylistController_.seekable()},i.dispose=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">this</span>.playbackWatcher_&amp;&amp;<span class=\"code-keyword\">this</span>.playbackWatcher_.dispose(),<span class=\"code-keyword\">this</span>.masterPlaylistController_&amp;&amp;<span class=\"code-keyword\">this</span>.masterPlaylistController_.dispose(),<span class=\"code-keyword\">this</span>.qualityLevels_&amp;&amp;<span class=\"code-keyword\">this</span>.qualityLevels_.dispose(),<span class=\"code-keyword\">this</span>.player_&amp;&amp;(<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.vhs,<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.dash,<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.player_.hls),<span class=\"code-keyword\">this</span>.tech_&amp;&amp;<span class=\"code-keyword\">this</span>.tech_.vhs&amp;&amp;<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.tech_.vhs,<span class=\"code-keyword\">this</span>.tech_&amp;&amp;<span class=\"code-keyword\">delete</span> <span class=\"code-keyword\">this</span>.tech_.hls,<span class=\"code-keyword\">this</span>.mediaSourceUrl_&amp;&amp;<span class=\"code-built_in\">window</span>.URL.revokeObjectURL&amp;&amp;(<span class=\"code-built_in\">window</span>.URL.revokeObjectURL(<span class=\"code-keyword\">this</span>.mediaSourceUrl_),<span class=\"code-keyword\">this</span>.mediaSourceUrl_=<span class=\"code-literal\">null</span>),e.prototype.dispose.call(<span class=\"code-keyword\">this</span>)},i.convertToProgramTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{<span class=\"code-keyword\">var</span> t=e.playlist,i=e.time,n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i?<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>:i,r=e.callback;<span class=\"code-keyword\">if</span>(!r)<span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">\"getProgramTime: callback must be provided\"</span>);<span class=\"code-keyword\">if</span>(!t||<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"getProgramTime: playlist and time must be provided\"</span>});<span class=\"code-keyword\">var</span> a=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t||!t.segments||<span class=\"code-number\">0</span>===t.segments.length)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">for</span>(<span class=\"code-keyword\">var</span> i,n=<span class=\"code-number\">0</span>,r=<span class=\"code-number\">0</span>;r&lt;t.segments.length&amp;&amp;!(e&lt;=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);<span class=\"code-keyword\">var</span> a=t.segments[t.segments.length<span class=\"code-number\">-1</span>];<span class=\"code-keyword\">if</span>(a.videoTimingInfo&amp;&amp;a.videoTimingInfo.transmuxedPresentationEnd&lt;e)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">if</span>(e&gt;n){<span class=\"code-keyword\">if</span>(e&gt;n+<span class=\"code-number\">.25</span>*a.duration)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;i=a}<span class=\"code-keyword\">return</span>{<span class=\"code-attr\">segment</span>:i,<span class=\"code-attr\">estimatedStart</span>:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,<span class=\"code-attr\">type</span>:i.videoTimingInfo?<span class=\"code-string\">\"accurate\"</span>:<span class=\"code-string\">\"estimate\"</span>}}(n,t);<span class=\"code-keyword\">if</span>(!a)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"valid programTime was not found\"</span>});<span class=\"code-keyword\">if</span>(<span class=\"code-string\">\"estimate\"</span>===a.type)<span class=\"code-keyword\">return</span> r({<span class=\"code-attr\">message</span>:<span class=\"code-string\">\"Accurate programTime could not be determined. Please seek to e.seekTime and try again\"</span>,<span class=\"code-attr\">seekTime</span>:a.estimatedStart});<span class=\"code-keyword\">var</span> s={<span class=\"code-attr\">mediaSeconds</span>:n},o=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">if</span>(!t.dateTimeObject)<span class=\"code-keyword\">return</span> <span class=\"code-literal\">null</span>;<span class=\"code-keyword\">var</span> i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Date</span>(t.dateTimeObject.getTime()+<span class=\"code-number\">1e3</span>*n)}(n,a.segment);<span class=\"code-keyword\">return</span> o&amp;&amp;(s.programDateTime=o.toISOString()),r(<span class=\"code-literal\">null</span>,s)}({<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_.media(),<span class=\"code-attr\">time</span>:e,<span class=\"code-attr\">callback</span>:t})},i.seekToProgramTime=<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i,n</span>)</span>{<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i=!<span class=\"code-number\">0</span>),<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n&amp;&amp;(n=<span class=\"code-number\">2</span>),Ge({<span class=\"code-attr\">programTime</span>:e,<span class=\"code-attr\">playlist</span>:<span class=\"code-keyword\">this</span>.masterPlaylistController_.media(),<span class=\"code-attr\">retryCount</span>:n,<span class=\"code-attr\">pauseAfterSeek</span>:i,<span class=\"code-attr\">seekTo</span>:<span class=\"code-keyword\">this</span>.options_.seekTo,<span class=\"code-attr\">tech</span>:<span class=\"code-keyword\">this</span>.options_.tech,<span class=\"code-attr\">callback</span>:t})},t}(r.default.getComponent(<span class=\"code-string\">\"Component\"</span>)),Jn={<span class=\"code-attr\">name</span>:<span class=\"code-string\">\"videojs-http-streaming\"</span>,<span class=\"code-attr\">VERSION</span>:Hn,<span class=\"code-attr\">canHandleSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=r.default.mergeOptions(r.default.options,t);<span class=\"code-keyword\">return</span> Jn.canPlayType(e.type,i)},<span class=\"code-attr\">handleSource</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t,i</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===i&amp;&amp;(i={});<span class=\"code-keyword\">var</span> n=r.default.mergeOptions(r.default.options,i);<span class=\"code-keyword\">return</span> t.vhs=<span class=\"code-keyword\">new</span> $n(e,t,n),r.default.hasOwnProperty(<span class=\"code-string\">\"hls\"</span>)||<span class=\"code-built_in\">Object</span>.defineProperty(t,<span class=\"code-string\">\"hls\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"player.tech().hls is deprecated. Use player.tech().vhs instead.\"</span>),t.vhs},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),t.vhs.xhr=ke(),t.vhs.src(e.src,e.type),t.vhs},<span class=\"code-attr\">canPlayType</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e,t</span>)</span>{<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===t&amp;&amp;(t={});<span class=\"code-keyword\">var</span> i=r.default.mergeOptions(r.default.options,t),n=i.vhs,a=(n=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===n?{}:n).overrideNative,s=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===a?!r.default.browser.IS_ANY_SAFARI:a,o=i.hls,u=(o=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>===o?{}:o).overrideNative,d=<span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span>!==u&amp;&amp;u,l=Ce(e);<span class=\"code-keyword\">return</span> l&amp;&amp;(!Gn.supportsTypeNatively(l)||d||s)?<span class=\"code-string\">\"maybe\"</span>:<span class=\"code-string\">\"\"</span>}};R(<span class=\"code-string\">\"avc1.4d400d,mp4a.40.2\"</span>)&amp;&amp;r.default.getTech(<span class=\"code-string\">\"Html5\"</span>).registerSourceHandler(Jn,<span class=\"code-number\">0</span>),r.default.VhsHandler=$n,<span class=\"code-built_in\">Object</span>.defineProperty(r.default,<span class=\"code-string\">\"HlsHandler\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.\"</span>),$n},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),r.default.VhsSourceHandler=Jn,<span class=\"code-built_in\">Object</span>.defineProperty(r.default,<span class=\"code-string\">\"HlsSourceHandler\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead.\"</span>),Jn},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),r.default.Vhs=Gn,<span class=\"code-built_in\">Object</span>.defineProperty(r.default,<span class=\"code-string\">\"Hls\"</span>,{<span class=\"code-attr\">get</span>:<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{<span class=\"code-keyword\">return</span> r.default.log.warn(<span class=\"code-string\">\"videojs.Hls is deprecated. Use videojs.Vhs instead.\"</span>),Gn},<span class=\"code-attr\">configurable</span>:!<span class=\"code-number\">0</span>}),r.default.use||(r.default.registerComponent(<span class=\"code-string\">\"Hls\"</span>,Gn),r.default.registerComponent(<span class=\"code-string\">\"Vhs\"</span>,Gn)),r.default.options.vhs=r.default.options.vhs||{},r.default.options.hls=r.default.options.hls||{},r.default.getPlugin&amp;&amp;r.default.getPlugin(<span class=\"code-string\">\"reloadSourceOnError\"</span>)||(r.default.registerPlugin||r.default.plugin)(<span class=\"code-string\">\"reloadSourceOnError\"</span>,(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\">e</span>)</span>{qn(<span class=\"code-keyword\">this</span>,e)})),e.LOCAL_STORAGE_KEY=Wn,e.Vhs=Gn,e.VhsHandler=$n,e.VhsSourceHandler=Jn,e.emeKeySystems=jn,e.expandDataUri=Kn,e.getAllPsshKeySystemsOptions=Xn,e.setupEmeOptions=Qn,e.simpleTypeFromSourceType=Ce,e.waitForKeySessionCreation=zn,<span class=\"code-built_in\">Object</span>.defineProperty(e,<span class=\"code-string\">\"__esModule\"</span>,{<span class=\"code-attr\">value</span>:!<span class=\"code-number\">0</span>})}));\n",""]}}}</script></head><body><div id="root"><style data-emotion-css="gtfibm">html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}html,body,#root{height:100%;margin:0;}body{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;font-size:16px;line-height:1.5;overflow-wrap:break-word;background:white;color:black;}code{font-family:Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;}th,td{padding:0;}select{font-size:inherit;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1r6h1r6">.code-listing{background:#fbfdff;color:#383a42;}.code-comment,.code-quote{color:#a0a1a7;font-style:italic;}.code-doctag,.code-keyword,.code-link,.code-formula{color:#a626a4;}.code-section,.code-name,.code-selector-tag,.code-deletion,.code-subst{color:#e45649;}.code-literal{color:#0184bb;}.code-string,.code-regexp,.code-addition,.code-attribute,.code-meta-string{color:#50a14f;}.code-built_in,.code-class .code-title{color:#c18401;}.code-attr,.code-variable,.code-template-variable,.code-type,.code-selector-class,.code-selector-attr,.code-selector-pseudo,.code-number{color:#986801;}.code-symbol,.code-bullet,.code-meta,.code-selector-id,.code-title{color:#4078f2;}.code-emphasis{font-style:italic;}.code-strong{font-weight:bold;}</style><style data-emotion-css="1c3h18e">.css-1c3h18e{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}</style><div class="css-1c3h18e"><style data-emotion-css="1cfuj1t">.css-1cfuj1t{max-width:940px;padding:0 20px;margin:0 auto;}</style><div class="css-1cfuj1t"><style data-emotion-css="i51og3">.css-i51og3{margin-top:2rem;}</style><header class="css-i51og3"><style data-emotion-css="1y7u1xh">.css-1y7u1xh{text-align:center;font-size:3rem;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}</style><h1 class="css-1y7u1xh"><style data-emotion-css="1ydg16i">.css-1ydg16i{color:#000;-webkit-text-decoration:none;text-decoration:none;}</style><a href="/" class="css-1ydg16i">UNPKG</a></h1></header></div><div class="css-1cfuj1t"><style data-emotion-css="93o42g">.css-93o42g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:700px){.css-93o42g{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><header class="css-93o42g"><style data-emotion-css="1dlpvgi">.css-1dlpvgi{font-size:1.5rem;font-weight:normal;-webkit-flex:1;-ms-flex:1;flex:1;word-break:break-all;}</style><h1 class="css-1dlpvgi"><nav><style data-emotion-css="xt128v">.css-xt128v{color:#0076ff;-webkit-text-decoration:none;text-decoration:none;}.css-xt128v:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="/browse/@videojs/http-streaming@2.12.1/" class="css-xt128v">@videojs/http-streaming</a><style data-emotion-css="lllnmq">.css-lllnmq{padding-left:5px;padding-right:5px;}</style><span class="css-lllnmq">/</span><a href="/browse/@videojs/http-streaming@2.12.1/dist/" class="css-xt128v">dist</a><span class="css-lllnmq">/</span><strong>videojs-http-streaming.min.js</strong></nav></h1><style data-emotion-css="1nr3dab">.css-1nr3dab{margin-left:20px;}@media (max-width:700px){.css-1nr3dab{margin-left:0;margin-bottom:0;}}</style><p class="css-1nr3dab"><label>Version:<!-- --> <style data-emotion-css="un3bt6">.css-un3bt6{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;padding:4px 24px 4px 8px;font-weight:600;font-size:0.9em;color:#24292e;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-color:#eff3f6;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==);background-position:right 8px center;background-repeat:no-repeat;background-size:auto 25%;}.css-un3bt6:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-un3bt6:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><select name="version" class="css-un3bt6"><option value="0.1.0">0.1.0</option><option value="0.2.0">0.2.0</option><option value="0.2.1">0.2.1</option><option value="0.3.0">0.3.0</option><option value="0.3.1">0.3.1</option><option value="0.4.0">0.4.0</option><option value="0.5.0">0.5.0</option><option value="0.5.1">0.5.1</option><option value="0.5.2">0.5.2</option><option value="0.5.3">0.5.3</option><option value="0.6.1">0.6.1</option><option value="0.7.0">0.7.0</option><option value="0.7.1">0.7.1</option><option value="0.7.2">0.7.2</option><option value="0.8.0">0.8.0</option><option value="0.9.0">0.9.0</option><option value="1.0.0">1.0.0</option><option value="1.0.1">1.0.1</option><option value="1.0.2">1.0.2</option><option value="1.1.0">1.1.0</option><option value="1.2.0">1.2.0</option><option value="1.2.1">1.2.1</option><option value="1.2.2">1.2.2</option><option value="1.2.3">1.2.3</option><option value="1.2.4">1.2.4</option><option value="1.2.5">1.2.5</option><option value="1.2.6">1.2.6</option><option value="1.3.0">1.3.0</option><option value="1.3.1">1.3.1</option><option value="1.4.0">1.4.0</option><option value="1.4.1">1.4.1</option><option value="1.4.2">1.4.2</option><option value="1.5.0">1.5.0</option><option value="1.5.1">1.5.1</option><option value="1.6.0">1.6.0</option><option value="1.7.0">1.7.0</option><option value="1.8.0">1.8.0</option><option value="1.9.0">1.9.0</option><option value="1.9.1">1.9.1</option><option value="1.9.2">1.9.2</option><option value="1.9.3">1.9.3</option><option value="1.10.0">1.10.0</option><option value="1.10.1">1.10.1</option><option value="1.10.2">1.10.2</option><option value="1.10.3-alpha.0">1.10.3-alpha.0</option><option value="1.10.3">1.10.3</option><option value="1.10.4">1.10.4</option><option value="1.10.5-0">1.10.5-0</option><option value="1.10.5-1">1.10.5-1</option><option value="1.10.5">1.10.5</option><option value="1.10.6">1.10.6</option><option value="1.11.0-0">1.11.0-0</option><option value="1.11.0-alpha.0">1.11.0-alpha.0</option><option value="1.11.0-alpha.1">1.11.0-alpha.1</option><option value="1.11.0">1.11.0</option><option value="1.11.1">1.11.1</option><option value="1.11.2">1.11.2</option><option value="1.11.3">1.11.3</option><option value="1.12.0">1.12.0</option><option value="1.12.1">1.12.1</option><option value="1.12.2">1.12.2</option><option value="1.12.3">1.12.3</option><option value="1.13.0">1.13.0</option><option value="1.13.1">1.13.1</option><option value="1.13.2">1.13.2</option><option value="1.13.3">1.13.3</option><option value="1.13.4">1.13.4</option><option value="2.0.0-rc.0">2.0.0-rc.0</option><option value="2.0.0-rc.1">2.0.0-rc.1</option><option value="2.0.0-rc.2">2.0.0-rc.2</option><option value="2.0.0">2.0.0</option><option value="2.1.0">2.1.0</option><option value="2.2.0">2.2.0</option><option value="2.2.1">2.2.1</option><option value="2.2.2">2.2.2</option><option value="2.2.3">2.2.3</option><option value="2.2.4">2.2.4</option><option value="2.3.0">2.3.0</option><option value="2.3.1">2.3.1</option><option value="2.3.2">2.3.2</option><option value="2.4.0">2.4.0</option><option value="2.4.1">2.4.1</option><option value="2.4.2">2.4.2</option><option value="2.5.0">2.5.0</option><option value="2.6.0">2.6.0</option><option value="2.6.1">2.6.1</option><option value="2.6.2">2.6.2</option><option value="2.6.3">2.6.3</option><option value="2.6.4">2.6.4</option><option value="2.7.0">2.7.0</option><option value="2.7.1">2.7.1</option><option value="2.8.0">2.8.0</option><option value="2.8.1">2.8.1</option><option value="2.8.2">2.8.2</option><option value="2.8.3">2.8.3</option><option value="2.9.0">2.9.0</option><option value="2.9.1">2.9.1</option><option value="2.9.2">2.9.2</option><option value="2.9.3">2.9.3</option><option value="2.10.0">2.10.0</option><option value="2.10.1">2.10.1</option><option value="2.10.2">2.10.2</option><option value="2.10.3">2.10.3</option><option value="2.11.0">2.11.0</option><option value="2.11.1">2.11.1</option><option value="2.11.2">2.11.2</option><option value="2.12.0">2.12.0</option><option selected="" value="2.12.1">2.12.1</option></select></label></p></header></div><style data-emotion-css="107j3ms">.css-107j3ms{max-width:940px;padding:0 20px;margin:0 auto;}@media (max-width:700px){.css-107j3ms{padding:0;margin:0;}}</style><div class="css-107j3ms"><style data-emotion-css="q3frg4">.css-q3frg4{border:1px solid #dfe2e5;border-radius:3px;}@media (max-width:700px){.css-q3frg4{border-right-width:0;border-left-width:0;}}</style><div class="css-q3frg4"><style data-emotion-css="10o5omr">.css-10o5omr{padding:10px;background:#f6f8fa;color:#424242;border:1px solid #d1d5da;border-top-left-radius:3px;border-top-right-radius:3px;margin:-1px -1px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:700px){.css-10o5omr{padding-right:20px;padding-left:20px;}}</style><div class="css-10o5omr"><span>315 kB</span><span>JavaScript</span><span><style data-emotion-css="18x593j">.css-18x593j{display:inline-block;margin-left:8px;padding:2px 8px;-webkit-text-decoration:none;text-decoration:none;font-weight:600;font-size:0.9rem;color:#24292e;background-color:#eff3f6;border:1px solid rgba(27,31,35,.2);border-radius:3px;}.css-18x593j:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-18x593j:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><a href="/@videojs/http-streaming@2.12.1/dist/videojs-http-streaming.min.js" class="css-18x593j">View Raw</a></span></div><style data-emotion-css="1i31ihw">.css-1i31ihw{overflow-x:auto;overflow-y:hidden;padding-top:5px;padding-bottom:5px;}</style><div class="code-listing css-1i31ihw"><style data-emotion-css="173nir8">.css-173nir8{border:none;border-collapse:collapse;border-spacing:0;}</style><table class="css-173nir8"><tbody><tr><style data-emotion-css="a4x74f">.css-a4x74f{padding-left:10px;padding-right:10px;color:rgba(27,31,35,.3);text-align:right;vertical-align:top;width:1%;min-width:50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><td id="L1" class="css-a4x74f"><span>1</span></td><style data-emotion-css="1dcdqdg">.css-1dcdqdg{padding-left:10px;padding-right:10px;color:#24292e;white-space:pre;}</style><td id="LC1" class="css-1dcdqdg"><code><span class="code-comment">/*! @name @videojs/http-streaming @version 2.12.1 @license Apache-2.0 */</span>
</code></td></tr><tr><td id="L2" class="css-a4x74f"><span>2</span></td><td id="LC2" class="css-1dcdqdg"><code>!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> exports&amp;&amp;<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">module</span>?t(exports,<span class="code-built_in">require</span>(<span class="code-string">"video.js"</span>),<span class="code-built_in">require</span>(<span class="code-string">"@xmldom/xmldom"</span>)):<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> define&amp;&amp;define.amd?define([<span class="code-string">"exports"</span>,<span class="code-string">"video.js"</span>,<span class="code-string">"@xmldom/xmldom"</span>],t):t((e=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> globalThis?globalThis:e||self).httpStreaming={},e.videojs,e.window)}(<span class="code-keyword">this</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-string">"use strict"</span>;<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">n</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;<span class="code-string">"default"</span><span class="code-keyword">in</span> e?e:{<span class="code-attr">default</span>:e}}<span class="code-keyword">var</span> r=n(t);<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">a</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e(i={<span class="code-attr">path</span>:t,<span class="code-attr">exports</span>:{},<span class="code-attr">require</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Dynamic requires are not currently supported by @rollup/plugin-commonjs"</span>)}(<span class="code-literal">null</span>==t&amp;&amp;i.path)}},i.exports),i.exports}<span class="code-keyword">var</span> s=a((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.exports=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">ReferenceError</span>(<span class="code-string">"this hasn't been initialised - super() hasn't been called"</span>);<span class="code-keyword">return</span> e},e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>})),o=a((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">return</span> e.exports=t=<span class="code-built_in">Object</span>.setPrototypeOf||<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>,t(i,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>})),u=a((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.exports=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.prototype=<span class="code-built_in">Object</span>.create(t.prototype),e.prototype.constructor=e,o(e,t)},e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>})),d=a((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s;i=<span class="code-regexp">/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/</span>,n=<span class="code-regexp">/^([^\/?#]*)([^]*)$/</span>,r=<span class="code-regexp">/(?:\/|^)\.(?=\/)/g</span>,a=<span class="code-regexp">/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g</span>,s={<span class="code-attr">buildAbsoluteURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(i=i||{},e=e.trim(),!(t=t.trim())){<span class="code-keyword">if</span>(!i.alwaysNormalize)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> r=s.parseURL(e);<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">return</span> r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}<span class="code-keyword">var</span> a=s.parseURL(t);<span class="code-keyword">if</span>(!a)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse relative URL."</span>);<span class="code-keyword">if</span>(a.scheme)<span class="code-keyword">return</span> i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;<span class="code-keyword">var</span> o=s.parseURL(e);<span class="code-keyword">if</span>(!o)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Error trying to parse base URL."</span>);<span class="code-keyword">if</span>(!o.netLoc&amp;&amp;o.path&amp;&amp;<span class="code-string">"/"</span>!==o.path[<span class="code-number">0</span>]){<span class="code-keyword">var</span> u=n.exec(o.path);o.netLoc=u[<span class="code-number">1</span>],o.path=u[<span class="code-number">2</span>]}o.netLoc&amp;&amp;!o.path&amp;&amp;(o.path=<span class="code-string">"/"</span>);<span class="code-keyword">var</span> d={<span class="code-attr">scheme</span>:o.scheme,<span class="code-attr">netLoc</span>:a.netLoc,<span class="code-attr">path</span>:<span class="code-literal">null</span>,<span class="code-attr">params</span>:a.params,<span class="code-attr">query</span>:a.query,<span class="code-attr">fragment</span>:a.fragment};<span class="code-keyword">if</span>(!a.netLoc&amp;&amp;(d.netLoc=o.netLoc,<span class="code-string">"/"</span>!==a.path[<span class="code-number">0</span>]))<span class="code-keyword">if</span>(a.path){<span class="code-keyword">var</span> l=o.path,c=l.substring(<span class="code-number">0</span>,l.lastIndexOf(<span class="code-string">"/"</span>)+<span class="code-number">1</span>)+a.path;d.path=s.normalizePath(c)}<span class="code-keyword">else</span> d.path=o.path,a.params||(d.params=o.params,a.query||(d.query=o.query));<span class="code-keyword">return</span> <span class="code-literal">null</span>===d.path&amp;&amp;(d.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(d)},<span class="code-attr">parseURL</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=i.exec(e);<span class="code-keyword">return</span> t?{<span class="code-attr">scheme</span>:t[<span class="code-number">1</span>]||<span class="code-string">""</span>,<span class="code-attr">netLoc</span>:t[<span class="code-number">2</span>]||<span class="code-string">""</span>,<span class="code-attr">path</span>:t[<span class="code-number">3</span>]||<span class="code-string">""</span>,<span class="code-attr">params</span>:t[<span class="code-number">4</span>]||<span class="code-string">""</span>,<span class="code-attr">query</span>:t[<span class="code-number">5</span>]||<span class="code-string">""</span>,<span class="code-attr">fragment</span>:t[<span class="code-number">6</span>]||<span class="code-string">""</span>}:<span class="code-literal">null</span>},<span class="code-attr">normalizePath</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(e=e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>).replace(r,<span class="code-string">""</span>);e.length!==(e=e.replace(a,<span class="code-string">""</span>)).length;);<span class="code-keyword">return</span> e.split(<span class="code-string">""</span>).reverse().join(<span class="code-string">""</span>)},<span class="code-attr">buildURLFromParts</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s})),l=<span class="code-string">"http://example.com"</span>,c=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-regexp">/^[a-z]+:/i</span>.test(t))<span class="code-keyword">return</span> t;<span class="code-regexp">/^data:/</span>.test(e)&amp;&amp;(e=<span class="code-built_in">window</span>.location&amp;&amp;<span class="code-built_in">window</span>.location.href||<span class="code-string">""</span>);<span class="code-keyword">var</span> i=<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>.URL,n=<span class="code-regexp">/^\/\//</span>.test(e),r=!<span class="code-built_in">window</span>.location&amp;&amp;!<span class="code-regexp">/\/\//i</span>.test(e);<span class="code-keyword">if</span>(i?e=<span class="code-keyword">new</span> <span class="code-built_in">window</span>.URL(e,<span class="code-built_in">window</span>.location||l):<span class="code-regexp">/\/\//i</span>.test(e)||(e=d.buildAbsoluteURL(<span class="code-built_in">window</span>.location&amp;&amp;<span class="code-built_in">window</span>.location.href||<span class="code-string">""</span>,e)),i){<span class="code-keyword">var</span> a=<span class="code-keyword">new</span> URL(t,e);<span class="code-keyword">return</span> r?a.href.slice(l.length):n?a.href.slice(a.protocol.length):a.href}<span class="code-keyword">return</span> d.buildAbsoluteURL(e,t)},h=c,f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;i&amp;&amp;i.responseURL&amp;&amp;t!==i.responseURL?i.responseURL:t},p=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> r.default.log.debug?r.default.log.debug.bind(r.default,<span class="code-string">"VHS:"</span>,e+<span class="code-string">" &gt;"</span>):<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{}},m=a((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e.exports=t=<span class="code-built_in">Object</span>.assign||<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">1</span>;t&lt;<span class="code-built_in">arguments</span>.length;t++){<span class="code-keyword">var</span> i=<span class="code-built_in">arguments</span>[t];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-built_in">Object</span>.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n])}<span class="code-keyword">return</span> e},e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>,t.apply(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>})),g=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.listeners[e]||(<span class="code-keyword">this</span>.listeners[e]=[]),<span class="code-keyword">this</span>.listeners[e].push(t)},t.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.listeners[e])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.listeners[e].indexOf(t);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.listeners[e]=<span class="code-keyword">this</span>.listeners[e].slice(<span class="code-number">0</span>),<span class="code-keyword">this</span>.listeners[e].splice(i,<span class="code-number">1</span>),i&gt;<span class="code-number">-1</span>},t.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.listeners[e];<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.length,n=<span class="code-number">0</span>;n&lt;i;++n)t[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>,<span class="code-number">1</span>),a=t.length,s=<span class="code-number">0</span>;s&lt;a;++s)t[s].apply(<span class="code-keyword">this</span>,r)},t.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}},t.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}))},e}();<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">y</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=(t=e,<span class="code-built_in">window</span>.atob?<span class="code-built_in">window</span>.atob(t):Buffer.from(t,<span class="code-string">"base64"</span>).toString(<span class="code-string">"binary"</span>)),n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.length),r=<span class="code-number">0</span>;r&lt;i.length;r++)n[r]=i.charCodeAt(r);<span class="code-keyword">return</span> n}
</code></td></tr><tr><td id="L3" class="css-a4x74f"><span>3</span></td><td id="LC3" class="css-1dcdqdg"><code><span class="code-comment">/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */</span><span class="code-keyword">var</span> v,_,T=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).buffer=<span class="code-string">""</span>,t}<span class="code-keyword">return</span> u(t,e),t.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.buffer+=e,t=<span class="code-keyword">this</span>.buffer.indexOf(<span class="code-string">"\n"</span>);t&gt;<span class="code-number">-1</span>;t=<span class="code-keyword">this</span>.buffer.indexOf(<span class="code-string">"\n"</span>))<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.buffer.substring(<span class="code-number">0</span>,t)),<span class="code-keyword">this</span>.buffer=<span class="code-keyword">this</span>.buffer.substring(t+<span class="code-number">1</span>)},t}(g),b=<span class="code-built_in">String</span>.fromCharCode(<span class="code-number">9</span>),S=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-regexp">/([0-9.]*)?@?([0-9.]*)?/</span>.exec(e||<span class="code-string">""</span>),i={};<span class="code-keyword">return</span> t[<span class="code-number">1</span>]&amp;&amp;(i.length=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),t[<span class="code-number">2</span>]&amp;&amp;(i.offset=<span class="code-built_in">parseInt</span>(t[<span class="code-number">2</span>],<span class="code-number">10</span>)),i},w=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=e.split(<span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(<span class="code-string">'(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'</span>)),n={},r=i.length;r--;)<span class="code-string">""</span>!==i[r]&amp;&amp;((t=<span class="code-regexp">/([^=]*)=(.*)/</span>.exec(i[r]).slice(<span class="code-number">1</span>))[<span class="code-number">0</span>]=t[<span class="code-number">0</span>].replace(<span class="code-regexp">/^\s+|\s+$/g</span>,<span class="code-string">""</span>),t[<span class="code-number">1</span>]=t[<span class="code-number">1</span>].replace(<span class="code-regexp">/^\s+|\s+$/g</span>,<span class="code-string">""</span>),t[<span class="code-number">1</span>]=t[<span class="code-number">1</span>].replace(<span class="code-regexp">/^['"](.*)['"]$/g</span>,<span class="code-string">"$1"</span>),n[t[<span class="code-number">0</span>]]=t[<span class="code-number">1</span>]);<span class="code-keyword">return</span> n},I=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).customParsers=[],t.tagMappers=[],t}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">this</span>;<span class="code-number">0</span>!==(e=e.trim()).length&amp;&amp;(<span class="code-string">"#"</span>===e[<span class="code-number">0</span>]?<span class="code-keyword">this</span>.tagMappers.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=i(e);<span class="code-keyword">return</span> n===e?t:t.concat([n])}),[e]).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;n.customParsers.length;r++)<span class="code-keyword">if</span>(n.customParsers[r].call(n,e))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.indexOf(<span class="code-string">"#EXT"</span>))<span class="code-keyword">if</span>(e=e.replace(<span class="code-string">"\r"</span>,<span class="code-string">""</span>),t=<span class="code-regexp">/^#EXTM3U/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"m3u"</span>});<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXTINF:?([0-9\.]*)?,?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"inf"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseFloat</span>(t[<span class="code-number">1</span>])),t[<span class="code-number">2</span>]&amp;&amp;(i.title=t[<span class="code-number">2</span>]),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-TARGETDURATION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"targetduration"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.duration=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-VERSION:?([0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"version"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.version=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"media-sequence"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.number=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"discontinuity-sequence"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.number=<span class="code-built_in">parseInt</span>(t[<span class="code-number">1</span>],<span class="code-number">10</span>)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"playlist-type"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.playlistType=t[<span class="code-number">1</span>]),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-BYTERANGE:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i=m(S(t[<span class="code-number">1</span>]),{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"byterange"</span>}),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"allow-cache"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.allowed=!<span class="code-regexp">/NO/</span>.test(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MAP:?(.*)$/</span>.exec(e)){<span class="code-keyword">if</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"map"</span>},t[<span class="code-number">1</span>]){<span class="code-keyword">var</span> a=w(t[<span class="code-number">1</span>]);a.URI&amp;&amp;(i.uri=a.URI),a.BYTERANGE&amp;&amp;(i.byterange=S(a.BYTERANGE))}n.trigger(<span class="code-string">"data"</span>,i)}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-STREAM-INF:?(.*)$/</span>.exec(e)){<span class="code-keyword">if</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"stream-inf"</span>},t[<span class="code-number">1</span>]){<span class="code-keyword">if</span>(i.attributes=w(t[<span class="code-number">1</span>]),i.attributes.RESOLUTION){<span class="code-keyword">var</span> s=i.attributes.RESOLUTION.split(<span class="code-string">"x"</span>),o={};s[<span class="code-number">0</span>]&amp;&amp;(o.width=<span class="code-built_in">parseInt</span>(s[<span class="code-number">0</span>],<span class="code-number">10</span>)),s[<span class="code-number">1</span>]&amp;&amp;(o.height=<span class="code-built_in">parseInt</span>(s[<span class="code-number">1</span>],<span class="code-number">10</span>)),i.attributes.RESOLUTION=o}i.attributes.BANDWIDTH&amp;&amp;(i.attributes.BANDWIDTH=<span class="code-built_in">parseInt</span>(i.attributes.BANDWIDTH,<span class="code-number">10</span>)),i.attributes[<span class="code-string">"PROGRAM-ID"</span>]&amp;&amp;(i.attributes[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-built_in">parseInt</span>(i.attributes[<span class="code-string">"PROGRAM-ID"</span>],<span class="code-number">10</span>))}n.trigger(<span class="code-string">"data"</span>,i)}<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-MEDIA:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"media"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=w(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-ENDLIST/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"endlist"</span>});<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-DISCONTINUITY/</span>.exec(e))n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"discontinuity"</span>});<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"program-date-time"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.dateTimeString=t[<span class="code-number">1</span>],i.dateTimeObject=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t[<span class="code-number">1</span>])),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-KEY:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"key"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=w(t[<span class="code-number">1</span>]),i.attributes.IV&amp;&amp;(<span class="code-string">"0x"</span>===i.attributes.IV.substring(<span class="code-number">0</span>,<span class="code-number">2</span>).toLowerCase()&amp;&amp;(i.attributes.IV=i.attributes.IV.substring(<span class="code-number">2</span>)),i.attributes.IV=i.attributes.IV.match(<span class="code-regexp">/.{8}/g</span>),i.attributes.IV[<span class="code-number">0</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">0</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">1</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">1</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">2</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">2</span>],<span class="code-number">16</span>),i.attributes.IV[<span class="code-number">3</span>]=<span class="code-built_in">parseInt</span>(i.attributes.IV[<span class="code-number">3</span>],<span class="code-number">16</span>),i.attributes.IV=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(i.attributes.IV))),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-START:?(.*)$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"start"</span>},t[<span class="code-number">1</span>]&amp;&amp;(i.attributes=w(t[<span class="code-number">1</span>]),i.attributes[<span class="code-string">"TIME-OFFSET"</span>]=<span class="code-built_in">parseFloat</span>(i.attributes[<span class="code-string">"TIME-OFFSET"</span>]),i.attributes.PRECISE=<span class="code-regexp">/YES/</span>.test(i.attributes.PRECISE)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-OUT-CONT:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-out-cont"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-OUT:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-out"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>(t=<span class="code-regexp">/^#EXT-X-CUE-IN:?(.*)?$/</span>.exec(e))<span class="code-keyword">return</span> i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"cue-in"</span>},t[<span class="code-number">1</span>]?i.data=t[<span class="code-number">1</span>]:i.data=<span class="code-string">""</span>,<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>((t=<span class="code-regexp">/^#EXT-X-SKIP:(.*)$/</span>.exec(e))&amp;&amp;t[<span class="code-number">1</span>])<span class="code-keyword">return</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"skip"</span>}).attributes=w(t[<span class="code-number">1</span>]),i.attributes.hasOwnProperty(<span class="code-string">"SKIPPED-SEGMENTS"</span>)&amp;&amp;(i.attributes[<span class="code-string">"SKIPPED-SEGMENTS"</span>]=<span class="code-built_in">parseInt</span>(i.attributes[<span class="code-string">"SKIPPED-SEGMENTS"</span>],<span class="code-number">10</span>)),i.attributes.hasOwnProperty(<span class="code-string">"RECENTLY-REMOVED-DATERANGES"</span>)&amp;&amp;(i.attributes[<span class="code-string">"RECENTLY-REMOVED-DATERANGES"</span>]=i.attributes[<span class="code-string">"RECENTLY-REMOVED-DATERANGES"</span>].split(b)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>((t=<span class="code-regexp">/^#EXT-X-PART:(.*)$/</span>.exec(e))&amp;&amp;t[<span class="code-number">1</span>])<span class="code-keyword">return</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"part"</span>}).attributes=w(t[<span class="code-number">1</span>]),[<span class="code-string">"DURATION"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class="code-built_in">parseFloat</span>(i.attributes[e]))})),[<span class="code-string">"INDEPENDENT"</span>,<span class="code-string">"GAP"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class="code-regexp">/YES/</span>.test(i.attributes[e]))})),i.attributes.hasOwnProperty(<span class="code-string">"BYTERANGE"</span>)&amp;&amp;(i.attributes.byterange=S(i.attributes.BYTERANGE)),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>((t=<span class="code-regexp">/^#EXT-X-SERVER-CONTROL:(.*)$/</span>.exec(e))&amp;&amp;t[<span class="code-number">1</span>])<span class="code-keyword">return</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"server-control"</span>}).attributes=w(t[<span class="code-number">1</span>]),[<span class="code-string">"CAN-SKIP-UNTIL"</span>,<span class="code-string">"PART-HOLD-BACK"</span>,<span class="code-string">"HOLD-BACK"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class="code-built_in">parseFloat</span>(i.attributes[e]))})),[<span class="code-string">"CAN-SKIP-DATERANGES"</span>,<span class="code-string">"CAN-BLOCK-RELOAD"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class="code-regexp">/YES/</span>.test(i.attributes[e]))})),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>((t=<span class="code-regexp">/^#EXT-X-PART-INF:(.*)$/</span>.exec(e))&amp;&amp;t[<span class="code-number">1</span>])<span class="code-keyword">return</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"part-inf"</span>}).attributes=w(t[<span class="code-number">1</span>]),[<span class="code-string">"PART-TARGET"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class="code-built_in">parseFloat</span>(i.attributes[e]))})),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>((t=<span class="code-regexp">/^#EXT-X-PRELOAD-HINT:(.*)$/</span>.exec(e))&amp;&amp;t[<span class="code-number">1</span>])<span class="code-keyword">return</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"preload-hint"</span>}).attributes=w(t[<span class="code-number">1</span>]),[<span class="code-string">"BYTERANGE-START"</span>,<span class="code-string">"BYTERANGE-LENGTH"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(i.attributes.hasOwnProperty(e)){i.attributes[e]=<span class="code-built_in">parseInt</span>(i.attributes[e],<span class="code-number">10</span>);<span class="code-keyword">var</span> t=<span class="code-string">"BYTERANGE-LENGTH"</span>===e?<span class="code-string">"length"</span>:<span class="code-string">"offset"</span>;i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[t]=i.attributes[e],<span class="code-keyword">delete</span> i.attributes[e]}})),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">if</span>((t=<span class="code-regexp">/^#EXT-X-RENDITION-REPORT:(.*)$/</span>.exec(e))&amp;&amp;t[<span class="code-number">1</span>])<span class="code-keyword">return</span>(i={<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">tagType</span>:<span class="code-string">"rendition-report"</span>}).attributes=w(t[<span class="code-number">1</span>]),[<span class="code-string">"LAST-MSN"</span>,<span class="code-string">"LAST-PART"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.attributes.hasOwnProperty(e)&amp;&amp;(i.attributes[e]=<span class="code-built_in">parseInt</span>(i.attributes[e],<span class="code-number">10</span>))})),<span class="code-keyword">void</span> n.trigger(<span class="code-string">"data"</span>,i);n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"tag"</span>,<span class="code-attr">data</span>:e.slice(<span class="code-number">4</span>)})}}}<span class="code-keyword">else</span> n.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"comment"</span>,<span class="code-attr">text</span>:e.slice(<span class="code-number">1</span>)})})):<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"uri"</span>,<span class="code-attr">uri</span>:e}))},i.addParser=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> r&amp;&amp;(r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}),<span class="code-keyword">this</span>.customParsers.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(i.exec(e))<span class="code-keyword">return</span> t.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">type</span>:<span class="code-string">"custom"</span>,<span class="code-attr">data</span>:r(e),<span class="code-attr">customType</span>:n,<span class="code-attr">segment</span>:a}),!<span class="code-number">0</span>}))},i.addTagMapper=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.expression,i=e.map;<span class="code-keyword">this</span>.tagMappers.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.test(e)?i(e):e}))},t}(g),E=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(e).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n;t[(n=i,n.toLowerCase().replace(<span class="code-regexp">/-(\w)/g</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">1</span>].toUpperCase()})))]=e[i]})),t},A=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.serverControl,i=e.targetDuration,n=e.partTargetDuration;<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> r=<span class="code-string">"#EXT-X-SERVER-CONTROL"</span>,a=<span class="code-string">"holdBack"</span>,s=<span class="code-string">"partHoldBack"</span>,o=i&amp;&amp;<span class="code-number">3</span>*i,u=n&amp;&amp;<span class="code-number">2</span>*n;i&amp;&amp;!t.hasOwnProperty(a)&amp;&amp;(t[a]=o,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:r+<span class="code-string">" defaulting HOLD-BACK to targetDuration * 3 ("</span>+o+<span class="code-string">")."</span>})),o&amp;&amp;t[a]&lt;o&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:r+<span class="code-string">" clamping HOLD-BACK ("</span>+t[a]+<span class="code-string">") to targetDuration * 3 ("</span>+o+<span class="code-string">")"</span>}),t[a]=o),n&amp;&amp;!t.hasOwnProperty(s)&amp;&amp;(t[s]=<span class="code-number">3</span>*n,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:r+<span class="code-string">" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("</span>+t[s]+<span class="code-string">")."</span>})),n&amp;&amp;t[s]&lt;u&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:r+<span class="code-string">" clamping PART-HOLD-BACK ("</span>+t[s]+<span class="code-string">") to partTargetDuration * 2 ("</span>+u+<span class="code-string">")."</span>}),t[s]=u)}},L=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).lineStream=<span class="code-keyword">new</span> T,t.parseStream=<span class="code-keyword">new</span> I,t.lineStream.pipe(t.parseStream);<span class="code-keyword">var</span> i,n,r=s(t),a=[],o={},u=!<span class="code-number">1</span>,d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},l={<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{},<span class="code-string">"CLOSED-CAPTIONS"</span>:{},<span class="code-attr">SUBTITLES</span>:{}},c=<span class="code-number">0</span>;t.manifest={<span class="code-attr">allowCache</span>:!<span class="code-number">0</span>,<span class="code-attr">discontinuityStarts</span>:[],<span class="code-attr">segments</span>:[]};<span class="code-keyword">var</span> h=<span class="code-number">0</span>,f=<span class="code-number">0</span>;<span class="code-keyword">return</span> t.on(<span class="code-string">"end"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.uri||!o.parts&amp;&amp;!o.preloadHints||(!o.map&amp;&amp;i&amp;&amp;(o.map=i),!o.key&amp;&amp;n&amp;&amp;(o.key=n),o.timeline||<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> c||(o.timeline=c),t.manifest.preloadSegment=o)})),t.parseStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,s;({<span class="code-attr">tag</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{({<span class="code-attr">version</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.version&amp;&amp;(<span class="code-keyword">this</span>.manifest.version=e.version)},<span class="code-string">"allow-cache"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.allowCache=e.allowed,<span class="code-string">"allowed"</span><span class="code-keyword">in</span> e||(<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting allowCache to YES"</span>}),<span class="code-keyword">this</span>.manifest.allowCache=!<span class="code-number">0</span>)},<span class="code-attr">byterange</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-string">"length"</span><span class="code-keyword">in</span> e&amp;&amp;(o.byterange=t,t.length=e.length,<span class="code-string">"offset"</span><span class="code-keyword">in</span> e||(e.offset=h)),<span class="code-string">"offset"</span><span class="code-keyword">in</span> e&amp;&amp;(o.byterange=t,t.offset=e.offset),h=t.offset+t.length},<span class="code-attr">endlist</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.endList=!<span class="code-number">0</span>},<span class="code-attr">inf</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"mediaSequence"</span><span class="code-keyword">in</span> <span class="code-keyword">this</span>.manifest||(<span class="code-keyword">this</span>.manifest.mediaSequence=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting media sequence to zero"</span>})),<span class="code-string">"discontinuitySequence"</span><span class="code-keyword">in</span> <span class="code-keyword">this</span>.manifest||(<span class="code-keyword">this</span>.manifest.discontinuitySequence=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting discontinuity sequence to zero"</span>})),e.duration&gt;<span class="code-number">0</span>&amp;&amp;(o.duration=e.duration),<span class="code-number">0</span>===e.duration&amp;&amp;(o.duration=<span class="code-number">.01</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"updating zero segment duration to a small value"</span>})),<span class="code-keyword">this</span>.manifest.segments=a},<span class="code-attr">key</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(e.attributes)<span class="code-keyword">if</span>(<span class="code-string">"NONE"</span>!==e.attributes.METHOD)<span class="code-keyword">if</span>(e.attributes.URI){<span class="code-keyword">if</span>(<span class="code-string">"com.apple.streamingkeydelivery"</span>===e.attributes.KEYFORMAT)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.manifest.contentProtection=<span class="code-keyword">this</span>.manifest.contentProtection||{},<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.manifest.contentProtection[<span class="code-string">"com.apple.fps.1_0"</span>]={<span class="code-attr">attributes</span>:e.attributes});<span class="code-keyword">if</span>(<span class="code-string">"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"</span>===e.attributes.KEYFORMAT)<span class="code-keyword">return</span><span class="code-number">-1</span>===[<span class="code-string">"SAMPLE-AES"</span>,<span class="code-string">"SAMPLE-AES-CTR"</span>,<span class="code-string">"SAMPLE-AES-CENC"</span>].indexOf(e.attributes.METHOD)?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key method provided for Widevine"</span>}):(<span class="code-string">"SAMPLE-AES-CENC"</span>===e.attributes.METHOD&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"</span>}),<span class="code-string">"data:text/plain;base64,"</span>!==e.attributes.URI.substring(<span class="code-number">0</span>,<span class="code-number">23</span>)?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key URI provided for Widevine"</span>}):e.attributes.KEYID&amp;&amp;<span class="code-string">"0x"</span>===e.attributes.KEYID.substring(<span class="code-number">0</span>,<span class="code-number">2</span>)?(<span class="code-keyword">this</span>.manifest.contentProtection=<span class="code-keyword">this</span>.manifest.contentProtection||{},<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.manifest.contentProtection[<span class="code-string">"com.widevine.alpha"</span>]={<span class="code-attr">attributes</span>:{<span class="code-attr">schemeIdUri</span>:e.attributes.KEYFORMAT,<span class="code-attr">keyId</span>:e.attributes.KEYID.substring(<span class="code-number">2</span>)},<span class="code-attr">pssh</span>:y(e.attributes.URI.split(<span class="code-string">","</span>)[<span class="code-number">1</span>])})):<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"invalid key ID provided for Widevine"</span>}));e.attributes.METHOD||<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting key method to AES-128"</span>}),n={<span class="code-attr">method</span>:e.attributes.METHOD||<span class="code-string">"AES-128"</span>,<span class="code-attr">uri</span>:e.attributes.URI},<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.attributes.IV&amp;&amp;(n.iv=e.attributes.IV)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring key declaration without URI"</span>});<span class="code-keyword">else</span> n=<span class="code-literal">null</span>;<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring key declaration without attribute list"</span>})},<span class="code-string">"media-sequence"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-built_in">isFinite</span>(e.number)?<span class="code-keyword">this</span>.manifest.mediaSequence=e.number:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid media sequence: "</span>+e.number})},<span class="code-string">"discontinuity-sequence"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-built_in">isFinite</span>(e.number)?(<span class="code-keyword">this</span>.manifest.discontinuitySequence=e.number,c=e.number):<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid discontinuity sequence: "</span>+e.number})},<span class="code-string">"playlist-type"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{/VOD|EVENT/.test(e.playlistType)?<span class="code-keyword">this</span>.manifest.playlistType=e.playlistType:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring unknown playlist type: "</span>+e.playlist})},<span class="code-attr">map</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i={},e.uri&amp;&amp;(i.uri=e.uri),e.byterange&amp;&amp;(i.byterange=e.byterange),n&amp;&amp;(i.key=n)},<span class="code-string">"stream-inf"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.playlists=a,<span class="code-keyword">this</span>.manifest.mediaGroups=<span class="code-keyword">this</span>.manifest.mediaGroups||l,e.attributes?(o.attributes||(o.attributes={}),m(o.attributes,e.attributes)):<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring empty stream-inf attributes"</span>})},<span class="code-attr">media</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.manifest.mediaGroups=<span class="code-keyword">this</span>.manifest.mediaGroups||l,e.attributes&amp;&amp;e.attributes.TYPE&amp;&amp;e.attributes[<span class="code-string">"GROUP-ID"</span>]&amp;&amp;e.attributes.NAME){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes[<span class="code-string">"GROUP-ID"</span>]]=i[e.attributes[<span class="code-string">"GROUP-ID"</span>]]||{},t=i[e.attributes[<span class="code-string">"GROUP-ID"</span>]],(s={<span class="code-attr">default</span>:<span class="code-regexp">/yes/i</span>.test(e.attributes.DEFAULT)}).default?s.autoselect=!<span class="code-number">0</span>:s.autoselect=<span class="code-regexp">/yes/i</span>.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&amp;&amp;(s.language=e.attributes.LANGUAGE),e.attributes.URI&amp;&amp;(s.uri=e.attributes.URI),e.attributes[<span class="code-string">"INSTREAM-ID"</span>]&amp;&amp;(s.instreamId=e.attributes[<span class="code-string">"INSTREAM-ID"</span>]),e.attributes.CHARACTERISTICS&amp;&amp;(s.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&amp;&amp;(s.forced=<span class="code-regexp">/yes/i</span>.test(e.attributes.FORCED)),t[e.attributes.NAME]=s}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring incomplete or missing media group"</span>})},<span class="code-attr">discontinuity</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{c+=<span class="code-number">1</span>,o.discontinuity=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.manifest.discontinuityStarts.push(a.length)},<span class="code-string">"program-date-time"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.manifest.dateTimeString&amp;&amp;(<span class="code-keyword">this</span>.manifest.dateTimeString=e.dateTimeString,<span class="code-keyword">this</span>.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},<span class="code-attr">targetduration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{!<span class="code-built_in">isFinite</span>(e.duration)||e.duration&lt;<span class="code-number">0</span>?<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring invalid target duration: "</span>+e.duration}):(<span class="code-keyword">this</span>.manifest.targetDuration=e.duration,A.call(<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.manifest))},<span class="code-attr">start</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.attributes&amp;&amp;!<span class="code-built_in">isNaN</span>(e.attributes[<span class="code-string">"TIME-OFFSET"</span>])?<span class="code-keyword">this</span>.manifest.start={<span class="code-attr">timeOffset</span>:e.attributes[<span class="code-string">"TIME-OFFSET"</span>],<span class="code-attr">precise</span>:e.attributes.PRECISE}:<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"ignoring start declaration without appropriate attribute list"</span>})},<span class="code-string">"cue-out"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.cueOut=e.data},<span class="code-string">"cue-out-cont"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.cueOutCont=e.data},<span class="code-string">"cue-in"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.cueIn=e.data},<span class="code-attr">skip</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.skip=E(e.attributes),<span class="code-keyword">this</span>.warnOnMissingAttributes_(<span class="code-string">"#EXT-X-SKIP"</span>,e.attributes,[<span class="code-string">"SKIPPED-SEGMENTS"</span>])},<span class="code-attr">part</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;u=!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.manifest.segments.length,n=E(e.attributes);o.parts=o.parts||[],o.parts.push(n),n.byterange&amp;&amp;(n.byterange.hasOwnProperty(<span class="code-string">"offset"</span>)||(n.byterange.offset=f),f=n.byterange.offset+n.byterange.length);<span class="code-keyword">var</span> r=o.parts.length<span class="code-number">-1</span>;<span class="code-keyword">this</span>.warnOnMissingAttributes_(<span class="code-string">"#EXT-X-PART #"</span>+r+<span class="code-string">" for segment #"</span>+i,e.attributes,[<span class="code-string">"URI"</span>,<span class="code-string">"DURATION"</span>]),<span class="code-keyword">this</span>.manifest.renditionReports&amp;&amp;<span class="code-keyword">this</span>.manifest.renditionReports.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{e.hasOwnProperty(<span class="code-string">"lastPart"</span>)||t.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"#EXT-X-RENDITION-REPORT #"</span>+i+<span class="code-string">" lacks required attribute(s): LAST-PART"</span>})}))},<span class="code-string">"server-control"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.manifest.serverControl=E(e.attributes);t.hasOwnProperty(<span class="code-string">"canBlockReload"</span>)||(t.canBlockReload=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"info"</span>,{<span class="code-attr">message</span>:<span class="code-string">"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"</span>})),A.call(<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.manifest),t.canSkipDateranges&amp;&amp;!t.hasOwnProperty(<span class="code-string">"canSkipUntil"</span>)&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"</span>})},<span class="code-string">"preload-hint"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.manifest.segments.length,i=E(e.attributes),n=i.type&amp;&amp;<span class="code-string">"PART"</span>===i.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(i),i.byterange&amp;&amp;(i.byterange.hasOwnProperty(<span class="code-string">"offset"</span>)||(i.byterange.offset=n?f:<span class="code-number">0</span>,n&amp;&amp;(f=i.byterange.offset+i.byterange.length)));<span class="code-keyword">var</span> r=o.preloadHints.length<span class="code-number">-1</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.warnOnMissingAttributes_(<span class="code-string">"#EXT-X-PRELOAD-HINT #"</span>+r+<span class="code-string">" for segment #"</span>+t,e.attributes,[<span class="code-string">"TYPE"</span>,<span class="code-string">"URI"</span>]),i.type)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">0</span>;a&lt;o.preloadHints.length<span class="code-number">-1</span>;a++){<span class="code-keyword">var</span> s=o.preloadHints[a];s.type&amp;&amp;s.type===i.type&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"#EXT-X-PRELOAD-HINT #"</span>+r+<span class="code-string">" for segment #"</span>+t+<span class="code-string">" has the same TYPE "</span>+i.type+<span class="code-string">" as preload hint #"</span>+a})}},<span class="code-string">"rendition-report"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=E(e.attributes);<span class="code-keyword">this</span>.manifest.renditionReports=<span class="code-keyword">this</span>.manifest.renditionReports||[],<span class="code-keyword">this</span>.manifest.renditionReports.push(t);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.manifest.renditionReports.length<span class="code-number">-1</span>,n=[<span class="code-string">"LAST-MSN"</span>,<span class="code-string">"URI"</span>];u&amp;&amp;n.push(<span class="code-string">"LAST-PART"</span>),<span class="code-keyword">this</span>.warnOnMissingAttributes_(<span class="code-string">"#EXT-X-RENDITION-REPORT #"</span>+i,e.attributes,n)},<span class="code-string">"part-inf"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.manifest.partInf=E(e.attributes),<span class="code-keyword">this</span>.warnOnMissingAttributes_(<span class="code-string">"#EXT-X-PART-INF"</span>,e.attributes,[<span class="code-string">"PART-TARGET"</span>]),<span class="code-keyword">this</span>.manifest.partInf.partTarget&amp;&amp;(<span class="code-keyword">this</span>.manifest.partTargetDuration=<span class="code-keyword">this</span>.manifest.partInf.partTarget),A.call(<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.manifest)}}[e.tagType]||d).call(r)},<span class="code-attr">uri</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.uri=e.uri,a.push(o),<span class="code-keyword">this</span>.manifest.targetDuration&amp;&amp;!(<span class="code-string">"duration"</span><span class="code-keyword">in</span> o)&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:<span class="code-string">"defaulting segment duration to the target duration"</span>}),o.duration=<span class="code-keyword">this</span>.manifest.targetDuration),n&amp;&amp;(o.key=n),o.timeline=c,i&amp;&amp;(o.map=i),f=<span class="code-number">0</span>,o={}},<span class="code-attr">comment</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},<span class="code-attr">custom</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(<span class="code-keyword">this</span>.manifest.custom=<span class="code-keyword">this</span>.manifest.custom||{},<span class="code-keyword">this</span>.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.warnOnMissingAttributes_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=[];i.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.hasOwnProperty(e)||n.push(e)})),n.length&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"warn"</span>,{<span class="code-attr">message</span>:e+<span class="code-string">" lacks required attribute(s): "</span>+n.join(<span class="code-string">", "</span>)})},i.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.lineStream.push(e)},i.end=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.lineStream.push(<span class="code-string">"\n"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"end"</span>)},i.addParser=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parseStream.addParser(e)},i.addTagMapper=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parseStream.addTagMapper(e)},t}(g),P={<span class="code-attr">mp4</span>:<span class="code-regexp">/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/</span>,<span class="code-attr">webm</span>:<span class="code-regexp">/^(vp0?[89]|av0?1|opus|vorbis)/</span>,<span class="code-attr">ogg</span>:<span class="code-regexp">/^(vp0?[89]|theora|flac|opus|vorbis)/</span>,<span class="code-attr">video</span>:<span class="code-regexp">/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/</span>,<span class="code-attr">audio</span>:<span class="code-regexp">/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/</span>,<span class="code-attr">text</span>:<span class="code-regexp">/^(stpp.ttml.im1t)/</span>,<span class="code-attr">muxerVideo</span>:<span class="code-regexp">/^(avc0?1)/</span>,<span class="code-attr">muxerAudio</span>:<span class="code-regexp">/^(mp4a)/</span>,<span class="code-attr">muxerText</span>:<span class="code-regexp">/a^/</span>},k=[<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>,<span class="code-string">"text"</span>],x=[<span class="code-string">"Video"</span>,<span class="code-string">"Audio"</span>,<span class="code-string">"Text"</span>],O=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e?e.replace(<span class="code-regexp">/avc1\.(\d+)\.(\d+)/i</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"avc1."</span>+(<span class="code-string">"00"</span>+<span class="code-built_in">Number</span>(t).toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)+<span class="code-string">"00"</span>+(<span class="code-string">"00"</span>+<span class="code-built_in">Number</span>(i).toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)})):e},D=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>);<span class="code-keyword">var</span> t=e.split(<span class="code-string">","</span>),i=[];<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;e=e.trim(),k.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=P[n].exec(e.toLowerCase());<span class="code-keyword">if</span>(r&amp;&amp;!(r.length&lt;=<span class="code-number">1</span>)){t=n;<span class="code-keyword">var</span> a=e.substring(<span class="code-number">0</span>,r[<span class="code-number">1</span>].length),s=e.replace(a,<span class="code-string">""</span>);i.push({<span class="code-attr">type</span>:a,<span class="code-attr">details</span>:s,<span class="code-attr">mediaType</span>:n})}})),t||i.push({<span class="code-attr">type</span>:e,<span class="code-attr">details</span>:<span class="code-string">""</span>,<span class="code-attr">mediaType</span>:<span class="code-string">"unknown"</span>})})),i},C=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>),P.audio.test(e.trim().toLowerCase())},U=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e&amp;&amp;<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">var</span> t,i=e.toLowerCase().split(<span class="code-string">","</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> O(e.trim())})),n=<span class="code-string">"video"</span>;<span class="code-number">1</span>===i.length&amp;&amp;C(i[<span class="code-number">0</span>])?n=<span class="code-string">"audio"</span>:<span class="code-number">1</span>===i.length&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===(t=i[<span class="code-number">0</span>])&amp;&amp;(t=<span class="code-string">""</span>),P.text.test(t.trim().toLowerCase()))&amp;&amp;(n=<span class="code-string">"application"</span>);<span class="code-keyword">var</span> r=<span class="code-string">"mp4"</span>;<span class="code-keyword">return</span> i.every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> P.mp4.test(e)}))?r=<span class="code-string">"mp4"</span>:i.every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> P.webm.test(e)}))?r=<span class="code-string">"webm"</span>:i.every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> P.ogg.test(e)}))&amp;&amp;(r=<span class="code-string">"ogg"</span>),n+<span class="code-string">"/"</span>+r+<span class="code-string">';codecs="'</span>+e+<span class="code-string">'"'</span>}},R=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>),<span class="code-built_in">window</span>.MediaSource&amp;&amp;<span class="code-built_in">window</span>.MediaSource.isTypeSupported&amp;&amp;<span class="code-built_in">window</span>.MediaSource.isTypeSupported(U(e))||!<span class="code-number">1</span>},M=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-string">""</span>),e.toLowerCase().split(<span class="code-string">","</span>).every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=e.trim();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;x.length;t++)<span class="code-keyword">if</span>(P[<span class="code-string">"muxer"</span>+x[t]].test(e))<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>}))},B=<span class="code-string">"mp4a.40.2"</span>,N=<span class="code-number">1</span>/<span class="code-number">30</span>,F=<span class="code-number">.1</span>,q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=[];<span class="code-keyword">if</span>(e&amp;&amp;e.length)<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)t(e.start(i),e.end(i))&amp;&amp;n.push([e.start(i),e.end(i)]);<span class="code-keyword">return</span> r.default.createTimeRanges(n)},H=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> q(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> e-F&lt;=t&amp;&amp;i+F&gt;=t}))},G=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> q(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e-N&gt;=t}))},W=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=[];<span class="code-keyword">if</span>(!e||!e.length)<span class="code-keyword">return</span><span class="code-string">""</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push(e.start(i)+<span class="code-string">" =&gt; "</span>+e.end(i));<span class="code-keyword">return</span> t.join(<span class="code-string">", "</span>)},V=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push({<span class="code-attr">start</span>:e.start(i),<span class="code-attr">end</span>:e.end(i)});<span class="code-keyword">return</span> t},j=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e&amp;&amp;e.length&amp;&amp;e.end)<span class="code-keyword">return</span> e.end(e.length<span class="code-number">-1</span>)},X=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>;<span class="code-keyword">if</span>(!e||!e.length)<span class="code-keyword">return</span> i;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;e.length;n++){<span class="code-keyword">var</span> r=e.start(n),a=e.end(n);t&gt;a||(i+=t&gt;r&amp;&amp;t&lt;=a?a-t:a-r)}<span class="code-keyword">return</span> i},z=r.default.createTimeRange,Q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t.preload)<span class="code-keyword">return</span> t.duration;<span class="code-keyword">var</span> i=<span class="code-number">0</span>;<span class="code-keyword">return</span>(t.parts||[]).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i+=e.duration})),(t.preloadHints||[]).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-string">"PART"</span>===t.type&amp;&amp;(i+=e.partTargetDuration)})),i},Y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>(e.segments||[]).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> t.parts?t.parts.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n,r</span>)</span>{e.push({<span class="code-attr">duration</span>:n.duration,<span class="code-attr">segmentIndex</span>:i,<span class="code-attr">partIndex</span>:r,<span class="code-attr">part</span>:n,<span class="code-attr">segment</span>:t})})):e.push({<span class="code-attr">duration</span>:t.duration,<span class="code-attr">segmentIndex</span>:i,<span class="code-attr">partIndex</span>:<span class="code-literal">null</span>,<span class="code-attr">segment</span>:t,<span class="code-attr">part</span>:<span class="code-literal">null</span>}),e}),[])},K=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[e.segments.length<span class="code-number">-1</span>];<span class="code-keyword">return</span> t&amp;&amp;t.parts||[]},$=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.preloadSegment;<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> i=t.parts;<span class="code-keyword">return</span>(t.preloadHints||[]).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+(<span class="code-string">"PART"</span>===t.type?<span class="code-number">1</span>:<span class="code-number">0</span>)}),<span class="code-number">0</span>)+(i&amp;&amp;i.length?i.length:<span class="code-number">0</span>)}},J=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(t.endList)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(e&amp;&amp;e.suggestedPresentationDelay)<span class="code-keyword">return</span> e.suggestedPresentationDelay;<span class="code-keyword">var</span> i=K(t).length&gt;<span class="code-number">0</span>;<span class="code-keyword">return</span> i&amp;&amp;t.serverControl&amp;&amp;t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&amp;&amp;t.partTargetDuration?<span class="code-number">3</span>*t.partTargetDuration:t.serverControl&amp;&amp;t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?<span class="code-number">3</span>*t.targetDuration:<span class="code-number">0</span>},Z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=e.mediaSequence+e.segments.length),t&lt;e.mediaSequence)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=t-e.mediaSequence,r=e.segments[n];<span class="code-keyword">if</span>(r){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:r.start,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:r.end-r.duration,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">for</span>(;n--;){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==(r=e.segments[n]).end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i+r.end,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(i+=Q(e,r),<span class="code-keyword">void</span> <span class="code-number">0</span>!==r.start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i+r.start,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i,<span class="code-attr">precise</span>:!<span class="code-number">1</span>}}(e,t);<span class="code-keyword">if</span>(n.precise)<span class="code-keyword">return</span> n.result;<span class="code-keyword">var</span> r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n=<span class="code-number">0</span>,r=t-e.mediaSequence;r&lt;e.segments.length;r++){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==(i=e.segments[r]).start)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i.start-n,<span class="code-attr">precise</span>:!<span class="code-number">0</span>};<span class="code-keyword">if</span>(n+=Q(e,i),<span class="code-keyword">void</span> <span class="code-number">0</span>!==i.end)<span class="code-keyword">return</span>{<span class="code-attr">result</span>:i.end-n,<span class="code-attr">precise</span>:!<span class="code-number">0</span>}}<span class="code-keyword">return</span>{<span class="code-attr">result</span>:<span class="code-number">-1</span>,<span class="code-attr">precise</span>:!<span class="code-number">1</span>}}(e,t);<span class="code-keyword">return</span> r.precise?r.result:n.result+i},ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> i&amp;&amp;(i=<span class="code-number">0</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===t){<span class="code-keyword">if</span>(e.totalDuration)<span class="code-keyword">return</span> e.totalDuration;<span class="code-keyword">if</span>(!e.endList)<span class="code-keyword">return</span> <span class="code-built_in">window</span>.Infinity}<span class="code-keyword">return</span> Z(e,t,i)},te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.defaultDuration,i=e.durationList,n=e.startIndex,r=e.endIndex,a=<span class="code-number">0</span>;<span class="code-keyword">if</span>(n&gt;r){<span class="code-keyword">var</span> s=[r,n];n=s[<span class="code-number">0</span>],r=s[<span class="code-number">1</span>]}<span class="code-keyword">if</span>(n&lt;<span class="code-number">0</span>){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o=n;o&lt;<span class="code-built_in">Math</span>.min(<span class="code-number">0</span>,r);o++)a+=t;n=<span class="code-number">0</span>}<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=n;u&lt;r;u++)a+=i[u].duration;<span class="code-keyword">return</span> a},ie=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(!e||!e.segments)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(e.endList)<span class="code-keyword">return</span> ee(e);<span class="code-keyword">if</span>(<span class="code-literal">null</span>===t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;t=t||<span class="code-number">0</span>;<span class="code-keyword">var</span> r=Z(e,e.mediaSequence+e.segments.length,t);<span class="code-keyword">return</span> i&amp;&amp;(r-=n=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n?n:J(<span class="code-literal">null</span>,e)),<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,r)},ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil&amp;&amp;e.excludeUntil&gt;<span class="code-built_in">Date</span>.now()},re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil&amp;&amp;e.excludeUntil===<span class="code-number">1</span>/<span class="code-number">0</span>},ae=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=ne(e);<span class="code-keyword">return</span>!e.disabled&amp;&amp;!t},se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.attributes&amp;&amp;t.attributes[e]},oe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">1</span>===e.playlists.length)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.attributes.BANDWIDTH||<span class="code-built_in">Number</span>.MAX_VALUE;<span class="code-keyword">return</span> <span class="code-number">0</span>===e.playlists.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!ae(e)&amp;&amp;(e.attributes.BANDWIDTH||<span class="code-number">0</span>)&lt;i})).length},ue=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>!(!e&amp;&amp;!t||!e&amp;&amp;t||e&amp;&amp;!t||e!==t&amp;&amp;(!e.id||!t.id||e.id!==t.id)&amp;&amp;(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&amp;&amp;(!e.uri||!t.uri||e.uri!==t.uri))},de=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e&amp;&amp;e.mediaGroups&amp;&amp;e.mediaGroups.AUDIO||{},n=!<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r <span class="code-keyword">in</span> i){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> i[r])<span class="code-keyword">if</span>(n=t(i[r][a]))<span class="code-keyword">break</span>;<span class="code-keyword">if</span>(n)<span class="code-keyword">break</span>}<span class="code-keyword">return</span>!!n},le=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e||!e.playlists||!e.playlists.length)<span class="code-keyword">return</span> de(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.playlists&amp;&amp;e.playlists.length||e.uri}));<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=e.playlists[t],n=i.attributes&amp;&amp;i.attributes.CODECS;<span class="code-keyword">return</span> n&amp;&amp;n.split(<span class="code-string">","</span>).every((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> C(e)}))||de(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> ue(i,e)}))?<span class="code-string">"continue"</span>:{<span class="code-attr">v</span>:!<span class="code-number">1</span>}},i=<span class="code-number">0</span>;i&lt;e.playlists.length;i++){<span class="code-keyword">var</span> n=t(i);<span class="code-keyword">if</span>(<span class="code-string">"continue"</span>!==n&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> n)<span class="code-keyword">return</span> n.v}<span class="code-keyword">return</span>!<span class="code-number">0</span>},ce={<span class="code-attr">liveEdgeDelay</span>:J,<span class="code-attr">duration</span>:ee,<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t||<span class="code-number">0</span>,r=ie(e,t,!<span class="code-number">0</span>,i);<span class="code-keyword">return</span> <span class="code-literal">null</span>===r?z():z(n,r)},<span class="code-attr">getMediaInfoForTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=e.playlist,i=e.currentTime,n=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,s=e.experimentalExactManifestTimings,o=i-a,u=Y(t),d=<span class="code-number">0</span>,l=<span class="code-number">0</span>;l&lt;u.length;l++){<span class="code-keyword">var</span> c=u[l];<span class="code-keyword">if</span>(n===c.segmentIndex&amp;&amp;(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> r||<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> c.partIndex||r===c.partIndex)){d=l;<span class="code-keyword">break</span>}}<span class="code-keyword">if</span>(o&lt;<span class="code-number">0</span>){<span class="code-keyword">if</span>(d&gt;<span class="code-number">0</span>)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> h=d<span class="code-number">-1</span>;h&gt;=<span class="code-number">0</span>;h--){<span class="code-keyword">var</span> f=u[h];<span class="code-keyword">if</span>(o+=f.duration,s){<span class="code-keyword">if</span>(o&lt;<span class="code-number">0</span>)<span class="code-keyword">continue</span>}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(o+N&lt;=<span class="code-number">0</span>)<span class="code-keyword">continue</span>;<span class="code-keyword">return</span>{<span class="code-attr">partIndex</span>:f.partIndex,<span class="code-attr">segmentIndex</span>:f.segmentIndex,<span class="code-attr">startTime</span>:a-te({<span class="code-attr">defaultDuration</span>:t.targetDuration,<span class="code-attr">durationList</span>:u,<span class="code-attr">startIndex</span>:d,<span class="code-attr">endIndex</span>:h})}}<span class="code-keyword">return</span>{<span class="code-attr">partIndex</span>:u[<span class="code-number">0</span>]&amp;&amp;u[<span class="code-number">0</span>].partIndex||<span class="code-literal">null</span>,<span class="code-attr">segmentIndex</span>:u[<span class="code-number">0</span>]&amp;&amp;u[<span class="code-number">0</span>].segmentIndex||<span class="code-number">0</span>,<span class="code-attr">startTime</span>:i}}<span class="code-keyword">if</span>(d&lt;<span class="code-number">0</span>){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> p=d;p&lt;<span class="code-number">0</span>;p++)<span class="code-keyword">if</span>((o-=t.targetDuration)&lt;<span class="code-number">0</span>)<span class="code-keyword">return</span>{<span class="code-attr">partIndex</span>:u[<span class="code-number">0</span>]&amp;&amp;u[<span class="code-number">0</span>].partIndex||<span class="code-literal">null</span>,<span class="code-attr">segmentIndex</span>:u[<span class="code-number">0</span>]&amp;&amp;u[<span class="code-number">0</span>].segmentIndex||<span class="code-number">0</span>,<span class="code-attr">startTime</span>:i};d=<span class="code-number">0</span>}<span class="code-keyword">for</span>(<span class="code-keyword">var</span> m=d;m&lt;u.length;m++){<span class="code-keyword">var</span> g=u[m];<span class="code-keyword">if</span>(o-=g.duration,s){<span class="code-keyword">if</span>(o&gt;<span class="code-number">0</span>)<span class="code-keyword">continue</span>}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(o-N&gt;=<span class="code-number">0</span>)<span class="code-keyword">continue</span>;<span class="code-keyword">return</span>{<span class="code-attr">partIndex</span>:g.partIndex,<span class="code-attr">segmentIndex</span>:g.segmentIndex,<span class="code-attr">startTime</span>:a+te({<span class="code-attr">defaultDuration</span>:t.targetDuration,<span class="code-attr">durationList</span>:u,<span class="code-attr">startIndex</span>:d,<span class="code-attr">endIndex</span>:m})}}<span class="code-keyword">return</span>{<span class="code-attr">segmentIndex</span>:u[u.length<span class="code-number">-1</span>].segmentIndex,<span class="code-attr">partIndex</span>:u[u.length<span class="code-number">-1</span>].partIndex,<span class="code-attr">startTime</span>:i}},<span class="code-attr">isEnabled</span>:ae,<span class="code-attr">isDisabled</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.disabled},<span class="code-attr">isBlacklisted</span>:ne,<span class="code-attr">isIncompatible</span>:re,<span class="code-attr">playlistEnd</span>:ie,<span class="code-attr">isAes</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.segments.length;t++)<span class="code-keyword">if</span>(e.segments[t].key)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>},<span class="code-attr">hasAttribute</span>:se,<span class="code-attr">estimateSegmentRequestTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=<span class="code-number">0</span>),se(<span class="code-string">"BANDWIDTH"</span>,i)?(e*i.attributes.BANDWIDTH<span class="code-number">-8</span>*n)/t:<span class="code-literal">NaN</span>},<span class="code-attr">isLowestEnabledRendition</span>:oe,<span class="code-attr">isAudioOnly</span>:le,<span class="code-attr">playlistMatch</span>:ue,<span class="code-attr">segmentDurationWithParts</span>:Q},he=r.default.log,fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"-"</span>+t},pe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.mediaGroups&amp;&amp;[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">if</span>(e.mediaGroups[i])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> e.mediaGroups[i])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r <span class="code-keyword">in</span> e.mediaGroups[i][n]){<span class="code-keyword">var</span> a=e.mediaGroups[i][n][r];t(a,i,n,r)}}))},me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.uri,n=e.id;t.id=n,t.playlistErrors_=<span class="code-number">0</span>,i&amp;&amp;(t.uri=i),t.attributes=t.attributes||{}},ge=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.uri=t;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.playlists.length;i++)<span class="code-keyword">if</span>(!e.playlists[i].uri){<span class="code-keyword">var</span> n=<span class="code-string">"placeholder-uri-"</span>+i;e.playlists[i].uri=n}<span class="code-keyword">var</span> r=le(e);pe(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n,a</span>)</span>{<span class="code-keyword">var</span> s=<span class="code-string">"placeholder-uri-"</span>+i+<span class="code-string">"-"</span>+n+<span class="code-string">"-"</span>+a;<span class="code-keyword">if</span>(!t.playlists||!t.playlists.length){<span class="code-keyword">if</span>(r&amp;&amp;<span class="code-string">"AUDIO"</span>===i&amp;&amp;!t.uri)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o=<span class="code-number">0</span>;o&lt;e.playlists.length;o++){<span class="code-keyword">var</span> u=e.playlists[o];<span class="code-keyword">if</span>(u.attributes&amp;&amp;u.attributes.AUDIO&amp;&amp;u.attributes.AUDIO===n)<span class="code-keyword">return</span>}t.playlists=[m({},t)]}t.playlists.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=fe(i,s);t.uri?t.resolvedUri=t.resolvedUri||h(e.uri,t.uri):(t.uri=<span class="code-number">0</span>===i?s:n,t.resolvedUri=t.uri),t.id=t.id||n,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=e.playlists.length;t--;){<span class="code-keyword">var</span> i=e.playlists[t];me({<span class="code-attr">playlist</span>:i,<span class="code-attr">id</span>:fe(t,i.uri)}),i.resolvedUri=h(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||he.warn(<span class="code-string">"Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."</span>)}}(e),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{pe(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{t.uri&amp;&amp;(t.resolvedUri=h(e.uri,t.uri))}))}(e)},ye=r.default.mergeOptions,ve=r.default.EventTarget,_e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> t;<span class="code-keyword">var</span> i=ye(e,t);<span class="code-keyword">if</span>(e.preloadHints&amp;&amp;!t.preloadHints&amp;&amp;<span class="code-keyword">delete</span> i.preloadHints,e.parts&amp;&amp;!t.parts)<span class="code-keyword">delete</span> i.parts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(e.parts&amp;&amp;t.parts)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;t.parts.length;n++)e.parts&amp;&amp;e.parts[n]&amp;&amp;(i.parts[n]=ye(e.parts[n],t.parts[n]));<span class="code-keyword">return</span>!e.skipped&amp;&amp;t.skipped&amp;&amp;(i.skipped=!<span class="code-number">1</span>),e.preload&amp;&amp;!t.preload&amp;&amp;(i.preload=!<span class="code-number">1</span>),i},Te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{!e.resolvedUri&amp;&amp;e.uri&amp;&amp;(e.resolvedUri=h(t,e.uri)),e.key&amp;&amp;!e.key.resolvedUri&amp;&amp;(e.key.resolvedUri=h(t,e.key.uri)),e.map&amp;&amp;!e.map.resolvedUri&amp;&amp;(e.map.resolvedUri=h(t,e.map.uri)),e.map&amp;&amp;e.map.key&amp;&amp;!e.map.key.resolvedUri&amp;&amp;(e.map.key.resolvedUri=h(t,e.map.key.uri)),e.parts&amp;&amp;e.parts.length&amp;&amp;e.parts.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.resolvedUri||(e.resolvedUri=h(t,e.uri))})),e.preloadHints&amp;&amp;e.preloadHints.length&amp;&amp;e.preloadHints.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.resolvedUri||(e.resolvedUri=h(t,e.uri))}))},be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segments||[],i=e.preloadSegment;<span class="code-keyword">if</span>(i&amp;&amp;i.parts&amp;&amp;i.parts.length){<span class="code-keyword">if</span>(i.preloadHints)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;i.preloadHints.length;n++)<span class="code-keyword">if</span>(<span class="code-string">"MAP"</span>===i.preloadHints[n].type)<span class="code-keyword">return</span> t;i.duration=e.targetDuration,i.preload=!<span class="code-number">0</span>,t.push(i)}<span class="code-keyword">return</span> t},Se=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===t||e.segments&amp;&amp;t.segments&amp;&amp;e.segments.length===t.segments.length&amp;&amp;e.endList===t.endList&amp;&amp;e.mediaSequence===t.mediaSequence&amp;&amp;e.preloadSegment===t.preloadSegment},we=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=Se);<span class="code-keyword">var</span> n=ye(e,{}),r=n.playlists[t.id];<span class="code-keyword">if</span>(!r)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(i(r,t))<span class="code-keyword">return</span> <span class="code-literal">null</span>;t.segments=be(t);<span class="code-keyword">var</span> a=ye(r,t);<span class="code-keyword">if</span>(a.preloadSegment&amp;&amp;!t.preloadSegment&amp;&amp;<span class="code-keyword">delete</span> a.preloadSegment,r.segments){<span class="code-keyword">if</span>(t.skip){t.segments=t.segments||[];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=<span class="code-number">0</span>;s&lt;t.skip.skippedSegments;s++)t.segments.unshift({<span class="code-attr">skipped</span>:!<span class="code-number">0</span>})}a.segments=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.slice(),r=t.slice();i=i||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a,s=[],o=<span class="code-number">0</span>;o&lt;r.length;o++){<span class="code-keyword">var</span> u=n[o+i],d=r[o];u?(a=u.map||a,s.push(_e(u,d))):(a&amp;&amp;!d.map&amp;&amp;(d.map=a),s.push(d))}<span class="code-keyword">return</span> s}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{Te(e,a.resolvedUri)}));<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o=<span class="code-number">0</span>;o&lt;n.playlists.length;o++)n.playlists[o].id===t.id&amp;&amp;(n.playlists[o]=a);<span class="code-keyword">return</span> n.playlists[t.id]=a,n.playlists[t.uri]=a,pe(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n,r</span>)</span>{<span class="code-keyword">if</span>(e.playlists)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">0</span>;a&lt;e.playlists.length;a++)t.id===e.playlists[a].id&amp;&amp;(e.playlists[a]=t)})),n},Ie=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.segments||[],n=i[i.length<span class="code-number">-1</span>],r=n&amp;&amp;n.parts&amp;&amp;n.parts[n.parts.length<span class="code-number">-1</span>],a=r&amp;&amp;r.duration||n&amp;&amp;n.duration;<span class="code-keyword">return</span> t&amp;&amp;a?<span class="code-number">1e3</span>*a:<span class="code-number">500</span>*(e.partTargetDuration||e.targetDuration||<span class="code-number">10</span>)},Ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">var</span> a;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n={}),a=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>,!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL or object is required"</span>);a.logger_=p(<span class="code-string">"PlaylistLoader"</span>);<span class="code-keyword">var</span> o=n,u=o.withCredentials,d=<span class="code-keyword">void</span> <span class="code-number">0</span>!==u&amp;&amp;u,l=o.handleManifestRedirects,c=<span class="code-keyword">void</span> <span class="code-number">0</span>!==l&amp;&amp;l;a.src=t,a.vhs_=i,a.withCredentials=d,a.handleManifestRedirects=c;<span class="code-keyword">var</span> h=i.options_;<span class="code-keyword">return</span> a.customTagParsers=h&amp;&amp;h.customTagParsers||[],a.customTagMappers=h&amp;&amp;h.customTagMappers||[],a.experimentalLLHLS=h&amp;&amp;h.experimentalLLHLS||!<span class="code-number">1</span>,r.default.browser.IE_VERSION&amp;&amp;(a.experimentalLLHLS=!<span class="code-number">1</span>),a.state=<span class="code-string">"HAVE_NOTHING"</span>,a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(s(a)),a.on(<span class="code-string">"mediaupdatetimeout"</span>,a.handleMediaupdatetimeout_),a}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.handleMediaupdatetimeout_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-string">"HAVE_METADATA"</span>===<span class="code-keyword">this</span>.state){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.media(),i=h(<span class="code-keyword">this</span>.master.uri,t.uri);<span class="code-keyword">this</span>.experimentalLLHLS&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(t.endList||!t.serverControl)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> i={};<span class="code-keyword">if</span>(t.serverControl.canBlockReload){<span class="code-keyword">var</span> n=t.preloadSegment,r=t.mediaSequence+t.segments.length;<span class="code-keyword">if</span>(n){<span class="code-keyword">var</span> a=n.parts||[],s=$(t)<span class="code-number">-1</span>;s&gt;<span class="code-number">-1</span>&amp;&amp;s!==a.length<span class="code-number">-1</span>&amp;&amp;(i._HLS_part=s),(s&gt;<span class="code-number">-1</span>||a.length)&amp;&amp;r--}i._HLS_msn=r}<span class="code-keyword">if</span>(t.serverControl&amp;&amp;t.serverControl.canSkipUntil&amp;&amp;(i._HLS_skip=t.serverControl.canSkipDateranges?<span class="code-string">"v2"</span>:<span class="code-string">"YES"</span>),<span class="code-built_in">Object</span>.keys(i).length){<span class="code-keyword">var</span> o=<span class="code-keyword">new</span> <span class="code-built_in">window</span>.URL(e);[<span class="code-string">"_HLS_skip"</span>,<span class="code-string">"_HLS_msn"</span>,<span class="code-string">"_HLS_part"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.hasOwnProperty(e)&amp;&amp;o.searchParams.set(e,i[e])})),e=o.toString()}<span class="code-keyword">return</span> e}(i,t)),<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_CURRENT_METADATA"</span>,<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:i,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(e.request)<span class="code-keyword">return</span> t?e.playlistRequestError(e.request,e.media(),<span class="code-string">"HAVE_METADATA"</span>):<span class="code-keyword">void</span> e.haveMetadata({<span class="code-attr">playlistString</span>:e.request.responseText,<span class="code-attr">url</span>:e.media().uri,<span class="code-attr">id</span>:e.media().id})}))}},i.playlistRequestError=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t.uri,r=t.id;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,i&amp;&amp;(<span class="code-keyword">this</span>.state=i),<span class="code-keyword">this</span>.error={<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.master.playlists[r],<span class="code-attr">status</span>:e.status,<span class="code-attr">message</span>:<span class="code-string">"HLS playlist request error at URL: "</span>+n+<span class="code-string">"."</span>,<span class="code-attr">responseText</span>:e.responseText,<span class="code-attr">code</span>:e.status&gt;=<span class="code-number">500</span>?<span class="code-number">4</span>:<span class="code-number">2</span>},<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)},i.parseManifest_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=e.url;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.onwarn,i=e.oninfo,n=e.manifestString,r=e.customTagParsers,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?[]:r,s=e.customTagMappers,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?[]:s,u=e.experimentalLLHLS,d=<span class="code-keyword">new</span> L;t&amp;&amp;d.on(<span class="code-string">"warn"</span>,t),i&amp;&amp;d.on(<span class="code-string">"info"</span>,i),a.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> d.addParser(e)})),o.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> d.addTagMapper(e)})),d.push(n),d.end();<span class="code-keyword">var</span> l=d.manifest;<span class="code-keyword">if</span>(u||([<span class="code-string">"preloadSegment"</span>,<span class="code-string">"skip"</span>,<span class="code-string">"serverControl"</span>,<span class="code-string">"renditionReports"</span>,<span class="code-string">"partInf"</span>,<span class="code-string">"partTargetDuration"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{l.hasOwnProperty(e)&amp;&amp;<span class="code-keyword">delete</span> l[e]})),l.segments&amp;&amp;l.segments.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{[<span class="code-string">"parts"</span>,<span class="code-string">"preloadHints"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.hasOwnProperty(t)&amp;&amp;<span class="code-keyword">delete</span> e[t]}))}))),!l.targetDuration){<span class="code-keyword">var</span> c=<span class="code-number">10</span>;l.segments&amp;&amp;l.segments.length&amp;&amp;(c=l.segments.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(e,t.duration)}),<span class="code-number">0</span>)),t&amp;&amp;t(<span class="code-string">"manifest has no targetDuration defaulting to "</span>+c),l.targetDuration=c}<span class="code-keyword">var</span> h=K(l);<span class="code-keyword">if</span>(h.length&amp;&amp;!l.partTargetDuration){<span class="code-keyword">var</span> f=h.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(e,t.duration)}),<span class="code-number">0</span>);t&amp;&amp;(t(<span class="code-string">"manifest has no partTargetDuration defaulting to "</span>+f),he.error(<span class="code-string">"LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed."</span>)),l.partTargetDuration=f}<span class="code-keyword">return</span> l}({<span class="code-attr">onwarn</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> n=e.message;<span class="code-keyword">return</span> t.logger_(<span class="code-string">"m3u8-parser warn for "</span>+i+<span class="code-string">": "</span>+n)},<span class="code-attr">oninfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> n=e.message;<span class="code-keyword">return</span> t.logger_(<span class="code-string">"m3u8-parser info for "</span>+i+<span class="code-string">": "</span>+n)},<span class="code-attr">manifestString</span>:e.manifestString,<span class="code-attr">customTagParsers</span>:<span class="code-keyword">this</span>.customTagParsers,<span class="code-attr">customTagMappers</span>:<span class="code-keyword">this</span>.customTagMappers,<span class="code-attr">experimentalLLHLS</span>:<span class="code-keyword">this</span>.experimentalLLHLS})},i.haveMetadata=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlistString,i=e.playlistObject,n=e.url,r=e.id;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>;<span class="code-keyword">var</span> a=i||<span class="code-keyword">this</span>.parseManifest_({<span class="code-attr">url</span>:n,<span class="code-attr">manifestString</span>:t});a.lastRequest=<span class="code-built_in">Date</span>.now(),me({<span class="code-attr">playlist</span>:a,<span class="code-attr">uri</span>:n,<span class="code-attr">id</span>:r});<span class="code-keyword">var</span> s=we(<span class="code-keyword">this</span>.master,a);<span class="code-keyword">this</span>.targetDuration=a.partTargetDuration||a.targetDuration,<span class="code-keyword">this</span>.pendingMedia_=<span class="code-literal">null</span>,s?(<span class="code-keyword">this</span>.master=s,<span class="code-keyword">this</span>.media_=<span class="code-keyword">this</span>.master.playlists[r]):<span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistunchanged"</span>),<span class="code-keyword">this</span>.updateMediaUpdateTimeout_(Ie(<span class="code-keyword">this</span>.media(),!!s)),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>)},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.stopRequest(),<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.finalRenditionTimeout),<span class="code-keyword">this</span>.off()},i.stopRequest=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.request){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.request;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e.onreadystatechange=<span class="code-literal">null</span>,e.abort()}},i.media=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.media_;<span class="code-keyword">if</span>(<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot switch media playlist from "</span>+<span class="code-keyword">this</span>.state);<span class="code-keyword">if</span>(<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.master.playlists[e])<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Unknown playlist URI: "</span>+e);e=<span class="code-keyword">this</span>.master.playlists[e]}<span class="code-keyword">if</span>(<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.finalRenditionTimeout),t){<span class="code-keyword">var</span> n=(e.partTargetDuration||e.targetDuration)/<span class="code-number">2</span>*<span class="code-number">1e3</span>||<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.finalRenditionTimeout=<span class="code-built_in">window</span>.setTimeout(<span class="code-keyword">this</span>.media.bind(<span class="code-keyword">this</span>,e,!<span class="code-number">1</span>),n)}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.state,a=!<span class="code-keyword">this</span>.media_||e.id!==<span class="code-keyword">this</span>.media_.id,s=<span class="code-keyword">this</span>.master.playlists[e.id];<span class="code-keyword">if</span>(s&amp;&amp;s.endList||e.endList&amp;&amp;e.segments.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.request&amp;&amp;(<span class="code-keyword">this</span>.request.onreadystatechange=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.request.abort(),<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.media_=e,<span class="code-keyword">void</span>(a&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-string">"HAVE_MASTER"</span>===r?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedmetadata"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)));<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.updateMediaUpdateTimeout_(Ie(e,!<span class="code-number">0</span>)),a){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"SWITCHING_MEDIA"</span>,<span class="code-keyword">this</span>.request){<span class="code-keyword">if</span>(e.resolvedUri===<span class="code-keyword">this</span>.request.url)<span class="code-keyword">return</span>;<span class="code-keyword">this</span>.request.onreadystatechange=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.request.abort(),<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>}<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.pendingMedia_=e,<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:e.resolvedUri,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,n</span>)</span>{<span class="code-keyword">if</span>(i.request){<span class="code-keyword">if</span>(e.lastRequest=<span class="code-built_in">Date</span>.now(),e.resolvedUri=f(i.handleManifestRedirects,e.resolvedUri,n),t)<span class="code-keyword">return</span> i.playlistRequestError(i.request,e,r);i.haveMetadata({<span class="code-attr">playlistString</span>:n.responseText,<span class="code-attr">url</span>:e.uri,<span class="code-attr">id</span>:e.id}),<span class="code-string">"HAVE_MASTER"</span>===r?i.trigger(<span class="code-string">"loadedmetadata"</span>):i.trigger(<span class="code-string">"mediachange"</span>)}}))}}},i.pause=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaUpdateTimeout&amp;&amp;(<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.stopRequest(),<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.started=!<span class="code-number">1</span>),<span class="code-string">"SWITCHING_MEDIA"</span>===<span class="code-keyword">this</span>.state?<span class="code-keyword">this</span>.media_?<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>:<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>:<span class="code-string">"HAVE_CURRENT_METADATA"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>)},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout&amp;&amp;(<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-literal">null</span>);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.media();<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> n=i?(i.partTargetDuration||i.targetDuration)/<span class="code-number">2</span>*<span class="code-number">1e3</span>:<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.mediaUpdateTimeout=<span class="code-literal">null</span>,t.load()}),n)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.started?i&amp;&amp;!i.endList?<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediaupdatetimeout"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.start()},i.updateMediaUpdateTimeout_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout&amp;&amp;(<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.media()&amp;&amp;!<span class="code-keyword">this</span>.media().endList&amp;&amp;(<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.mediaUpdateTimeout=<span class="code-literal">null</span>,t.trigger(<span class="code-string">"mediaupdatetimeout"</span>),t.updateMediaUpdateTimeout_(e)}),e))},i.start=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.started=!<span class="code-number">0</span>,<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.src)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.src.uri||(<span class="code-keyword">this</span>.src.uri=<span class="code-built_in">window</span>.location.href),<span class="code-keyword">this</span>.src.resolvedUri=<span class="code-keyword">this</span>.src.uri,<span class="code-keyword">void</span> setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.setupInitialPlaylist(e.src)}),<span class="code-number">0</span>);<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:<span class="code-keyword">this</span>.src,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(e.request){<span class="code-keyword">if</span>(e.request=<span class="code-literal">null</span>,t)<span class="code-keyword">return</span> e.error={<span class="code-attr">status</span>:i.status,<span class="code-attr">message</span>:<span class="code-string">"HLS playlist request error at URL: "</span>+e.src+<span class="code-string">"."</span>,<span class="code-attr">responseText</span>:i.responseText,<span class="code-attr">code</span>:<span class="code-number">2</span>},<span class="code-string">"HAVE_NOTHING"</span>===e.state&amp;&amp;(e.started=!<span class="code-number">1</span>),e.trigger(<span class="code-string">"error"</span>);e.src=f(e.handleManifestRedirects,e.src,i);<span class="code-keyword">var</span> n=e.parseManifest_({<span class="code-attr">manifestString</span>:i.responseText,<span class="code-attr">url</span>:e.src});e.setupInitialPlaylist(n)}}))},i.srcUri=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.src?<span class="code-keyword">this</span>.src:<span class="code-keyword">this</span>.src.uri},i.setupInitialPlaylist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>,e.playlists)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.master=e,ge(<span class="code-keyword">this</span>.master,<span class="code-keyword">this</span>.srcUri()),e.playlists.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.segments=be(e),e.segments.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{Te(t,e.resolvedUri)}))})),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>),<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.request||<span class="code-keyword">this</span>.media(<span class="code-keyword">this</span>.master.playlists[<span class="code-number">0</span>]));<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.srcUri()||<span class="code-built_in">window</span>.location.href;<span class="code-keyword">this</span>.master=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=fe(<span class="code-number">0</span>,t),n={<span class="code-attr">mediaGroups</span>:{<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{},<span class="code-string">"CLOSED-CAPTIONS"</span>:{},<span class="code-attr">SUBTITLES</span>:{}},<span class="code-attr">uri</span>:<span class="code-built_in">window</span>.location.href,<span class="code-attr">resolvedUri</span>:<span class="code-built_in">window</span>.location.href,<span class="code-attr">playlists</span>:[{<span class="code-attr">uri</span>:t,<span class="code-attr">id</span>:i,<span class="code-attr">resolvedUri</span>:t,<span class="code-attr">attributes</span>:{}}]};<span class="code-keyword">return</span> n.playlists[i]=n.playlists[<span class="code-number">0</span>],n.playlists[t]=n.playlists[<span class="code-number">0</span>],n}(<span class="code-number">0</span>,t),<span class="code-keyword">this</span>.haveMetadata({<span class="code-attr">playlistObject</span>:e,<span class="code-attr">url</span>:t,<span class="code-attr">id</span>:<span class="code-keyword">this</span>.master.playlists[<span class="code-number">0</span>].id}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedmetadata"</span>)},t}(ve),Ae=r.default.xhr,Le=r.default.mergeOptions,Pe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-string">"arraybuffer"</span>===e.responseType?e.response:e.responseText;!t&amp;&amp;r&amp;&amp;(e.responseTime=<span class="code-built_in">Date</span>.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=<span class="code-built_in">Math</span>.floor(e.bytesReceived/e.roundTripTime*<span class="code-number">8</span>*<span class="code-number">1e3</span>))),i.headers&amp;&amp;(e.responseHeaders=i.headers),t&amp;&amp;<span class="code-string">"ETIMEDOUT"</span>===t.code&amp;&amp;(e.timedout=!<span class="code-number">0</span>),t||e.aborted||<span class="code-number">200</span>===i.statusCode||<span class="code-number">206</span>===i.statusCode||<span class="code-number">0</span>===i.statusCode||(t=<span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"XHR Failed with a response of: "</span>+(e&amp;&amp;(r||e.responseText)))),n(t,e)},ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{t=Le({<span class="code-attr">timeout</span>:<span class="code-number">45e3</span>},t);<span class="code-keyword">var</span> n=e.beforeRequest||r.default.Vhs.xhr.beforeRequest;<span class="code-keyword">if</span>(n&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> n){<span class="code-keyword">var</span> a=n(t);a&amp;&amp;(t=a)}<span class="code-keyword">var</span> s=(!<span class="code-number">0</span>===r.default.Vhs.xhr.original?Ae:r.default.Vhs.xhr)(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> Pe(s,e,t,i)})),o=s.abort;<span class="code-keyword">return</span> s.abort=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s.aborted=!<span class="code-number">0</span>,o.apply(s,<span class="code-built_in">arguments</span>)},s.uri=t.uri,s.requestTime=<span class="code-built_in">Date</span>.now(),s};<span class="code-keyword">return</span> e.original=!<span class="code-number">0</span>,e},xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={};<span class="code-keyword">return</span> e.byterange&amp;&amp;(i.Range=<span class="code-string">"bytes="</span>+(t=e.byterange).offset+<span class="code-string">"-"</span>+(<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> t.offset||<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> t.length?<span class="code-built_in">window</span>.BigInt(t.offset)+<span class="code-built_in">window</span>.BigInt(t.length)-<span class="code-built_in">window</span>.BigInt(<span class="code-number">1</span>):t.offset+t.length<span class="code-number">-1</span>)),i},Oe=<span class="code-regexp">/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i</span>,De=<span class="code-regexp">/^application\/dash\+xml/i</span>,Ce=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Oe.test(e)?<span class="code-string">"hls"</span>:De.test(e)?<span class="code-string">"dash"</span>:<span class="code-string">"application/vnd.videojs.vhs+json"</span>===e?<span class="code-string">"vhs-json"</span>:<span class="code-literal">null</span>},Ue=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.start(t)+<span class="code-string">"-"</span>+e.end(t)},Re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.toString(<span class="code-number">16</span>);<span class="code-keyword">return</span><span class="code-string">"00"</span>.substring(<span class="code-number">0</span>,<span class="code-number">2</span>-i.length)+i+(t%<span class="code-number">2</span>?<span class="code-string">" "</span>:<span class="code-string">""</span>)},Me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">32</span>&amp;&amp;e&lt;<span class="code-number">126</span>?<span class="code-built_in">String</span>.fromCharCode(e):<span class="code-string">"."</span>},Be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(e).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=e[i];<span class="code-built_in">ArrayBuffer</span>.isView(n)?t[i]={<span class="code-attr">bytes</span>:n.buffer,<span class="code-attr">byteOffset</span>:n.byteOffset,<span class="code-attr">byteLength</span>:n.byteLength}:t[i]=n})),t},Ne=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byterange||{<span class="code-attr">length</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">offset</span>:<span class="code-number">0</span>};<span class="code-keyword">return</span>[t.length,t.offset,e.resolvedUri].join(<span class="code-string">","</span>)},Fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.resolvedUri},qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-built_in">Array</span>.prototype.slice.call(e),i=<span class="code-number">16</span>,n=<span class="code-string">""</span>,r=<span class="code-number">0</span>;r&lt;t.length/i;r++)n+=t.slice(r*i,r*i+i).map(Re).join(<span class="code-string">""</span>)+<span class="code-string">" "</span>+t.slice(r*i,r*i+i).map(Me).join(<span class="code-string">""</span>)+<span class="code-string">"\n"</span>;<span class="code-keyword">return</span> n},He=<span class="code-built_in">Object</span>.freeze({<span class="code-attr">__proto__</span>:<span class="code-literal">null</span>,<span class="code-attr">createTransferableMessage</span>:Be,<span class="code-attr">initSegmentId</span>:Ne,<span class="code-attr">segmentKeyId</span>:Fe,<span class="code-attr">hexDump</span>:qe,<span class="code-attr">tagDump</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.bytes;<span class="code-keyword">return</span> qe(t)},<span class="code-attr">textRanges</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-string">""</span>;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i+=Ue(e,t)+<span class="code-string">" "</span>;<span class="code-keyword">return</span> i}}),Ge=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.programTime,n=t.playlist,r=t.retryCount,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">2</span>:r,s=t.seekTo,o=t.pauseAfterSeek,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o||o,d=t.tech,l=t.callback;<span class="code-keyword">if</span>(!l)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"seekToProgramTime: callback must be provided"</span>);<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i||!n||!s)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"seekToProgramTime: programTime, seekTo and playlist must be provided"</span>});<span class="code-keyword">if</span>(!n.endList&amp;&amp;!d.hasStarted_)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"player must be playing a live stream to start buffering"</span>});<span class="code-keyword">if</span>(!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.segments||<span class="code-number">0</span>===e.segments.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;e.segments.length;t++)<span class="code-keyword">if</span>(!e.segments[t].dateTimeObject)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">return</span>!<span class="code-number">0</span>}(n))<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:<span class="code-string">"programDateTime tags must be provided in the manifest "</span>+n.resolvedUri});<span class="code-keyword">var</span> c=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">try</span>{i=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(e)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-literal">null</span>}<span class="code-keyword">if</span>(!t||!t.segments||<span class="code-number">0</span>===t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n=t.segments[<span class="code-number">0</span>];<span class="code-keyword">if</span>(i&lt;n.dateTimeObject)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;t.segments.length<span class="code-number">-1</span>&amp;&amp;(n=t.segments[r],!(i&lt;t.segments[r+<span class="code-number">1</span>].dateTimeObject));r++);<span class="code-keyword">var</span> a,s=t.segments[t.segments.length<span class="code-number">-1</span>],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+<span class="code-number">.25</span>*s.duration;<span class="code-keyword">return</span> i&gt;<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(o.getTime()+<span class="code-number">1e3</span>*u)?<span class="code-literal">null</span>:(i&gt;o&amp;&amp;(n=s),{<span class="code-attr">segment</span>:n,<span class="code-attr">estimatedStart</span>:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:ce.duration(t,t.mediaSequence+t.segments.indexOf(n)),<span class="code-attr">type</span>:n.videoTimingInfo?<span class="code-string">"accurate"</span>:<span class="code-string">"estimate"</span>})}(i,n);<span class="code-keyword">if</span>(!c)<span class="code-keyword">return</span> l({<span class="code-attr">message</span>:i+<span class="code-string">" was not found in the stream"</span>});<span class="code-keyword">var</span> h=c.segment,f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n;<span class="code-keyword">try</span>{i=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(e),n=<span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t)}<span class="code-keyword">catch</span>(e){}<span class="code-keyword">var</span> r=i.getTime();<span class="code-keyword">return</span>(n.getTime()-r)/<span class="code-number">1e3</span>}(h.dateTimeObject,i);<span class="code-keyword">if</span>(<span class="code-string">"estimate"</span>===c.type)<span class="code-keyword">return</span> <span class="code-number">0</span>===a?l({<span class="code-attr">message</span>:i+<span class="code-string">" is not buffered yet. Try again"</span>}):(s(c.estimatedStart+f),<span class="code-keyword">void</span> d.one(<span class="code-string">"seeked"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e({<span class="code-attr">programTime</span>:i,<span class="code-attr">playlist</span>:n,<span class="code-attr">retryCount</span>:a<span class="code-number">-1</span>,<span class="code-attr">seekTo</span>:s,<span class="code-attr">pauseAfterSeek</span>:u,<span class="code-attr">tech</span>:d,<span class="code-attr">callback</span>:l})})));<span class="code-keyword">var</span> p=h.start+f;d.one(<span class="code-string">"seeked"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> l(<span class="code-literal">null</span>,d.currentTime())})),u&amp;&amp;d.pause(),s(p)},We=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!e&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> e},Ve=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-built_in">arguments</span>.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(t),n=<span class="code-number">0</span>;n&lt;t;n++)i[n]=<span class="code-built_in">arguments</span>[n];<span class="code-keyword">return</span> i.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> i||<span class="code-built_in">Object</span>.keys(i).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-built_in">Array</span>.isArray(t[n])&amp;&amp;<span class="code-built_in">Array</span>.isArray(i[n])?t[n]=t[n].concat(i[n]):We(t[n])&amp;&amp;We(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]})),t}),{})},je=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.concat(t)}),[])},Xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.length)<span class="code-keyword">return</span>[];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">0</span>;i&lt;e.length;i++)t.push(e[i]);<span class="code-keyword">return</span> t},ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.baseUrl,i=<span class="code-keyword">void</span> <span class="code-number">0</span>===t?<span class="code-string">""</span>:t,n=e.source,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-string">""</span>:n,a=e.range,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-string">""</span>:a,o=e.indexRange,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-string">""</span>:o,d={<span class="code-attr">uri</span>:r,<span class="code-attr">resolvedUri</span>:c(i||<span class="code-string">""</span>,r)};<span class="code-keyword">if</span>(s||u){<span class="code-keyword">var</span> l,h=(s||u).split(<span class="code-string">"-"</span>),f=<span class="code-built_in">window</span>.BigInt?<span class="code-built_in">window</span>.BigInt(h[<span class="code-number">0</span>]):<span class="code-built_in">parseInt</span>(h[<span class="code-number">0</span>],<span class="code-number">10</span>),p=<span class="code-built_in">window</span>.BigInt?<span class="code-built_in">window</span>.BigInt(h[<span class="code-number">1</span>]):<span class="code-built_in">parseInt</span>(h[<span class="code-number">1</span>],<span class="code-number">10</span>);f&lt;<span class="code-built_in">Number</span>.MAX_SAFE_INTEGER&amp;&amp;<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> f&amp;&amp;(f=<span class="code-built_in">Number</span>(f)),p&lt;<span class="code-built_in">Number</span>.MAX_SAFE_INTEGER&amp;&amp;<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> p&amp;&amp;(p=<span class="code-built_in">Number</span>(p)),<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span>(l=<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> p||<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> f?<span class="code-built_in">window</span>.BigInt(p)-<span class="code-built_in">window</span>.BigInt(f)+<span class="code-built_in">window</span>.BigInt(<span class="code-number">1</span>):p-f+<span class="code-number">1</span>)&amp;&amp;l&lt;<span class="code-built_in">Number</span>.MAX_SAFE_INTEGER&amp;&amp;(l=<span class="code-built_in">Number</span>(l)),d.byterange={<span class="code-attr">length</span>:l,<span class="code-attr">offset</span>:f}}<span class="code-keyword">return</span> d},Qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e&amp;&amp;(e=<span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)),<span class="code-built_in">isNaN</span>(e)?<span class="code-literal">null</span>:e},Ye={<span class="code-attr">static</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.duration,i=e.timescale,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-number">1</span>:i,r=e.sourceDuration,a=e.periodDuration,s=Qe(e.endNumber),o=t/n;<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> s?{<span class="code-attr">start</span>:<span class="code-number">0</span>,<span class="code-attr">end</span>:s}:<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> a?{<span class="code-attr">start</span>:<span class="code-number">0</span>,<span class="code-attr">end</span>:a/o}:{<span class="code-attr">start</span>:<span class="code-number">0</span>,<span class="code-attr">end</span>:r/o}},<span class="code-attr">dynamic</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.duration,o=e.start,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">0</span>:o,d=e.minimumUpdatePeriod,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">0</span>:d,c=e.timeShiftBufferDepth,h=<span class="code-keyword">void</span> <span class="code-number">0</span>===c?<span class="code-number">1</span>/<span class="code-number">0</span>:c,f=Qe(e.endNumber),p=(t+i)/<span class="code-number">1e3</span>,m=n+u,g=p+l-m,y=<span class="code-built_in">Math</span>.ceil(g*a/s),v=<span class="code-built_in">Math</span>.floor((p-m-h)*a/s),_=<span class="code-built_in">Math</span>.floor((p-m)*a/s);<span class="code-keyword">return</span>{<span class="code-attr">start</span>:<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,v),<span class="code-attr">end</span>:<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> f?f:<span class="code-built_in">Math</span>.min(y,_)}}},Ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.duration,n=e.timescale,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-number">1</span>:n,a=e.periodDuration,s=e.sourceDuration,o=Ye[t](e),u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=[],n=e;n&lt;t;n++)i.push(n);<span class="code-keyword">return</span> i}(o.start,o.end).map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=e.duration,r=e.timescale,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">1</span>:r,s=e.periodIndex,o=e.startNumber;<span class="code-keyword">return</span>{<span class="code-attr">number</span>:(<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">1</span>:o)+t,<span class="code-attr">duration</span>:n/a,<span class="code-attr">timeline</span>:s,<span class="code-attr">time</span>:i*n}}}(e));<span class="code-keyword">if</span>(<span class="code-string">"static"</span>===t){<span class="code-keyword">var</span> d=u.length<span class="code-number">-1</span>,l=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> a?a:s;u[d].duration=l-i/r*d}<span class="code-keyword">return</span> u},$e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.baseUrl,i=e.initialization,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?{}:i,r=e.sourceDuration,a=e.indexRange,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-string">""</span>:a,o=e.duration;<span class="code-keyword">if</span>(!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"NO_BASE_URL"</span>);<span class="code-keyword">var</span> u=ze({<span class="code-attr">baseUrl</span>:t,<span class="code-attr">source</span>:n.sourceURL,<span class="code-attr">range</span>:n.range}),d=ze({<span class="code-attr">baseUrl</span>:t,<span class="code-attr">source</span>:t,<span class="code-attr">indexRange</span>:s});<span class="code-keyword">if</span>(d.map=u,o){<span class="code-keyword">var</span> l=Ke(e);l.length&amp;&amp;(d.duration=l[<span class="code-number">0</span>].duration,d.timeline=l[<span class="code-number">0</span>].timeline)}<span class="code-keyword">else</span> r&amp;&amp;(d.duration=r,d.timeline=<span class="code-number">0</span>);<span class="code-keyword">return</span> d.number=<span class="code-number">0</span>,[d]},Je=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=e.sidx.map?e.sidx.map:<span class="code-literal">null</span>,a=e.sidx.duration,s=e.timeline||<span class="code-number">0</span>,o=e.sidx.byterange,u=o.offset+o.length,d=t.timescale,l=t.references.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">1</span>!==e.referenceType})),c=[],h=e.endList?<span class="code-string">"static"</span>:<span class="code-string">"dynamic"</span>;n=<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> t.firstOffset?<span class="code-built_in">window</span>.BigInt(u)+t.firstOffset:u+t.firstOffset;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> f=<span class="code-number">0</span>;f&lt;l.length;f++){<span class="code-keyword">var</span> p,m=t.references[f],g=m.referencedSize,y=m.subsegmentDuration;p=<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> n?n+<span class="code-built_in">window</span>.BigInt(g)-<span class="code-built_in">window</span>.BigInt(<span class="code-number">1</span>):n+g<span class="code-number">-1</span>;<span class="code-keyword">var</span> v=$e({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">timescale</span>:d,<span class="code-attr">timeline</span>:s,<span class="code-attr">periodIndex</span>:s,<span class="code-attr">duration</span>:y,<span class="code-attr">sourceDuration</span>:a,<span class="code-attr">indexRange</span>:n+<span class="code-string">"-"</span>+p,<span class="code-attr">type</span>:h})[<span class="code-number">0</span>];r&amp;&amp;(v.map=r),c.push(v),n+=<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> n?<span class="code-built_in">window</span>.BigInt(g):g}<span class="code-keyword">return</span> e.segments=c,e},Ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;e.uri+<span class="code-string">"-"</span>+(i=<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span>(t=e.byterange).offset||<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> t.length?<span class="code-built_in">window</span>.BigInt(t.offset)+<span class="code-built_in">window</span>.BigInt(t.length)-<span class="code-built_in">window</span>.BigInt(<span class="code-number">1</span>):t.offset+t.length<span class="code-number">-1</span>,t.offset+<span class="code-string">"-"</span>+i);<span class="code-keyword">var</span> t,i},et=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=t.attributes.id+(t.attributes.lang||<span class="code-string">""</span>);<span class="code-keyword">return</span> e[n]?(t.segments[<span class="code-number">0</span>]&amp;&amp;(t.segments[<span class="code-number">0</span>].discontinuity=!<span class="code-number">0</span>),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&amp;&amp;(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e}),{}),<span class="code-built_in">Object</span>.keys(t).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e]}))).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span> e.discontinuityStarts=(t=e.segments,<span class="code-string">"discontinuity"</span>,t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> t.discontinuity&amp;&amp;e.push(i),e}),[])),e}))},tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Ze(e.sidx),n=i&amp;&amp;t[i]&amp;&amp;t[i].sidx;<span class="code-keyword">return</span> n&amp;&amp;Je(e,n,e.sidx.resolvedUri),e},it=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),!<span class="code-built_in">Object</span>.keys(t).length)<span class="code-keyword">return</span> e;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i <span class="code-keyword">in</span> e)e[i]=tt(e[i],t);<span class="code-keyword">return</span> e},nt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.attributes,n=e.segments,r=e.sidx,a={<span class="code-attr">attributes</span>:(t={<span class="code-attr">NAME</span>:i.id,<span class="code-attr">AUDIO</span>:<span class="code-string">"audio"</span>,<span class="code-attr">SUBTITLES</span>:<span class="code-string">"subs"</span>,<span class="code-attr">RESOLUTION</span>:{<span class="code-attr">width</span>:i.width,<span class="code-attr">height</span>:i.height},<span class="code-attr">CODECS</span>:i.codecs,<span class="code-attr">BANDWIDTH</span>:i.bandwidth},t[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,t),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===i.type,<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:i.duration,<span class="code-attr">segments</span>:n,<span class="code-attr">mediaSequence</span>:n.length?n[<span class="code-number">0</span>].number:<span class="code-number">1</span>};<span class="code-keyword">return</span> i.contentProtection&amp;&amp;(a.contentProtection=i.contentProtection),r&amp;&amp;(a.sidx=r),a},rt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"video/mp4"</span>===t.mimeType||<span class="code-string">"video/webm"</span>===t.mimeType||<span class="code-string">"video"</span>===t.contentType},at=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"audio/mp4"</span>===t.mimeType||<span class="code-string">"audio/webm"</span>===t.mimeType||<span class="code-string">"audio"</span>===t.contentType},st=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes;<span class="code-keyword">return</span><span class="code-string">"text/vtt"</span>===t.mimeType||<span class="code-string">"text"</span>===t.contentType},ot=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?<span class="code-number">1</span>:s,u=e.start,d=<span class="code-keyword">void</span> <span class="code-number">0</span>===u?<span class="code-number">0</span>:u,l=e.minimumUpdatePeriod,c=(n+r)/<span class="code-number">1e3</span>+(<span class="code-keyword">void</span> <span class="code-number">0</span>===l?<span class="code-number">0</span>:l)-(a+d);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.ceil((c*o-t)/i)},ut=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.type,n=e.minimumUpdatePeriod,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-number">0</span>:n,a=e.media,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-string">""</span>:a,o=e.sourceDuration,u=e.timescale,d=<span class="code-keyword">void</span> <span class="code-number">0</span>===u?<span class="code-number">1</span>:u,l=e.startNumber,c=<span class="code-keyword">void</span> <span class="code-number">0</span>===l?<span class="code-number">1</span>:l,h=e.periodIndex,f=[],p=<span class="code-number">-1</span>,m=<span class="code-number">0</span>;m&lt;t.length;m++){<span class="code-keyword">var</span> g=t[m],y=g.d,v=g.r||<span class="code-number">0</span>,_=g.t||<span class="code-number">0</span>;p&lt;<span class="code-number">0</span>&amp;&amp;(p=_),_&amp;&amp;_&gt;p&amp;&amp;(p=_);<span class="code-keyword">var</span> T=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(v&lt;<span class="code-number">0</span>){<span class="code-keyword">var</span> b=m+<span class="code-number">1</span>;T=b===t.length?<span class="code-string">"dynamic"</span>===i&amp;&amp;r&gt;<span class="code-number">0</span>&amp;&amp;s.indexOf(<span class="code-string">"$Number$"</span>)&gt;<span class="code-number">0</span>?ot(e,p,y):(o*d-p)/y:(t[b].t-p)/y}<span class="code-keyword">else</span> T=v+<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> S=c+f.length+T,w=c+f.length;w&lt;S;)f.push({<span class="code-attr">number</span>:w,<span class="code-attr">duration</span>:y/d,<span class="code-attr">time</span>:p,<span class="code-attr">timeline</span>:h}),p+=y,w++}<span class="code-keyword">return</span> f},dt=<span class="code-regexp">/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g</span>,lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.replace(dt,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"$$"</span>===t)<span class="code-keyword">return</span><span class="code-string">"$"</span>;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e[i])<span class="code-keyword">return</span> t;<span class="code-keyword">var</span> a=<span class="code-string">""</span>+e[i];<span class="code-keyword">return</span><span class="code-string">"RepresentationID"</span>===i?a:(r=n?<span class="code-built_in">parseInt</span>(r,<span class="code-number">10</span>):<span class="code-number">1</span>,a.length&gt;=r?a:<span class="code-string">""</span>+<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(r-a.length+<span class="code-number">1</span>).join(<span class="code-string">"0"</span>)+a)}}(t))},ct=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">RepresentationID</span>:e.id,<span class="code-attr">Bandwidth</span>:e.bandwidth||<span class="code-number">0</span>},n=e.initialization,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?{<span class="code-attr">sourceURL</span>:<span class="code-string">""</span>,<span class="code-attr">range</span>:<span class="code-string">""</span>}:n,a=ze({<span class="code-attr">baseUrl</span>:e.baseUrl,<span class="code-attr">source</span>:lt(r.sourceURL,i),<span class="code-attr">range</span>:r.range}),s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.duration||t?e.duration?Ke(e):ut(e,t):[{<span class="code-attr">number</span>:e.startNumber||<span class="code-number">1</span>,<span class="code-attr">duration</span>:e.sourceDuration,<span class="code-attr">time</span>:<span class="code-number">0</span>,<span class="code-attr">timeline</span>:e.periodIndex}]}(e,t);<span class="code-keyword">return</span> s.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{i.Number=t.number,i.Time=t.time;<span class="code-keyword">var</span> n=lt(e.media||<span class="code-string">""</span>,i),r=e.timescale||<span class="code-number">1</span>,s=e.presentationTimeOffset||<span class="code-number">0</span>,o=e.periodStart+(t.time-s)/r;<span class="code-keyword">return</span>{<span class="code-attr">uri</span>:n,<span class="code-attr">timeline</span>:t.timeline,<span class="code-attr">duration</span>:t.duration,<span class="code-attr">resolvedUri</span>:c(e.baseUrl||<span class="code-string">""</span>,n),<span class="code-attr">map</span>:a,<span class="code-attr">number</span>:t.number,<span class="code-attr">presentationTime</span>:o}}))},ht=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.duration,n=e.segmentUrls,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?[]:n,a=e.periodStart;<span class="code-keyword">if</span>(!i&amp;&amp;!t||i&amp;&amp;t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"SEGMENT_TIME_UNSPECIFIED"</span>);<span class="code-keyword">var</span> s,o=r.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.baseUrl,n=e.initialization,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?{}:n,a=ze({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">source</span>:r.sourceURL,<span class="code-attr">range</span>:r.range}),s=ze({<span class="code-attr">baseUrl</span>:i,<span class="code-attr">source</span>:t.media,<span class="code-attr">range</span>:t.mediaRange});<span class="code-keyword">return</span> s.map=a,s}(e,t)}));<span class="code-keyword">return</span> i&amp;&amp;(s=Ke(e)),t&amp;&amp;(s=ut(e,t)),s.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(o[i]){<span class="code-keyword">var</span> n=o[i],r=e.timescale||<span class="code-number">1</span>,s=e.presentationTimeOffset||<span class="code-number">0</span>;<span class="code-keyword">return</span> n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n.presentationTime=a+(t.time-s)/r,n}})).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}))},ft=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=ct,t=Ve(n,r.template)):r.base?(i=$e,t=Ve(n,r.base)):r.list&amp;&amp;(i=ht,t=Ve(n,r.list));<span class="code-keyword">var</span> a={<span class="code-attr">attributes</span>:n};<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> a;<span class="code-keyword">var</span> s=i(t,r.segmentTimeline);<span class="code-keyword">if</span>(t.duration){<span class="code-keyword">var</span> o=t,u=o.duration,d=o.timescale,l=<span class="code-keyword">void</span> <span class="code-number">0</span>===d?<span class="code-number">1</span>:d;t.duration=u/l}<span class="code-keyword">else</span> s.length?t.duration=s.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(e,<span class="code-built_in">Math</span>.ceil(t.duration))}),<span class="code-number">0</span>):t.duration=<span class="code-number">0</span>;<span class="code-keyword">return</span> a.attributes=t,a.segments=s,r.base&amp;&amp;t.indexRange&amp;&amp;(a.sidx=s[<span class="code-number">0</span>],a.segments=[]),a},pt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> Xe(e.childNodes).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.tagName===t}))},mt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.textContent.trim()},gt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-regexp">/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/</span>.exec(e);<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.slice(<span class="code-number">1</span>),n=i[<span class="code-number">0</span>],r=i[<span class="code-number">1</span>],a=i[<span class="code-number">2</span>],s=i[<span class="code-number">3</span>],o=i[<span class="code-number">4</span>],u=i[<span class="code-number">5</span>];<span class="code-keyword">return</span> <span class="code-number">31536e3</span>*<span class="code-built_in">parseFloat</span>(n||<span class="code-number">0</span>)+<span class="code-number">2592e3</span>*<span class="code-built_in">parseFloat</span>(r||<span class="code-number">0</span>)+<span class="code-number">86400</span>*<span class="code-built_in">parseFloat</span>(a||<span class="code-number">0</span>)+<span class="code-number">3600</span>*<span class="code-built_in">parseFloat</span>(s||<span class="code-number">0</span>)+<span class="code-number">60</span>*<span class="code-built_in">parseFloat</span>(o||<span class="code-number">0</span>)+<span class="code-built_in">parseFloat</span>(u||<span class="code-number">0</span>)},yt={<span class="code-attr">mediaPresentationDuration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> gt(e)},<span class="code-attr">availabilityStartTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/</span>.test(t=e)&amp;&amp;(t+=<span class="code-string">"Z"</span>),<span class="code-built_in">Date</span>.parse(t)/<span class="code-number">1e3</span>;<span class="code-keyword">var</span> t},<span class="code-attr">minimumUpdatePeriod</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> gt(e)},<span class="code-attr">suggestedPresentationDelay</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> gt(e)},<span class="code-attr">type</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e},<span class="code-attr">timeShiftBufferDepth</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> gt(e)},<span class="code-attr">start</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> gt(e)},<span class="code-attr">width</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">height</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">bandwidth</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">startNumber</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">timescale</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">presentationTimeOffset</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">duration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>);<span class="code-keyword">return</span> <span class="code-built_in">isNaN</span>(t)?gt(e):t},<span class="code-attr">d</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">t</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">r</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">parseInt</span>(e,<span class="code-number">10</span>)},<span class="code-attr">DEFAULT</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e}},vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;e.attributes?Xe(e.attributes).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=yt[t.name]||yt.DEFAULT;<span class="code-keyword">return</span> e[t.name]=i(t.value),e}),{}):{}},_t={<span class="code-string">"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"</span>:<span class="code-string">"org.w3.clearkey"</span>,<span class="code-string">"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"</span>:<span class="code-string">"com.widevine.alpha"</span>,<span class="code-string">"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95"</span>:<span class="code-string">"com.microsoft.playready"</span>,<span class="code-string">"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb"</span>:<span class="code-string">"com.adobe.primetime"</span>},Tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.length?je(e.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> c(e,mt(t))}))}))):e},bt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=pt(e,<span class="code-string">"SegmentTemplate"</span>)[<span class="code-number">0</span>],i=pt(e,<span class="code-string">"SegmentList"</span>)[<span class="code-number">0</span>],n=i&amp;&amp;pt(i,<span class="code-string">"SegmentURL"</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Ve({<span class="code-attr">tag</span>:<span class="code-string">"SegmentURL"</span>},vt(e))})),r=pt(e,<span class="code-string">"SegmentBase"</span>)[<span class="code-number">0</span>],a=i||t,s=a&amp;&amp;pt(a,<span class="code-string">"SegmentTimeline"</span>)[<span class="code-number">0</span>],o=i||r||t,u=o&amp;&amp;pt(o,<span class="code-string">"Initialization"</span>)[<span class="code-number">0</span>],d=t&amp;&amp;vt(t);d&amp;&amp;u?d.initialization=u&amp;&amp;vt(u):d&amp;&amp;d.initialization&amp;&amp;(d.initialization={<span class="code-attr">sourceURL</span>:d.initialization});<span class="code-keyword">var</span> l={<span class="code-attr">template</span>:d,<span class="code-attr">segmentTimeline</span>:s&amp;&amp;pt(s,<span class="code-string">"S"</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> vt(e)})),<span class="code-attr">list</span>:i&amp;&amp;Ve(vt(i),{<span class="code-attr">segmentUrls</span>:n,<span class="code-attr">initialization</span>:vt(u)}),<span class="code-attr">base</span>:r&amp;&amp;Ve(vt(r),{<span class="code-attr">initialization</span>:vt(u)})};<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(l).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{l[e]||<span class="code-keyword">delete</span> l[e]})),l},St=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=Tt(t,pt(i.node,<span class="code-string">"BaseURL"</span>)),a=<span class="code-built_in">parseInt</span>(i.attributes.id,<span class="code-number">10</span>),s=<span class="code-built_in">window</span>.isNaN(a)?n:a,o=Ve(e,{<span class="code-attr">periodIndex</span>:s,<span class="code-attr">periodStart</span>:i.attributes.start});<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.attributes.duration&amp;&amp;(o.periodDuration=i.attributes.duration);<span class="code-keyword">var</span> u=pt(i.node,<span class="code-string">"AdaptationSet"</span>),d=bt(i.node);<span class="code-keyword">return</span> je(u.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r,a=vt(n),s=Tt(t,pt(n,<span class="code-string">"BaseURL"</span>)),o=pt(n,<span class="code-string">"Role"</span>)[<span class="code-number">0</span>],u={<span class="code-attr">role</span>:vt(o)},d=Ve(e,a,u),l=pt(n,<span class="code-string">"Accessibility"</span>)[<span class="code-number">0</span>],c=<span class="code-string">"urn:scte:dash:cc:cea-608:2015"</span>===(r=vt(l)).schemeIdUri?(<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> r.value?[]:r.value.split(<span class="code-string">";"</span>)).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">if</span>(i=e,/^CC\d=<span class="code-regexp">/.test(e)){var n=e.split("=");t=n[0],i=n[1]}else/</span>^CC\d$/.test(e)&amp;&amp;(t=e);<span class="code-keyword">return</span>{<span class="code-attr">channel</span>:t,<span class="code-attr">language</span>:i}})):<span class="code-string">"urn:scte:dash:cc:cea-708:2015"</span>===r.schemeIdUri?(<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> r.value?[]:r.value.split(<span class="code-string">";"</span>)).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">channel</span>:<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-attr">language</span>:<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-attr">aspectRatio</span>:<span class="code-number">1</span>,<span class="code-attr">easyReader</span>:<span class="code-number">0</span>,<span class="code-string">"3D"</span>:<span class="code-number">0</span>};<span class="code-keyword">if</span>(<span class="code-regexp">/=/</span>.test(e)){<span class="code-keyword">var</span> i=e.split(<span class="code-string">"="</span>),n=i[<span class="code-number">0</span>],r=i[<span class="code-number">1</span>],a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-string">""</span>:r;t.channel=n,t.language=e,a.split(<span class="code-string">","</span>).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.split(<span class="code-string">":"</span>),n=i[<span class="code-number">0</span>],r=i[<span class="code-number">1</span>];<span class="code-string">"lang"</span>===n?t.language=r:<span class="code-string">"er"</span>===n?t.easyReader=<span class="code-built_in">Number</span>(r):<span class="code-string">"war"</span>===n?t.aspectRatio=<span class="code-built_in">Number</span>(r):<span class="code-string">"3D"</span>===n&amp;&amp;(t[<span class="code-string">"3D"</span>]=<span class="code-built_in">Number</span>(r))}))}<span class="code-keyword">else</span> t.language=e;<span class="code-keyword">return</span> t.channel&amp;&amp;(t.channel=<span class="code-string">"SERVICE"</span>+t.channel),t})):<span class="code-keyword">void</span> <span class="code-number">0</span>;c&amp;&amp;(d=Ve(d,{<span class="code-attr">captionServices</span>:c}));<span class="code-keyword">var</span> h=pt(n,<span class="code-string">"Label"</span>)[<span class="code-number">0</span>];<span class="code-keyword">if</span>(h&amp;&amp;h.childNodes.length){<span class="code-keyword">var</span> f=h.childNodes[<span class="code-number">0</span>].nodeValue.trim();d=Ve(d,{<span class="code-attr">label</span>:f})}<span class="code-keyword">var</span> p=pt(n,<span class="code-string">"ContentProtection"</span>).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=vt(t),n=_t[i.schemeIdUri];<span class="code-keyword">if</span>(n){e[n]={<span class="code-attr">attributes</span>:i};<span class="code-keyword">var</span> r=pt(t,<span class="code-string">"cenc:pssh"</span>)[<span class="code-number">0</span>];<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> a=mt(r),s=a&amp;&amp;y(a);e[n].pssh=s}}<span class="code-keyword">return</span> e}),{});<span class="code-built_in">Object</span>.keys(p).length&amp;&amp;(d=Ve(d,{<span class="code-attr">contentProtection</span>:p}));<span class="code-keyword">var</span> m=bt(n),g=pt(n,<span class="code-string">"Representation"</span>),v=Ve(i,m);<span class="code-keyword">return</span> je(g.map(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=pt(n,<span class="code-string">"BaseURL"</span>),a=Tt(t,r),s=Ve(e,vt(n)),o=bt(n);<span class="code-keyword">return</span> a.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">segmentInfo</span>:Ve(i,o),<span class="code-attr">attributes</span>:Ve(s,{<span class="code-attr">baseUrl</span>:e})}}))}}(d,s,v)))}}(o,r,d)))}},wt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">""</span>===e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"DASH_EMPTY_MANIFEST"</span>);<span class="code-keyword">var</span> t,n,r=<span class="code-keyword">new</span> i.DOMParser;<span class="code-keyword">try</span>{n=(t=r.parseFromString(e,<span class="code-string">"application/xml"</span>))&amp;&amp;<span class="code-string">"MPD"</span>===t.documentElement.tagName?t.documentElement:<span class="code-literal">null</span>}<span class="code-keyword">catch</span>(e){}<span class="code-keyword">if</span>(!n||n&amp;&amp;n.getElementsByTagName(<span class="code-string">"parsererror"</span>).length&gt;<span class="code-number">0</span>)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"DASH_INVALID_XML"</span>);<span class="code-keyword">return</span> n},It=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=t,n=i.manifestUri,r=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?<span class="code-string">""</span>:n,a=i.NOW,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?<span class="code-built_in">Date</span>.now():a,o=i.clientOffset,u=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?<span class="code-number">0</span>:o,d=pt(e,<span class="code-string">"Period"</span>);<span class="code-keyword">if</span>(!d.length)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"INVALID_NUMBER_OF_PERIOD"</span>);<span class="code-keyword">var</span> l=pt(e,<span class="code-string">"Location"</span>),c=vt(e),h=Tt([r],pt(e,<span class="code-string">"BaseURL"</span>));c.type=c.type||<span class="code-string">"static"</span>,c.sourceDuration=c.mediaPresentationDuration||<span class="code-number">0</span>,c.NOW=s,c.clientOffset=u,l.length&amp;&amp;(c.locations=l.map(mt));<span class="code-keyword">var</span> f=[];<span class="code-keyword">return</span> d.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=vt(e),n=f[t<span class="code-number">-1</span>];i.start=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes,i=e.priorPeriodAttributes,n=e.mpdType;<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.start?t.start:i&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.start&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.duration?i.start+i.duration:i||<span class="code-string">"static"</span>!==n?<span class="code-literal">null</span>:<span class="code-number">0</span>}({<span class="code-attr">attributes</span>:i,<span class="code-attr">priorPeriodAttributes</span>:n?n.attributes:<span class="code-literal">null</span>,<span class="code-attr">mpdType</span>:c.type}),f.push({<span class="code-attr">node</span>:e,<span class="code-attr">attributes</span>:i})})),{<span class="code-attr">locations</span>:c.locations,<span class="code-attr">representationInfo</span>:je(f.map(St(c,h)))}}(wt(e),t);<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i={}),!e.length)<span class="code-keyword">return</span>{};<span class="code-keyword">var</span> r=e[<span class="code-number">0</span>].attributes,a=r.sourceDuration,s=r.type,o=r.suggestedPresentationDelay,u=r.minimumUpdatePeriod,d=et(e.filter(rt)).map(nt),l=et(e.filter(at)),c=e.filter(st),h=e.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.attributes.captionServices})).filter(<span class="code-built_in">Boolean</span>),f={<span class="code-attr">allowCache</span>:!<span class="code-number">0</span>,<span class="code-attr">discontinuityStarts</span>:[],<span class="code-attr">segments</span>:[],<span class="code-attr">endList</span>:!<span class="code-number">0</span>,<span class="code-attr">mediaGroups</span>:(n={<span class="code-attr">AUDIO</span>:{},<span class="code-attr">VIDEO</span>:{}},n[<span class="code-string">"CLOSED-CAPTIONS"</span>]={},n.SUBTITLES={},n),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">duration</span>:a,<span class="code-attr">playlists</span>:it(d,i)};u&gt;=<span class="code-number">0</span>&amp;&amp;(f.minimumUpdatePeriod=<span class="code-number">1e3</span>*u),t&amp;&amp;(f.locations=t),<span class="code-string">"dynamic"</span>===s&amp;&amp;(f.suggestedPresentationDelay=o);<span class="code-keyword">var</span> p=<span class="code-number">0</span>===f.playlists.length;<span class="code-keyword">return</span> l.length&amp;&amp;(f.mediaGroups.AUDIO.audio=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=!<span class="code-number">1</span>);<span class="code-keyword">var</span> r=e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,r</span>)</span>{<span class="code-keyword">var</span> a=r.attributes.role&amp;&amp;r.attributes.role.value||<span class="code-string">""</span>,s=r.attributes.lang||<span class="code-string">""</span>,o=r.attributes.label||<span class="code-string">"main"</span>;<span class="code-keyword">if</span>(s&amp;&amp;!r.attributes.label){<span class="code-keyword">var</span> u=a?<span class="code-string">" ("</span>+a+<span class="code-string">")"</span>:<span class="code-string">""</span>;o=<span class="code-string">""</span>+r.attributes.lang+u}e[o]||(e[o]={<span class="code-attr">language</span>:s,<span class="code-attr">autoselect</span>:!<span class="code-number">0</span>,<span class="code-attr">default</span>:<span class="code-string">"main"</span>===a,<span class="code-attr">playlists</span>:[],<span class="code-attr">uri</span>:<span class="code-string">""</span>});<span class="code-keyword">var</span> d=tt(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=e.attributes,r=e.segments,a=e.sidx,s={<span class="code-attr">attributes</span>:(i={<span class="code-attr">NAME</span>:n.id,<span class="code-attr">BANDWIDTH</span>:n.bandwidth,<span class="code-attr">CODECS</span>:n.codecs},i[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,i),<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===n.type,<span class="code-attr">timeline</span>:n.periodIndex,<span class="code-attr">resolvedUri</span>:<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:n.duration,<span class="code-attr">segments</span>:r,<span class="code-attr">mediaSequence</span>:r.length?r[<span class="code-number">0</span>].number:<span class="code-number">1</span>};<span class="code-keyword">return</span> n.contentProtection&amp;&amp;(s.contentProtection=n.contentProtection),a&amp;&amp;(s.sidx=a),t&amp;&amp;(s.attributes.AUDIO=<span class="code-string">"audio"</span>,s.attributes.SUBTITLES=<span class="code-string">"subs"</span>),s}(r,i),t);<span class="code-keyword">return</span> e[o].playlists.push(d),<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;<span class="code-string">"main"</span>===a&amp;&amp;((n=r).default=!<span class="code-number">0</span>),e}),{});<span class="code-keyword">return</span> n||(r[<span class="code-built_in">Object</span>.keys(r)[<span class="code-number">0</span>]].default=!<span class="code-number">0</span>),r}(l,i,p)),c.length&amp;&amp;(f.mediaGroups.SUBTITLES.subs=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n=i.attributes.lang||<span class="code-string">"text"</span>;<span class="code-keyword">return</span> e[n]||(e[n]={<span class="code-attr">language</span>:n,<span class="code-attr">default</span>:!<span class="code-number">1</span>,<span class="code-attr">autoselect</span>:!<span class="code-number">1</span>,<span class="code-attr">playlists</span>:[],<span class="code-attr">uri</span>:<span class="code-string">""</span>}),e[n].playlists.push(tt(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=e.attributes,n=e.segments;<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=[{<span class="code-attr">uri</span>:i.baseUrl,<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:i.baseUrl||<span class="code-string">""</span>,<span class="code-attr">duration</span>:i.sourceDuration,<span class="code-attr">number</span>:<span class="code-number">0</span>}],i.duration=i.sourceDuration);<span class="code-keyword">var</span> r=((t={<span class="code-attr">NAME</span>:i.id,<span class="code-attr">BANDWIDTH</span>:i.bandwidth})[<span class="code-string">"PROGRAM-ID"</span>]=<span class="code-number">1</span>,t);<span class="code-keyword">return</span> i.codecs&amp;&amp;(r.CODECS=i.codecs),{<span class="code-attr">attributes</span>:r,<span class="code-attr">uri</span>:<span class="code-string">""</span>,<span class="code-attr">endList</span>:<span class="code-string">"static"</span>===i.type,<span class="code-attr">timeline</span>:i.periodIndex,<span class="code-attr">resolvedUri</span>:i.baseUrl||<span class="code-string">""</span>,<span class="code-attr">targetDuration</span>:i.duration,<span class="code-attr">segments</span>:n,<span class="code-attr">mediaSequence</span>:n.length?n[<span class="code-number">0</span>].number:<span class="code-number">1</span>}}(i),t)),e}),{})}(c,i)),h.length&amp;&amp;(f.mediaGroups[<span class="code-string">"CLOSED-CAPTIONS"</span>].cc=h.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t?(t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.channel,n=t.language;e[n]={<span class="code-attr">autoselect</span>:!<span class="code-number">1</span>,<span class="code-attr">default</span>:!<span class="code-number">1</span>,<span class="code-attr">instreamId</span>:i,<span class="code-attr">language</span>:n},t.hasOwnProperty(<span class="code-string">"aspectRatio"</span>)&amp;&amp;(e[n].aspectRatio=t.aspectRatio),t.hasOwnProperty(<span class="code-string">"easyReader"</span>)&amp;&amp;(e[n].easyReader=t.easyReader),t.hasOwnProperty(<span class="code-string">"3D"</span>)&amp;&amp;(e[n][<span class="code-string">"3D"</span>]=t[<span class="code-string">"3D"</span>])})),e):e}),{})),f}(i.representationInfo.map(ft),i.locations,t.sidxMapping)},Et=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>),At=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class="code-keyword">return</span> i.getBigUint64?(t=i.getBigUint64(<span class="code-number">0</span>))&lt;<span class="code-built_in">Number</span>.MAX_SAFE_INTEGER?<span class="code-built_in">Number</span>(t):t:i.getUint32(<span class="code-number">0</span>)*Et+i.getUint32(<span class="code-number">4</span>)},Lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e <span class="code-keyword">instanceof</span> <span class="code-built_in">Uint8Array</span>?e:(<span class="code-built_in">Array</span>.isArray(e)||(t=e,<span class="code-built_in">ArrayBuffer</span>.isView(t))||e <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>||(e=<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e||<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;e!=e?<span class="code-number">0</span>:[e]),<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e&amp;&amp;e.buffer||e,e&amp;&amp;e.byteOffset||<span class="code-number">0</span>,e&amp;&amp;e.byteLength||<span class="code-number">0</span>));<span class="code-keyword">var</span> t},Pt=<span class="code-built_in">window</span>.BigInt||<span class="code-built_in">Number</span>,kt=[Pt(<span class="code-string">"0x1"</span>),Pt(<span class="code-string">"0x100"</span>),Pt(<span class="code-string">"0x10000"</span>),Pt(<span class="code-string">"0x1000000"</span>),Pt(<span class="code-string">"0x100000000"</span>),Pt(<span class="code-string">"0x10000000000"</span>),Pt(<span class="code-string">"0x1000000000000"</span>),Pt(<span class="code-string">"0x100000000000000"</span>),Pt(<span class="code-string">"0x10000000000000000"</span>)];v=<span class="code-keyword">new</span> <span class="code-built_in">Uint16Array</span>([<span class="code-number">65484</span>]),<span class="code-number">255</span>===(_=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(v.buffer,v.byteOffset,v.byteLength))[<span class="code-number">0</span>]||_[<span class="code-number">0</span>];<span class="code-keyword">var</span> xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">void</span> <span class="code-number">0</span>===t?{}:t,n=i.signed,r=<span class="code-keyword">void</span> <span class="code-number">0</span>!==n&amp;&amp;n,a=i.le,s=<span class="code-keyword">void</span> <span class="code-number">0</span>!==a&amp;&amp;a;e=Lt(e);<span class="code-keyword">var</span> o=s?<span class="code-string">"reduce"</span>:<span class="code-string">"reduceRight"</span>,u=(e[o]?e[o]:<span class="code-built_in">Array</span>.prototype[o]).call(e,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">var</span> r=s?n:<span class="code-built_in">Math</span>.abs(n+<span class="code-number">1</span>-e.length);<span class="code-keyword">return</span> t+Pt(i)*kt[r]}),Pt(<span class="code-number">0</span>));<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> d=kt[e.length]/Pt(<span class="code-number">2</span>)-Pt(<span class="code-number">1</span>);(u=Pt(u))&gt;d&amp;&amp;(u-=d,u-=d,u-=Pt(<span class="code-number">2</span>))}<span class="code-keyword">return</span> <span class="code-built_in">Number</span>(u)},Ot=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e&amp;&amp;e&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e.toString&amp;&amp;(e=e.toString()),<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e)<span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>;t||(e=<span class="code-built_in">unescape</span>(<span class="code-built_in">encodeURIComponent</span>(e)));<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.length),n=<span class="code-number">0</span>;n&lt;e.length;n++)i[n]=e.charCodeAt(n);<span class="code-keyword">return</span> i},Dt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?{}:i,r=n.offset,a=<span class="code-keyword">void</span> <span class="code-number">0</span>===r?<span class="code-number">0</span>:r,s=n.mask,o=<span class="code-keyword">void</span> <span class="code-number">0</span>===s?[]:s;e=Lt(e);<span class="code-keyword">var</span> u=(t=Lt(t)).every?t.every:<span class="code-built_in">Array</span>.prototype.every;<span class="code-keyword">return</span> t.length&amp;&amp;e.length-a&gt;=t.length&amp;&amp;u.call(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> t===(o[i]?o[i]&amp;e[a+i]:e[a+i])}))},Ct=Lt([<span class="code-number">73</span>,<span class="code-number">68</span>,<span class="code-number">51</span>]),Ut=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-number">0</span>),(t=Lt(t)).length-i&lt;<span class="code-number">10</span>||!Dt(t,Ct,{<span class="code-attr">offset</span>:i})?i:(i+=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-number">0</span>);<span class="code-keyword">var</span> i=(e=Lt(e))[t+<span class="code-number">5</span>],n=e[t+<span class="code-number">6</span>]&lt;&lt;<span class="code-number">21</span>|e[t+<span class="code-number">7</span>]&lt;&lt;<span class="code-number">14</span>|e[t+<span class="code-number">8</span>]&lt;&lt;<span class="code-number">7</span>|e[t+<span class="code-number">9</span>];<span class="code-keyword">return</span>(<span class="code-number">16</span>&amp;i)&gt;&gt;<span class="code-number">4</span>?n+<span class="code-number">20</span>:n+<span class="code-number">10</span>}(t,i),e(t,i))},Rt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e?Ot(e):e},Mt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=!<span class="code-number">1</span>),i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Array</span>.isArray(e)?e.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Rt(e)})):[Rt(e)]}(i),t=Lt(t);<span class="code-keyword">var</span> r=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> r;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">0</span>;a&lt;t.length;){<span class="code-keyword">var</span> s=(t[a]&lt;&lt;<span class="code-number">24</span>|t[a+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|t[a+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|t[a+<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">0</span>,o=t.subarray(a+<span class="code-number">4</span>,a+<span class="code-number">8</span>);<span class="code-keyword">if</span>(<span class="code-number">0</span>===s)<span class="code-keyword">break</span>;<span class="code-keyword">var</span> u=a+s;<span class="code-keyword">if</span>(u&gt;t.length){<span class="code-keyword">if</span>(n)<span class="code-keyword">break</span>;u=t.length}<span class="code-keyword">var</span> d=t.subarray(a+<span class="code-number">8</span>,u);Dt(o,i[<span class="code-number">0</span>])&amp;&amp;(<span class="code-number">1</span>===i.length?r.push(d):r.push.apply(r,e(d,i.slice(<span class="code-number">1</span>),n))),a=u}<span class="code-keyword">return</span> r},Bt={<span class="code-attr">EBML</span>:Lt([<span class="code-number">26</span>,<span class="code-number">69</span>,<span class="code-number">223</span>,<span class="code-number">163</span>]),<span class="code-attr">DocType</span>:Lt([<span class="code-number">66</span>,<span class="code-number">130</span>]),<span class="code-attr">Segment</span>:Lt([<span class="code-number">24</span>,<span class="code-number">83</span>,<span class="code-number">128</span>,<span class="code-number">103</span>]),<span class="code-attr">SegmentInfo</span>:Lt([<span class="code-number">21</span>,<span class="code-number">73</span>,<span class="code-number">169</span>,<span class="code-number">102</span>]),<span class="code-attr">Tracks</span>:Lt([<span class="code-number">22</span>,<span class="code-number">84</span>,<span class="code-number">174</span>,<span class="code-number">107</span>]),<span class="code-attr">Track</span>:Lt([<span class="code-number">174</span>]),<span class="code-attr">TrackNumber</span>:Lt([<span class="code-number">215</span>]),<span class="code-attr">DefaultDuration</span>:Lt([<span class="code-number">35</span>,<span class="code-number">227</span>,<span class="code-number">131</span>]),<span class="code-attr">TrackEntry</span>:Lt([<span class="code-number">174</span>]),<span class="code-attr">TrackType</span>:Lt([<span class="code-number">131</span>]),<span class="code-attr">FlagDefault</span>:Lt([<span class="code-number">136</span>]),<span class="code-attr">CodecID</span>:Lt([<span class="code-number">134</span>]),<span class="code-attr">CodecPrivate</span>:Lt([<span class="code-number">99</span>,<span class="code-number">162</span>]),<span class="code-attr">VideoTrack</span>:Lt([<span class="code-number">224</span>]),<span class="code-attr">AudioTrack</span>:Lt([<span class="code-number">225</span>]),<span class="code-attr">Cluster</span>:Lt([<span class="code-number">31</span>,<span class="code-number">67</span>,<span class="code-number">182</span>,<span class="code-number">117</span>]),<span class="code-attr">Timestamp</span>:Lt([<span class="code-number">231</span>]),<span class="code-attr">TimestampScale</span>:Lt([<span class="code-number">42</span>,<span class="code-number">215</span>,<span class="code-number">177</span>]),<span class="code-attr">BlockGroup</span>:Lt([<span class="code-number">160</span>]),<span class="code-attr">BlockDuration</span>:Lt([<span class="code-number">155</span>]),<span class="code-attr">Block</span>:Lt([<span class="code-number">161</span>]),<span class="code-attr">SimpleBlock</span>:Lt([<span class="code-number">163</span>])},Nt=[<span class="code-number">128</span>,<span class="code-number">64</span>,<span class="code-number">32</span>,<span class="code-number">16</span>,<span class="code-number">8</span>,<span class="code-number">4</span>,<span class="code-number">2</span>,<span class="code-number">1</span>],Ft=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=!<span class="code-number">0</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=!<span class="code-number">1</span>);<span class="code-keyword">var</span> r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">1</span>,i=<span class="code-number">0</span>;i&lt;Nt.length&amp;&amp;!(e&amp;Nt[i]);i++)t++;<span class="code-keyword">return</span> t}(e[t]),a=e.subarray(t,t+r);<span class="code-keyword">return</span> i&amp;&amp;((a=<span class="code-built_in">Array</span>.prototype.slice.call(e,t,t+r))[<span class="code-number">0</span>]^=Nt[r<span class="code-number">-1</span>]),{<span class="code-attr">length</span>:r,<span class="code-attr">value</span>:xt(a,{<span class="code-attr">signed</span>:n}),<span class="code-attr">bytes</span>:a}},qt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> t?t.match(<span class="code-regexp">/.{1,2}/g</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> e(t)})):<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=(<span class="code-keyword">void</span> <span class="code-number">0</span>===t?{}:t).le,n=<span class="code-keyword">void</span> <span class="code-number">0</span>!==i&amp;&amp;i;(<span class="code-string">"bigint"</span>!=<span class="code-keyword">typeof</span> e&amp;&amp;<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e||<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;e!=e)&amp;&amp;(e=<span class="code-number">0</span>);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r,a=(r=e=Pt(e),<span class="code-built_in">Math</span>.ceil(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.toString(<span class="code-number">2</span>).length}(r)/<span class="code-number">8</span>)),s=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-keyword">new</span> <span class="code-built_in">ArrayBuffer</span>(a)),o=<span class="code-number">0</span>;o&lt;a;o++){<span class="code-keyword">var</span> u=n?o:<span class="code-built_in">Math</span>.abs(o+<span class="code-number">1</span>-s.length);s[u]=<span class="code-built_in">Number</span>(e/kt[o]&amp;Pt(<span class="code-number">255</span>)),e&lt;<span class="code-number">0</span>&amp;&amp;(s[u]=<span class="code-built_in">Math</span>.abs(~s[u]),s[u]-=<span class="code-number">0</span>===o?<span class="code-number">1</span>:<span class="code-number">2</span>)}<span class="code-keyword">return</span> s}(t):t},Ht=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">if</span>(n&gt;=i.length)<span class="code-keyword">return</span> i.length;<span class="code-keyword">var</span> r=Ft(i,n,!<span class="code-number">1</span>);<span class="code-keyword">if</span>(Dt(t.bytes,r.bytes))<span class="code-keyword">return</span> n;<span class="code-keyword">var</span> a=Ft(i,n+r.length);<span class="code-keyword">return</span> e(t,i,n+a.length+a.value+r.length)},Gt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Array</span>.isArray(e)?e.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> qt(e)})):[qt(e)]}(i),t=Lt(t);<span class="code-keyword">var</span> n=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> n;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;t.length;){<span class="code-keyword">var</span> a=Ft(t,r,!<span class="code-number">1</span>),s=Ft(t,r+a.length),o=r+a.length+s.length;<span class="code-number">127</span>===s.value&amp;&amp;(s.value=Ht(a,t,o),s.value!==t.length&amp;&amp;(s.value-=o));<span class="code-keyword">var</span> u=o+s.value&gt;t.length?t.length:o+s.value,d=t.subarray(o,u);Dt(i[<span class="code-number">0</span>],a.bytes)&amp;&amp;(<span class="code-number">1</span>===i.length?n.push(d):n=n.concat(e(d,i.slice(<span class="code-number">1</span>)))),r+=a.length+s.length+d.length}<span class="code-keyword">return</span> n},Wt=Lt([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),Vt=Lt([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),jt=Lt([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>]),Xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">1</span>;i&lt;e.length<span class="code-number">-2</span>;)Dt(e.subarray(i,i+<span class="code-number">3</span>),jt)&amp;&amp;(t.push(i+<span class="code-number">2</span>),i++),i++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===t.length)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> n=e.length-t.length,r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n),a=<span class="code-number">0</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;n;a++,i++)a===t[<span class="code-number">0</span>]&amp;&amp;(a++,t.shift()),r[i]=e[a];<span class="code-keyword">return</span> r},zt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=<span class="code-number">1</span>/<span class="code-number">0</span>),e=Lt(e),i=[].concat(i);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r,a=<span class="code-number">0</span>,s=<span class="code-number">0</span>;a&lt;e.length&amp;&amp;(s&lt;n||r);){<span class="code-keyword">var</span> o=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(Dt(e.subarray(a),Wt)?o=<span class="code-number">4</span>:Dt(e.subarray(a),Vt)&amp;&amp;(o=<span class="code-number">3</span>),o){<span class="code-keyword">if</span>(s++,r)<span class="code-keyword">return</span> Xt(e.subarray(r,a));<span class="code-keyword">var</span> u=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-string">"h264"</span>===t?u=<span class="code-number">31</span>&amp;e[a+o]:<span class="code-string">"h265"</span>===t&amp;&amp;(u=e[a+o]&gt;&gt;<span class="code-number">1</span>&amp;<span class="code-number">63</span>),<span class="code-number">-1</span>!==i.indexOf(u)&amp;&amp;(r=a+o),a+=o+(<span class="code-string">"h264"</span>===t?<span class="code-number">1</span>:<span class="code-number">2</span>)}<span class="code-keyword">else</span> a++}<span class="code-keyword">return</span> e.subarray(<span class="code-number">0</span>,<span class="code-number">0</span>)},Qt={<span class="code-attr">webm</span>:Lt([<span class="code-number">119</span>,<span class="code-number">101</span>,<span class="code-number">98</span>,<span class="code-number">109</span>]),<span class="code-attr">matroska</span>:Lt([<span class="code-number">109</span>,<span class="code-number">97</span>,<span class="code-number">116</span>,<span class="code-number">114</span>,<span class="code-number">111</span>,<span class="code-number">115</span>,<span class="code-number">107</span>,<span class="code-number">97</span>]),<span class="code-attr">flac</span>:Lt([<span class="code-number">102</span>,<span class="code-number">76</span>,<span class="code-number">97</span>,<span class="code-number">67</span>]),<span class="code-attr">ogg</span>:Lt([<span class="code-number">79</span>,<span class="code-number">103</span>,<span class="code-number">103</span>,<span class="code-number">83</span>]),<span class="code-attr">ac3</span>:Lt([<span class="code-number">11</span>,<span class="code-number">119</span>]),<span class="code-attr">riff</span>:Lt([<span class="code-number">82</span>,<span class="code-number">73</span>,<span class="code-number">70</span>,<span class="code-number">70</span>]),<span class="code-attr">avi</span>:Lt([<span class="code-number">65</span>,<span class="code-number">86</span>,<span class="code-number">73</span>]),<span class="code-attr">wav</span>:Lt([<span class="code-number">87</span>,<span class="code-number">65</span>,<span class="code-number">86</span>,<span class="code-number">69</span>]),<span class="code-string">"3gp"</span>:Lt([<span class="code-number">102</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>,<span class="code-number">51</span>,<span class="code-number">103</span>]),<span class="code-attr">mp4</span>:Lt([<span class="code-number">102</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>]),<span class="code-attr">fmp4</span>:Lt([<span class="code-number">115</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>]),<span class="code-attr">mov</span>:Lt([<span class="code-number">102</span>,<span class="code-number">116</span>,<span class="code-number">121</span>,<span class="code-number">112</span>,<span class="code-number">113</span>,<span class="code-number">116</span>]),<span class="code-attr">moov</span>:Lt([<span class="code-number">109</span>,<span class="code-number">111</span>,<span class="code-number">111</span>,<span class="code-number">118</span>]),<span class="code-attr">moof</span>:Lt([<span class="code-number">109</span>,<span class="code-number">111</span>,<span class="code-number">111</span>,<span class="code-number">102</span>])},Yt={<span class="code-attr">aac</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Ut(e);<span class="code-keyword">return</span> Dt(e,[<span class="code-number">255</span>,<span class="code-number">16</span>],{<span class="code-attr">offset</span>:t,<span class="code-attr">mask</span>:[<span class="code-number">255</span>,<span class="code-number">22</span>]})},<span class="code-attr">mp3</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Ut(e);<span class="code-keyword">return</span> Dt(e,[<span class="code-number">255</span>,<span class="code-number">2</span>],{<span class="code-attr">offset</span>:t,<span class="code-attr">mask</span>:[<span class="code-number">255</span>,<span class="code-number">6</span>]})},<span class="code-attr">webm</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Gt(e,[Bt.EBML,Bt.DocType])[<span class="code-number">0</span>];<span class="code-keyword">return</span> Dt(t,Qt.webm)},<span class="code-attr">mkv</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Gt(e,[Bt.EBML,Bt.DocType])[<span class="code-number">0</span>];<span class="code-keyword">return</span> Dt(t,Qt.matroska)},<span class="code-attr">mp4</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!Yt[<span class="code-string">"3gp"</span>](e)&amp;&amp;!Yt.mov(e)&amp;&amp;(!(!Dt(e,Qt.mp4,{<span class="code-attr">offset</span>:<span class="code-number">4</span>})&amp;&amp;!Dt(e,Qt.fmp4,{<span class="code-attr">offset</span>:<span class="code-number">4</span>}))||!(!Dt(e,Qt.moof,{<span class="code-attr">offset</span>:<span class="code-number">4</span>})&amp;&amp;!Dt(e,Qt.moov,{<span class="code-attr">offset</span>:<span class="code-number">4</span>}))||<span class="code-keyword">void</span> <span class="code-number">0</span>)},<span class="code-attr">mov</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Dt(e,Qt.mov,{<span class="code-attr">offset</span>:<span class="code-number">4</span>})},<span class="code-string">"3gp"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Dt(e,Qt[<span class="code-string">"3gp"</span>],{<span class="code-attr">offset</span>:<span class="code-number">4</span>})},<span class="code-attr">ac3</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Ut(e);<span class="code-keyword">return</span> Dt(e,Qt.ac3,{<span class="code-attr">offset</span>:t})},<span class="code-attr">ts</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e.length&lt;<span class="code-number">189</span>&amp;&amp;e.length&gt;=<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-number">71</span>===e[<span class="code-number">0</span>];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t+<span class="code-number">188</span>&lt;e.length&amp;&amp;t&lt;<span class="code-number">188</span>;){<span class="code-keyword">if</span>(<span class="code-number">71</span>===e[t]&amp;&amp;<span class="code-number">71</span>===e[t+<span class="code-number">188</span>])<span class="code-keyword">return</span>!<span class="code-number">0</span>;t+=<span class="code-number">1</span>}<span class="code-keyword">return</span>!<span class="code-number">1</span>},<span class="code-attr">flac</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Ut(e);<span class="code-keyword">return</span> Dt(e,Qt.flac,{<span class="code-attr">offset</span>:t})},<span class="code-attr">ogg</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Dt(e,Qt.ogg)},<span class="code-attr">avi</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Dt(e,Qt.riff)&amp;&amp;Dt(e,Qt.avi,{<span class="code-attr">offset</span>:<span class="code-number">8</span>})},<span class="code-attr">wav</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Dt(e,Qt.riff)&amp;&amp;Dt(e,Qt.wav,{<span class="code-attr">offset</span>:<span class="code-number">8</span>})},<span class="code-attr">h264</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> zt(e,<span class="code-string">"h264"</span>,<span class="code-number">7</span>,<span class="code-number">3</span>)}(e).length},<span class="code-attr">h265</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> zt(e,<span class="code-string">"h265"</span>,[<span class="code-number">32</span>,<span class="code-number">33</span>],<span class="code-number">3</span>)}(e).length}},Kt=<span class="code-built_in">Object</span>.keys(Yt).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"ts"</span>!==e&amp;&amp;<span class="code-string">"h264"</span>!==e&amp;&amp;<span class="code-string">"h265"</span>!==e})).concat([<span class="code-string">"ts"</span>,<span class="code-string">"h264"</span>,<span class="code-string">"h265"</span>]);Kt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Yt[e];Yt[e]=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(Lt(e))}}));<span class="code-keyword">var</span> $t=Yt,Jt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=Lt(e);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t&lt;Kt.length;t++){<span class="code-keyword">var</span> i=Kt[t];<span class="code-keyword">if</span>($t[i](e))<span class="code-keyword">return</span> i}<span class="code-keyword">return</span><span class="code-string">""</span>},Zt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">4</span>===e.readyState)<span class="code-keyword">return</span> t()},ei=r.default.EventTarget,ti=r.default.mergeOptions,ii=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!Se(e,t))<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(e.sidx&amp;&amp;t.sidx&amp;&amp;(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!e.sidx&amp;&amp;t.sidx||e.sidx&amp;&amp;!t.sidx)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(e.segments&amp;&amp;!t.segments||!e.segments&amp;&amp;t.segments)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!e.segments&amp;&amp;!t.segments)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.segments.length;i++){<span class="code-keyword">var</span> n=e.segments[i],r=t.segments[i];<span class="code-keyword">if</span>(n.uri!==r.uri)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(n.byterange||r.byterange){<span class="code-keyword">var</span> a=n.byterange,s=r.byterange;<span class="code-keyword">if</span>(a&amp;&amp;!s||!a&amp;&amp;s)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(a.offset!==s.offset||a.length!==s.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>}}<span class="code-keyword">return</span>!<span class="code-number">0</span>},ni=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>(<span class="code-built_in">Boolean</span>(!e.map&amp;&amp;!t.map)||<span class="code-built_in">Boolean</span>(e.map&amp;&amp;t.map&amp;&amp;e.map.byterange.offset===t.map.byterange.offset&amp;&amp;e.map.byterange.length===t.map.byterange.length))&amp;&amp;e.uri===t.uri&amp;&amp;e.byterange.offset===t.byterange.offset&amp;&amp;e.byterange.length===t.byterange.length},ri=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> e){<span class="code-keyword">var</span> r=e[n].sidx;<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> a=Ze(r);<span class="code-keyword">if</span>(!t[a])<span class="code-keyword">break</span>;<span class="code-keyword">var</span> s=t[a].sidxInfo;ni(s,r)&amp;&amp;(i[a]=t[a])}}<span class="code-keyword">return</span> i},ai=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a;<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n={}),(a=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).masterPlaylistLoader_=r||s(a),r||(a.isMaster_=!<span class="code-number">0</span>);<span class="code-keyword">var</span> o=n,u=o.withCredentials,d=<span class="code-keyword">void</span> <span class="code-number">0</span>!==u&amp;&amp;u,l=o.handleManifestRedirects,c=<span class="code-keyword">void</span> <span class="code-number">0</span>!==l&amp;&amp;l;<span class="code-keyword">if</span>(a.vhs_=i,a.withCredentials=d,a.handleManifestRedirects=c,!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL or object is required"</span>);<span class="code-keyword">return</span> a.on(<span class="code-string">"minimumUpdatePeriod"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.refreshXml_()})),a.on(<span class="code-string">"mediaupdatetimeout"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.refreshMedia_(a.media().id)})),a.state=<span class="code-string">"HAVE_NOTHING"</span>,a.loadedPlaylists_={},a.logger_=p(<span class="code-string">"DashPlaylistLoader"</span>),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.requestErrored_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span>!<span class="code-keyword">this</span>.request||(<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e?(<span class="code-keyword">this</span>.error=<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> e||e <span class="code-keyword">instanceof</span> <span class="code-built_in">Error</span>?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"DASH request error at URL: "</span>+t.uri,<span class="code-attr">response</span>:t.response,<span class="code-attr">code</span>:<span class="code-number">2</span>}:e,i&amp;&amp;(<span class="code-keyword">this</span>.state=i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>),!<span class="code-number">0</span>):<span class="code-keyword">void</span> <span class="code-number">0</span>)},i.addSidxSegments_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>,r=e.sidx&amp;&amp;Ze(e.sidx);<span class="code-keyword">if</span>(e.sidx&amp;&amp;r&amp;&amp;!<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_[r]){<span class="code-keyword">var</span> a=f(<span class="code-keyword">this</span>.handleManifestRedirects,e.sidx.resolvedUri),s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a,s</span>)</span>{<span class="code-keyword">if</span>(!n.requestErrored_(a,s,t)){<span class="code-keyword">var</span> o,u=n.masterPlaylistLoader_.sidxMapping_;<span class="code-keyword">try</span>{o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),i={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">references</span>:[],<span class="code-attr">referenceId</span>:t.getUint32(<span class="code-number">4</span>),<span class="code-attr">timescale</span>:t.getUint32(<span class="code-number">8</span>)},n=<span class="code-number">12</span>;<span class="code-number">0</span>===i.version?(i.earliestPresentationTime=t.getUint32(n),i.firstOffset=t.getUint32(n+<span class="code-number">4</span>),n+=<span class="code-number">8</span>):(i.earliestPresentationTime=At(e.subarray(n)),i.firstOffset=At(e.subarray(n+<span class="code-number">8</span>)),n+=<span class="code-number">16</span>),n+=<span class="code-number">2</span>;<span class="code-keyword">var</span> r=t.getUint16(n);<span class="code-keyword">for</span>(n+=<span class="code-number">2</span>;r&gt;<span class="code-number">0</span>;n+=<span class="code-number">12</span>,r--)i.references.push({<span class="code-attr">referenceType</span>:(<span class="code-number">128</span>&amp;e[n])&gt;&gt;&gt;<span class="code-number">7</span>,<span class="code-attr">referencedSize</span>:<span class="code-number">2147483647</span>&amp;t.getUint32(n),<span class="code-attr">subsegmentDuration</span>:t.getUint32(n+<span class="code-number">4</span>),<span class="code-attr">startsWithSap</span>:!!(<span class="code-number">128</span>&amp;e[n+<span class="code-number">8</span>]),<span class="code-attr">sapType</span>:(<span class="code-number">112</span>&amp;e[n+<span class="code-number">8</span>])&gt;&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">sapDeltaTime</span>:<span class="code-number">268435455</span>&amp;t.getUint32(n+<span class="code-number">8</span>)});<span class="code-keyword">return</span> i}(Lt(s.response).subarray(<span class="code-number">8</span>))}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-keyword">void</span> n.requestErrored_(e,s,t)}<span class="code-keyword">return</span> u[r]={<span class="code-attr">sidxInfo</span>:e.sidx,<span class="code-attr">sidx</span>:o},Je(e,o,e.sidx.resolvedUri),i(!<span class="code-number">0</span>)}};<span class="code-keyword">this</span>.request=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=[],a=!<span class="code-number">1</span>,s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,n,r</span>)</span>{<span class="code-keyword">return</span> t.abort(),a=!<span class="code-number">0</span>,i(e,t,n,r)},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!a){<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> s(e,t,<span class="code-string">""</span>,r);<span class="code-keyword">var</span> i=t.responseText.substring(r&amp;&amp;r.byteLength||<span class="code-number">0</span>,t.responseText.length);<span class="code-keyword">if</span>(r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> e=<span class="code-built_in">arguments</span>.length,t=<span class="code-keyword">new</span> <span class="code-built_in">Array</span>(e),i=<span class="code-number">0</span>;i&lt;e;i++)t[i]=<span class="code-built_in">arguments</span>[i];<span class="code-keyword">if</span>(t=t.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;(e.byteLength||e.length)&amp;&amp;<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e})),t.length&lt;=<span class="code-number">1</span>)<span class="code-keyword">return</span> Lt(t[<span class="code-number">0</span>]);<span class="code-keyword">var</span> n=t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e+(t.byteLength||t.length)}),<span class="code-number">0</span>),r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n),a=<span class="code-number">0</span>;<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e=Lt(e),r.set(e,a),a+=e.byteLength})),r}(r,Ot(i,!<span class="code-number">0</span>)),n=n||Ut(r),r.length&lt;<span class="code-number">10</span>||n&amp;&amp;r.length&lt;n+<span class="code-number">2</span>)<span class="code-keyword">return</span> Zt(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s(e,t,<span class="code-string">""</span>,r)}));<span class="code-keyword">var</span> o=Jt(r);<span class="code-keyword">return</span><span class="code-string">"ts"</span>===o&amp;&amp;r.length&lt;<span class="code-number">188</span>||!o&amp;&amp;r.length&lt;<span class="code-number">376</span>?Zt(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s(e,t,<span class="code-string">""</span>,r)})):s(<span class="code-literal">null</span>,t,o,r)}},u={<span class="code-attr">uri</span>:e,<span class="code-attr">beforeSend</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.overrideMimeType(<span class="code-string">"text/plain; charset=x-user-defined"</span>),e.addEventListener(<span class="code-string">"progress"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> t.total,t.loaded,Pe(e,<span class="code-literal">null</span>,{<span class="code-attr">statusCode</span>:e.status},o)}))}},d=t(u,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> Pe(d,e,t,o)}));<span class="code-keyword">return</span> d}(a,<span class="code-keyword">this</span>.vhs_.xhr,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i,r,o</span>)</span>{<span class="code-keyword">if</span>(t)<span class="code-keyword">return</span> s(t,i);<span class="code-keyword">if</span>(!r||<span class="code-string">"mp4"</span>!==r)<span class="code-keyword">return</span> s({<span class="code-attr">status</span>:i.status,<span class="code-attr">message</span>:<span class="code-string">"Unsupported "</span>+(r||<span class="code-string">"unknown"</span>)+<span class="code-string">" container type for sidx segment at URL: "</span>+a,<span class="code-attr">response</span>:<span class="code-string">""</span>,<span class="code-attr">playlist</span>:e,<span class="code-attr">internal</span>:!<span class="code-number">0</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">code</span>:<span class="code-number">2</span>},i);<span class="code-keyword">var</span> u=e.sidx.byterange,d=u.offset,l=u.length;<span class="code-keyword">if</span>(o.length&gt;=l+d)<span class="code-keyword">return</span> s(t,{<span class="code-attr">response</span>:o.subarray(d,d+l),<span class="code-attr">status</span>:i.status,<span class="code-attr">uri</span>:i.uri});n.request=n.vhs_.xhr({<span class="code-attr">uri</span>:a,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:xe({<span class="code-attr">byterange</span>:e.sidx.byterange})},s)}))}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.mediaRequest_=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i(!<span class="code-number">1</span>)}),<span class="code-number">0</span>)},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.stopRequest(),<span class="code-keyword">this</span>.loadedPlaylists_={},<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_),<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaRequest_),<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.mediaRequest_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.masterPlaylistLoader_.createMupOnMedia_&amp;&amp;(<span class="code-keyword">this</span>.off(<span class="code-string">"loadedmetadata"</span>,<span class="code-keyword">this</span>.masterPlaylistLoader_.createMupOnMedia_),<span class="code-keyword">this</span>.masterPlaylistLoader_.createMupOnMedia_=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.off()},i.hasPendingRequest=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.request||<span class="code-keyword">this</span>.mediaRequest_},i.stopRequest=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.request){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.request;<span class="code-keyword">this</span>.request=<span class="code-literal">null</span>,e.onreadystatechange=<span class="code-literal">null</span>,e.abort()}},i.media=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.media_;<span class="code-keyword">if</span>(<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot switch media playlist from "</span>+<span class="code-keyword">this</span>.state);<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.state;<span class="code-keyword">if</span>(<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e){<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists[e])<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Unknown playlist URI: "</span>+e);e=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists[e]}<span class="code-keyword">var</span> n=!<span class="code-keyword">this</span>.media_||e.id!==<span class="code-keyword">this</span>.media_.id;<span class="code-keyword">if</span>(n&amp;&amp;<span class="code-keyword">this</span>.loadedPlaylists_[e.id]&amp;&amp;<span class="code-keyword">this</span>.loadedPlaylists_[e.id].endList)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.media_=e,<span class="code-keyword">void</span>(n&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)));n&amp;&amp;(<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachanging"</span>),<span class="code-keyword">this</span>.addSidxSegments_(e,i,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{t.haveMetadata({<span class="code-attr">startingState</span>:i,<span class="code-attr">playlist</span>:e})})))},i.haveMetadata=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.startingState,i=e.playlist;<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_METADATA"</span>,<span class="code-keyword">this</span>.loadedPlaylists_[i.id]=i,<span class="code-keyword">this</span>.mediaRequest_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.refreshMedia_(i.id),<span class="code-string">"HAVE_MASTER"</span>===t?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedmetadata"</span>):<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediachange"</span>)},i.pause=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.masterPlaylistLoader_.createMupOnMedia_&amp;&amp;(<span class="code-keyword">this</span>.off(<span class="code-string">"loadedmetadata"</span>,<span class="code-keyword">this</span>.masterPlaylistLoader_.createMupOnMedia_),<span class="code-keyword">this</span>.masterPlaylistLoader_.createMupOnMedia_=<span class="code-literal">null</span>),<span class="code-keyword">this</span>.stopRequest(),<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.isMaster_&amp;&amp;(<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),<span class="code-keyword">this</span>.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=<span class="code-literal">null</span>),<span class="code-string">"HAVE_NOTHING"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(<span class="code-keyword">this</span>.started=!<span class="code-number">1</span>)},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.mediaUpdateTimeout),<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-literal">null</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.media();<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> n=i?i.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>:<span class="code-number">5e3</span>;<span class="code-keyword">this</span>.mediaUpdateTimeout=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.load()}),n)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.started?i&amp;&amp;!i.endList?(<span class="code-keyword">this</span>.isMaster_&amp;&amp;!<span class="code-keyword">this</span>.minimumUpdatePeriodTimeout_&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"minimumUpdatePeriod"</span>),<span class="code-keyword">this</span>.updateMinimumUpdatePeriodTimeout_()),<span class="code-keyword">this</span>.trigger(<span class="code-string">"mediaupdatetimeout"</span>)):<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.start()},i.start=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.started=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.isMaster_?<span class="code-keyword">this</span>.requestMaster_((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[<span class="code-number">0</span>])})):<span class="code-keyword">this</span>.mediaRequest_=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e.haveMaster_()}),<span class="code-number">0</span>)},i.requestMaster_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">if</span>(!t.requestErrored_(i,n)){<span class="code-keyword">var</span> r=n.responseText!==t.masterPlaylistLoader_.masterXml_;<span class="code-keyword">return</span> t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&amp;&amp;n.responseHeaders.date?t.masterLoaded_=<span class="code-built_in">Date</span>.parse(n.responseHeaders.date):t.masterLoaded_=<span class="code-built_in">Date</span>.now(),t.masterPlaylistLoader_.srcUrl=f(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),<span class="code-keyword">void</span> t.syncClientServerClock_((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e(n,r)}))):e(n,r)}<span class="code-string">"HAVE_NOTHING"</span>===t.state&amp;&amp;(t.started=!<span class="code-number">1</span>)}))},i.syncClientServerClock_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">this</span>,n=(t=<span class="code-keyword">this</span>.masterPlaylistLoader_.masterXml_,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=pt(e,<span class="code-string">"UTCTiming"</span>)[<span class="code-number">0</span>];<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=vt(t);<span class="code-keyword">switch</span>(i.schemeIdUri){<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-head:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-head:2012"</span>:i.method=<span class="code-string">"HEAD"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-xsdate:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-iso:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-xsdate:2012"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:http-iso:2012"</span>:i.method=<span class="code-string">"GET"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:direct:2014"</span>:<span class="code-keyword">case</span><span class="code-string">"urn:mpeg:dash:utc:direct:2012"</span>:i.method=<span class="code-string">"DIRECT"</span>,i.value=<span class="code-built_in">Date</span>.parse(i.value);<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"UNSUPPORTED_UTC_TIMING_SCHEME"</span>)}<span class="code-keyword">return</span> i}(wt(t)));<span class="code-keyword">return</span> <span class="code-literal">null</span>===n?(<span class="code-keyword">this</span>.masterPlaylistLoader_.clientOffset_=<span class="code-keyword">this</span>.masterLoaded_-<span class="code-built_in">Date</span>.now(),e()):<span class="code-string">"DIRECT"</span>===n.method?(<span class="code-keyword">this</span>.masterPlaylistLoader_.clientOffset_=n.value-<span class="code-built_in">Date</span>.now(),e()):<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.request=<span class="code-keyword">this</span>.vhs_.xhr({<span class="code-attr">uri</span>:h(<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl,n.value),<span class="code-attr">method</span>:n.method,<span class="code-attr">withCredentials</span>:<span class="code-keyword">this</span>.withCredentials},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,r</span>)</span>{<span class="code-keyword">if</span>(i.request){<span class="code-keyword">if</span>(t)<span class="code-keyword">return</span> i.masterPlaylistLoader_.clientOffset_=i.masterLoaded_-<span class="code-built_in">Date</span>.now(),e();<span class="code-keyword">var</span> a;a=<span class="code-string">"HEAD"</span>===n.method?r.responseHeaders&amp;&amp;r.responseHeaders.date?<span class="code-built_in">Date</span>.parse(r.responseHeaders.date):i.masterLoaded_:<span class="code-built_in">Date</span>.parse(r.responseText),i.masterPlaylistLoader_.clientOffset_=a-<span class="code-built_in">Date</span>.now(),e()}})))},i.haveMaster_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.state=<span class="code-string">"HAVE_MASTER"</span>,<span class="code-keyword">this</span>.isMaster_?<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>):<span class="code-keyword">this</span>.media_||<span class="code-keyword">this</span>.media(<span class="code-keyword">this</span>.childPlaylist_)},i.handleMaster_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaRequest_=<span class="code-literal">null</span>;<span class="code-keyword">var</span> e,t,i,n=(e={<span class="code-attr">masterXml</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.masterXml_,<span class="code-attr">srcUrl</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl,<span class="code-attr">clientOffset</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.clientOffset_,<span class="code-attr">sidxMapping</span>:<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_},i=It(e.masterXml,{<span class="code-attr">manifestUri</span>:t=e.srcUrl,<span class="code-attr">clientOffset</span>:e.clientOffset,<span class="code-attr">sidxMapping</span>:e.sidxMapping}),ge(i,t),i),r=<span class="code-keyword">this</span>.masterPlaylistLoader_.master;r&amp;&amp;(n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=!<span class="code-number">0</span>,r=ti(e,{<span class="code-attr">duration</span>:t.duration,<span class="code-attr">minimumUpdatePeriod</span>:t.minimumUpdatePeriod}),a=<span class="code-number">0</span>;a&lt;t.playlists.length;a++){<span class="code-keyword">var</span> s=t.playlists[a];<span class="code-keyword">if</span>(s.sidx){<span class="code-keyword">var</span> o=Ze(s.sidx);i&amp;&amp;i[o]&amp;&amp;i[o].sidx&amp;&amp;Je(s,i[o].sidx,s.sidx.resolvedUri)}<span class="code-keyword">var</span> u=we(r,s,ii);u&amp;&amp;(r=u,n=!<span class="code-number">1</span>)}<span class="code-keyword">return</span> pe(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,a</span>)</span>{<span class="code-keyword">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class="code-keyword">var</span> s=e.playlists[<span class="code-number">0</span>].id,o=we(r,e.playlists[<span class="code-number">0</span>],ii);o&amp;&amp;((r=o).mediaGroups[t][i][a].playlists[<span class="code-number">0</span>]=r.playlists[s],n=!<span class="code-number">1</span>)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&amp;&amp;(n=!<span class="code-number">1</span>),n?<span class="code-literal">null</span>:r}(r,n,<span class="code-keyword">this</span>.masterPlaylistLoader_.sidxMapping_)),<span class="code-keyword">this</span>.masterPlaylistLoader_.master=n||r;<span class="code-keyword">var</span> a=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.locations&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.master.locations[<span class="code-number">0</span>];<span class="code-keyword">return</span> a&amp;&amp;a!==<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl&amp;&amp;(<span class="code-keyword">this</span>.masterPlaylistLoader_.srcUrl=a),(!r||n&amp;&amp;n.minimumUpdatePeriod!==r.minimumUpdatePeriod)&amp;&amp;<span class="code-keyword">this</span>.updateMinimumUpdatePeriodTimeout_(),<span class="code-built_in">Boolean</span>(n)},i.updateMinimumUpdatePeriodTimeout_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.masterPlaylistLoader_;e.createMupOnMedia_&amp;&amp;(e.off(<span class="code-string">"loadedmetadata"</span>,e.createMupOnMedia_),e.createMupOnMedia_=<span class="code-literal">null</span>),e.minimumUpdatePeriodTimeout_&amp;&amp;(<span class="code-built_in">window</span>.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=<span class="code-literal">null</span>);<span class="code-keyword">var</span> t=e.master&amp;&amp;e.master.minimumUpdatePeriod;<span class="code-number">0</span>===t&amp;&amp;(e.media()?t=<span class="code-number">1e3</span>*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one(<span class="code-string">"loadedmetadata"</span>,e.createMupOnMedia_))),<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> t||t&lt;=<span class="code-number">0</span>?t&lt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.logger_(<span class="code-string">"found invalid minimumUpdatePeriod of "</span>+t+<span class="code-string">", not setting a timeout"</span>):<span class="code-keyword">this</span>.createMUPTimeout_(t)},i.createMUPTimeout_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.minimumUpdatePeriodTimeout_=<span class="code-literal">null</span>,t.trigger(<span class="code-string">"minimumUpdatePeriod"</span>),t.createMUPTimeout_(e)}),e)},i.refreshXml_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.requestMaster_((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a;i&amp;&amp;(e.media_&amp;&amp;(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,r=e.masterPlaylistLoader_.sidxMapping_,a=ri(n.playlists,r),pe(n,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(e.playlists&amp;&amp;e.playlists.length){<span class="code-keyword">var</span> s=e.playlists;a=ti(a,ri(s,r))}})),a),e.addSidxSegments_(e.media(),e.state,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.refreshMedia_(e.media().id)})))}))},i.refreshMedia_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"refreshMedia_ must take a media id"</span>);<span class="code-keyword">this</span>.media_&amp;&amp;<span class="code-keyword">this</span>.isMaster_&amp;&amp;<span class="code-keyword">this</span>.handleMaster_();<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists,n=!<span class="code-keyword">this</span>.media_||<span class="code-keyword">this</span>.media_!==i[e];n?<span class="code-keyword">this</span>.media_=i[e]:<span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistunchanged"</span>),<span class="code-keyword">this</span>.mediaUpdateTimeout||<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{t.media().endList||(t.mediaUpdateTimeout=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.trigger(<span class="code-string">"mediaupdatetimeout"</span>),e()}),Ie(t.media(),<span class="code-built_in">Boolean</span>(n))))}(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"loadedplaylist"</span>)},t}(ei),si={<span class="code-attr">GOAL_BUFFER_LENGTH</span>:<span class="code-number">30</span>,<span class="code-attr">MAX_GOAL_BUFFER_LENGTH</span>:<span class="code-number">60</span>,<span class="code-attr">BACK_BUFFER_LENGTH</span>:<span class="code-number">30</span>,<span class="code-attr">GOAL_BUFFER_LENGTH_RATE</span>:<span class="code-number">1</span>,<span class="code-attr">INITIAL_BANDWIDTH</span>:<span class="code-number">4194304</span>,<span class="code-attr">BANDWIDTH_VARIANCE</span>:<span class="code-number">1.2</span>,<span class="code-attr">BUFFER_LOW_WATER_LINE</span>:<span class="code-number">0</span>,<span class="code-attr">MAX_BUFFER_LOW_WATER_LINE</span>:<span class="code-number">30</span>,<span class="code-attr">EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE</span>:<span class="code-number">16</span>,<span class="code-attr">BUFFER_LOW_WATER_LINE_RATE</span>:<span class="code-number">1</span>,<span class="code-attr">BUFFER_HIGH_WATER_LINE</span>:<span class="code-number">30</span>},oi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.on=e.addEventListener,e.off=e.removeEventListener,e},ui=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">return</span> URL.createObjectURL(<span class="code-keyword">new</span> Blob([e],{<span class="code-attr">type</span>:<span class="code-string">"application/javascript"</span>}))}<span class="code-keyword">catch</span>(i){<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> BlobBuilder;<span class="code-keyword">return</span> t.append(e),URL.createObjectURL(t.getBlob())}}(e),i=oi(<span class="code-keyword">new</span> Worker(t));i.objURL=t;<span class="code-keyword">var</span> n=i.terminate;<span class="code-keyword">return</span> i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> URL.revokeObjectURL(t),n.call(<span class="code-keyword">this</span>)},i}},di=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"var browserWorkerPolyFill = "</span>+oi.toString()+<span class="code-string">";\nbrowserWorkerPolyFill(self);\n"</span>+e},li=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.toString().replace(<span class="code-regexp">/^function.+?{/</span>,<span class="code-string">""</span>).slice(<span class="code-number">0</span>,<span class="code-number">-1</span>)},ci=di(li((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">this</span>.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e[t]||(e[t]=[]),e[t]=e[t].concat(i)},<span class="code-keyword">this</span>.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">return</span>!!e[t]&amp;&amp;(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,<span class="code-number">1</span>),n&gt;<span class="code-number">-1</span>)},<span class="code-keyword">this</span>.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a;<span class="code-keyword">if</span>(i=e[t])<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span>{<span class="code-keyword">for</span>(a=[],n=<span class="code-built_in">arguments</span>.length,n=<span class="code-number">1</span>;n&lt;<span class="code-built_in">arguments</span>.length;++n)a.push(<span class="code-built_in">arguments</span>[n]);<span class="code-keyword">for</span>(r=i.length,n=<span class="code-number">0</span>;n&lt;r;++n)i[n].apply(<span class="code-keyword">this</span>,a)}},<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e={}}}};e.prototype.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.flush(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"partialdone"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.partialFlush(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"endedtimeline"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.endTimeline(t)})),<span class="code-keyword">this</span>.on(<span class="code-string">"reset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.reset(t)})),e},e.prototype.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e)},e.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,e)},e.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"partialdone"</span>,e)},e.prototype.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>,e)},e.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>,e)};<span class="code-keyword">var</span> t,i,n,r,a,s,o,u,d,l,c,h,f,p,m,g,y,v,_,T,b,S,w,I,E,A,L,P,k,x,O,D,C,U,R,M,B,N,F,q,H=e,G=<span class="code-built_in">Math</span>.pow(<span class="code-number">2</span>,<span class="code-number">32</span>),W={<span class="code-attr">getUint64</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength);<span class="code-keyword">return</span> i.getBigUint64?(t=i.getBigUint64(<span class="code-number">0</span>))&lt;<span class="code-built_in">Number</span>.MAX_SAFE_INTEGER?<span class="code-built_in">Number</span>(t):t:i.getUint32(<span class="code-number">0</span>)*G+i.getUint32(<span class="code-number">4</span>)},<span class="code-attr">MAX_UINT32</span>:G},V=W.MAX_UINT32;!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">if</span>(S={<span class="code-attr">avc1</span>:[],<span class="code-attr">avcC</span>:[],<span class="code-attr">btrt</span>:[],<span class="code-attr">dinf</span>:[],<span class="code-attr">dref</span>:[],<span class="code-attr">esds</span>:[],<span class="code-attr">ftyp</span>:[],<span class="code-attr">hdlr</span>:[],<span class="code-attr">mdat</span>:[],<span class="code-attr">mdhd</span>:[],<span class="code-attr">mdia</span>:[],<span class="code-attr">mfhd</span>:[],<span class="code-attr">minf</span>:[],<span class="code-attr">moof</span>:[],<span class="code-attr">moov</span>:[],<span class="code-attr">mp4a</span>:[],<span class="code-attr">mvex</span>:[],<span class="code-attr">mvhd</span>:[],<span class="code-attr">pasp</span>:[],<span class="code-attr">sdtp</span>:[],<span class="code-attr">smhd</span>:[],<span class="code-attr">stbl</span>:[],<span class="code-attr">stco</span>:[],<span class="code-attr">stsc</span>:[],<span class="code-attr">stsd</span>:[],<span class="code-attr">stsz</span>:[],<span class="code-attr">stts</span>:[],<span class="code-attr">styp</span>:[],<span class="code-attr">tfdt</span>:[],<span class="code-attr">tfhd</span>:[],<span class="code-attr">traf</span>:[],<span class="code-attr">trak</span>:[],<span class="code-attr">trun</span>:[],<span class="code-attr">trex</span>:[],<span class="code-attr">tkhd</span>:[],<span class="code-attr">vmhd</span>:[]},<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">Uint8Array</span>){<span class="code-keyword">for</span>(e <span class="code-keyword">in</span> S)S.hasOwnProperty(e)&amp;&amp;(S[e]=[e.charCodeAt(<span class="code-number">0</span>),e.charCodeAt(<span class="code-number">1</span>),e.charCodeAt(<span class="code-number">2</span>),e.charCodeAt(<span class="code-number">3</span>)]);w=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-string">"i"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"s"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"o"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"m"</span>.charCodeAt(<span class="code-number">0</span>)]),E=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-string">"a"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"v"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"c"</span>.charCodeAt(<span class="code-number">0</span>),<span class="code-string">"1"</span>.charCodeAt(<span class="code-number">0</span>)]),I=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),A=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">118</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">86</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">111</span>,<span class="code-number">72</span>,<span class="code-number">97</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">108</span>,<span class="code-number">101</span>,<span class="code-number">114</span>,<span class="code-number">0</span>]),L=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">115</span>,<span class="code-number">111</span>,<span class="code-number">117</span>,<span class="code-number">110</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">83</span>,<span class="code-number">111</span>,<span class="code-number">117</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">72</span>,<span class="code-number">97</span>,<span class="code-number">110</span>,<span class="code-number">100</span>,<span class="code-number">108</span>,<span class="code-number">101</span>,<span class="code-number">114</span>,<span class="code-number">0</span>]),P={<span class="code-attr">video</span>:A,<span class="code-attr">audio</span>:L},O=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">12</span>,<span class="code-number">117</span>,<span class="code-number">114</span>,<span class="code-number">108</span>,<span class="code-number">32</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),x=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),D=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),C=D,U=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]),R=D,k=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>])}}(),t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=<span class="code-number">0</span>;<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;<span class="code-built_in">arguments</span>.length;t++)n.push(<span class="code-built_in">arguments</span>[t]);<span class="code-keyword">for</span>(t=n.length;t--;)r+=n[t].byteLength;<span class="code-keyword">for</span>(i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r+<span class="code-number">8</span>),<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(i.buffer,i.byteOffset,i.byteLength).setUint32(<span class="code-number">0</span>,i.byteLength),i.set(e,<span class="code-number">4</span>),t=<span class="code-number">0</span>,r=<span class="code-number">8</span>;t&lt;n.length;t++)i.set(n[t],r),r+=n[t].byteLength;<span class="code-keyword">return</span> i},i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t(S.dinf,t(S.dref,O))},n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.esds,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>,<span class="code-number">25</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">4</span>,<span class="code-number">17</span>,<span class="code-number">64</span>,<span class="code-number">21</span>,<span class="code-number">0</span>,<span class="code-number">6</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">218</span>,<span class="code-number">192</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">218</span>,<span class="code-number">192</span>,<span class="code-number">5</span>,<span class="code-number">2</span>,e.audioobjecttype&lt;&lt;<span class="code-number">3</span>|e.samplingfrequencyindex&gt;&gt;&gt;<span class="code-number">1</span>,e.samplingfrequencyindex&lt;&lt;<span class="code-number">7</span>|e.channelcount&lt;&lt;<span class="code-number">3</span>,<span class="code-number">6</span>,<span class="code-number">1</span>,<span class="code-number">2</span>]))},m=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.hdlr,P[e])},p=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">2</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">3</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">95</span>,<span class="code-number">144</span>,e.duration&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,e.duration&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,e.duration&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;e.duration,<span class="code-number">85</span>,<span class="code-number">196</span>,<span class="code-number">0</span>,<span class="code-number">0</span>]);<span class="code-keyword">return</span> e.samplerate&amp;&amp;(i[<span class="code-number">12</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">13</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">14</span>]=e.samplerate&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,i[<span class="code-number">15</span>]=<span class="code-number">255</span>&amp;e.samplerate),t(S.mdhd,i)},f=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.mdia,p(e),m(e.type),s(e))},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.mfhd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e]))},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.minf,<span class="code-string">"video"</span>===e.type?t(S.vmhd,k):t(S.smhd,x),i(),y(e))},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=[],r=i.length;r--;)n[r]=_(i[r]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[S.moof,a(e)].concat(n))},u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.length,n=[];i--;)n[i]=c(e[i]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[S.moov,l(<span class="code-number">4294967295</span>)].concat(n).concat(d(e)))},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.length,n=[];i--;)n[i]=T(e[i]);<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,[S.mvex].concat(n))},l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">2</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">95</span>,<span class="code-number">144</span>,(<span class="code-number">4278190080</span>&amp;e)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">64</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">255</span>,<span class="code-number">255</span>,<span class="code-number">255</span>,<span class="code-number">255</span>]);<span class="code-keyword">return</span> t(S.mvhd,i)},g=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r=e.samples||[],a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">4</span>+r.length);<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;r.length;n++)i=r[n].flags,a[n+<span class="code-number">4</span>]=i.dependsOn&lt;&lt;<span class="code-number">4</span>|i.isDependedOn&lt;&lt;<span class="code-number">2</span>|i.hasRedundancy;<span class="code-keyword">return</span> t(S.sdtp,a)},y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.stbl,v(e),t(S.stts,R),t(S.stsc,C),t(S.stsz,U),t(S.stco,D))},v=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.stsd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]),<span class="code-string">"video"</span>===e.type?M(e):B(e))},M=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r=e.sps||[],a=e.pps||[],s=[],o=[];<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;r.length;i++)s.push((<span class="code-number">65280</span>&amp;r[i].byteLength)&gt;&gt;&gt;<span class="code-number">8</span>),s.push(<span class="code-number">255</span>&amp;r[i].byteLength),s=s.concat(<span class="code-built_in">Array</span>.prototype.slice.call(r[i]));<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;a.length;i++)o.push((<span class="code-number">65280</span>&amp;a[i].byteLength)&gt;&gt;&gt;<span class="code-number">8</span>),o.push(<span class="code-number">255</span>&amp;a[i].byteLength),o=o.concat(<span class="code-built_in">Array</span>.prototype.slice.call(a[i]));<span class="code-keyword">if</span>(n=[S.avc1,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.width)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.width,(<span class="code-number">65280</span>&amp;e.height)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.height,<span class="code-number">0</span>,<span class="code-number">72</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">72</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">19</span>,<span class="code-number">118</span>,<span class="code-number">105</span>,<span class="code-number">100</span>,<span class="code-number">101</span>,<span class="code-number">111</span>,<span class="code-number">106</span>,<span class="code-number">115</span>,<span class="code-number">45</span>,<span class="code-number">99</span>,<span class="code-number">111</span>,<span class="code-number">110</span>,<span class="code-number">116</span>,<span class="code-number">114</span>,<span class="code-number">105</span>,<span class="code-number">98</span>,<span class="code-number">45</span>,<span class="code-number">104</span>,<span class="code-number">108</span>,<span class="code-number">115</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">24</span>,<span class="code-number">17</span>,<span class="code-number">17</span>]),t(S.avcC,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">1</span>,e.profileIdc,e.profileCompatibility,e.levelIdc,<span class="code-number">255</span>].concat([r.length],s,[a.length],o))),t(S.btrt,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">28</span>,<span class="code-number">156</span>,<span class="code-number">128</span>,<span class="code-number">0</span>,<span class="code-number">45</span>,<span class="code-number">198</span>,<span class="code-number">192</span>,<span class="code-number">0</span>,<span class="code-number">45</span>,<span class="code-number">198</span>,<span class="code-number">192</span>]))],e.sarRatio){<span class="code-keyword">var</span> u=e.sarRatio[<span class="code-number">0</span>],d=e.sarRatio[<span class="code-number">1</span>];n.push(t(S.pasp,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([(<span class="code-number">4278190080</span>&amp;u)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;u)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;u)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;u,(<span class="code-number">4278190080</span>&amp;d)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;d)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;d)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;d])))}<span class="code-keyword">return</span> t.apply(<span class="code-literal">null</span>,n)},B=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.mp4a,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.channelcount)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.channelcount,(<span class="code-number">65280</span>&amp;e.samplesize)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.samplesize,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.samplerate)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.samplerate,<span class="code-number">0</span>,<span class="code-number">0</span>]),n(e))},h=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">7</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.duration)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.duration)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.duration)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.duration,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">64</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.width)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.width,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">65280</span>&amp;e.height)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.height,<span class="code-number">0</span>,<span class="code-number">0</span>]);<span class="code-keyword">return</span> t(S.tkhd,i)},_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o;<span class="code-keyword">return</span> i=t(S.tfhd,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">58</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>])),s=<span class="code-built_in">Math</span>.floor(e.baseMediaDecodeTime/V),o=<span class="code-built_in">Math</span>.floor(e.baseMediaDecodeTime%V),n=t(S.tfdt,<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,s&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,s&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,s&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;s,o&gt;&gt;&gt;<span class="code-number">24</span>&amp;<span class="code-number">255</span>,o&gt;&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>,o&gt;&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>,<span class="code-number">255</span>&amp;o])),<span class="code-string">"audio"</span>===e.type?(r=b(e,<span class="code-number">92</span>),t(S.traf,i,n,r)):(a=g(e),r=b(e,a.length+<span class="code-number">92</span>),t(S.traf,i,n,r,a))},c=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.duration=e.duration||<span class="code-number">4294967295</span>,t(S.trak,h(e),f(e))},T=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,(<span class="code-number">4278190080</span>&amp;e.id)&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.id)&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.id)&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.id,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">1</span>,<span class="code-number">0</span>,<span class="code-number">1</span>]);<span class="code-keyword">return</span><span class="code-string">"video"</span>!==e.type&amp;&amp;(i[i.length<span class="code-number">-1</span>]=<span class="code-number">0</span>),t(S.trex,i)},q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">0</span>,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=<span class="code-number">0</span>;<span class="code-keyword">return</span> e.length&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].duration&amp;&amp;(i=<span class="code-number">1</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].size&amp;&amp;(n=<span class="code-number">2</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].flags&amp;&amp;(r=<span class="code-number">4</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>!==e[<span class="code-number">0</span>].compositionTimeOffset&amp;&amp;(a=<span class="code-number">8</span>)),[<span class="code-number">0</span>,<span class="code-number">0</span>,i|n|r|a,<span class="code-number">1</span>,(<span class="code-number">4278190080</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;e.length)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;e.length,(<span class="code-number">4278190080</span>&amp;t)&gt;&gt;&gt;<span class="code-number">24</span>,(<span class="code-number">16711680</span>&amp;t)&gt;&gt;&gt;<span class="code-number">16</span>,(<span class="code-number">65280</span>&amp;t)&gt;&gt;&gt;<span class="code-number">8</span>,<span class="code-number">255</span>&amp;t]},F=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u;<span class="code-keyword">for</span>(i+=<span class="code-number">20</span>+<span class="code-number">16</span>*(s=e.samples||[]).length,a=q(s,i),(r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.length+<span class="code-number">16</span>*s.length)).set(a),n=a.length,u=<span class="code-number">0</span>;u&lt;s.length;u++)o=s[u],r[n++]=(<span class="code-number">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">24</span>,r[n++]=(<span class="code-number">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">16</span>,r[n++]=(<span class="code-number">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">8</span>,r[n++]=<span class="code-number">255</span>&amp;o.duration,r[n++]=(<span class="code-number">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">24</span>,r[n++]=(<span class="code-number">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">16</span>,r[n++]=(<span class="code-number">65280</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">8</span>,r[n++]=<span class="code-number">255</span>&amp;o.size,r[n++]=o.flags.isLeading&lt;&lt;<span class="code-number">2</span>|o.flags.dependsOn,r[n++]=o.flags.isDependedOn&lt;&lt;<span class="code-number">6</span>|o.flags.hasRedundancy&lt;&lt;<span class="code-number">4</span>|o.flags.paddingValue&lt;&lt;<span class="code-number">1</span>|o.flags.isNonSyncSample,r[n++]=<span class="code-number">61440</span>&amp;o.flags.degradationPriority,r[n++]=<span class="code-number">15</span>&amp;o.flags.degradationPriority,r[n++]=(<span class="code-number">4278190080</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">24</span>,r[n++]=(<span class="code-number">16711680</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">16</span>,r[n++]=(<span class="code-number">65280</span>&amp;o.compositionTimeOffset)&gt;&gt;&gt;<span class="code-number">8</span>,r[n++]=<span class="code-number">255</span>&amp;o.compositionTimeOffset;<span class="code-keyword">return</span> t(S.trun,r)},N=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u;<span class="code-keyword">for</span>(i+=<span class="code-number">20</span>+<span class="code-number">8</span>*(s=e.samples||[]).length,a=q(s,i),(n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.length+<span class="code-number">8</span>*s.length)).set(a),r=a.length,u=<span class="code-number">0</span>;u&lt;s.length;u++)o=s[u],n[r++]=(<span class="code-number">4278190080</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">24</span>,n[r++]=(<span class="code-number">16711680</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">16</span>,n[r++]=(<span class="code-number">65280</span>&amp;o.duration)&gt;&gt;&gt;<span class="code-number">8</span>,n[r++]=<span class="code-number">255</span>&amp;o.duration,n[r++]=(<span class="code-number">4278190080</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">24</span>,n[r++]=(<span class="code-number">16711680</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">16</span>,n[r++]=(<span class="code-number">65280</span>&amp;o.size)&gt;&gt;&gt;<span class="code-number">8</span>,n[r++]=<span class="code-number">255</span>&amp;o.size;<span class="code-keyword">return</span> t(S.trun,n)},b=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"audio"</span>===e.type?N(e,t):F(e,t)},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t(S.ftyp,w,I,w,E)};<span class="code-keyword">var</span> j,X,z,Q,Y,K,$,J,Z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t(S.mdat,e)},ee=o,te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">size</span>:<span class="code-number">0</span>,<span class="code-attr">flags</span>:{<span class="code-attr">isLeading</span>:<span class="code-number">0</span>,<span class="code-attr">dependsOn</span>:<span class="code-number">1</span>,<span class="code-attr">isDependedOn</span>:<span class="code-number">0</span>,<span class="code-attr">hasRedundancy</span>:<span class="code-number">0</span>,<span class="code-attr">degradationPriority</span>:<span class="code-number">0</span>,<span class="code-attr">isNonSyncSample</span>:<span class="code-number">1</span>}};<span class="code-keyword">return</span> i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=<span class="code-number">4</span>*e.length,i.size+=e.byteLength,e.keyFrame&amp;&amp;(i.flags.dependsOn=<span class="code-number">2</span>,i.flags.isNonSyncSample=<span class="code-number">0</span>),i},ie=[<span class="code-number">33</span>,<span class="code-number">16</span>,<span class="code-number">5</span>,<span class="code-number">32</span>,<span class="code-number">164</span>,<span class="code-number">27</span>],ne=[<span class="code-number">33</span>,<span class="code-number">65</span>,<span class="code-number">108</span>,<span class="code-number">84</span>,<span class="code-number">1</span>,<span class="code-number">2</span>,<span class="code-number">4</span>,<span class="code-number">8</span>,<span class="code-number">168</span>,<span class="code-number">2</span>,<span class="code-number">4</span>,<span class="code-number">8</span>,<span class="code-number">17</span>,<span class="code-number">191</span>,<span class="code-number">252</span>],re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[];e--;)t.push(<span class="code-number">0</span>);<span class="code-keyword">return</span> t},ae=<span class="code-number">9e4</span>;K=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> X(Y(e,t))},$=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> z(Q(e),t)},J=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> Q(i?e:e-t)};<span class="code-keyword">var</span> se=ae,oe=X=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e*ae},ue=(z=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e*t},Q=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e/ae}),de=(Y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e/t},K),le=$,ce=J,he=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r,a,s,o,u,d=<span class="code-number">0</span>,l=<span class="code-number">0</span>,c=<span class="code-number">0</span>;<span class="code-keyword">if</span>(t.length&amp;&amp;(r=de(e.baseMediaDecodeTime,e.samplerate),a=<span class="code-built_in">Math</span>.ceil(se/(e.samplerate/<span class="code-number">1024</span>)),i&amp;&amp;n&amp;&amp;(d=r-<span class="code-built_in">Math</span>.max(i,n),c=(l=<span class="code-built_in">Math</span>.floor(d/a))*a),!(l&lt;<span class="code-number">1</span>||c&gt;<span class="code-number">45e3</span>))){<span class="code-keyword">for</span>((s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!j){<span class="code-keyword">var</span> e={<span class="code-number">96e3</span>:[ie,[<span class="code-number">227</span>,<span class="code-number">64</span>],re(<span class="code-number">154</span>),[<span class="code-number">56</span>]],<span class="code-number">88200</span>:[ie,[<span class="code-number">231</span>],re(<span class="code-number">170</span>),[<span class="code-number">56</span>]],<span class="code-number">64e3</span>:[ie,[<span class="code-number">248</span>,<span class="code-number">192</span>],re(<span class="code-number">240</span>),[<span class="code-number">56</span>]],<span class="code-number">48e3</span>:[ie,[<span class="code-number">255</span>,<span class="code-number">192</span>],re(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">148</span>,<span class="code-number">128</span>],re(<span class="code-number">54</span>),[<span class="code-number">112</span>]],<span class="code-number">44100</span>:[ie,[<span class="code-number">255</span>,<span class="code-number">192</span>],re(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">163</span>,<span class="code-number">128</span>],re(<span class="code-number">84</span>),[<span class="code-number">112</span>]],<span class="code-number">32e3</span>:[ie,[<span class="code-number">255</span>,<span class="code-number">192</span>],re(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">234</span>],re(<span class="code-number">226</span>),[<span class="code-number">112</span>]],<span class="code-number">24e3</span>:[ie,[<span class="code-number">255</span>,<span class="code-number">192</span>],re(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">255</span>,<span class="code-number">128</span>],re(<span class="code-number">268</span>),[<span class="code-number">111</span>,<span class="code-number">112</span>],re(<span class="code-number">126</span>),[<span class="code-number">224</span>]],<span class="code-number">16e3</span>:[ie,[<span class="code-number">255</span>,<span class="code-number">192</span>],re(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">255</span>,<span class="code-number">128</span>],re(<span class="code-number">268</span>),[<span class="code-number">111</span>,<span class="code-number">255</span>],re(<span class="code-number">269</span>),[<span class="code-number">223</span>,<span class="code-number">108</span>],re(<span class="code-number">195</span>),[<span class="code-number">1</span>,<span class="code-number">192</span>]],<span class="code-number">12e3</span>:[ne,re(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">127</span>,<span class="code-number">248</span>],re(<span class="code-number">268</span>),[<span class="code-number">6</span>,<span class="code-number">255</span>,<span class="code-number">240</span>],re(<span class="code-number">268</span>),[<span class="code-number">13</span>,<span class="code-number">255</span>,<span class="code-number">224</span>],re(<span class="code-number">268</span>),[<span class="code-number">27</span>,<span class="code-number">253</span>,<span class="code-number">128</span>],re(<span class="code-number">259</span>),[<span class="code-number">56</span>]],<span class="code-number">11025</span>:[ne,re(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">127</span>,<span class="code-number">248</span>],re(<span class="code-number">268</span>),[<span class="code-number">6</span>,<span class="code-number">255</span>,<span class="code-number">240</span>],re(<span class="code-number">268</span>),[<span class="code-number">13</span>,<span class="code-number">255</span>,<span class="code-number">224</span>],re(<span class="code-number">268</span>),[<span class="code-number">27</span>,<span class="code-number">255</span>,<span class="code-number">192</span>],re(<span class="code-number">268</span>),[<span class="code-number">55</span>,<span class="code-number">175</span>,<span class="code-number">128</span>],re(<span class="code-number">108</span>),[<span class="code-number">112</span>]],<span class="code-number">8e3</span>:[ne,re(<span class="code-number">268</span>),[<span class="code-number">3</span>,<span class="code-number">121</span>,<span class="code-number">16</span>],re(<span class="code-number">47</span>),[<span class="code-number">7</span>]]};t=e,j=<span class="code-built_in">Object</span>.keys(t).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">return</span> e[i]=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t[i].reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.concat(t)}),[])),e}),{})}<span class="code-keyword">var</span> t;<span class="code-keyword">return</span> j}()[e.samplerate])||(s=t[<span class="code-number">0</span>].data),o=<span class="code-number">0</span>;o&lt;l;o++)u=t[<span class="code-number">0</span>],t.splice(<span class="code-number">0</span>,<span class="code-number">0</span>,{<span class="code-attr">data</span>:s,<span class="code-attr">dts</span>:u.dts-a,<span class="code-attr">pts</span>:u.pts-a});<span class="code-keyword">return</span> e.baseMediaDecodeTime-=<span class="code-built_in">Math</span>.floor(le(c,e.samplerate)),c}},fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">delete</span> e.minSegmentDts,<span class="code-keyword">delete</span> e.maxSegmentDts,<span class="code-keyword">delete</span> e.minSegmentPts,<span class="code-keyword">delete</span> e.maxSegmentPts},pe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=e.minSegmentDts;<span class="code-keyword">return</span> t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=<span class="code-built_in">Math</span>.max(<span class="code-number">0</span>,i),<span class="code-string">"audio"</span>===e.type&amp;&amp;(i*=e.samplerate/<span class="code-number">9e4</span>,i=<span class="code-built_in">Math</span>.floor(i)),i},me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.pts&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===e.timelineStartInfo.pts&amp;&amp;(e.timelineStartInfo.pts=t.pts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=<span class="code-built_in">Math</span>.min(e.minSegmentPts,t.pts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=<span class="code-built_in">Math</span>.max(e.maxSegmentPts,t.pts)),<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.dts&amp;&amp;(<span class="code-keyword">void</span> <span class="code-number">0</span>===e.timelineStartInfo.dts&amp;&amp;(e.timelineStartInfo.dts=t.dts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=<span class="code-built_in">Math</span>.min(e.minSegmentDts,t.dts),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=<span class="code-built_in">Math</span>.max(e.maxSegmentDts,t.dts))},ge=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{t=t||{},e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.parse708captions_=<span class="code-string">"boolean"</span>!=<span class="code-keyword">typeof</span> t.parse708captions||t.parse708captions,<span class="code-keyword">this</span>.captionPackets_=[],<span class="code-keyword">this</span>.ccStreams_=[<span class="code-keyword">new</span> Ae(<span class="code-number">0</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> Ae(<span class="code-number">0</span>,<span class="code-number">1</span>),<span class="code-keyword">new</span> Ae(<span class="code-number">1</span>,<span class="code-number">0</span>),<span class="code-keyword">new</span> Ae(<span class="code-number">1</span>,<span class="code-number">1</span>)],<span class="code-keyword">this</span>.parse708captions_&amp;&amp;(<span class="code-keyword">this</span>.cc708Stream_=<span class="code-keyword">new</span> be({<span class="code-attr">captionServices</span>:t.captionServices})),<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.ccStreams_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),e.on(<span class="code-string">"partialdone"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"partialdone"</span>)),e.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>))}),<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.parse708captions_&amp;&amp;(<span class="code-keyword">this</span>.cc708Stream_.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),<span class="code-keyword">this</span>.cc708Stream_.on(<span class="code-string">"partialdone"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"partialdone"</span>)),<span class="code-keyword">this</span>.cc708Stream_.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>)))};(ge.prototype=<span class="code-keyword">new</span> H).push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;<span class="code-keyword">if</span>(<span class="code-string">"sei_rbsp"</span>===e.nalUnitType&amp;&amp;(t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>,i={<span class="code-attr">payloadType</span>:<span class="code-number">-1</span>,<span class="code-attr">payloadSize</span>:<span class="code-number">0</span>},n=<span class="code-number">0</span>,r=<span class="code-number">0</span>;t&lt;e.byteLength&amp;&amp;<span class="code-number">128</span>!==e[t];){<span class="code-keyword">for</span>(;<span class="code-number">255</span>===e[t];)n+=<span class="code-number">255</span>,t++;<span class="code-keyword">for</span>(n+=e[t++];<span class="code-number">255</span>===e[t];)r+=<span class="code-number">255</span>,t++;<span class="code-keyword">if</span>(r+=e[t++],!i.payload&amp;&amp;<span class="code-number">4</span>===n){<span class="code-keyword">if</span>(<span class="code-string">"GA94"</span>===<span class="code-built_in">String</span>.fromCharCode(e[t+<span class="code-number">3</span>],e[t+<span class="code-number">4</span>],e[t+<span class="code-number">5</span>],e[t+<span class="code-number">6</span>])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);<span class="code-keyword">break</span>}i.payload=<span class="code-keyword">void</span> <span class="code-number">0</span>}t+=r,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>}<span class="code-keyword">return</span> i}(e.escapedRBSP)).payload&amp;&amp;<span class="code-number">4</span>===t.payloadType&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">181</span>!==e.payload[<span class="code-number">0</span>]||<span class="code-number">49</span>!=(e.payload[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">8</span>|e.payload[<span class="code-number">2</span>])||<span class="code-string">"GA94"</span>!==<span class="code-built_in">String</span>.fromCharCode(e.payload[<span class="code-number">3</span>],e.payload[<span class="code-number">4</span>],e.payload[<span class="code-number">5</span>],e.payload[<span class="code-number">6</span>])||<span class="code-number">3</span>!==e.payload[<span class="code-number">7</span>]?<span class="code-literal">null</span>:e.payload.subarray(<span class="code-number">8</span>,e.payload.length<span class="code-number">-1</span>)}(t)))<span class="code-keyword">if</span>(e.dts&lt;<span class="code-keyword">this</span>.latestDts_)<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">0</span>;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.dts===<span class="code-keyword">this</span>.latestDts_&amp;&amp;<span class="code-keyword">this</span>.ignoreNextEqualDts_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.numSameDts_--,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.numSameDts_||(<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>));n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s=[];<span class="code-keyword">if</span>(!(<span class="code-number">64</span>&amp;t[<span class="code-number">0</span>]))<span class="code-keyword">return</span> s;<span class="code-keyword">for</span>(n=<span class="code-number">31</span>&amp;t[<span class="code-number">0</span>],i=<span class="code-number">0</span>;i&lt;n;i++)a={<span class="code-attr">type</span>:<span class="code-number">3</span>&amp;t[<span class="code-number">2</span>+(r=<span class="code-number">3</span>*i)],<span class="code-attr">pts</span>:e},<span class="code-number">4</span>&amp;t[r+<span class="code-number">2</span>]&amp;&amp;(a.ccData=t[r+<span class="code-number">3</span>]&lt;&lt;<span class="code-number">8</span>|t[r+<span class="code-number">4</span>],s.push(a));<span class="code-keyword">return</span> s}(e.pts,i),<span class="code-keyword">this</span>.captionPackets_=<span class="code-keyword">this</span>.captionPackets_.concat(n),<span class="code-keyword">this</span>.latestDts_!==e.dts&amp;&amp;(<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>),<span class="code-keyword">this</span>.numSameDts_++,<span class="code-keyword">this</span>.latestDts_=e.dts}},ge.prototype.flushCCStreams=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.ccStreams_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"flush"</span>===e?t.flush():t.partialFlush()}),<span class="code-keyword">this</span>)},ge.prototype.flushStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.captionPackets_.length?(<span class="code-keyword">this</span>.captionPackets_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.presortIndex=t})),<span class="code-keyword">this</span>.captionPackets_.sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),<span class="code-keyword">this</span>.captionPackets_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.type&lt;<span class="code-number">2</span>?<span class="code-keyword">this</span>.dispatchCea608Packet(e):<span class="code-keyword">this</span>.dispatchCea708Packet(e)}),<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.captionPackets_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.flushCCStreams(e)):<span class="code-keyword">this</span>.flushCCStreams(e)},ge.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"flush"</span>)},ge.prototype.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushStream(<span class="code-string">"partialFlush"</span>)},ge.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.latestDts_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.ignoreNextEqualDts_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.numSameDts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.activeCea608Channel_=[<span class="code-literal">null</span>,<span class="code-literal">null</span>],<span class="code-keyword">this</span>.ccStreams_.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.reset()}))},ge.prototype.dispatchCea608Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.setsTextOrXDSActive(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-literal">null</span>:<span class="code-keyword">this</span>.setsChannel1Active(e)?<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">0</span>:<span class="code-keyword">this</span>.setsChannel2Active(e)&amp;&amp;(<span class="code-keyword">this</span>.activeCea608Channel_[e.type]=<span class="code-number">1</span>),<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.activeCea608Channel_[e.type]&amp;&amp;<span class="code-keyword">this</span>.ccStreams_[(e.type&lt;&lt;<span class="code-number">1</span>)+<span class="code-keyword">this</span>.activeCea608Channel_[e.type]].push(e)},ge.prototype.setsChannel1Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">4096</span>==(<span class="code-number">30720</span>&amp;e.ccData)},ge.prototype.setsChannel2Active=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">6144</span>==(<span class="code-number">30720</span>&amp;e.ccData)},ge.prototype.setsTextOrXDSActive=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">256</span>==(<span class="code-number">28928</span>&amp;e.ccData)||<span class="code-number">4138</span>==(<span class="code-number">30974</span>&amp;e.ccData)||<span class="code-number">6186</span>==(<span class="code-number">30974</span>&amp;e.ccData)},ge.prototype.dispatchCea708Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.parse708captions_&amp;&amp;<span class="code-keyword">this</span>.cc708Stream_.push(e)};<span class="code-keyword">var</span> ye={<span class="code-number">127</span>:<span class="code-number">9834</span>,<span class="code-number">4128</span>:<span class="code-number">32</span>,<span class="code-number">4129</span>:<span class="code-number">160</span>,<span class="code-number">4133</span>:<span class="code-number">8230</span>,<span class="code-number">4138</span>:<span class="code-number">352</span>,<span class="code-number">4140</span>:<span class="code-number">338</span>,<span class="code-number">4144</span>:<span class="code-number">9608</span>,<span class="code-number">4145</span>:<span class="code-number">8216</span>,<span class="code-number">4146</span>:<span class="code-number">8217</span>,<span class="code-number">4147</span>:<span class="code-number">8220</span>,<span class="code-number">4148</span>:<span class="code-number">8221</span>,<span class="code-number">4149</span>:<span class="code-number">8226</span>,<span class="code-number">4153</span>:<span class="code-number">8482</span>,<span class="code-number">4154</span>:<span class="code-number">353</span>,<span class="code-number">4156</span>:<span class="code-number">339</span>,<span class="code-number">4157</span>:<span class="code-number">8480</span>,<span class="code-number">4159</span>:<span class="code-number">376</span>,<span class="code-number">4214</span>:<span class="code-number">8539</span>,<span class="code-number">4215</span>:<span class="code-number">8540</span>,<span class="code-number">4216</span>:<span class="code-number">8541</span>,<span class="code-number">4217</span>:<span class="code-number">8542</span>,<span class="code-number">4218</span>:<span class="code-number">9168</span>,<span class="code-number">4219</span>:<span class="code-number">9124</span>,<span class="code-number">4220</span>:<span class="code-number">9123</span>,<span class="code-number">4221</span>:<span class="code-number">9135</span>,<span class="code-number">4222</span>:<span class="code-number">9126</span>,<span class="code-number">4223</span>:<span class="code-number">9121</span>,<span class="code-number">4256</span>:<span class="code-number">12600</span>},ve=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">32</span>&lt;=e&amp;&amp;e&lt;=<span class="code-number">127</span>||<span class="code-number">160</span>&lt;=e&amp;&amp;e&lt;=<span class="code-number">255</span>},_e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.windowNum=e,<span class="code-keyword">this</span>.reset()};_e.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.clearText(),<span class="code-keyword">this</span>.pendingNewLine=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.winAttr={},<span class="code-keyword">this</span>.penAttr={},<span class="code-keyword">this</span>.penLoc={},<span class="code-keyword">this</span>.penColor={},<span class="code-keyword">this</span>.visible=<span class="code-number">0</span>,<span class="code-keyword">this</span>.rowLock=<span class="code-number">0</span>,<span class="code-keyword">this</span>.columnLock=<span class="code-number">0</span>,<span class="code-keyword">this</span>.priority=<span class="code-number">0</span>,<span class="code-keyword">this</span>.relativePositioning=<span class="code-number">0</span>,<span class="code-keyword">this</span>.anchorVertical=<span class="code-number">0</span>,<span class="code-keyword">this</span>.anchorHorizontal=<span class="code-number">0</span>,<span class="code-keyword">this</span>.anchorPoint=<span class="code-number">0</span>,<span class="code-keyword">this</span>.rowCount=<span class="code-number">1</span>,<span class="code-keyword">this</span>.virtualRowCount=<span class="code-keyword">this</span>.rowCount+<span class="code-number">1</span>,<span class="code-keyword">this</span>.columnCount=<span class="code-number">41</span>,<span class="code-keyword">this</span>.windowStyle=<span class="code-number">0</span>,<span class="code-keyword">this</span>.penStyle=<span class="code-number">0</span>},_e.prototype.getText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.rows.join(<span class="code-string">"\n"</span>)},_e.prototype.clearText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.rows=[<span class="code-string">""</span>],<span class="code-keyword">this</span>.rowIdx=<span class="code-number">0</span>},_e.prototype.newLine=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.rows.length&gt;=<span class="code-keyword">this</span>.virtualRowCount&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.beforeRowOverflow&amp;&amp;<span class="code-keyword">this</span>.beforeRowOverflow(e),<span class="code-keyword">this</span>.rows.length&gt;<span class="code-number">0</span>&amp;&amp;(<span class="code-keyword">this</span>.rows.push(<span class="code-string">""</span>),<span class="code-keyword">this</span>.rowIdx++);<span class="code-keyword">this</span>.rows.length&gt;<span class="code-keyword">this</span>.virtualRowCount;)<span class="code-keyword">this</span>.rows.shift(),<span class="code-keyword">this</span>.rowIdx--},_e.prototype.isEmpty=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.rows.length||<span class="code-number">1</span>===<span class="code-keyword">this</span>.rows.length&amp;&amp;<span class="code-string">""</span>===<span class="code-keyword">this</span>.rows[<span class="code-number">0</span>]},_e.prototype.addText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.rows[<span class="code-keyword">this</span>.rowIdx]+=e},_e.prototype.backspace=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isEmpty()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.rows[<span class="code-keyword">this</span>.rowIdx];<span class="code-keyword">this</span>.rows[<span class="code-keyword">this</span>.rowIdx]=e.substr(<span class="code-number">0</span>,e.length<span class="code-number">-1</span>)}};<span class="code-keyword">var</span> Te=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">this</span>.serviceNum=e,<span class="code-keyword">this</span>.text=<span class="code-string">""</span>,<span class="code-keyword">this</span>.currentWindow=<span class="code-keyword">new</span> _e(<span class="code-number">-1</span>),<span class="code-keyword">this</span>.windows=[],<span class="code-keyword">this</span>.stream=i,<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-keyword">this</span>.createTextDecoder(t)};Te.prototype.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.startPts=e;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;<span class="code-number">8</span>;i++)<span class="code-keyword">this</span>.windows[i]=<span class="code-keyword">new</span> _e(i),<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;(<span class="code-keyword">this</span>.windows[i].beforeRowOverflow=t)},Te.prototype.setCurrentWindow=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.currentWindow=<span class="code-keyword">this</span>.windows[e]},Te.prototype.createTextDecoder=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"undefined"</span>==<span class="code-keyword">typeof</span> TextDecoder)<span class="code-keyword">this</span>.stream.trigger(<span class="code-string">"log"</span>,{<span class="code-attr">level</span>:<span class="code-string">"warn"</span>,<span class="code-attr">message</span>:<span class="code-string">"The `encoding` option is unsupported without TextDecoder support"</span>});<span class="code-keyword">else</span> <span class="code-keyword">try</span>{<span class="code-keyword">this</span>.textDecoder_=<span class="code-keyword">new</span> TextDecoder(e)}<span class="code-keyword">catch</span>(t){<span class="code-keyword">this</span>.stream.trigger(<span class="code-string">"log"</span>,{<span class="code-attr">level</span>:<span class="code-string">"warn"</span>,<span class="code-attr">message</span>:<span class="code-string">"TextDecoder could not be created with "</span>+e+<span class="code-string">" encoding. "</span>+t})}};<span class="code-keyword">var</span> be=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{t=t||{},e.prototype.init.call(<span class="code-keyword">this</span>);<span class="code-keyword">var</span> i,n=<span class="code-keyword">this</span>,r=t.captionServices||{},a={};<span class="code-built_in">Object</span>.keys(r).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i=r[e],/^SERVICE/.test(e)&amp;&amp;(a[e]=i.encoding)})),<span class="code-keyword">this</span>.serviceEncodings=a,<span class="code-keyword">this</span>.current708Packet=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.services={},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-number">3</span>===e.type?(n.new708Packet(),n.add708Bytes(e)):(<span class="code-literal">null</span>===n.current708Packet&amp;&amp;n.new708Packet(),n.add708Bytes(e))}};be.prototype=<span class="code-keyword">new</span> H,be.prototype.new708Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.current708Packet&amp;&amp;<span class="code-keyword">this</span>.push708Packet(),<span class="code-keyword">this</span>.current708Packet={<span class="code-attr">data</span>:[],<span class="code-attr">ptsVals</span>:[]}},be.prototype.add708Bytes=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.ccData,i=t&gt;&gt;&gt;<span class="code-number">8</span>,n=<span class="code-number">255</span>&amp;t;<span class="code-keyword">this</span>.current708Packet.ptsVals.push(e.pts),<span class="code-keyword">this</span>.current708Packet.data.push(i),<span class="code-keyword">this</span>.current708Packet.data.push(n)},be.prototype.push708Packet=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.current708Packet,t=e.data,i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>,r=<span class="code-number">0</span>,a=t[r++];<span class="code-keyword">for</span>(e.seq=a&gt;&gt;<span class="code-number">6</span>,e.sizeCode=<span class="code-number">63</span>&amp;a;r&lt;t.length;r++)n=<span class="code-number">31</span>&amp;(a=t[r++]),<span class="code-number">7</span>==(i=a&gt;&gt;<span class="code-number">5</span>)&amp;&amp;n&gt;<span class="code-number">0</span>&amp;&amp;(i=a=t[r++]),<span class="code-keyword">this</span>.pushServiceBlock(i,r,n),n&gt;<span class="code-number">0</span>&amp;&amp;(r+=n<span class="code-number">-1</span>)},be.prototype.pushServiceBlock=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=t,a=<span class="code-keyword">this</span>.current708Packet.data,s=<span class="code-keyword">this</span>.services[e];<span class="code-keyword">for</span>(s||(s=<span class="code-keyword">this</span>.initService(e,r));r&lt;t+i&amp;&amp;r&lt;a.length;r++)n=a[r],ve(n)?r=<span class="code-keyword">this</span>.handleText(r,s):<span class="code-number">24</span>===n?r=<span class="code-keyword">this</span>.multiByteCharacter(r,s):<span class="code-number">16</span>===n?r=<span class="code-keyword">this</span>.extendedCommands(r,s):<span class="code-number">128</span>&lt;=n&amp;&amp;n&lt;=<span class="code-number">135</span>?r=<span class="code-keyword">this</span>.setCurrentWindow(r,s):<span class="code-number">152</span>&lt;=n&amp;&amp;n&lt;=<span class="code-number">159</span>?r=<span class="code-keyword">this</span>.defineWindow(r,s):<span class="code-number">136</span>===n?r=<span class="code-keyword">this</span>.clearWindows(r,s):<span class="code-number">140</span>===n?r=<span class="code-keyword">this</span>.deleteWindows(r,s):<span class="code-number">137</span>===n?r=<span class="code-keyword">this</span>.displayWindows(r,s):<span class="code-number">138</span>===n?r=<span class="code-keyword">this</span>.hideWindows(r,s):<span class="code-number">139</span>===n?r=<span class="code-keyword">this</span>.toggleWindows(r,s):<span class="code-number">151</span>===n?r=<span class="code-keyword">this</span>.setWindowAttributes(r,s):<span class="code-number">144</span>===n?r=<span class="code-keyword">this</span>.setPenAttributes(r,s):<span class="code-number">145</span>===n?r=<span class="code-keyword">this</span>.setPenColor(r,s):<span class="code-number">146</span>===n?r=<span class="code-keyword">this</span>.setPenLocation(r,s):<span class="code-number">143</span>===n?s=<span class="code-keyword">this</span>.reset(r,s):<span class="code-number">8</span>===n?s.currentWindow.backspace():<span class="code-number">12</span>===n?s.currentWindow.clearText():<span class="code-number">13</span>===n?s.currentWindow.pendingNewLine=!<span class="code-number">0</span>:<span class="code-number">14</span>===n?s.currentWindow.clearText():<span class="code-number">141</span>===n&amp;&amp;r++},be.prototype.extendedCommands=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e];<span class="code-keyword">return</span> ve(i)&amp;&amp;(e=<span class="code-keyword">this</span>.handleText(e,t,{<span class="code-attr">isExtended</span>:!<span class="code-number">0</span>})),e},be.prototype.getPts=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.current708Packet.ptsVals[<span class="code-built_in">Math</span>.floor(e/<span class="code-number">2</span>)]},be.prototype.initService=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r=<span class="code-keyword">this</span>;<span class="code-keyword">return</span>(i=<span class="code-string">"SERVICE"</span>+e)<span class="code-keyword">in</span> <span class="code-keyword">this</span>.serviceEncodings&amp;&amp;(n=<span class="code-keyword">this</span>.serviceEncodings[i]),<span class="code-keyword">this</span>.services[e]=<span class="code-keyword">new</span> Te(e,n,r),<span class="code-keyword">this</span>.services[e].init(<span class="code-keyword">this</span>.getPts(t),(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{r.flushDisplayed(t,r.services[e])})),<span class="code-keyword">this</span>.services[e]},be.prototype.handleText=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=i&amp;&amp;i.isExtended,u=i&amp;&amp;i.isMultiByte,d=<span class="code-keyword">this</span>.current708Packet.data,l=o?<span class="code-number">4096</span>:<span class="code-number">0</span>,c=d[e],h=d[e+<span class="code-number">1</span>],f=t.currentWindow;<span class="code-keyword">return</span> t.textDecoder_&amp;&amp;!o?(u?(r=[c,h],e++):r=[c],n=t.textDecoder_.decode(<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r))):(s=ye[a=l|c]||a,n=<span class="code-number">4096</span>&amp;a&amp;&amp;a===s?<span class="code-string">""</span>:<span class="code-built_in">String</span>.fromCharCode(s)),f.pendingNewLine&amp;&amp;!f.isEmpty()&amp;&amp;f.newLine(<span class="code-keyword">this</span>.getPts(e)),f.pendingNewLine=!<span class="code-number">1</span>,f.addText(n),e},be.prototype.multiByteCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e+<span class="code-number">1</span>],r=i[e+<span class="code-number">2</span>];<span class="code-keyword">return</span> ve(n)&amp;&amp;ve(r)&amp;&amp;(e=<span class="code-keyword">this</span>.handleText(++e,t,{<span class="code-attr">isMultiByte</span>:!<span class="code-number">0</span>})),e},be.prototype.setCurrentWindow=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">7</span>&amp;<span class="code-keyword">this</span>.current708Packet.data[e];<span class="code-keyword">return</span> t.setCurrentWindow(i),e},be.prototype.defineWindow=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=<span class="code-number">7</span>&amp;n;t.setCurrentWindow(r);<span class="code-keyword">var</span> a=t.currentWindow;<span class="code-keyword">return</span> n=i[++e],a.visible=(<span class="code-number">32</span>&amp;n)&gt;&gt;<span class="code-number">5</span>,a.rowLock=(<span class="code-number">16</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,a.columnLock=(<span class="code-number">8</span>&amp;n)&gt;&gt;<span class="code-number">3</span>,a.priority=<span class="code-number">7</span>&amp;n,n=i[++e],a.relativePositioning=(<span class="code-number">128</span>&amp;n)&gt;&gt;<span class="code-number">7</span>,a.anchorVertical=<span class="code-number">127</span>&amp;n,n=i[++e],a.anchorHorizontal=n,n=i[++e],a.anchorPoint=(<span class="code-number">240</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,a.rowCount=<span class="code-number">15</span>&amp;n,n=i[++e],a.columnCount=<span class="code-number">63</span>&amp;n,n=i[++e],a.windowStyle=(<span class="code-number">56</span>&amp;n)&gt;&gt;<span class="code-number">3</span>,a.penStyle=<span class="code-number">7</span>&amp;n,a.virtualRowCount=a.rowCount+<span class="code-number">1</span>,e},be.prototype.setWindowAttributes=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;<span class="code-keyword">return</span> n=i[++e],r.fillOpacity=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.fillRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.fillGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.fillBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.borderType=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.borderRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.borderGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.borderBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.borderType+=(<span class="code-number">128</span>&amp;n)&gt;&gt;<span class="code-number">5</span>,r.wordWrap=(<span class="code-number">64</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.printDirection=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.scrollDirection=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.justify=<span class="code-number">3</span>&amp;n,n=i[++e],r.effectSpeed=(<span class="code-number">240</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.effectDirection=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.displayEffect=<span class="code-number">3</span>&amp;n,e},be.prototype.flushDisplayed=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=[],n=<span class="code-number">0</span>;n&lt;<span class="code-number">8</span>;n++)t.windows[n].visible&amp;&amp;!t.windows[n].isEmpty()&amp;&amp;i.push(t.windows[n].getText());t.endPts=e,t.text=i.join(<span class="code-string">"\n\n"</span>),<span class="code-keyword">this</span>.pushCaption(t),t.startPts=e},be.prototype.pushCaption=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">""</span>!==e.text&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">startPts</span>:e.startPts,<span class="code-attr">endPts</span>:e.endPts,<span class="code-attr">text</span>:e.text,<span class="code-attr">stream</span>:<span class="code-string">"cc708_"</span>+e.serviceNum}),e.text=<span class="code-string">""</span>,e.startPts=e.endPts)},be.prototype.displayWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class="code-number">1</span>);<span class="code-keyword">return</span> e},be.prototype.hideWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible=<span class="code-number">0</span>);<span class="code-keyword">return</span> e},be.prototype.toggleWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;(t.windows[r].visible^=<span class="code-number">1</span>);<span class="code-keyword">return</span> e},be.prototype.clearWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;t.windows[r].clearText();<span class="code-keyword">return</span> e},be.prototype.deleteWindows=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data[++e],n=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">this</span>.flushDisplayed(n,t);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;<span class="code-number">8</span>;r++)i&amp;<span class="code-number">1</span>&lt;&lt;r&amp;&amp;t.windows[r].reset();<span class="code-keyword">return</span> e},be.prototype.setPenAttributes=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;<span class="code-keyword">return</span> n=i[++e],r.textTag=(<span class="code-number">240</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.offset=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.penSize=<span class="code-number">3</span>&amp;n,n=i[++e],r.italics=(<span class="code-number">128</span>&amp;n)&gt;&gt;<span class="code-number">7</span>,r.underline=(<span class="code-number">64</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.edgeType=(<span class="code-number">56</span>&amp;n)&gt;&gt;<span class="code-number">3</span>,r.fontStyle=<span class="code-number">7</span>&amp;n,e},be.prototype.setPenColor=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penColor;<span class="code-keyword">return</span> n=i[++e],r.fgOpacity=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.fgRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.fgGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.fgBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.bgOpacity=(<span class="code-number">192</span>&amp;n)&gt;&gt;<span class="code-number">6</span>,r.bgRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.bgGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.bgBlue=<span class="code-number">3</span>&amp;n,n=i[++e],r.edgeRed=(<span class="code-number">48</span>&amp;n)&gt;&gt;<span class="code-number">4</span>,r.edgeGreen=(<span class="code-number">12</span>&amp;n)&gt;&gt;<span class="code-number">2</span>,r.edgeBlue=<span class="code-number">3</span>&amp;n,e},be.prototype.setPenLocation=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;<span class="code-keyword">return</span> t.currentWindow.pendingNewLine=!<span class="code-number">0</span>,n=i[++e],r.row=<span class="code-number">15</span>&amp;n,n=i[++e],r.column=<span class="code-number">63</span>&amp;n,e},be.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.getPts(e);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.flushDisplayed(i,t),<span class="code-keyword">this</span>.initService(t.serviceNum,e)};<span class="code-keyword">var</span> Se={<span class="code-number">42</span>:<span class="code-number">225</span>,<span class="code-number">92</span>:<span class="code-number">233</span>,<span class="code-number">94</span>:<span class="code-number">237</span>,<span class="code-number">95</span>:<span class="code-number">243</span>,<span class="code-number">96</span>:<span class="code-number">250</span>,<span class="code-number">123</span>:<span class="code-number">231</span>,<span class="code-number">124</span>:<span class="code-number">247</span>,<span class="code-number">125</span>:<span class="code-number">209</span>,<span class="code-number">126</span>:<span class="code-number">241</span>,<span class="code-number">127</span>:<span class="code-number">9608</span>,<span class="code-number">304</span>:<span class="code-number">174</span>,<span class="code-number">305</span>:<span class="code-number">176</span>,<span class="code-number">306</span>:<span class="code-number">189</span>,<span class="code-number">307</span>:<span class="code-number">191</span>,<span class="code-number">308</span>:<span class="code-number">8482</span>,<span class="code-number">309</span>:<span class="code-number">162</span>,<span class="code-number">310</span>:<span class="code-number">163</span>,<span class="code-number">311</span>:<span class="code-number">9834</span>,<span class="code-number">312</span>:<span class="code-number">224</span>,<span class="code-number">313</span>:<span class="code-number">160</span>,<span class="code-number">314</span>:<span class="code-number">232</span>,<span class="code-number">315</span>:<span class="code-number">226</span>,<span class="code-number">316</span>:<span class="code-number">234</span>,<span class="code-number">317</span>:<span class="code-number">238</span>,<span class="code-number">318</span>:<span class="code-number">244</span>,<span class="code-number">319</span>:<span class="code-number">251</span>,<span class="code-number">544</span>:<span class="code-number">193</span>,<span class="code-number">545</span>:<span class="code-number">201</span>,<span class="code-number">546</span>:<span class="code-number">211</span>,<span class="code-number">547</span>:<span class="code-number">218</span>,<span class="code-number">548</span>:<span class="code-number">220</span>,<span class="code-number">549</span>:<span class="code-number">252</span>,<span class="code-number">550</span>:<span class="code-number">8216</span>,<span class="code-number">551</span>:<span class="code-number">161</span>,<span class="code-number">552</span>:<span class="code-number">42</span>,<span class="code-number">553</span>:<span class="code-number">39</span>,<span class="code-number">554</span>:<span class="code-number">8212</span>,<span class="code-number">555</span>:<span class="code-number">169</span>,<span class="code-number">556</span>:<span class="code-number">8480</span>,<span class="code-number">557</span>:<span class="code-number">8226</span>,<span class="code-number">558</span>:<span class="code-number">8220</span>,<span class="code-number">559</span>:<span class="code-number">8221</span>,<span class="code-number">560</span>:<span class="code-number">192</span>,<span class="code-number">561</span>:<span class="code-number">194</span>,<span class="code-number">562</span>:<span class="code-number">199</span>,<span class="code-number">563</span>:<span class="code-number">200</span>,<span class="code-number">564</span>:<span class="code-number">202</span>,<span class="code-number">565</span>:<span class="code-number">203</span>,<span class="code-number">566</span>:<span class="code-number">235</span>,<span class="code-number">567</span>:<span class="code-number">206</span>,<span class="code-number">568</span>:<span class="code-number">207</span>,<span class="code-number">569</span>:<span class="code-number">239</span>,<span class="code-number">570</span>:<span class="code-number">212</span>,<span class="code-number">571</span>:<span class="code-number">217</span>,<span class="code-number">572</span>:<span class="code-number">249</span>,<span class="code-number">573</span>:<span class="code-number">219</span>,<span class="code-number">574</span>:<span class="code-number">171</span>,<span class="code-number">575</span>:<span class="code-number">187</span>,<span class="code-number">800</span>:<span class="code-number">195</span>,<span class="code-number">801</span>:<span class="code-number">227</span>,<span class="code-number">802</span>:<span class="code-number">205</span>,<span class="code-number">803</span>:<span class="code-number">204</span>,<span class="code-number">804</span>:<span class="code-number">236</span>,<span class="code-number">805</span>:<span class="code-number">210</span>,<span class="code-number">806</span>:<span class="code-number">242</span>,<span class="code-number">807</span>:<span class="code-number">213</span>,<span class="code-number">808</span>:<span class="code-number">245</span>,<span class="code-number">809</span>:<span class="code-number">123</span>,<span class="code-number">810</span>:<span class="code-number">125</span>,<span class="code-number">811</span>:<span class="code-number">92</span>,<span class="code-number">812</span>:<span class="code-number">94</span>,<span class="code-number">813</span>:<span class="code-number">95</span>,<span class="code-number">814</span>:<span class="code-number">124</span>,<span class="code-number">815</span>:<span class="code-number">126</span>,<span class="code-number">816</span>:<span class="code-number">196</span>,<span class="code-number">817</span>:<span class="code-number">228</span>,<span class="code-number">818</span>:<span class="code-number">214</span>,<span class="code-number">819</span>:<span class="code-number">246</span>,<span class="code-number">820</span>:<span class="code-number">223</span>,<span class="code-number">821</span>:<span class="code-number">165</span>,<span class="code-number">822</span>:<span class="code-number">164</span>,<span class="code-number">823</span>:<span class="code-number">9474</span>,<span class="code-number">824</span>:<span class="code-number">197</span>,<span class="code-number">825</span>:<span class="code-number">229</span>,<span class="code-number">826</span>:<span class="code-number">216</span>,<span class="code-number">827</span>:<span class="code-number">248</span>,<span class="code-number">828</span>:<span class="code-number">9484</span>,<span class="code-number">829</span>:<span class="code-number">9488</span>,<span class="code-number">830</span>:<span class="code-number">9492</span>,<span class="code-number">831</span>:<span class="code-number">9496</span>},we=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===e?<span class="code-string">""</span>:(e=Se[e]||e,<span class="code-built_in">String</span>.fromCharCode(e))},Ie=[<span class="code-number">4352</span>,<span class="code-number">4384</span>,<span class="code-number">4608</span>,<span class="code-number">4640</span>,<span class="code-number">5376</span>,<span class="code-number">5408</span>,<span class="code-number">5632</span>,<span class="code-number">5664</span>,<span class="code-number">5888</span>,<span class="code-number">5920</span>,<span class="code-number">4096</span>,<span class="code-number">4864</span>,<span class="code-number">4896</span>,<span class="code-number">5120</span>,<span class="code-number">5152</span>],Ee=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> e=[],t=<span class="code-number">15</span>;t--;)e.push(<span class="code-string">""</span>);<span class="code-keyword">return</span> e},Ae=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.field_=t||<span class="code-number">0</span>,<span class="code-keyword">this</span>.dataChannel_=i||<span class="code-number">0</span>,<span class="code-keyword">this</span>.name_=<span class="code-string">"CC"</span>+(<span class="code-number">1</span>+(<span class="code-keyword">this</span>.field_&lt;&lt;<span class="code-number">1</span>|<span class="code-keyword">this</span>.dataChannel_)),<span class="code-keyword">this</span>.setConstants(),<span class="code-keyword">this</span>.reset(),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a;<span class="code-keyword">if</span>((t=<span class="code-number">32639</span>&amp;e.ccData)!==<span class="code-keyword">this</span>.lastControlCode_){<span class="code-keyword">if</span>(<span class="code-number">4096</span>==(<span class="code-number">61440</span>&amp;t)?<span class="code-keyword">this</span>.lastControlCode_=t:t!==<span class="code-keyword">this</span>.PADDING_&amp;&amp;(<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>),n=t&gt;&gt;&gt;<span class="code-number">8</span>,r=<span class="code-number">255</span>&amp;t,t!==<span class="code-keyword">this</span>.PADDING_)<span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.END_OF_CAPTION_)<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),i=<span class="code-keyword">this</span>.displayed_,<span class="code-keyword">this</span>.displayed_=<span class="code-keyword">this</span>.nonDisplayed_,<span class="code-keyword">this</span>.nonDisplayed_=i,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">3</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_)<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">4</span>,<span class="code-keyword">this</span>.setRollUp(e.pts);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.CARRIAGE_RETURN_)<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.shiftRowsUp_(),<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.BACKSPACE_)<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=Ee();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_)<span class="code-keyword">this</span>.nonDisplayed_=Ee();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t===<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_)<span class="code-string">"paintOn"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.flushDisplayed(e.pts),<span class="code-keyword">this</span>.displayed_=Ee()),<span class="code-keyword">this</span>.mode_=<span class="code-string">"paintOn"</span>,<span class="code-keyword">this</span>.startPts_=e.pts;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isSpecialCharacter(n,r))a=we((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isExtCharacter(n,r))<span class="code-string">"popOn"</span>===<span class="code-keyword">this</span>.mode_?<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>):<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_].slice(<span class="code-number">0</span>,<span class="code-number">-1</span>),a=we((n=(<span class="code-number">3</span>&amp;n)&lt;&lt;<span class="code-number">8</span>)|r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_++;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isMidRowCode(n,r))<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,<span class="code-string">" "</span>),<span class="code-keyword">this</span>.column_++,<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>]),<span class="code-number">1</span>==(<span class="code-number">1</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isOffsetControlCode(n,r))<span class="code-keyword">this</span>.column_+=<span class="code-number">3</span>&amp;r;<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isPAC(n,r)){<span class="code-keyword">var</span> s=Ie.indexOf(<span class="code-number">7968</span>&amp;t);<span class="code-string">"rollUp"</span>===<span class="code-keyword">this</span>.mode_&amp;&amp;(s-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>&lt;<span class="code-number">0</span>&amp;&amp;(s=<span class="code-keyword">this</span>.rollUpRows_<span class="code-number">-1</span>),<span class="code-keyword">this</span>.setRollUp(e.pts,s)),s!==<span class="code-keyword">this</span>.row_&amp;&amp;(<span class="code-keyword">this</span>.clearFormatting(e.pts),<span class="code-keyword">this</span>.row_=s),<span class="code-number">1</span>&amp;r&amp;&amp;<span class="code-number">-1</span>===<span class="code-keyword">this</span>.formatting_.indexOf(<span class="code-string">"u"</span>)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"u"</span>]),<span class="code-number">16</span>==(<span class="code-number">16</span>&amp;t)&amp;&amp;(<span class="code-keyword">this</span>.column_=<span class="code-number">4</span>*((<span class="code-number">14</span>&amp;t)&gt;&gt;<span class="code-number">1</span>)),<span class="code-keyword">this</span>.isColorPAC(r)&amp;&amp;<span class="code-number">14</span>==(<span class="code-number">14</span>&amp;r)&amp;&amp;<span class="code-keyword">this</span>.addFormatting(e.pts,[<span class="code-string">"i"</span>])}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.isNormalChar(n)&amp;&amp;(<span class="code-number">0</span>===r&amp;&amp;(r=<span class="code-literal">null</span>),a=we(n),a+=we(r),<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e.pts,a),<span class="code-keyword">this</span>.column_+=a.length)}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>}};Ae.prototype=<span class="code-keyword">new</span> H,Ae.prototype.flushDisplayed=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.displayed_.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">try</span>{<span class="code-keyword">return</span> e.trim()}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"log"</span>,{<span class="code-attr">level</span>:<span class="code-string">"warn"</span>,<span class="code-attr">message</span>:<span class="code-string">"Skipping a malformed 608 caption at index "</span>+t+<span class="code-string">"."</span>}),<span class="code-string">""</span>}}),<span class="code-keyword">this</span>).join(<span class="code-string">"\n"</span>).replace(<span class="code-regexp">/^\n+|\n+$/g</span>,<span class="code-string">""</span>);t.length&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">startPts</span>:<span class="code-keyword">this</span>.startPts_,<span class="code-attr">endPts</span>:e,<span class="code-attr">text</span>:t,<span class="code-attr">stream</span>:<span class="code-keyword">this</span>.name_})},Ae.prototype.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mode_=<span class="code-string">"popOn"</span>,<span class="code-keyword">this</span>.topRow_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.startPts_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.displayed_=Ee(),<span class="code-keyword">this</span>.nonDisplayed_=Ee(),<span class="code-keyword">this</span>.lastControlCode_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.column_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.rollUpRows_=<span class="code-number">2</span>,<span class="code-keyword">this</span>.formatting_=[]},Ae.prototype.setConstants=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">0</span>===<span class="code-keyword">this</span>.dataChannel_?(<span class="code-keyword">this</span>.BASE_=<span class="code-number">16</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">17</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">20</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">23</span>):<span class="code-number">1</span>===<span class="code-keyword">this</span>.dataChannel_&amp;&amp;(<span class="code-keyword">this</span>.BASE_=<span class="code-number">24</span>,<span class="code-keyword">this</span>.EXT_=<span class="code-number">25</span>,<span class="code-keyword">this</span>.CONTROL_=(<span class="code-number">28</span>|<span class="code-keyword">this</span>.field_)&lt;&lt;<span class="code-number">8</span>,<span class="code-keyword">this</span>.OFFSET_=<span class="code-number">31</span>),<span class="code-keyword">this</span>.PADDING_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.RESUME_CAPTION_LOADING_=<span class="code-number">32</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.END_OF_CAPTION_=<span class="code-number">47</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_2_ROWS_=<span class="code-number">37</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_3_ROWS_=<span class="code-number">38</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ROLL_UP_4_ROWS_=<span class="code-number">39</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.CARRIAGE_RETURN_=<span class="code-number">45</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.RESUME_DIRECT_CAPTIONING_=<span class="code-number">41</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.BACKSPACE_=<span class="code-number">33</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_DISPLAYED_MEMORY_=<span class="code-number">44</span>|<span class="code-keyword">this</span>.CONTROL_,<span class="code-keyword">this</span>.ERASE_NON_DISPLAYED_MEMORY_=<span class="code-number">46</span>|<span class="code-keyword">this</span>.CONTROL_},Ae.prototype.isSpecialCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">48</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},Ae.prototype.isExtCharacter=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>(e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">1</span>||e===<span class="code-keyword">this</span>.EXT_+<span class="code-number">2</span>)&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">63</span>},Ae.prototype.isMidRowCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.EXT_&amp;&amp;t&gt;=<span class="code-number">32</span>&amp;&amp;t&lt;=<span class="code-number">47</span>},Ae.prototype.isOffsetControlCode=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e===<span class="code-keyword">this</span>.OFFSET_&amp;&amp;t&gt;=<span class="code-number">33</span>&amp;&amp;t&lt;=<span class="code-number">35</span>},Ae.prototype.isPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-keyword">this</span>.BASE_&amp;&amp;e&lt;<span class="code-keyword">this</span>.BASE_+<span class="code-number">8</span>&amp;&amp;t&gt;=<span class="code-number">64</span>&amp;&amp;t&lt;=<span class="code-number">127</span>},Ae.prototype.isColorPAC=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">64</span>&amp;&amp;e&lt;=<span class="code-number">79</span>||e&gt;=<span class="code-number">96</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},Ae.prototype.isNormalChar=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;=<span class="code-number">32</span>&amp;&amp;e&lt;=<span class="code-number">127</span>},Ae.prototype.setRollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"rollUp"</span>!==<span class="code-keyword">this</span>.mode_&amp;&amp;(<span class="code-keyword">this</span>.row_=<span class="code-number">14</span>,<span class="code-keyword">this</span>.mode_=<span class="code-string">"rollUp"</span>,<span class="code-keyword">this</span>.flushDisplayed(e),<span class="code-keyword">this</span>.nonDisplayed_=Ee(),<span class="code-keyword">this</span>.displayed_=Ee()),<span class="code-keyword">void</span> <span class="code-number">0</span>!==t&amp;&amp;t!==<span class="code-keyword">this</span>.row_)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;<span class="code-keyword">this</span>.rollUpRows_;i++)<span class="code-keyword">this</span>.displayed_[t-i]=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i],<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_-i]=<span class="code-string">""</span>;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-keyword">this</span>.row_),<span class="code-keyword">this</span>.topRow_=t-<span class="code-keyword">this</span>.rollUpRows_+<span class="code-number">1</span>},Ae.prototype.addFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.formatting_=<span class="code-keyword">this</span>.formatting_.concat(t);<span class="code-keyword">var</span> i=t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;"</span>+t+<span class="code-string">"&gt;"</span>}),<span class="code-string">""</span>);<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,i)},Ae.prototype.clearFormatting=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.formatting_.length){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.formatting_.reverse().reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"&lt;/"</span>+t+<span class="code-string">"&gt;"</span>}),<span class="code-string">""</span>);<span class="code-keyword">this</span>.formatting_=[],<span class="code-keyword">this</span>[<span class="code-keyword">this</span>.mode_](e,t)}},Ae.prototype.popOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.nonDisplayed_[<span class="code-keyword">this</span>.row_]=i},Ae.prototype.rollUp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i},Ae.prototype.shiftRowsUp_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-keyword">this</span>.topRow_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.row_+<span class="code-number">1</span>;e&lt;<span class="code-number">15</span>;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-string">""</span>;<span class="code-keyword">for</span>(e=<span class="code-keyword">this</span>.topRow_;e&lt;<span class="code-keyword">this</span>.row_;e++)<span class="code-keyword">this</span>.displayed_[e]=<span class="code-keyword">this</span>.displayed_[e+<span class="code-number">1</span>];<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=<span class="code-string">""</span>},Ae.prototype.paintOn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_];i+=t,<span class="code-keyword">this</span>.displayed_[<span class="code-keyword">this</span>.row_]=i};<span class="code-keyword">var</span> Le={<span class="code-attr">CaptionStream</span>:ge,<span class="code-attr">Cea608Stream</span>:Ae,<span class="code-attr">Cea708Stream</span>:be},Pe={<span class="code-attr">H264_STREAM_TYPE</span>:<span class="code-number">27</span>,<span class="code-attr">ADTS_STREAM_TYPE</span>:<span class="code-number">15</span>,<span class="code-attr">METADATA_STREAM_TYPE</span>:<span class="code-number">21</span>},ke=<span class="code-string">"shared"</span>,xe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-number">1</span>;<span class="code-keyword">for</span>(e&gt;t&amp;&amp;(i=<span class="code-number">-1</span>);<span class="code-built_in">Math</span>.abs(t-e)&gt;<span class="code-number">4294967296</span>;)e+=<span class="code-number">8589934592</span>*i;<span class="code-keyword">return</span> e},Oe=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n;e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.type_=t||ke,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.type_!==ke&amp;&amp;e.type!==<span class="code-keyword">this</span>.type_||(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=e.dts),e.dts=xe(e.dts,n),e.pts=xe(e.pts,n),i=e.dts,<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e))},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=i,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)},<span class="code-keyword">this</span>.discontinuity=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n=<span class="code-keyword">void</span> <span class="code-number">0</span>,i=<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.discontinuity(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}};Oe.prototype=<span class="code-keyword">new</span> H;<span class="code-keyword">var</span> De,Ce=Oe,Ue=xe,Re=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-string">""</span>;<span class="code-keyword">for</span>(n=t;n&lt;i;n++)r+=<span class="code-string">"%"</span>+(<span class="code-string">"00"</span>+e[n].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">return</span> r},Me=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">decodeURIComponent</span>(Re(e,t,i))},Be=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]&lt;&lt;<span class="code-number">21</span>|e[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">14</span>|e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">7</span>|e[<span class="code-number">3</span>]},Ne={<span class="code-attr">TXXX</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">if</span>(<span class="code-number">3</span>===e.data[<span class="code-number">0</span>]){<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.description=Me(e.data,<span class="code-number">1</span>,t),e.value=Me(e.data,t+<span class="code-number">1</span>,e.data.length).replace(<span class="code-regexp">/\0*$/</span>,<span class="code-string">""</span>);<span class="code-keyword">break</span>}e.data=e.value}},<span class="code-attr">WXXX</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">if</span>(<span class="code-number">3</span>===e.data[<span class="code-number">0</span>])<span class="code-keyword">for</span>(t=<span class="code-number">1</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.description=Me(e.data,<span class="code-number">1</span>,t),e.url=Me(e.data,t+<span class="code-number">1</span>,e.data.length);<span class="code-keyword">break</span>}},<span class="code-attr">PRIV</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.data.length;t++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===e.data[t]){e.owner=(i=e.data,<span class="code-built_in">unescape</span>(Re(i,<span class="code-number">0</span>,t)));<span class="code-keyword">break</span>}e.privateData=e.data.subarray(t+<span class="code-number">1</span>),e.data=e.privateData}};(De=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={<span class="code-attr">descriptor</span>:e&amp;&amp;e.descriptor},n=<span class="code-number">0</span>,r=[],a=<span class="code-number">0</span>;<span class="code-keyword">if</span>(De.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.dispatchType=Pe.METADATA_STREAM_TYPE.toString(<span class="code-number">16</span>),i.descriptor)<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;i.descriptor.length;t++)<span class="code-keyword">this</span>.dispatchType+=(<span class="code-string">"00"</span>+i.descriptor[t].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,s,o,u;<span class="code-keyword">if</span>(<span class="code-string">"timed-metadata"</span>===e.type)<span class="code-keyword">if</span>(e.dataAlignmentIndicator&amp;&amp;(a=<span class="code-number">0</span>,r.length=<span class="code-number">0</span>),<span class="code-number">0</span>===r.length&amp;&amp;(e.data.length&lt;<span class="code-number">10</span>||e.data[<span class="code-number">0</span>]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||e.data[<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||e.data[<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)))<span class="code-keyword">this</span>.trigger(<span class="code-string">"log"</span>,{<span class="code-attr">level</span>:<span class="code-string">"warn"</span>,<span class="code-attr">message</span>:<span class="code-string">"Skipping unrecognized metadata packet"</span>});<span class="code-keyword">else</span> <span class="code-keyword">if</span>(r.push(e),a+=e.data.byteLength,<span class="code-number">1</span>===r.length&amp;&amp;(n=Be(e.data.subarray(<span class="code-number">6</span>,<span class="code-number">10</span>)),n+=<span class="code-number">10</span>),!(a&lt;n)){<span class="code-keyword">for</span>(t={<span class="code-attr">data</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n),<span class="code-attr">frames</span>:[],<span class="code-attr">pts</span>:r[<span class="code-number">0</span>].pts,<span class="code-attr">dts</span>:r[<span class="code-number">0</span>].dts},u=<span class="code-number">0</span>;u&lt;n;)t.data.set(r[<span class="code-number">0</span>].data.subarray(<span class="code-number">0</span>,n-u),u),u+=r[<span class="code-number">0</span>].data.byteLength,a-=r[<span class="code-number">0</span>].data.byteLength,r.shift();i=<span class="code-number">10</span>,<span class="code-number">64</span>&amp;t.data[<span class="code-number">5</span>]&amp;&amp;(i+=<span class="code-number">4</span>,i+=Be(t.data.subarray(<span class="code-number">10</span>,<span class="code-number">14</span>)),n-=Be(t.data.subarray(<span class="code-number">16</span>,<span class="code-number">20</span>)));<span class="code-keyword">do</span>{<span class="code-keyword">if</span>((s=Be(t.data.subarray(i+<span class="code-number">4</span>,i+<span class="code-number">8</span>)))&lt;<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"log"</span>,{<span class="code-attr">level</span>:<span class="code-string">"warn"</span>,<span class="code-attr">message</span>:<span class="code-string">"Malformed ID3 frame encountered. Skipping metadata parsing."</span>});<span class="code-keyword">if</span>((o={<span class="code-attr">id</span>:<span class="code-built_in">String</span>.fromCharCode(t.data[i],t.data[i+<span class="code-number">1</span>],t.data[i+<span class="code-number">2</span>],t.data[i+<span class="code-number">3</span>]),<span class="code-attr">data</span>:t.data.subarray(i+<span class="code-number">10</span>,i+s+<span class="code-number">10</span>)}).key=o.id,Ne[o.id]&amp;&amp;(Ne[o.id](o),<span class="code-string">"com.apple.streaming.transportStreamTimestamp"</span>===o.owner)){<span class="code-keyword">var</span> d=o.data,l=(<span class="code-number">1</span>&amp;d[<span class="code-number">3</span>])&lt;&lt;<span class="code-number">30</span>|d[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">22</span>|d[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">14</span>|d[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">6</span>|d[<span class="code-number">7</span>]&gt;&gt;&gt;<span class="code-number">2</span>;l*=<span class="code-number">4</span>,l+=<span class="code-number">3</span>&amp;d[<span class="code-number">7</span>],o.timeStamp=l,<span class="code-keyword">void</span> <span class="code-number">0</span>===t.pts&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>===t.dts&amp;&amp;(t.pts=o.timeStamp,t.dts=o.timeStamp),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestamp"</span>,o)}t.frames.push(o),i+=<span class="code-number">10</span>,i+=s}<span class="code-keyword">while</span>(i&lt;n);<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t)}}}).prototype=<span class="code-keyword">new</span> H;<span class="code-keyword">var</span> Fe,qe,He,Ge=De,We=Ce,Ve=<span class="code-number">188</span>;(Fe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(Ve),t=<span class="code-number">0</span>;Fe.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-number">0</span>,a=Ve;<span class="code-keyword">for</span>(t?((n=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+t)).set(e.subarray(<span class="code-number">0</span>,t)),n.set(i,t),t=<span class="code-number">0</span>):n=i;a&lt;n.byteLength;)<span class="code-number">71</span>!==n[r]||<span class="code-number">71</span>!==n[a]?(r++,a++):(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,n.subarray(r,a)),r+=Ve,a+=Ve);r&lt;n.byteLength&amp;&amp;(e.set(n.subarray(r),<span class="code-number">0</span>),t=n.byteLength-r)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t===Ve&amp;&amp;<span class="code-number">71</span>===e[<span class="code-number">0</span>]&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,e),t=<span class="code-number">0</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}}).prototype=<span class="code-keyword">new</span> H,(qe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n;qe.prototype.init.call(<span class="code-keyword">this</span>),n=<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.packetsWaitingForPmt=[],<span class="code-keyword">this</span>.programMapTable=<span class="code-keyword">void</span> <span class="code-number">0</span>,e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-number">0</span>;n.payloadUnitStartIndicator&amp;&amp;(r+=e[r]+<span class="code-number">1</span>),<span class="code-string">"pat"</span>===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.section_number=e[<span class="code-number">7</span>],t.last_section_number=e[<span class="code-number">8</span>],n.pmtPid=(<span class="code-number">31</span>&amp;e[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>],t.pmtPid=n.pmtPid},i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,r;<span class="code-keyword">if</span>(<span class="code-number">1</span>&amp;e[<span class="code-number">5</span>]){<span class="code-keyword">for</span>(n.programMapTable={<span class="code-attr">video</span>:<span class="code-literal">null</span>,<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-string">"timed-metadata"</span>:{}},i=<span class="code-number">3</span>+((<span class="code-number">15</span>&amp;e[<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">2</span>])<span class="code-number">-4</span>,r=<span class="code-number">12</span>+((<span class="code-number">15</span>&amp;e[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">11</span>]);r&lt;i;){<span class="code-keyword">var</span> a=e[r],s=(<span class="code-number">31</span>&amp;e[r+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[r+<span class="code-number">2</span>];a===Pe.H264_STREAM_TYPE&amp;&amp;<span class="code-literal">null</span>===n.programMapTable.video?n.programMapTable.video=s:a===Pe.ADTS_STREAM_TYPE&amp;&amp;<span class="code-literal">null</span>===n.programMapTable.audio?n.programMapTable.audio=s:a===Pe.METADATA_STREAM_TYPE&amp;&amp;(n.programMapTable[<span class="code-string">"timed-metadata"</span>][s]=a),r+=<span class="code-number">5</span>+((<span class="code-number">15</span>&amp;e[r+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">8</span>|e[r+<span class="code-number">4</span>])}t.programMapTable=n.programMapTable}},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={},n=<span class="code-number">4</span>;<span class="code-keyword">if</span>(i.payloadUnitStartIndicator=!!(<span class="code-number">64</span>&amp;t[<span class="code-number">1</span>]),i.pid=<span class="code-number">31</span>&amp;t[<span class="code-number">1</span>],i.pid&lt;&lt;=<span class="code-number">8</span>,i.pid|=t[<span class="code-number">2</span>],(<span class="code-number">48</span>&amp;t[<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">4</span>&gt;<span class="code-number">1</span>&amp;&amp;(n+=t[n]+<span class="code-number">1</span>),<span class="code-number">0</span>===i.pid)i.type=<span class="code-string">"pat"</span>,e(t.subarray(n),i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(i.pid===<span class="code-keyword">this</span>.pmtPid)<span class="code-keyword">for</span>(i.type=<span class="code-string">"pmt"</span>,e(t.subarray(n),i),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i);<span class="code-keyword">this</span>.packetsWaitingForPmt.length;)<span class="code-keyword">this</span>.processPes_.apply(<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.packetsWaitingForPmt.shift());<span class="code-keyword">else</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.programMapTable?<span class="code-keyword">this</span>.packetsWaitingForPmt.push([t,n,i]):<span class="code-keyword">this</span>.processPes_(t,n,i)},<span class="code-keyword">this</span>.processPes_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{i.pid===<span class="code-keyword">this</span>.programMapTable.video?i.streamType=Pe.H264_STREAM_TYPE:i.pid===<span class="code-keyword">this</span>.programMapTable.audio?i.streamType=Pe.ADTS_STREAM_TYPE:i.streamType=<span class="code-keyword">this</span>.programMapTable[<span class="code-string">"timed-metadata"</span>][i.pid],i.type=<span class="code-string">"pes"</span>,i.data=e.subarray(t),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,i)}}).prototype=<span class="code-keyword">new</span> H,qe.STREAM_TYPES={<span class="code-attr">h264</span>:<span class="code-number">27</span>,<span class="code-attr">adts</span>:<span class="code-number">15</span>},He=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t=<span class="code-keyword">this</span>,i=!<span class="code-number">1</span>,n={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},r={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},a={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n</span>)</span>{<span class="code-keyword">var</span> r,a,s=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.size),o={<span class="code-attr">type</span>:i},u=<span class="code-number">0</span>,d=<span class="code-number">0</span>;<span class="code-keyword">if</span>(e.data.length&amp;&amp;!(e.size&lt;<span class="code-number">9</span>)){<span class="code-keyword">for</span>(o.trackId=e.data[<span class="code-number">0</span>].pid,u=<span class="code-number">0</span>;u&lt;e.data.length;u++)a=e.data[u],s.set(a.data,d),d+=a.data.byteLength;<span class="code-keyword">var</span> l,c,h,f;c=o,f=(l=s)[<span class="code-number">0</span>]&lt;&lt;<span class="code-number">16</span>|l[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">8</span>|l[<span class="code-number">2</span>],c.data=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,<span class="code-number">1</span>===f&amp;&amp;(c.packetLength=<span class="code-number">6</span>+(l[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">8</span>|l[<span class="code-number">5</span>]),c.dataAlignmentIndicator=<span class="code-number">0</span>!=(<span class="code-number">4</span>&amp;l[<span class="code-number">6</span>]),<span class="code-number">192</span>&amp;(h=l[<span class="code-number">7</span>])&amp;&amp;(c.pts=(<span class="code-number">14</span>&amp;l[<span class="code-number">9</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">10</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">11</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">12</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">3</span>,c.pts*=<span class="code-number">4</span>,c.pts+=(<span class="code-number">6</span>&amp;l[<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">1</span>,c.dts=c.pts,<span class="code-number">64</span>&amp;h&amp;&amp;(c.dts=(<span class="code-number">14</span>&amp;l[<span class="code-number">14</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">15</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">16</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;l[<span class="code-number">17</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;l[<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">3</span>,c.dts*=<span class="code-number">4</span>,c.dts+=(<span class="code-number">6</span>&amp;l[<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">1</span>)),c.data=l.subarray(<span class="code-number">9</span>+l[<span class="code-number">8</span>])),r=<span class="code-string">"video"</span>===i||o.packetLength&lt;=e.size,(n||r)&amp;&amp;(e.size=<span class="code-number">0</span>,e.data.length=<span class="code-number">0</span>),r&amp;&amp;t.trigger(<span class="code-string">"data"</span>,o)}};He.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">o</span>)</span>{({<span class="code-attr">pat</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},<span class="code-attr">pes</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t;<span class="code-keyword">switch</span>(o.streamType){<span class="code-keyword">case</span> Pe.H264_STREAM_TYPE:e=n,t=<span class="code-string">"video"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> Pe.ADTS_STREAM_TYPE:e=r,t=<span class="code-string">"audio"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> Pe.METADATA_STREAM_TYPE:e=a,t=<span class="code-string">"timed-metadata"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span>}o.payloadUnitStartIndicator&amp;&amp;s(e,t,!<span class="code-number">0</span>),e.data.push(o),e.size+=o.data.byteLength},<span class="code-attr">pmt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> n={<span class="code-attr">type</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">tracks</span>:[]};<span class="code-literal">null</span>!==(e=o.programMapTable).video&amp;&amp;n.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.video,<span class="code-attr">codec</span>:<span class="code-string">"avc"</span>,<span class="code-attr">type</span>:<span class="code-string">"video"</span>}),<span class="code-literal">null</span>!==e.audio&amp;&amp;n.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.audio,<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>}),i=!<span class="code-number">0</span>,t.trigger(<span class="code-string">"data"</span>,n)}})[o.type]()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.size=<span class="code-number">0</span>,n.data.length=<span class="code-number">0</span>,r.size=<span class="code-number">0</span>,r.data.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.flushStreams_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{s(n,<span class="code-string">"video"</span>),s(r,<span class="code-string">"audio"</span>),s(a,<span class="code-string">"timed-metadata"</span>)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!i&amp;&amp;e){<span class="code-keyword">var</span> n={<span class="code-attr">type</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">tracks</span>:[]};<span class="code-literal">null</span>!==e.video&amp;&amp;n.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.video,<span class="code-attr">codec</span>:<span class="code-string">"avc"</span>,<span class="code-attr">type</span>:<span class="code-string">"video"</span>}),<span class="code-literal">null</span>!==e.audio&amp;&amp;n.tracks.push({<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:<span class="code-number">0</span>},<span class="code-attr">id</span>:+e.audio,<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>}),t.trigger(<span class="code-string">"data"</span>,n)}i=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.flushStreams_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)}},He.prototype=<span class="code-keyword">new</span> H;<span class="code-keyword">var</span> je={<span class="code-attr">PAT_PID</span>:<span class="code-number">0</span>,<span class="code-attr">MP2T_PACKET_LENGTH</span>:Ve,<span class="code-attr">TransportPacketStream</span>:Fe,<span class="code-attr">TransportParseStream</span>:qe,<span class="code-attr">ElementaryStream</span>:He,<span class="code-attr">TimestampRolloverStream</span>:We,<span class="code-attr">CaptionStream</span>:Le.CaptionStream,<span class="code-attr">Cea608Stream</span>:Le.Cea608Stream,<span class="code-attr">Cea708Stream</span>:Le.Cea708Stream,<span class="code-attr">MetadataStream</span>:Ge};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> Xe <span class="code-keyword">in</span> Pe)Pe.hasOwnProperty(Xe)&amp;&amp;(je[Xe]=Pe[Xe]);<span class="code-keyword">var</span> ze,Qe=je,Ye=[<span class="code-number">96e3</span>,<span class="code-number">88200</span>,<span class="code-number">64e3</span>,<span class="code-number">48e3</span>,<span class="code-number">44100</span>,<span class="code-number">32e3</span>,<span class="code-number">24e3</span>,<span class="code-number">22050</span>,<span class="code-number">16e3</span>,<span class="code-number">12e3</span>,<span class="code-number">11025</span>,<span class="code-number">8e3</span>,<span class="code-number">7350</span>];(ze=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-number">0</span>;ze.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.skipWarn_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"log"</span>,{<span class="code-attr">level</span>:<span class="code-string">"warn"</span>,<span class="code-attr">message</span>:<span class="code-string">"adts skiping bytes "</span>+e+<span class="code-string">" to "</span>+t+<span class="code-string">" in frame "</span>+i+<span class="code-string">" outside syncword"</span>})},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r,a,s,o,u,d=<span class="code-number">0</span>;<span class="code-keyword">if</span>(e||(i=<span class="code-number">0</span>),<span class="code-string">"audio"</span>===n.type){<span class="code-keyword">var</span> l;<span class="code-keyword">for</span>(t&amp;&amp;t.length?(s=t,(t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(s.byteLength+n.data.byteLength)).set(s),t.set(n.data,s.byteLength)):t=n.data;d+<span class="code-number">7</span>&lt;t.length;)<span class="code-keyword">if</span>(<span class="code-number">255</span>===t[d]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">246</span>&amp;t[d+<span class="code-number">1</span>])){<span class="code-keyword">if</span>(<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> l&amp;&amp;(<span class="code-keyword">this</span>.skipWarn_(l,d),l=<span class="code-literal">null</span>),a=<span class="code-number">2</span>*(<span class="code-number">1</span>&amp;~t[d+<span class="code-number">1</span>]),r=(<span class="code-number">3</span>&amp;t[d+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">11</span>|t[d+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>|(<span class="code-number">224</span>&amp;t[d+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,u=<span class="code-number">9e4</span>*(o=<span class="code-number">1024</span>*(<span class="code-number">1</span>+(<span class="code-number">3</span>&amp;t[d+<span class="code-number">6</span>])))/Ye[(<span class="code-number">60</span>&amp;t[d+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>],t.byteLength-d&lt;r)<span class="code-keyword">break</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">pts</span>:n.pts+i*u,<span class="code-attr">dts</span>:n.dts+i*u,<span class="code-attr">sampleCount</span>:o,<span class="code-attr">audioobjecttype</span>:<span class="code-number">1</span>+(t[d+<span class="code-number">2</span>]&gt;&gt;&gt;<span class="code-number">6</span>&amp;<span class="code-number">3</span>),<span class="code-attr">channelcount</span>:(<span class="code-number">1</span>&amp;t[d+<span class="code-number">2</span>])&lt;&lt;<span class="code-number">2</span>|(<span class="code-number">192</span>&amp;t[d+<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">6</span>,<span class="code-attr">samplerate</span>:Ye[(<span class="code-number">60</span>&amp;t[d+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>],<span class="code-attr">samplingfrequencyindex</span>:(<span class="code-number">60</span>&amp;t[d+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>,<span class="code-attr">samplesize</span>:<span class="code-number">16</span>,<span class="code-attr">data</span>:t.subarray(d+<span class="code-number">7</span>+a,d+r)}),i++,d+=r}<span class="code-keyword">else</span><span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> l&amp;&amp;(l=d),d++;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> l&amp;&amp;(<span class="code-keyword">this</span>.skipWarn_(l,d),l=<span class="code-literal">null</span>),t=t.subarray(d)}},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> H;<span class="code-keyword">var</span> Ke,$e,Je,Ze=ze,et=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.byteLength,i=<span class="code-number">0</span>,n=<span class="code-number">0</span>;<span class="code-keyword">this</span>.length=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">8</span>*t},<span class="code-keyword">this</span>.bitsAvailable=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">8</span>*t+n},<span class="code-keyword">this</span>.loadWord=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r=e.byteLength-t,a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-number">4</span>),s=<span class="code-built_in">Math</span>.min(<span class="code-number">4</span>,t);<span class="code-keyword">if</span>(<span class="code-number">0</span>===s)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"no bytes available"</span>);a.set(e.subarray(r,r+s)),i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(a.buffer).getUint32(<span class="code-number">0</span>),n=<span class="code-number">8</span>*s,t-=s},<span class="code-keyword">this</span>.skipBits=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r;n&gt;e?(i&lt;&lt;=e,n-=e):(e-=n,e-=<span class="code-number">8</span>*(r=<span class="code-built_in">Math</span>.floor(e/<span class="code-number">8</span>)),t-=r,<span class="code-keyword">this</span>.loadWord(),i&lt;&lt;=e,n-=e)},<span class="code-keyword">this</span>.readBits=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.min(n,e),a=i&gt;&gt;&gt;<span class="code-number">32</span>-r;<span class="code-keyword">return</span>(n-=r)&gt;<span class="code-number">0</span>?i&lt;&lt;=r:t&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.loadWord(),(r=e-r)&gt;<span class="code-number">0</span>?a&lt;&lt;r|<span class="code-keyword">this</span>.readBits(r):a},<span class="code-keyword">this</span>.skipLeadingZeros=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;n;++e)<span class="code-keyword">if</span>(<span class="code-number">0</span>!=(i&amp;<span class="code-number">2147483648</span>&gt;&gt;&gt;e))<span class="code-keyword">return</span> i&lt;&lt;=e,n-=e,e;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.loadWord(),e+<span class="code-keyword">this</span>.skipLeadingZeros()},<span class="code-keyword">this</span>.skipUnsignedExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.skipBits(<span class="code-number">1</span>+<span class="code-keyword">this</span>.skipLeadingZeros())},<span class="code-keyword">this</span>.skipExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.skipBits(<span class="code-number">1</span>+<span class="code-keyword">this</span>.skipLeadingZeros())},<span class="code-keyword">this</span>.readUnsignedExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.skipLeadingZeros();<span class="code-keyword">return</span> <span class="code-keyword">this</span>.readBits(e+<span class="code-number">1</span>)<span class="code-number">-1</span>},<span class="code-keyword">this</span>.readExpGolomb=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.readUnsignedExpGolomb();<span class="code-keyword">return</span> <span class="code-number">1</span>&amp;e?<span class="code-number">1</span>+e&gt;&gt;&gt;<span class="code-number">1</span>:<span class="code-number">-1</span>*(e&gt;&gt;&gt;<span class="code-number">1</span>)},<span class="code-keyword">this</span>.readBoolean=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">1</span>===<span class="code-keyword">this</span>.readBits(<span class="code-number">1</span>)},<span class="code-keyword">this</span>.readUnsignedByte=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.readBits(<span class="code-number">8</span>)},<span class="code-keyword">this</span>.loadWord()};($e=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i=<span class="code-number">0</span>;$e.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r;t?((r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=t.byteLength;i&lt;a<span class="code-number">-3</span>;i++)<span class="code-keyword">if</span>(<span class="code-number">1</span>===t[i+<span class="code-number">2</span>]){e=i+<span class="code-number">5</span>;<span class="code-keyword">break</span>}<span class="code-keyword">for</span>(;e&lt;a;)<span class="code-keyword">switch</span>(t[e]){<span class="code-keyword">case</span> <span class="code-number">0</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-1</span>]){e+=<span class="code-number">2</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-2</span>]){e++;<span class="code-keyword">break</span>}i+<span class="code-number">3</span>!==e<span class="code-number">-2</span>&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>,e<span class="code-number">-2</span>));<span class="code-keyword">do</span>{e++}<span class="code-keyword">while</span>(<span class="code-number">1</span>!==t[e]&amp;&amp;e&lt;a);i=e<span class="code-number">-2</span>,e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">1</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t[e<span class="code-number">-1</span>]||<span class="code-number">0</span>!==t[e<span class="code-number">-2</span>]){e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>}<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>,e<span class="code-number">-2</span>)),i=e<span class="code-number">-2</span>,e+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:e+=<span class="code-number">3</span>}t=t.subarray(i),e-=i,i=<span class="code-number">0</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=<span class="code-literal">null</span>,i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t&amp;&amp;t.byteLength&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,t.subarray(i+<span class="code-number">3</span>)),t=<span class="code-literal">null</span>,i=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.flush(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> H,Je={<span class="code-number">100</span>:!<span class="code-number">0</span>,<span class="code-number">110</span>:!<span class="code-number">0</span>,<span class="code-number">122</span>:!<span class="code-number">0</span>,<span class="code-number">244</span>:!<span class="code-number">0</span>,<span class="code-number">44</span>:!<span class="code-number">0</span>,<span class="code-number">83</span>:!<span class="code-number">0</span>,<span class="code-number">86</span>:!<span class="code-number">0</span>,<span class="code-number">118</span>:!<span class="code-number">0</span>,<span class="code-number">128</span>:!<span class="code-number">0</span>,<span class="code-number">138</span>:!<span class="code-number">0</span>,<span class="code-number">139</span>:!<span class="code-number">0</span>,<span class="code-number">134</span>:!<span class="code-number">0</span>},Ke=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s,o=<span class="code-keyword">new</span> $e;Ke.prototype.init.call(<span class="code-keyword">this</span>),e=<span class="code-keyword">this</span>,<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"video"</span>===e.type&amp;&amp;(t=e.trackId,i=e.pts,n=e.dts,o.push(e))},o.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">s</span>)</span>{<span class="code-keyword">var</span> o={<span class="code-attr">trackId</span>:t,<span class="code-attr">pts</span>:i,<span class="code-attr">dts</span>:n,<span class="code-attr">data</span>:s,<span class="code-attr">nalUnitTypeCode</span>:<span class="code-number">31</span>&amp;s[<span class="code-number">0</span>]};<span class="code-keyword">switch</span>(o.nalUnitTypeCode){<span class="code-keyword">case</span> <span class="code-number">5</span>:o.nalUnitType=<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:o.nalUnitType=<span class="code-string">"sei_rbsp"</span>,o.escapedRBSP=r(s.subarray(<span class="code-number">1</span>));<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:o.nalUnitType=<span class="code-string">"seq_parameter_set_rbsp"</span>,o.escapedRBSP=r(s.subarray(<span class="code-number">1</span>)),o.config=a(o.escapedRBSP);<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:o.nalUnitType=<span class="code-string">"pic_parameter_set_rbsp"</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:o.nalUnitType=<span class="code-string">"access_unit_delimiter_rbsp"</span>}e.trigger(<span class="code-string">"data"</span>,o)})),o.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"done"</span>)})),o.on(<span class="code-string">"partialdone"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"partialdone"</span>)})),o.on(<span class="code-string">"reset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"reset"</span>)})),o.on(<span class="code-string">"endedtimeline"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"endedtimeline"</span>)})),<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.flush()},<span class="code-keyword">this</span>.partialFlush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.partialFlush()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.reset()},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{o.endTimeline()},s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=<span class="code-number">8</span>,r=<span class="code-number">8</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e;i++)<span class="code-number">0</span>!==r&amp;&amp;(r=(n+t.readExpGolomb()+<span class="code-number">256</span>)%<span class="code-number">256</span>),n=<span class="code-number">0</span>===r?n:r},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i,n=e.byteLength,r=[],a=<span class="code-number">1</span>;a&lt;n<span class="code-number">-2</span>;)<span class="code-number">0</span>===e[a]&amp;&amp;<span class="code-number">0</span>===e[a+<span class="code-number">1</span>]&amp;&amp;<span class="code-number">3</span>===e[a+<span class="code-number">2</span>]?(r.push(a+<span class="code-number">2</span>),a+=<span class="code-number">2</span>):a++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===r.length)<span class="code-keyword">return</span> e;t=n-r.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t);<span class="code-keyword">var</span> s=<span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;t;s++,a++)s===r[<span class="code-number">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class="code-keyword">return</span> i},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u,d,l,c,h,f,p=<span class="code-number">0</span>,m=<span class="code-number">0</span>,g=<span class="code-number">0</span>,y=<span class="code-number">0</span>,v=[<span class="code-number">1</span>,<span class="code-number">1</span>];<span class="code-keyword">if</span>(i=(t=<span class="code-keyword">new</span> et(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Je[i]&amp;&amp;(<span class="code-number">3</span>===(a=t.readUnsignedExpGolomb())&amp;&amp;t.skipBits(<span class="code-number">1</span>),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(<span class="code-number">1</span>),t.readBoolean()))<span class="code-keyword">for</span>(h=<span class="code-number">3</span>!==a?<span class="code-number">8</span>:<span class="code-number">12</span>,f=<span class="code-number">0</span>;f&lt;h;f++)t.readBoolean()&amp;&amp;s(f&lt;<span class="code-number">6</span>?<span class="code-number">16</span>:<span class="code-number">64</span>,t);<span class="code-keyword">if</span>(t.skipUnsignedExpGolomb(),<span class="code-number">0</span>===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-number">1</span>===o)<span class="code-keyword">for</span>(t.skipBits(<span class="code-number">1</span>),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),f=<span class="code-number">0</span>;f&lt;u;f++)t.skipExpGolomb();<span class="code-keyword">if</span>(t.skipUnsignedExpGolomb(),t.skipBits(<span class="code-number">1</span>),d=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),<span class="code-number">0</span>===(c=t.readBits(<span class="code-number">1</span>))&amp;&amp;t.skipBits(<span class="code-number">1</span>),t.skipBits(<span class="code-number">1</span>),t.readBoolean()&amp;&amp;(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&amp;&amp;t.readBoolean()){<span class="code-keyword">switch</span>(t.readUnsignedByte()){<span class="code-keyword">case</span> <span class="code-number">1</span>:v=[<span class="code-number">1</span>,<span class="code-number">1</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">2</span>:v=[<span class="code-number">12</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">3</span>:v=[<span class="code-number">10</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">4</span>:v=[<span class="code-number">16</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">5</span>:v=[<span class="code-number">40</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:v=[<span class="code-number">24</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:v=[<span class="code-number">20</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:v=[<span class="code-number">32</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:v=[<span class="code-number">80</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">10</span>:v=[<span class="code-number">18</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">11</span>:v=[<span class="code-number">15</span>,<span class="code-number">11</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">12</span>:v=[<span class="code-number">64</span>,<span class="code-number">33</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">13</span>:v=[<span class="code-number">160</span>,<span class="code-number">99</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">14</span>:v=[<span class="code-number">4</span>,<span class="code-number">3</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">15</span>:v=[<span class="code-number">3</span>,<span class="code-number">2</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">16</span>:v=[<span class="code-number">2</span>,<span class="code-number">1</span>];<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">255</span>:v=[t.readUnsignedByte()&lt;&lt;<span class="code-number">8</span>|t.readUnsignedByte(),t.readUnsignedByte()&lt;&lt;<span class="code-number">8</span>|t.readUnsignedByte()]}v&amp;&amp;(v[<span class="code-number">0</span>],v[<span class="code-number">1</span>])}<span class="code-keyword">return</span>{<span class="code-attr">profileIdc</span>:i,<span class="code-attr">levelIdc</span>:n,<span class="code-attr">profileCompatibility</span>:r,<span class="code-attr">width</span>:<span class="code-number">16</span>*(d+<span class="code-number">1</span>)<span class="code-number">-2</span>*p<span class="code-number">-2</span>*m,<span class="code-attr">height</span>:(<span class="code-number">2</span>-c)*(l+<span class="code-number">1</span>)*<span class="code-number">16</span><span class="code-number">-2</span>*g<span class="code-number">-2</span>*y,<span class="code-attr">sarRatio</span>:v}}},Ke.prototype=<span class="code-keyword">new</span> H;<span class="code-keyword">var</span> tt,it={<span class="code-attr">H264Stream</span>:Ke,<span class="code-attr">NalByteStream</span>:$e},nt=[<span class="code-number">96e3</span>,<span class="code-number">88200</span>,<span class="code-number">64e3</span>,<span class="code-number">48e3</span>,<span class="code-number">44100</span>,<span class="code-number">32e3</span>,<span class="code-number">24e3</span>,<span class="code-number">22050</span>,<span class="code-number">16e3</span>,<span class="code-number">12e3</span>,<span class="code-number">11025</span>,<span class="code-number">8e3</span>,<span class="code-number">7350</span>],rt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t+<span class="code-number">6</span>]&lt;&lt;<span class="code-number">21</span>|e[t+<span class="code-number">7</span>]&lt;&lt;<span class="code-number">14</span>|e[t+<span class="code-number">8</span>]&lt;&lt;<span class="code-number">7</span>|e[t+<span class="code-number">9</span>];<span class="code-keyword">return</span> i=i&gt;=<span class="code-number">0</span>?i:<span class="code-number">0</span>,(<span class="code-number">16</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">4</span>?i+<span class="code-number">20</span>:i+<span class="code-number">10</span>},at=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> t.length-i&lt;<span class="code-number">10</span>||t[i]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||t[i+<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||t[i+<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)?i:e(t,i+=rt(t,i))},st=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e[<span class="code-number">0</span>]&lt;&lt;<span class="code-number">21</span>|e[<span class="code-number">1</span>]&lt;&lt;<span class="code-number">14</span>|e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">7</span>|e[<span class="code-number">3</span>]},ot={<span class="code-attr">isLikelyAacData</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=at(e,<span class="code-number">0</span>);<span class="code-keyword">return</span> e.length&gt;=t+<span class="code-number">2</span>&amp;&amp;<span class="code-number">255</span>==(<span class="code-number">255</span>&amp;e[t])&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">240</span>&amp;e[t+<span class="code-number">1</span>])&amp;&amp;<span class="code-number">16</span>==(<span class="code-number">22</span>&amp;e[t+<span class="code-number">1</span>])},<span class="code-attr">parseId3TagSize</span>:rt,<span class="code-attr">parseAdtsSize</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=(<span class="code-number">224</span>&amp;e[t+<span class="code-number">5</span>])&gt;&gt;<span class="code-number">5</span>,n=e[t+<span class="code-number">4</span>]&lt;&lt;<span class="code-number">3</span>;<span class="code-keyword">return</span> <span class="code-number">6144</span>&amp;e[t+<span class="code-number">3</span>]|n|i},<span class="code-attr">parseType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e[t]===<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[t+<span class="code-number">1</span>]===<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)&amp;&amp;e[t+<span class="code-number">2</span>]===<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>)?<span class="code-string">"timed-metadata"</span>:!<span class="code-number">0</span>&amp;e[t]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">240</span>&amp;e[t+<span class="code-number">1</span>])?<span class="code-string">"audio"</span>:<span class="code-literal">null</span>},<span class="code-attr">parseSampleRate</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">0</span>;t+<span class="code-number">5</span>&lt;e.length;){<span class="code-keyword">if</span>(<span class="code-number">255</span>===e[t]&amp;&amp;<span class="code-number">240</span>==(<span class="code-number">246</span>&amp;e[t+<span class="code-number">1</span>]))<span class="code-keyword">return</span> nt[(<span class="code-number">60</span>&amp;e[t+<span class="code-number">2</span>])&gt;&gt;&gt;<span class="code-number">2</span>];t++}<span class="code-keyword">return</span> <span class="code-literal">null</span>},<span class="code-attr">parseAacTimestamp</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;t=<span class="code-number">10</span>,<span class="code-number">64</span>&amp;e[<span class="code-number">5</span>]&amp;&amp;(t+=<span class="code-number">4</span>,t+=st(e.subarray(<span class="code-number">10</span>,<span class="code-number">14</span>)));<span class="code-keyword">do</span>{<span class="code-keyword">if</span>((i=st(e.subarray(t+<span class="code-number">4</span>,t+<span class="code-number">8</span>)))&lt;<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-string">"PRIV"</span>===<span class="code-built_in">String</span>.fromCharCode(e[t],e[t+<span class="code-number">1</span>],e[t+<span class="code-number">2</span>],e[t+<span class="code-number">3</span>])){n=e.subarray(t+<span class="code-number">10</span>,t+i+<span class="code-number">10</span>);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;n.byteLength;r++)<span class="code-keyword">if</span>(<span class="code-number">0</span>===n[r]){<span class="code-keyword">var</span> a=<span class="code-built_in">unescape</span>(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r=<span class="code-string">""</span>;<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;i;n++)r+=<span class="code-string">"%"</span>+(<span class="code-string">"00"</span>+e[n].toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>);<span class="code-keyword">return</span> r}(n,<span class="code-number">0</span>,r));<span class="code-keyword">if</span>(<span class="code-string">"com.apple.streaming.transportStreamTimestamp"</span>===a){<span class="code-keyword">var</span> s=n.subarray(r+<span class="code-number">1</span>),o=(<span class="code-number">1</span>&amp;s[<span class="code-number">3</span>])&lt;&lt;<span class="code-number">30</span>|s[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">22</span>|s[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">14</span>|s[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">6</span>|s[<span class="code-number">7</span>]&gt;&gt;&gt;<span class="code-number">2</span>;<span class="code-keyword">return</span>(o*=<span class="code-number">4</span>)+(<span class="code-number">3</span>&amp;s[<span class="code-number">7</span>])}<span class="code-keyword">break</span>}}t+=<span class="code-number">10</span>,t+=i}<span class="code-keyword">while</span>(t&lt;e.byteLength);<span class="code-keyword">return</span> <span class="code-literal">null</span>}};(tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,t=<span class="code-number">0</span>;tt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.setTimestamp=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t=e},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-number">0</span>,u=<span class="code-number">0</span>;<span class="code-keyword">for</span>(e.length?(s=e.length,(e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i.byteLength+s)).set(e.subarray(<span class="code-number">0</span>,s)),e.set(i,s)):e=i;e.length-u&gt;=<span class="code-number">3</span>;)<span class="code-keyword">if</span>(e[u]!==<span class="code-string">"I"</span>.charCodeAt(<span class="code-number">0</span>)||e[u+<span class="code-number">1</span>]!==<span class="code-string">"D"</span>.charCodeAt(<span class="code-number">0</span>)||e[u+<span class="code-number">2</span>]!==<span class="code-string">"3"</span>.charCodeAt(<span class="code-number">0</span>))<span class="code-keyword">if</span>(<span class="code-number">255</span>!=(<span class="code-number">255</span>&amp;e[u])||<span class="code-number">240</span>!=(<span class="code-number">240</span>&amp;e[u+<span class="code-number">1</span>]))u++;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.length-u&lt;<span class="code-number">7</span>)<span class="code-keyword">break</span>;<span class="code-keyword">if</span>(u+(o=ot.parseAdtsSize(e,u))&gt;e.length)<span class="code-keyword">break</span>;a={<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">data</span>:e.subarray(u,u+o),<span class="code-attr">pts</span>:t,<span class="code-attr">dts</span>:t},<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,a),u+=o}<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(e.length-u&lt;<span class="code-number">10</span>)<span class="code-keyword">break</span>;<span class="code-keyword">if</span>(u+(o=ot.parseId3TagSize(e,u))&gt;e.length)<span class="code-keyword">break</span>;r={<span class="code-attr">type</span>:<span class="code-string">"timed-metadata"</span>,<span class="code-attr">data</span>:e.subarray(u,u+o)},<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,r),u+=o}n=e.length-u,e=n&gt;<span class="code-number">0</span>?e.subarray(u):<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"endedtimeline"</span>)}}).prototype=<span class="code-keyword">new</span> H;<span class="code-keyword">var</span> ut,dt,lt,ct,ht=tt,ft=[<span class="code-string">"audioobjecttype"</span>,<span class="code-string">"channelcount"</span>,<span class="code-string">"samplerate"</span>,<span class="code-string">"samplingfrequencyindex"</span>,<span class="code-string">"samplesize"</span>],pt=[<span class="code-string">"width"</span>,<span class="code-string">"height"</span>,<span class="code-string">"profileIdc"</span>,<span class="code-string">"levelIdc"</span>,<span class="code-string">"profileCompatibility"</span>,<span class="code-string">"sarRatio"</span>],mt=it.H264Stream,gt=ot.isLikelyAacData,yt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.stream=e,<span class="code-keyword">this</span>.trigger(<span class="code-string">"log"</span>,t)},vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-built_in">Object</span>.keys(t),n=<span class="code-number">0</span>;n&lt;i.length;n++){<span class="code-keyword">var</span> r=i[n];<span class="code-string">"headOfPipeline"</span>!==r&amp;&amp;t[r].on&amp;&amp;t[r].on(<span class="code-string">"log"</span>,yt.bind(e,r))}},_t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">if</span>(e.length!==t.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">if</span>(e[i]!==t[i])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">return</span>!<span class="code-number">0</span>},Tt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">start</span>:{<span class="code-attr">dts</span>:e,<span class="code-attr">pts</span>:e+(i-t)},<span class="code-attr">end</span>:{<span class="code-attr">dts</span>:e+(n-t),<span class="code-attr">pts</span>:e+(r-i)},<span class="code-attr">prependedContentDuration</span>:a,<span class="code-attr">baseMediaDecodeTime</span>:e}};dt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=[],r=<span class="code-number">0</span>,a=<span class="code-number">0</span>,s=<span class="code-number">1</span>/<span class="code-number">0</span>;i=(t=t||{}).firstSequenceNumber||<span class="code-number">0</span>,dt.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{me(e,t),e&amp;&amp;ft.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{e[i]=t[i]})),n.push(t)},<span class="code-keyword">this</span>.setEarliestDts=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r=e},<span class="code-keyword">this</span>.setVideoBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s=e},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{a=e},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> o,u,d,l,c,h,f;<span class="code-number">0</span>!==n.length?(o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> t.minSegmentDts&gt;=i?e:(t.minSegmentDts=<span class="code-number">1</span>/<span class="code-number">0</span>,e.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.dts&gt;=i&amp;&amp;(t.minSegmentDts=<span class="code-built_in">Math</span>.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!<span class="code-number">0</span>)})))}(n,e,r),e.baseMediaDecodeTime=pe(e,t.keepOriginalTimestamps),f=he(e,o,a,s),e.samples=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[];<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i=e[t],n.push({<span class="code-attr">size</span>:i.data.byteLength,<span class="code-attr">duration</span>:<span class="code-number">1024</span>});<span class="code-keyword">return</span> n}(o),d=Z(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-number">0</span>,r=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-number">0</span>;<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i+=e[t].data.byteLength;<span class="code-keyword">return</span> i}(e));<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;<span class="code-keyword">return</span> r}(o)),n=[],u=ee(i,[e]),l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u.byteLength+d.byteLength),i++,l.set(u),l.set(d,u.byteLength),fe(e),c=<span class="code-built_in">Math</span>.ceil(<span class="code-number">9216e4</span>/e.samplerate),o.length&amp;&amp;(h=o.length*c,<span class="code-keyword">this</span>.trigger(<span class="code-string">"segmentTimingInfo"</span>,Tt(de(e.baseMediaDecodeTime,e.samplerate),o[<span class="code-number">0</span>].dts,o[<span class="code-number">0</span>].pts,o[<span class="code-number">0</span>].dts+h,o[<span class="code-number">0</span>].pts+h,f||<span class="code-number">0</span>)),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:o[<span class="code-number">0</span>].pts,<span class="code-attr">end</span>:o[<span class="code-number">0</span>].pts+h})),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:e,<span class="code-attr">boxes</span>:l}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"AudioSegmentStream"</span>)):<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"AudioSegmentStream"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{fe(e),n=[],<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)}},dt.prototype=<span class="code-keyword">new</span> H,ut=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a=[],s=[];i=(t=t||{}).firstSequenceNumber||<span class="code-number">0</span>,ut.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">delete</span> e.minPTS,<span class="code-keyword">this</span>.gopCache_=[],<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{me(e,t),<span class="code-string">"seq_parameter_set_rbsp"</span>!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],pt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e[t]=n[t]}),<span class="code-keyword">this</span>)),<span class="code-string">"pic_parameter_set_rbsp"</span>!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r,o,u,d,l,c,h,f=<span class="code-number">0</span>;a.length&amp;&amp;<span class="code-string">"access_unit_delimiter_rbsp"</span>!==a[<span class="code-number">0</span>].nalUnitType;)a.shift();<span class="code-keyword">if</span>(<span class="code-number">0</span>===a.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>);<span class="code-keyword">if</span>(n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=[];<span class="code-keyword">for</span>(r.byteLength=<span class="code-number">0</span>,r.nalCount=<span class="code-number">0</span>,r.duration=<span class="code-number">0</span>,n.byteLength=<span class="code-number">0</span>,t=<span class="code-number">0</span>;t&lt;e.length;t++)<span class="code-string">"access_unit_delimiter_rbsp"</span>===(i=e[t]).nalUnitType?(n.length&amp;&amp;(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):(<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===i.nalUnitType&amp;&amp;(n.keyFrame=!<span class="code-number">0</span>),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));<span class="code-keyword">return</span> r.length&amp;&amp;(!n.duration||n.duration&lt;=<span class="code-number">0</span>)&amp;&amp;(n.duration=r[r.length<span class="code-number">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r}(a),(o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=[],r=[];<span class="code-keyword">for</span>(n.byteLength=<span class="code-number">0</span>,n.nalCount=<span class="code-number">0</span>,n.duration=<span class="code-number">0</span>,n.pts=e[<span class="code-number">0</span>].pts,n.dts=e[<span class="code-number">0</span>].dts,r.byteLength=<span class="code-number">0</span>,r.nalCount=<span class="code-number">0</span>,r.duration=<span class="code-number">0</span>,r.pts=e[<span class="code-number">0</span>].pts,r.dts=e[<span class="code-number">0</span>].dts,t=<span class="code-number">0</span>;t&lt;e.length;t++)(i=e[t]).keyFrame?(n.length&amp;&amp;(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));<span class="code-keyword">return</span> r.length&amp;&amp;n.duration&lt;=<span class="code-number">0</span>&amp;&amp;(n.duration=r[r.length<span class="code-number">-1</span>].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r}(n))[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame||((r=<span class="code-keyword">this</span>.getGopForFusion_(a[<span class="code-number">0</span>],e))?(f=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>!e[<span class="code-number">0</span>][<span class="code-number">0</span>].keyFrame&amp;&amp;e.length&gt;<span class="code-number">1</span>&amp;&amp;(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[<span class="code-number">0</span>][<span class="code-number">0</span>].dts=t.dts,e[<span class="code-number">0</span>][<span class="code-number">0</span>].pts=t.pts,e[<span class="code-number">0</span>][<span class="code-number">0</span>].duration+=t.duration),e}(o)),s.length){<span class="code-keyword">var</span> p;<span class="code-keyword">if</span>(!(p=t.alignGopsAtEnd?<span class="code-keyword">this</span>.alignGopsAtEnd_(o):<span class="code-keyword">this</span>.alignGopsAtStart_(o)))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.gopCache_.unshift({<span class="code-attr">gop</span>:o.pop(),<span class="code-attr">pps</span>:e.pps,<span class="code-attr">sps</span>:e.sps}),<span class="code-keyword">this</span>.gopCache_.length=<span class="code-built_in">Math</span>.min(<span class="code-number">6</span>,<span class="code-keyword">this</span>.gopCache_.length),a=[],<span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>);fe(e),o=p}me(e,o),e.samples=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o=t||<span class="code-number">0</span>,u=[];<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">for</span>(a=e[i],n=<span class="code-number">0</span>;n&lt;a.length;n++)s=a[n],o+=(r=te(s,o)).size,u.push(r);<span class="code-keyword">return</span> u}(o),d=Z(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,s,o=<span class="code-number">0</span>,u=e.byteLength,d=e.nalCount,l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u+<span class="code-number">4</span>*d),c=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(l.buffer);<span class="code-keyword">for</span>(t=<span class="code-number">0</span>;t&lt;e.length;t++)<span class="code-keyword">for</span>(r=e[t],i=<span class="code-number">0</span>;i&lt;r.length;i++)<span class="code-keyword">for</span>(a=r[i],n=<span class="code-number">0</span>;n&lt;a.length;n++)s=a[n],c.setUint32(o,s.data.byteLength),o+=<span class="code-number">4</span>,l.set(s.data,o),o+=s.data.byteLength;<span class="code-keyword">return</span> l}(o)),e.baseMediaDecodeTime=pe(e,t.keepOriginalTimestamps),<span class="code-keyword">this</span>.trigger(<span class="code-string">"processedGopsInfo"</span>,o.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">pts</span>:e.pts,<span class="code-attr">dts</span>:e.dts,<span class="code-attr">byteLength</span>:e.byteLength}}))),c=o[<span class="code-number">0</span>],h=o[o.length<span class="code-number">-1</span>],<span class="code-keyword">this</span>.trigger(<span class="code-string">"segmentTimingInfo"</span>,Tt(e.baseMediaDecodeTime,c.dts,c.pts,h.dts+h.duration,h.pts+h.duration,f)),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timingInfo"</span>,{<span class="code-attr">start</span>:o[<span class="code-number">0</span>].pts,<span class="code-attr">end</span>:o[o.length<span class="code-number">-1</span>].pts+o[o.length<span class="code-number">-1</span>].duration}),<span class="code-keyword">this</span>.gopCache_.unshift({<span class="code-attr">gop</span>:o.pop(),<span class="code-attr">pps</span>:e.pps,<span class="code-attr">sps</span>:e.sps}),<span class="code-keyword">this</span>.gopCache_.length=<span class="code-built_in">Math</span>.min(<span class="code-number">6</span>,<span class="code-keyword">this</span>.gopCache_.length),a=[],<span class="code-keyword">this</span>.trigger(<span class="code-string">"baseMediaDecodeTime"</span>,e.baseMediaDecodeTime),<span class="code-keyword">this</span>.trigger(<span class="code-string">"timelineStartInfo"</span>,e.timelineStartInfo),u=ee(i,[e]),l=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(u.byteLength+d.byteLength),i++,l.set(u),l.set(d,u.byteLength),<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,{<span class="code-attr">track</span>:e,<span class="code-attr">boxes</span>:l}),<span class="code-keyword">this</span>.resetStream_(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>,<span class="code-string">"VideoSegmentStream"</span>)},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.resetStream_(),a=[],<span class="code-keyword">this</span>.gopCache_.length=<span class="code-number">0</span>,s.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"reset"</span>)},<span class="code-keyword">this</span>.resetStream_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{fe(e),n=<span class="code-keyword">void</span> <span class="code-number">0</span>,r=<span class="code-keyword">void</span> <span class="code-number">0</span>},<span class="code-keyword">this</span>.getGopForFusion_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i,n,r,a,s,o=<span class="code-number">1</span>/<span class="code-number">0</span>;<span class="code-keyword">for</span>(s=<span class="code-number">0</span>;s&lt;<span class="code-keyword">this</span>.gopCache_.length;s++)r=(a=<span class="code-keyword">this</span>.gopCache_[s]).gop,e.pps&amp;&amp;_t(e.pps[<span class="code-number">0</span>],a.pps[<span class="code-number">0</span>])&amp;&amp;e.sps&amp;&amp;_t(e.sps[<span class="code-number">0</span>],a.sps[<span class="code-number">0</span>])&amp;&amp;(r.dts&lt;e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)&gt;=<span class="code-number">-1e4</span>&amp;&amp;i&lt;=<span class="code-number">45e3</span>&amp;&amp;(!n||o&gt;i)&amp;&amp;(n=a,o=i));<span class="code-keyword">return</span> n?n.gop:<span class="code-literal">null</span>},<span class="code-keyword">this</span>.alignGopsAtStart_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u,d;<span class="code-keyword">for</span>(a=e.byteLength,o=e.nalCount,u=e.duration,t=i=<span class="code-number">0</span>;t&lt;s.length&amp;&amp;i&lt;e.length&amp;&amp;(n=s[t],r=e[i],n.pts!==r.pts);)r.pts&gt;n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,u-=r.duration);<span class="code-keyword">return</span> <span class="code-number">0</span>===i?e:i===e.length?<span class="code-literal">null</span>:((d=e.slice(i)).byteLength=a,d.duration=u,d.nalCount=o,d.pts=d[<span class="code-number">0</span>].pts,d.dts=d[<span class="code-number">0</span>].dts,d)},<span class="code-keyword">this</span>.alignGopsAtEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r,a,o,u;<span class="code-keyword">for</span>(t=s.length<span class="code-number">-1</span>,i=e.length<span class="code-number">-1</span>,a=<span class="code-literal">null</span>,o=!<span class="code-number">1</span>;t&gt;=<span class="code-number">0</span>&amp;&amp;i&gt;=<span class="code-number">0</span>;){<span class="code-keyword">if</span>(n=s[t],r=e[i],n.pts===r.pts){o=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}n.pts&gt;r.pts?t--:(t===s.length<span class="code-number">-1</span>&amp;&amp;(a=i),i--)}<span class="code-keyword">if</span>(!o&amp;&amp;<span class="code-literal">null</span>===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===(u=o?i:a))<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> d=e.slice(u),l=d.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{<span class="code-attr">byteLength</span>:<span class="code-number">0</span>,<span class="code-attr">duration</span>:<span class="code-number">0</span>,<span class="code-attr">nalCount</span>:<span class="code-number">0</span>});<span class="code-keyword">return</span> d.byteLength=l.byteLength,d.duration=l.duration,d.nalCount=l.nalCount,d.pts=d[<span class="code-number">0</span>].pts,d.dts=d[<span class="code-number">0</span>].dts,d},<span class="code-keyword">this</span>.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s=e}},ut.prototype=<span class="code-keyword">new</span> H,ct=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.numberOfTracks=<span class="code-number">0</span>,<span class="code-keyword">this</span>.metadataStream=t,<span class="code-keyword">void</span> <span class="code-number">0</span>!==(e=e||{}).remux?<span class="code-keyword">this</span>.remuxTracks=!!e.remux:<span class="code-keyword">this</span>.remuxTracks=!<span class="code-number">0</span>,<span class="code-string">"boolean"</span>==<span class="code-keyword">typeof</span> e.keepOriginalTimestamps?<span class="code-keyword">this</span>.keepOriginalTimestamps=e.keepOriginalTimestamps:<span class="code-keyword">this</span>.keepOriginalTimestamps=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.pendingTracks=[],<span class="code-keyword">this</span>.videoTrack=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.pendingBoxes=[],<span class="code-keyword">this</span>.pendingCaptions=[],<span class="code-keyword">this</span>.pendingMetadata=[],<span class="code-keyword">this</span>.pendingBytes=<span class="code-number">0</span>,<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>,ct.prototype.init.call(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.text?<span class="code-keyword">this</span>.pendingCaptions.push(e):e.frames?<span class="code-keyword">this</span>.pendingMetadata.push(e):(<span class="code-keyword">this</span>.pendingTracks.push(e.track),<span class="code-keyword">this</span>.pendingBytes+=e.boxes.byteLength,<span class="code-string">"video"</span>===e.track.type&amp;&amp;(<span class="code-keyword">this</span>.videoTrack=e.track,<span class="code-keyword">this</span>.pendingBoxes.push(e.boxes)),<span class="code-keyword">void</span>(<span class="code-string">"audio"</span>===e.track.type&amp;&amp;(<span class="code-keyword">this</span>.audioTrack=e.track,<span class="code-keyword">this</span>.pendingBoxes.unshift(e.boxes))))}},ct.prototype=<span class="code-keyword">new</span> H,ct.prototype.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,a,s,o,d,l,c=<span class="code-number">0</span>,h={<span class="code-attr">captions</span>:[],<span class="code-attr">captionStreams</span>:{},<span class="code-attr">metadata</span>:[],<span class="code-attr">info</span>:{}},f=<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingTracks.length&lt;<span class="code-keyword">this</span>.numberOfTracks){<span class="code-keyword">if</span>(<span class="code-string">"VideoSegmentStream"</span>!==e&amp;&amp;<span class="code-string">"AudioSegmentStream"</span>!==e)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.remuxTracks)<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===<span class="code-keyword">this</span>.pendingTracks.length)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.emittedTracks++,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.emittedTracks&gt;=<span class="code-keyword">this</span>.numberOfTracks&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>),<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>))}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoTrack?(f=<span class="code-keyword">this</span>.videoTrack.timelineStartInfo.pts,pt.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{h.info[e]=<span class="code-keyword">this</span>.videoTrack[e]}),<span class="code-keyword">this</span>)):<span class="code-keyword">this</span>.audioTrack&amp;&amp;(f=<span class="code-keyword">this</span>.audioTrack.timelineStartInfo.pts,ft.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{h.info[e]=<span class="code-keyword">this</span>.audioTrack[e]}),<span class="code-keyword">this</span>)),<span class="code-keyword">this</span>.videoTrack||<span class="code-keyword">this</span>.audioTrack){<span class="code-keyword">for</span>(<span class="code-number">1</span>===<span class="code-keyword">this</span>.pendingTracks.length?h.type=<span class="code-keyword">this</span>.pendingTracks[<span class="code-number">0</span>].type:h.type=<span class="code-string">"combined"</span>,<span class="code-keyword">this</span>.emittedTracks+=<span class="code-keyword">this</span>.pendingTracks.length,s=<span class="code-keyword">this</span>.pendingTracks,o=<span class="code-keyword">void</span> <span class="code-number">0</span>,d=<span class="code-keyword">void</span> <span class="code-number">0</span>,l=<span class="code-keyword">void</span> <span class="code-number">0</span>,d=r(),l=u(s),(o=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(d.byteLength+l.byteLength)).set(d),o.set(l,d.byteLength),n=o,h.initSegment=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n.byteLength),h.initSegment.set(n),h.data=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-keyword">this</span>.pendingBytes),a=<span class="code-number">0</span>;a&lt;<span class="code-keyword">this</span>.pendingBoxes.length;a++)h.data.set(<span class="code-keyword">this</span>.pendingBoxes[a],c),c+=<span class="code-keyword">this</span>.pendingBoxes[a].byteLength;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;<span class="code-keyword">this</span>.pendingCaptions.length;a++)(t=<span class="code-keyword">this</span>.pendingCaptions[a]).startTime=ce(t.startPts,f,<span class="code-keyword">this</span>.keepOriginalTimestamps),t.endTime=ce(t.endPts,f,<span class="code-keyword">this</span>.keepOriginalTimestamps),h.captionStreams[t.stream]=!<span class="code-number">0</span>,h.captions.push(t);<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;<span class="code-keyword">this</span>.pendingMetadata.length;a++)(i=<span class="code-keyword">this</span>.pendingMetadata[a]).cueTime=ce(i.pts,f,<span class="code-keyword">this</span>.keepOriginalTimestamps),h.metadata.push(i);<span class="code-keyword">for</span>(h.metadata.dispatchType=<span class="code-keyword">this</span>.metadataStream.dispatchType,<span class="code-keyword">this</span>.pendingTracks.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.videoTrack=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.pendingBoxes.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingCaptions.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingBytes=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pendingMetadata.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"data"</span>,h),a=<span class="code-number">0</span>;a&lt;h.captions.length;a++)t=h.captions[a],<span class="code-keyword">this</span>.trigger(<span class="code-string">"caption"</span>,t);<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;h.metadata.length;a++)i=h.metadata[a],<span class="code-keyword">this</span>.trigger(<span class="code-string">"id3Frame"</span>,i)}<span class="code-keyword">this</span>.emittedTracks&gt;=<span class="code-keyword">this</span>.numberOfTracks&amp;&amp;(<span class="code-keyword">this</span>.trigger(<span class="code-string">"done"</span>),<span class="code-keyword">this</span>.emittedTracks=<span class="code-number">0</span>)},ct.prototype.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.remuxTracks=e},(lt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n=<span class="code-keyword">this</span>,r=!<span class="code-number">0</span>;lt.prototype.init.call(<span class="code-keyword">this</span>),e=e||{},<span class="code-keyword">this</span>.baseMediaDecodeTime=e.baseMediaDecodeTime||<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxPipeline_={},<span class="code-keyword">this</span>.setupAacPipeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r={};<span class="code-keyword">this</span>.transmuxPipeline_=r,r.type=<span class="code-string">"aac"</span>,r.metadataStream=<span class="code-keyword">new</span> Qe.MetadataStream,r.aacStream=<span class="code-keyword">new</span> ht,r.audioTimestampRolloverStream=<span class="code-keyword">new</span> Qe.TimestampRolloverStream(<span class="code-string">"audio"</span>),r.timedMetadataTimestampRolloverStream=<span class="code-keyword">new</span> Qe.TimestampRolloverStream(<span class="code-string">"timed-metadata"</span>),r.adtsStream=<span class="code-keyword">new</span> Ze,r.coalesceStream=<span class="code-keyword">new</span> ct(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on(<span class="code-string">"timestamp"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a</span>)</span>{<span class="code-string">"timed-metadata"</span>!==a.type&amp;&amp;<span class="code-string">"audio"</span>!==a.type||r.audioSegmentStream||(i=i||{<span class="code-attr">timelineStartInfo</span>:{<span class="code-attr">baseMediaDecodeTime</span>:n.baseMediaDecodeTime},<span class="code-attr">codec</span>:<span class="code-string">"adts"</span>,<span class="code-attr">type</span>:<span class="code-string">"audio"</span>},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class="code-keyword">new</span> dt(i,e),r.audioSegmentStream.on(<span class="code-string">"log"</span>,n.getLogTrigger_(<span class="code-string">"audioSegmentStream"</span>)),r.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioTimingInfo"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!i,<span class="code-attr">hasVideo</span>:!!t}))})),r.coalesceStream.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),r.coalesceStream.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>)),vt(<span class="code-keyword">this</span>,r)},<span class="code-keyword">this</span>.setupTsPipeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r={};<span class="code-keyword">this</span>.transmuxPipeline_=r,r.type=<span class="code-string">"ts"</span>,r.metadataStream=<span class="code-keyword">new</span> Qe.MetadataStream,r.packetStream=<span class="code-keyword">new</span> Qe.TransportPacketStream,r.parseStream=<span class="code-keyword">new</span> Qe.TransportParseStream,r.elementaryStream=<span class="code-keyword">new</span> Qe.ElementaryStream,r.timestampRolloverStream=<span class="code-keyword">new</span> Qe.TimestampRolloverStream,r.adtsStream=<span class="code-keyword">new</span> Ze,r.h264Stream=<span class="code-keyword">new</span> mt,r.captionStream=<span class="code-keyword">new</span> Qe.CaptionStream(e),r.coalesceStream=<span class="code-keyword">new</span> ct(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">a</span>)</span>{<span class="code-keyword">var</span> s;<span class="code-keyword">if</span>(<span class="code-string">"metadata"</span>===a.type){<span class="code-keyword">for</span>(s=a.tracks.length;s--;)t||<span class="code-string">"video"</span>!==a.tracks[s].type?i||<span class="code-string">"audio"</span>!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&amp;&amp;!r.videoSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=<span class="code-keyword">new</span> ut(t,e),r.videoSegmentStream.on(<span class="code-string">"log"</span>,n.getLogTrigger_(<span class="code-string">"videoSegmentStream"</span>)),r.videoSegmentStream.on(<span class="code-string">"timelineStartInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{i&amp;&amp;!e.keepOriginalTimestamps&amp;&amp;(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on(<span class="code-string">"processedGopsInfo"</span>,n.trigger.bind(n,<span class="code-string">"gopInfo"</span>)),r.videoSegmentStream.on(<span class="code-string">"segmentTimingInfo"</span>,n.trigger.bind(n,<span class="code-string">"videoSegmentTimingInfo"</span>)),r.videoSegmentStream.on(<span class="code-string">"baseMediaDecodeTime"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"videoTimingInfo"</span>)),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&amp;&amp;!r.audioSegmentStream&amp;&amp;(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=<span class="code-keyword">new</span> dt(i,e),r.audioSegmentStream.on(<span class="code-string">"log"</span>,n.getLogTrigger_(<span class="code-string">"audioSegmentStream"</span>)),r.audioSegmentStream.on(<span class="code-string">"timingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioTimingInfo"</span>)),r.audioSegmentStream.on(<span class="code-string">"segmentTimingInfo"</span>,n.trigger.bind(n,<span class="code-string">"audioSegmentTimingInfo"</span>)),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger(<span class="code-string">"trackinfo"</span>,{<span class="code-attr">hasAudio</span>:!!i,<span class="code-attr">hasVideo</span>:!!t})}})),r.coalesceStream.on(<span class="code-string">"data"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"data"</span>)),r.coalesceStream.on(<span class="code-string">"id3Frame"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dispatchType=r.metadataStream.dispatchType,n.trigger(<span class="code-string">"id3Frame"</span>,e)})),r.coalesceStream.on(<span class="code-string">"caption"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"caption"</span>)),r.coalesceStream.on(<span class="code-string">"done"</span>,<span class="code-keyword">this</span>.trigger.bind(<span class="code-keyword">this</span>,<span class="code-string">"done"</span>)),vt(<span class="code-keyword">this</span>,r)},<span class="code-keyword">this</span>.setBaseMediaDecodeTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.transmuxPipeline_;e.keepOriginalTimestamps||(<span class="code-keyword">this</span>.baseMediaDecodeTime=n),i&amp;&amp;(i.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,i.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,fe(i),r.audioTimestampRolloverStream&amp;&amp;r.audioTimestampRolloverStream.discontinuity()),t&amp;&amp;(r.videoSegmentStream&amp;&amp;(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=<span class="code-keyword">void</span> <span class="code-number">0</span>,t.timelineStartInfo.pts=<span class="code-keyword">void</span> <span class="code-number">0</span>,fe(t),r.captionStream.reset()),r.timestampRolloverStream&amp;&amp;r.timestampRolloverStream.discontinuity()},<span class="code-keyword">this</span>.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},<span class="code-keyword">this</span>.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.transmuxPipeline_;e.remux=t,i&amp;&amp;i.coalesceStream&amp;&amp;i.coalesceStream.setRemux(t)},<span class="code-keyword">this</span>.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.videoSegmentStream&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},<span class="code-keyword">this</span>.getLogTrigger_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{i.stream=e,t.trigger(<span class="code-string">"log"</span>,i)}},<span class="code-keyword">this</span>.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(r){<span class="code-keyword">var</span> t=gt(e);t&amp;&amp;<span class="code-string">"aac"</span>!==<span class="code-keyword">this</span>.transmuxPipeline_.type?<span class="code-keyword">this</span>.setupAacPipeline():t||<span class="code-string">"ts"</span>===<span class="code-keyword">this</span>.transmuxPipeline_.type||<span class="code-keyword">this</span>.setupTsPipeline(),r=!<span class="code-number">1</span>}<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.push(e)},<span class="code-keyword">this</span>.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.flush()},<span class="code-keyword">this</span>.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.endTimeline()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.headOfPipeline.reset()},<span class="code-keyword">this</span>.resetCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxPipeline_.captionStream&amp;&amp;<span class="code-keyword">this</span>.transmuxPipeline_.captionStream.reset()}}).prototype=<span class="code-keyword">new</span> H;<span class="code-keyword">var</span> bt,St,wt,It={<span class="code-attr">Transmuxer</span>:lt,<span class="code-attr">VideoSegmentStream</span>:ut,<span class="code-attr">AudioSegmentStream</span>:dt,<span class="code-attr">AUDIO_PROPERTIES</span>:ft,<span class="code-attr">VIDEO_PROPERTIES</span>:pt,<span class="code-attr">generateSegmentTimingInfo</span>:Tt},Et=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&gt;&gt;&gt;<span class="code-number">0</span>},At=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-string">""</span>;<span class="code-keyword">return</span> t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">0</span>]),t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">1</span>]),(t+=<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">2</span>]))+<span class="code-built_in">String</span>.fromCharCode(e[<span class="code-number">3</span>])},Lt=Et,Pt=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o,u=[];<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;t.byteLength;)r=Lt(t[n]&lt;&lt;<span class="code-number">24</span>|t[n+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|t[n+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|t[n+<span class="code-number">3</span>]),a=At(t.subarray(n+<span class="code-number">4</span>,n+<span class="code-number">8</span>)),s=r&gt;<span class="code-number">1</span>?n+r:t.byteLength,a===i[<span class="code-number">0</span>]&amp;&amp;(<span class="code-number">1</span>===i.length?u.push(t.subarray(n+<span class="code-number">8</span>,s)):(o=e(t.subarray(n+<span class="code-number">8</span>,s),i.slice(<span class="code-number">1</span>))).length&amp;&amp;(u=u.concat(o))),n=s;<span class="code-keyword">return</span> u},kt=Et,xt=W.getUint64,Ot=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">isLeading</span>:(<span class="code-number">12</span>&amp;e[<span class="code-number">0</span>])&gt;&gt;&gt;<span class="code-number">2</span>,<span class="code-attr">dependsOn</span>:<span class="code-number">3</span>&amp;e[<span class="code-number">0</span>],<span class="code-attr">isDependedOn</span>:(<span class="code-number">192</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">6</span>,<span class="code-attr">hasRedundancy</span>:(<span class="code-number">48</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">4</span>,<span class="code-attr">paddingValue</span>:(<span class="code-number">14</span>&amp;e[<span class="code-number">1</span>])&gt;&gt;&gt;<span class="code-number">1</span>,<span class="code-attr">isNonSyncSample</span>:<span class="code-number">1</span>&amp;e[<span class="code-number">1</span>],<span class="code-attr">degradationPriority</span>:e[<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">3</span>]}},Dt=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> globalThis?globalThis:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> global?global:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> self?self:{},Ct=<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>?<span class="code-built_in">window</span>:<span class="code-keyword">void</span> <span class="code-number">0</span>!==Dt?Dt:<span class="code-string">"undefined"</span>!=<span class="code-keyword">typeof</span> self?self:{},Ut=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i,n=e.byteLength,r=[],a=<span class="code-number">1</span>;a&lt;n<span class="code-number">-2</span>;)<span class="code-number">0</span>===e[a]&amp;&amp;<span class="code-number">0</span>===e[a+<span class="code-number">1</span>]&amp;&amp;<span class="code-number">3</span>===e[a+<span class="code-number">2</span>]?(r.push(a+<span class="code-number">2</span>),a+=<span class="code-number">2</span>):a++;<span class="code-keyword">if</span>(<span class="code-number">0</span>===r.length)<span class="code-keyword">return</span> e;t=n-r.length,i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t);<span class="code-keyword">var</span> s=<span class="code-number">0</span>;<span class="code-keyword">for</span>(a=<span class="code-number">0</span>;a&lt;t;s++,a++)s===r[<span class="code-number">0</span>]&amp;&amp;(s++,r.shift()),i[a]=e[s];<span class="code-keyword">return</span> i},Rt=Le.CaptionStream,Mt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e,n=<span class="code-number">0</span>;n&lt;t.length;n++){<span class="code-keyword">var</span> r=t[n];<span class="code-keyword">if</span>(i&lt;r.size)<span class="code-keyword">return</span> r;i-=r.size}<span class="code-keyword">return</span> <span class="code-literal">null</span>},Bt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Pt(e,[<span class="code-string">"moof"</span>,<span class="code-string">"traf"</span>]),n=Pt(e,[<span class="code-string">"mdat"</span>]),r={},a=[];<span class="code-keyword">return</span> n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> n=i[t];a.push({<span class="code-attr">mdat</span>:e,<span class="code-attr">traf</span>:n})})),a.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i,n,a=e.mdat,s=e.traf,o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),n={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">trackId</span>:i.getUint32(<span class="code-number">4</span>)},r=<span class="code-number">1</span>&amp;n.flags[<span class="code-number">2</span>],a=<span class="code-number">2</span>&amp;n.flags[<span class="code-number">2</span>],s=<span class="code-number">8</span>&amp;n.flags[<span class="code-number">2</span>],o=<span class="code-number">16</span>&amp;n.flags[<span class="code-number">2</span>],u=<span class="code-number">32</span>&amp;n.flags[<span class="code-number">2</span>],d=<span class="code-number">65536</span>&amp;n.flags[<span class="code-number">0</span>],l=<span class="code-number">131072</span>&amp;n.flags[<span class="code-number">0</span>];<span class="code-keyword">return</span> t=<span class="code-number">8</span>,r&amp;&amp;(t+=<span class="code-number">4</span>,n.baseDataOffset=i.getUint32(<span class="code-number">12</span>),t+=<span class="code-number">4</span>),a&amp;&amp;(n.sampleDescriptionIndex=i.getUint32(t),t+=<span class="code-number">4</span>),s&amp;&amp;(n.defaultSampleDuration=i.getUint32(t),t+=<span class="code-number">4</span>),o&amp;&amp;(n.defaultSampleSize=i.getUint32(t),t+=<span class="code-number">4</span>),u&amp;&amp;(n.defaultSampleFlags=i.getUint32(t)),d&amp;&amp;(n.durationIsEmpty=!<span class="code-number">0</span>),!r&amp;&amp;l&amp;&amp;(n.baseDataOffsetIsMoof=!<span class="code-number">0</span>),n}(Pt(s,[<span class="code-string">"tfhd"</span>])[<span class="code-number">0</span>]),u=o.trackId,d=Pt(s,[<span class="code-string">"tfdt"</span>]),l=d.length&gt;<span class="code-number">0</span>?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>))};<span class="code-keyword">return</span> <span class="code-number">1</span>===t.version?t.baseMediaDecodeTime=xt(e.subarray(<span class="code-number">4</span>)):t.baseMediaDecodeTime=kt(e[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|e[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|e[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|e[<span class="code-number">7</span>]),t}(d[<span class="code-number">0</span>]).baseMediaDecodeTime:<span class="code-number">0</span>,c=Pt(s,[<span class="code-string">"trun"</span>]);t===u&amp;&amp;c.length&gt;<span class="code-number">0</span>&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t,r=i.defaultSampleDuration||<span class="code-number">0</span>,a=i.defaultSampleSize||<span class="code-number">0</span>,s=i.trackId,o=[];<span class="code-keyword">return</span> e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i={<span class="code-attr">version</span>:e[<span class="code-number">0</span>],<span class="code-attr">flags</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.subarray(<span class="code-number">1</span>,<span class="code-number">4</span>)),<span class="code-attr">samples</span>:[]},n=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),r=<span class="code-number">1</span>&amp;i.flags[<span class="code-number">2</span>],a=<span class="code-number">4</span>&amp;i.flags[<span class="code-number">2</span>],s=<span class="code-number">1</span>&amp;i.flags[<span class="code-number">1</span>],o=<span class="code-number">2</span>&amp;i.flags[<span class="code-number">1</span>],u=<span class="code-number">4</span>&amp;i.flags[<span class="code-number">1</span>],d=<span class="code-number">8</span>&amp;i.flags[<span class="code-number">1</span>],l=n.getUint32(<span class="code-number">4</span>),c=<span class="code-number">8</span>;<span class="code-keyword">for</span>(r&amp;&amp;(i.dataOffset=n.getInt32(c),c+=<span class="code-number">4</span>),a&amp;&amp;l&amp;&amp;(t={<span class="code-attr">flags</span>:Ot(e.subarray(c,c+<span class="code-number">4</span>))},c+=<span class="code-number">4</span>,s&amp;&amp;(t.duration=n.getUint32(c),c+=<span class="code-number">4</span>),o&amp;&amp;(t.size=n.getUint32(c),c+=<span class="code-number">4</span>),d&amp;&amp;(<span class="code-number">1</span>===i.version?t.compositionTimeOffset=n.getInt32(c):t.compositionTimeOffset=n.getUint32(c),c+=<span class="code-number">4</span>),i.samples.push(t),l--);l--;)t={},s&amp;&amp;(t.duration=n.getUint32(c),c+=<span class="code-number">4</span>),o&amp;&amp;(t.size=n.getUint32(c),c+=<span class="code-number">4</span>),u&amp;&amp;(t.flags=Ot(e.subarray(c,c+<span class="code-number">4</span>)),c+=<span class="code-number">4</span>),d&amp;&amp;(<span class="code-number">1</span>===i.version?t.compositionTimeOffset=n.getInt32(c):t.compositionTimeOffset=n.getUint32(c),c+=<span class="code-number">4</span>),i.samples.push(t);<span class="code-keyword">return</span> i}(e).samples;t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e.duration&amp;&amp;(e.duration=r),<span class="code-keyword">void</span> <span class="code-number">0</span>===e.size&amp;&amp;(e.size=a),e.trackId=s,e.dts=n,<span class="code-keyword">void</span> <span class="code-number">0</span>===e.compositionTimeOffset&amp;&amp;(e.compositionTimeOffset=<span class="code-number">0</span>),<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> n?(e.pts=n+Ct.BigInt(e.compositionTimeOffset),n+=Ct.BigInt(e.duration)):(e.pts=n+e.compositionTimeOffset,n+=e.duration)})),o=o.concat(t)})),o}(c,l,o),n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(e.buffer,e.byteOffset,e.byteLength),u={<span class="code-attr">logs</span>:[],<span class="code-attr">seiNals</span>:[]};<span class="code-keyword">for</span>(r=<span class="code-number">0</span>;r+<span class="code-number">4</span>&lt;e.length;r+=a)<span class="code-keyword">if</span>(a=o.getUint32(r),r+=<span class="code-number">4</span>,!(a&lt;=<span class="code-number">0</span>))<span class="code-keyword">switch</span>(<span class="code-number">31</span>&amp;e[r]){<span class="code-keyword">case</span> <span class="code-number">6</span>:<span class="code-keyword">var</span> d=e.subarray(r+<span class="code-number">1</span>,r+<span class="code-number">1</span>+a),l=Mt(r,t);<span class="code-keyword">if</span>(n={<span class="code-attr">nalUnitType</span>:<span class="code-string">"sei_rbsp"</span>,<span class="code-attr">size</span>:a,<span class="code-attr">data</span>:d,<span class="code-attr">escapedRBSP</span>:Ut(d),<span class="code-attr">trackId</span>:i},l)n.pts=l.pts,n.dts=l.dts,s=l;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(!s){u.logs.push({<span class="code-attr">level</span>:<span class="code-string">"warn"</span>,<span class="code-attr">message</span>:<span class="code-string">"We've encountered a nal unit without data at "</span>+r+<span class="code-string">" for trackId "</span>+i+<span class="code-string">". See mux.js#223."</span>});<span class="code-keyword">break</span>}n.pts=s.pts,n.dts=s.dts}u.seiNals.push(n)}<span class="code-keyword">return</span> u}(a,i,u),r[u]||(r[u]={<span class="code-attr">seiNals</span>:[],<span class="code-attr">logs</span>:[]}),r[u].seiNals=r[u].seiNals.concat(n.seiNals),r[u].logs=r[u].logs.concat(n.logs))})),r},Nt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s=!<span class="code-number">1</span>;<span class="code-keyword">this</span>.isInitialized=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> s},<span class="code-keyword">this</span>.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e=<span class="code-keyword">new</span> Rt,s=!<span class="code-number">0</span>,a=!!t&amp;&amp;t.isPartial,e.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!<span class="code-number">0</span>})),e.on(<span class="code-string">"log"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r.logs.push(e)}))},<span class="code-keyword">this</span>.isNewInit=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>!(e&amp;&amp;<span class="code-number">0</span>===e.length||t&amp;&amp;<span class="code-string">"object"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;<span class="code-number">0</span>===<span class="code-built_in">Object</span>.keys(t).length||i===e[<span class="code-number">0</span>]&amp;&amp;n===t[i])},<span class="code-keyword">this</span>.parse=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,a,s</span>)</span>{<span class="code-keyword">var</span> o;<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(!a||!s)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.isNewInit(a,s))i=a[<span class="code-number">0</span>],n=s[i];<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-literal">null</span>===i||!n)<span class="code-keyword">return</span> t.push(e),<span class="code-literal">null</span>;<span class="code-keyword">for</span>(;t.length&gt;<span class="code-number">0</span>;){<span class="code-keyword">var</span> u=t.shift();<span class="code-keyword">this</span>.parse(u,a,s)}<span class="code-keyword">return</span> o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-literal">null</span>===t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n=Bt(e,t)[t]||{};<span class="code-keyword">return</span>{<span class="code-attr">seiNals</span>:n.seiNals,<span class="code-attr">logs</span>:n.logs,<span class="code-attr">timescale</span>:i}}(e,i,n),o&amp;&amp;o.logs&amp;&amp;(r.logs=r.logs.concat(o.logs)),<span class="code-literal">null</span>!==o&amp;&amp;o.seiNals?(<span class="code-keyword">this</span>.pushNals(o.seiNals),<span class="code-keyword">this</span>.flushStream(),r):r.logs.length?{<span class="code-attr">logs</span>:r.logs,<span class="code-attr">captions</span>:[],<span class="code-attr">captionStreams</span>:[]}:<span class="code-literal">null</span>},<span class="code-keyword">this</span>.pushNals=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized()||!t||<span class="code-number">0</span>===t.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}))},<span class="code-keyword">this</span>.flushStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;a?e.partialFlush():e.flush()},<span class="code-keyword">this</span>.clearParsedCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r.captions=[],r.captionStreams={},r.logs=[]},<span class="code-keyword">this</span>.resetCaptionStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.isInitialized())<span class="code-keyword">return</span> <span class="code-literal">null</span>;e.reset()},<span class="code-keyword">this</span>.clearAllCaptions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.clearParsedCaptions(),<span class="code-keyword">this</span>.resetCaptionStream()},<span class="code-keyword">this</span>.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t=[],i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>,r?<span class="code-keyword">this</span>.clearParsedCaptions():r={<span class="code-attr">captions</span>:[],<span class="code-attr">captionStreams</span>:{},<span class="code-attr">logs</span>:[]},<span class="code-keyword">this</span>.resetCaptionStream()},<span class="code-keyword">this</span>.reset()},Ft=Et,qt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>(<span class="code-string">"00"</span>+e.toString(<span class="code-number">16</span>)).slice(<span class="code-number">-2</span>)},Ht=W.getUint64;bt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Pt(t,[<span class="code-string">"moof"</span>,<span class="code-string">"traf"</span>]).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a=Pt(i,[<span class="code-string">"tfhd"</span>])[<span class="code-number">0</span>],s=Ft(a[<span class="code-number">4</span>]&lt;&lt;<span class="code-number">24</span>|a[<span class="code-number">5</span>]&lt;&lt;<span class="code-number">16</span>|a[<span class="code-number">6</span>]&lt;&lt;<span class="code-number">8</span>|a[<span class="code-number">7</span>]),o=e[s]||<span class="code-number">9e4</span>,u=Pt(i,[<span class="code-string">"tfdt"</span>])[<span class="code-number">0</span>],d=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(u.buffer,u.byteOffset,u.byteLength);<span class="code-keyword">return</span><span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span>(n=<span class="code-number">1</span>===u[<span class="code-number">0</span>]?Ht(u.subarray(<span class="code-number">4</span>,<span class="code-number">12</span>)):d.getUint32(<span class="code-number">4</span>))?r=n/Ct.BigInt(o):<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> n||<span class="code-built_in">isNaN</span>(n)||(r=n/o),r&lt;<span class="code-built_in">Number</span>.MAX_SAFE_INTEGER&amp;&amp;(r=<span class="code-built_in">Number</span>(r)),r&lt;t&amp;&amp;(t=r),t}),<span class="code-number">1</span>/<span class="code-number">0</span>);<span class="code-keyword">return</span><span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> i||<span class="code-built_in">isFinite</span>(i)?i:<span class="code-number">0</span>},wt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>===e[<span class="code-number">0</span>]?<span class="code-number">12</span>:<span class="code-number">20</span>;<span class="code-keyword">return</span> Ft(e[t]&lt;&lt;<span class="code-number">24</span>|e[t+<span class="code-number">1</span>]&lt;&lt;<span class="code-number">16</span>|e[t+<span class="code-number">2</span>]&lt;&lt;<span class="code-number">8</span>|e[t+<span class="code-number">3</span>])},St=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=Pt(e,[<span class="code-string">"moov"</span>,<span class="code-string">"trak"</span>]),i=[];<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,n,r={},a=Pt(e,[<span class="code-string">"tkhd"</span>])[<span class="code-number">0</span>];a&amp;&amp;(n=(t=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(a.buffer,a.byteOffset,a.byteLength)).getUint8(<span class="code-number">0</span>),r.id=<span class="code-number">0</span>===n?t.getUint32(<span class="code-number">12</span>):t.getUint32(<span class="code-number">20</span>));<span class="code-keyword">var</span> s=Pt(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"hdlr"</span>])[<span class="code-number">0</span>];<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=At(s.subarray(<span class="code-number">8</span>,<span class="code-number">12</span>));r.type=<span class="code-string">"vide"</span>===o?<span class="code-string">"video"</span>:<span class="code-string">"soun"</span>===o?<span class="code-string">"audio"</span>:o}<span class="code-keyword">var</span> u=Pt(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"minf"</span>,<span class="code-string">"stbl"</span>,<span class="code-string">"stsd"</span>])[<span class="code-number">0</span>];<span class="code-keyword">if</span>(u){<span class="code-keyword">var</span> d=u.subarray(<span class="code-number">8</span>);r.codec=At(d.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>));<span class="code-keyword">var</span> l,c=Pt(d,[r.codec])[<span class="code-number">0</span>];c&amp;&amp;(<span class="code-regexp">/^[asm]vc[1-9]$/i</span>.test(r.codec)?(l=c.subarray(<span class="code-number">78</span>),<span class="code-string">"avcC"</span>===At(l.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>))&amp;&amp;l.length&gt;<span class="code-number">11</span>?(r.codec+=<span class="code-string">"."</span>,r.codec+=qt(l[<span class="code-number">9</span>]),r.codec+=qt(l[<span class="code-number">10</span>]),r.codec+=qt(l[<span class="code-number">11</span>])):r.codec=<span class="code-string">"avc1.4d400d"</span>):<span class="code-regexp">/^mp4[a,v]$/i</span>.test(r.codec)?(l=c.subarray(<span class="code-number">28</span>),<span class="code-string">"esds"</span>===At(l.subarray(<span class="code-number">4</span>,<span class="code-number">8</span>))&amp;&amp;l.length&gt;<span class="code-number">20</span>&amp;&amp;<span class="code-number">0</span>!==l[<span class="code-number">19</span>]?(r.codec+=<span class="code-string">"."</span>+qt(l[<span class="code-number">19</span>]),r.codec+=<span class="code-string">"."</span>+qt(l[<span class="code-number">20</span>]&gt;&gt;&gt;<span class="code-number">2</span>&amp;<span class="code-number">63</span>).replace(<span class="code-regexp">/^0/</span>,<span class="code-string">""</span>)):r.codec=<span class="code-string">"mp4a.40.2"</span>):r.codec=r.codec.toLowerCase())}<span class="code-keyword">var</span> h=Pt(e,[<span class="code-string">"mdia"</span>,<span class="code-string">"mdhd"</span>])[<span class="code-number">0</span>];h&amp;&amp;(r.timescale=wt(h)),i.push(r)})),i};<span class="code-keyword">var</span> Gt=bt,Wt=St,Vt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">31</span>&amp;e[<span class="code-number">1</span>];<span class="code-keyword">return</span>(t&lt;&lt;=<span class="code-number">8</span>)|e[<span class="code-number">2</span>]},jt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!!(<span class="code-number">64</span>&amp;e[<span class="code-number">1</span>])},Xt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>;<span class="code-keyword">return</span>(<span class="code-number">48</span>&amp;e[<span class="code-number">3</span>])&gt;&gt;&gt;<span class="code-number">4</span>&gt;<span class="code-number">1</span>&amp;&amp;(t+=e[<span class="code-number">4</span>]+<span class="code-number">1</span>),t},zt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">switch</span>(e){<span class="code-keyword">case</span> <span class="code-number">5</span>:<span class="code-keyword">return</span><span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>;<span class="code-keyword">case</span> <span class="code-number">6</span>:<span class="code-keyword">return</span><span class="code-string">"sei_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">7</span>:<span class="code-keyword">return</span><span class="code-string">"seq_parameter_set_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">8</span>:<span class="code-keyword">return</span><span class="code-string">"pic_parameter_set_rbsp"</span>;<span class="code-keyword">case</span> <span class="code-number">9</span>:<span class="code-keyword">return</span><span class="code-string">"access_unit_delimiter_rbsp"</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span> <span class="code-literal">null</span>}},Qt={<span class="code-attr">parseType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Vt(e);<span class="code-keyword">return</span> <span class="code-number">0</span>===i?<span class="code-string">"pat"</span>:i===t?<span class="code-string">"pmt"</span>:t?<span class="code-string">"pes"</span>:<span class="code-literal">null</span>},<span class="code-attr">parsePat</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=jt(e),i=<span class="code-number">4</span>+Xt(e);<span class="code-keyword">return</span> t&amp;&amp;(i+=e[i]+<span class="code-number">1</span>),(<span class="code-number">31</span>&amp;e[i+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[i+<span class="code-number">11</span>]},<span class="code-attr">parsePmt</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={},i=jt(e),n=<span class="code-number">4</span>+Xt(e);<span class="code-keyword">if</span>(i&amp;&amp;(n+=e[n]+<span class="code-number">1</span>),<span class="code-number">1</span>&amp;e[n+<span class="code-number">5</span>]){<span class="code-keyword">var</span> r;r=<span class="code-number">3</span>+((<span class="code-number">15</span>&amp;e[n+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[n+<span class="code-number">2</span>])<span class="code-number">-4</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a=<span class="code-number">12</span>+((<span class="code-number">15</span>&amp;e[n+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">8</span>|e[n+<span class="code-number">11</span>]);a&lt;r;){<span class="code-keyword">var</span> s=n+a;t[(<span class="code-number">31</span>&amp;e[s+<span class="code-number">1</span>])&lt;&lt;<span class="code-number">8</span>|e[s+<span class="code-number">2</span>]]=e[s],a+=<span class="code-number">5</span>+((<span class="code-number">15</span>&amp;e[s+<span class="code-number">3</span>])&lt;&lt;<span class="code-number">8</span>|e[s+<span class="code-number">4</span>])}<span class="code-keyword">return</span> t}},<span class="code-attr">parsePayloadUnitStartIndicator</span>:jt,<span class="code-attr">parsePesType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">switch</span>(t[Vt(e)]){<span class="code-keyword">case</span> Pe.H264_STREAM_TYPE:<span class="code-keyword">return</span><span class="code-string">"video"</span>;<span class="code-keyword">case</span> Pe.ADTS_STREAM_TYPE:<span class="code-keyword">return</span><span class="code-string">"audio"</span>;<span class="code-keyword">case</span> Pe.METADATA_STREAM_TYPE:<span class="code-keyword">return</span><span class="code-string">"timed-metadata"</span>;<span class="code-keyword">default</span>:<span class="code-keyword">return</span> <span class="code-literal">null</span>}},<span class="code-attr">parsePesTime</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!jt(e))<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> t=<span class="code-number">4</span>+Xt(e);<span class="code-keyword">if</span>(t&gt;=e.byteLength)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i,n=<span class="code-literal">null</span>;<span class="code-keyword">return</span> <span class="code-number">192</span>&amp;(i=e[t+<span class="code-number">7</span>])&amp;&amp;((n={}).pts=(<span class="code-number">14</span>&amp;e[t+<span class="code-number">9</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">10</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">11</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">12</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">3</span>,n.pts*=<span class="code-number">4</span>,n.pts+=(<span class="code-number">6</span>&amp;e[t+<span class="code-number">13</span>])&gt;&gt;&gt;<span class="code-number">1</span>,n.dts=n.pts,<span class="code-number">64</span>&amp;i&amp;&amp;(n.dts=(<span class="code-number">14</span>&amp;e[t+<span class="code-number">14</span>])&lt;&lt;<span class="code-number">27</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">15</span>])&lt;&lt;<span class="code-number">20</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">16</span>])&lt;&lt;<span class="code-number">12</span>|(<span class="code-number">255</span>&amp;e[t+<span class="code-number">17</span>])&lt;&lt;<span class="code-number">5</span>|(<span class="code-number">254</span>&amp;e[t+<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">3</span>,n.dts*=<span class="code-number">4</span>,n.dts+=(<span class="code-number">6</span>&amp;e[t+<span class="code-number">18</span>])&gt;&gt;&gt;<span class="code-number">1</span>)),n},<span class="code-attr">videoPacketContainsKeyFrame</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-number">4</span>+Xt(e),i=e.subarray(t),n=<span class="code-number">0</span>,r=<span class="code-number">0</span>,a=!<span class="code-number">1</span>;r&lt;i.byteLength<span class="code-number">-3</span>;r++)<span class="code-keyword">if</span>(<span class="code-number">1</span>===i[r+<span class="code-number">2</span>]){n=r+<span class="code-number">5</span>;<span class="code-keyword">break</span>}<span class="code-keyword">for</span>(;n&lt;i.byteLength;)<span class="code-keyword">switch</span>(i[n]){<span class="code-keyword">case</span> <span class="code-number">0</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-1</span>]){n+=<span class="code-number">2</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-2</span>]){n++;<span class="code-keyword">break</span>}r+<span class="code-number">3</span>!==n<span class="code-number">-2</span>&amp;&amp;<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===zt(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>);<span class="code-keyword">do</span>{n++}<span class="code-keyword">while</span>(<span class="code-number">1</span>!==i[n]&amp;&amp;n&lt;i.length);r=n<span class="code-number">-2</span>,n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> <span class="code-number">1</span>:<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i[n<span class="code-number">-1</span>]||<span class="code-number">0</span>!==i[n<span class="code-number">-2</span>]){n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>}<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===zt(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>),r=n<span class="code-number">-2</span>,n+=<span class="code-number">3</span>;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:n+=<span class="code-number">3</span>}<span class="code-keyword">return</span> i=i.subarray(r),n-=r,r=<span class="code-number">0</span>,i&amp;&amp;i.byteLength&gt;<span class="code-number">3</span>&amp;&amp;<span class="code-string">"slice_layer_without_partitioning_rbsp_idr"</span>===zt(<span class="code-number">31</span>&amp;i[r+<span class="code-number">3</span>])&amp;&amp;(a=!<span class="code-number">0</span>),a}},Yt=Ue,Kt={};Kt.ts=Qt,Kt.aac=ot;<span class="code-keyword">var</span> $t=se,Jt=<span class="code-number">188</span>,Zt=<span class="code-number">71</span>,ei=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r,a,s,o=<span class="code-number">0</span>,u=Jt,d=!<span class="code-number">1</span>;u&lt;=e.byteLength;)<span class="code-keyword">if</span>(e[o]!==Zt||e[u]!==Zt&amp;&amp;u!==e.byteLength)o++,u++;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(n=e.subarray(o,u),<span class="code-string">"pes"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"audio"</span>===r&amp;&amp;a&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"audio"</span>,i.audio.push(s),d=!<span class="code-number">0</span>)),d)<span class="code-keyword">break</span>;o+=Jt,u+=Jt}<span class="code-keyword">for</span>(o=(u=e.byteLength)-Jt,d=!<span class="code-number">1</span>;o&gt;=<span class="code-number">0</span>;)<span class="code-keyword">if</span>(e[o]!==Zt||e[u]!==Zt&amp;&amp;u!==e.byteLength)o--,u--;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(n=e.subarray(o,u),<span class="code-string">"pes"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"audio"</span>===r&amp;&amp;a&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"audio"</span>,i.audio.push(s),d=!<span class="code-number">0</span>)),d)<span class="code-keyword">break</span>;o-=Jt,u-=Jt}},ti=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r,a,s,o,u,d,l=<span class="code-number">0</span>,c=Jt,h=!<span class="code-number">1</span>,f={<span class="code-attr">data</span>:[],<span class="code-attr">size</span>:<span class="code-number">0</span>};c&lt;e.byteLength;)<span class="code-keyword">if</span>(e[l]!==Zt||e[c]!==Zt)l++,c++;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(n=e.subarray(l,c),<span class="code-string">"pes"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"video"</span>===r&amp;&amp;(a&amp;&amp;!h&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"video"</span>,i.video.push(s),h=!<span class="code-number">0</span>),!i.firstKeyFrame))){<span class="code-keyword">if</span>(a&amp;&amp;<span class="code-number">0</span>!==f.size){<span class="code-keyword">for</span>(o=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(f.size),u=<span class="code-number">0</span>;f.data.length;)d=f.data.shift(),o.set(d,u),u+=d.byteLength;<span class="code-keyword">if</span>(Kt.ts.videoPacketContainsKeyFrame(o)){<span class="code-keyword">var</span> p=Kt.ts.parsePesTime(o);p?(i.firstKeyFrame=p,i.firstKeyFrame.type=<span class="code-string">"video"</span>):<span class="code-built_in">console</span>.warn(<span class="code-string">"Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."</span>)}f.size=<span class="code-number">0</span>}f.data.push(n),f.size+=n.byteLength}<span class="code-keyword">if</span>(h&amp;&amp;i.firstKeyFrame)<span class="code-keyword">break</span>;l+=Jt,c+=Jt}<span class="code-keyword">for</span>(l=(c=e.byteLength)-Jt,h=!<span class="code-number">1</span>;l&gt;=<span class="code-number">0</span>;)<span class="code-keyword">if</span>(e[l]!==Zt||e[c]!==Zt)l--,c--;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(n=e.subarray(l,c),<span class="code-string">"pes"</span>===Kt.ts.parseType(n,t.pid)&amp;&amp;(r=Kt.ts.parsePesType(n,t.table),a=Kt.ts.parsePayloadUnitStartIndicator(n),<span class="code-string">"video"</span>===r&amp;&amp;a&amp;&amp;(s=Kt.ts.parsePesTime(n))&amp;&amp;(s.type=<span class="code-string">"video"</span>,i.video.push(s),h=!<span class="code-number">0</span>)),h)<span class="code-keyword">break</span>;l-=Jt,c-=Jt}},ii=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span> i=Kt.aac.isLikelyAacData(e)?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t,i=!<span class="code-number">1</span>,n=<span class="code-number">0</span>,r=<span class="code-literal">null</span>,a=<span class="code-literal">null</span>,s=<span class="code-number">0</span>,o=<span class="code-number">0</span>;e.length-o&gt;=<span class="code-number">3</span>;){<span class="code-keyword">switch</span>(Kt.aac.parseType(e,o)){<span class="code-keyword">case</span><span class="code-string">"timed-metadata"</span>:<span class="code-keyword">if</span>(e.length-o&lt;<span class="code-number">10</span>){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>((s=Kt.aac.parseId3TagSize(e,o))&gt;e.length){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-literal">null</span>===a&amp;&amp;(t=e.subarray(o,o+s),a=Kt.aac.parseAacTimestamp(t)),o+=s;<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"audio"</span>:<span class="code-keyword">if</span>(e.length-o&lt;<span class="code-number">7</span>){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-keyword">if</span>((s=Kt.aac.parseAdtsSize(e,o))&gt;e.length){i=!<span class="code-number">0</span>;<span class="code-keyword">break</span>}<span class="code-literal">null</span>===r&amp;&amp;(t=e.subarray(o,o+s),r=Kt.aac.parseSampleRate(t)),n++,o+=s;<span class="code-keyword">break</span>;<span class="code-keyword">default</span>:o++}<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> <span class="code-literal">null</span>}<span class="code-keyword">if</span>(<span class="code-literal">null</span>===r||<span class="code-literal">null</span>===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> u=$t/r;<span class="code-keyword">return</span>{<span class="code-attr">audio</span>:[{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">dts</span>:a,<span class="code-attr">pts</span>:a},{<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">dts</span>:a+<span class="code-number">1024</span>*n*u,<span class="code-attr">pts</span>:a+<span class="code-number">1024</span>*n*u}]}}(e):<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={<span class="code-attr">pid</span>:<span class="code-literal">null</span>,<span class="code-attr">table</span>:<span class="code-literal">null</span>},i={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n=<span class="code-number">0</span>,r=Jt;r&lt;e.byteLength;)<span class="code-keyword">if</span>(e[n]!==Zt||e[r]!==Zt)n++,r++;<span class="code-keyword">else</span>{<span class="code-keyword">switch</span>(i=e.subarray(n,r),Kt.ts.parseType(i,t.pid)){<span class="code-keyword">case</span><span class="code-string">"pat"</span>:t.pid=Kt.ts.parsePat(i);<span class="code-keyword">break</span>;<span class="code-keyword">case</span><span class="code-string">"pmt"</span>:<span class="code-keyword">var</span> a=Kt.ts.parsePmt(i);t.table=t.table||{},<span class="code-built_in">Object</span>.keys(a).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.table[e]=a[e]}))}n+=Jt,r+=Jt}}(e,t),t.table)<span class="code-keyword">if</span>(t.table.hasOwnProperty(n))<span class="code-keyword">switch</span>(t.table[n]){<span class="code-keyword">case</span> Pe.H264_STREAM_TYPE:i.video=[],ti(e,t,i),<span class="code-number">0</span>===i.video.length&amp;&amp;<span class="code-keyword">delete</span> i.video;<span class="code-keyword">break</span>;<span class="code-keyword">case</span> Pe.ADTS_STREAM_TYPE:i.audio=[],ei(e,t,i),<span class="code-number">0</span>===i.audio.length&amp;&amp;<span class="code-keyword">delete</span> i.audio}<span class="code-keyword">return</span> i}(e),i&amp;&amp;(i.audio||i.video)?(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(e.audio&amp;&amp;e.audio.length){<span class="code-keyword">var</span> i=t;(<span class="code-keyword">void</span> <span class="code-number">0</span>===i||<span class="code-built_in">isNaN</span>(i))&amp;&amp;(i=e.audio[<span class="code-number">0</span>].dts),e.audio.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dts=Yt(e.dts,i),e.pts=Yt(e.pts,i),e.dtsTime=e.dts/$t,e.ptsTime=e.pts/$t}))}<span class="code-keyword">if</span>(e.video&amp;&amp;e.video.length){<span class="code-keyword">var</span> n=t;<span class="code-keyword">if</span>((<span class="code-keyword">void</span> <span class="code-number">0</span>===n||<span class="code-built_in">isNaN</span>(n))&amp;&amp;(n=e.video[<span class="code-number">0</span>].dts),e.video.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.dts=Yt(e.dts,n),e.pts=Yt(e.pts,n),e.dtsTime=e.dts/$t,e.ptsTime=e.pts/$t})),e.firstKeyFrame){<span class="code-keyword">var</span> r=e.firstKeyFrame;r.dts=Yt(r.dts,n),r.pts=Yt(r.pts,n),r.dtsTime=r.dts/$t,r.ptsTime=r.pts/$t}}}(i,t),i):<span class="code-literal">null</span>},ni=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.options=t||{},<span class="code-keyword">this</span>.self=e,<span class="code-keyword">this</span>.init()}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.init=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer&amp;&amp;<span class="code-keyword">this</span>.transmuxer.dispose(),<span class="code-keyword">this</span>.transmuxer=<span class="code-keyword">new</span> It.Transmuxer(<span class="code-keyword">this</span>.options),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t.initSegment;t.initSegment={<span class="code-attr">data</span>:i.buffer,<span class="code-attr">byteOffset</span>:i.byteOffset,<span class="code-attr">byteLength</span>:i.byteLength};<span class="code-keyword">var</span> n=t.data;t.data=n.buffer,e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"data"</span>,<span class="code-attr">segment</span>:t,<span class="code-attr">byteOffset</span>:n.byteOffset,<span class="code-attr">byteLength</span>:n.byteLength},[t.data])})),t.on(<span class="code-string">"done"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"done"</span>})})),t.on(<span class="code-string">"gopInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"gopInfo"</span>,<span class="code-attr">gopInfo</span>:t})})),t.on(<span class="code-string">"videoSegmentTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">start</span>:{<span class="code-attr">decode</span>:ue(t.start.dts),<span class="code-attr">presentation</span>:ue(t.start.pts)},<span class="code-attr">end</span>:{<span class="code-attr">decode</span>:ue(t.end.dts),<span class="code-attr">presentation</span>:ue(t.end.pts)},<span class="code-attr">baseMediaDecodeTime</span>:ue(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=ue(t.prependedContentDuration)),e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"videoSegmentTimingInfo"</span>,<span class="code-attr">videoSegmentTimingInfo</span>:i})})),t.on(<span class="code-string">"audioSegmentTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i={<span class="code-attr">start</span>:{<span class="code-attr">decode</span>:ue(t.start.dts),<span class="code-attr">presentation</span>:ue(t.start.pts)},<span class="code-attr">end</span>:{<span class="code-attr">decode</span>:ue(t.end.dts),<span class="code-attr">presentation</span>:ue(t.end.pts)},<span class="code-attr">baseMediaDecodeTime</span>:ue(t.baseMediaDecodeTime)};t.prependedContentDuration&amp;&amp;(i.prependedContentDuration=ue(t.prependedContentDuration)),e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"audioSegmentTimingInfo"</span>,<span class="code-attr">audioSegmentTimingInfo</span>:i})})),t.on(<span class="code-string">"id3Frame"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"id3Frame"</span>,<span class="code-attr">id3Frame</span>:t})})),t.on(<span class="code-string">"caption"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"caption"</span>,<span class="code-attr">caption</span>:t})})),t.on(<span class="code-string">"trackinfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"trackinfo"</span>,<span class="code-attr">trackInfo</span>:t})})),t.on(<span class="code-string">"audioTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"audioTimingInfo"</span>,<span class="code-attr">audioTimingInfo</span>:{<span class="code-attr">start</span>:ue(t.start),<span class="code-attr">end</span>:ue(t.end)}})})),t.on(<span class="code-string">"videoTimingInfo"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"videoTimingInfo"</span>,<span class="code-attr">videoTimingInfo</span>:{<span class="code-attr">start</span>:ue(t.start),<span class="code-attr">end</span>:ue(t.end)}})})),t.on(<span class="code-string">"log"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:<span class="code-string">"log"</span>,<span class="code-attr">log</span>:t})}))}(<span class="code-keyword">this</span>.self,<span class="code-keyword">this</span>.transmuxer)},t.pushMp4Captions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.captionParser||(<span class="code-keyword">this</span>.captionParser=<span class="code-keyword">new</span> Nt,<span class="code-keyword">this</span>.captionParser.init());<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.data,e.byteOffset,e.byteLength),i=<span class="code-keyword">this</span>.captionParser.parse(t,e.trackIds,e.timescales);<span class="code-keyword">this</span>.self.postMessage({<span class="code-attr">action</span>:<span class="code-string">"mp4Captions"</span>,<span class="code-attr">captions</span>:i&amp;&amp;i.captions||[],<span class="code-attr">logs</span>:i&amp;&amp;i.logs||[],<span class="code-attr">data</span>:t.buffer},[t.buffer])},t.probeMp4StartTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.timescales,i=e.data,n=Gt(t,i);<span class="code-keyword">this</span>.self.postMessage({<span class="code-attr">action</span>:<span class="code-string">"probeMp4StartTime"</span>,<span class="code-attr">startTime</span>:n,<span class="code-attr">data</span>:i},[i.buffer])},t.probeMp4Tracks=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.data,i=Wt(t);<span class="code-keyword">this</span>.self.postMessage({<span class="code-attr">action</span>:<span class="code-string">"probeMp4Tracks"</span>,<span class="code-attr">tracks</span>:i,<span class="code-attr">data</span>:t},[t.buffer])},t.probeTs=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.data,i=e.baseStartTime,n=<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> i||<span class="code-built_in">isNaN</span>(i)?<span class="code-keyword">void</span> <span class="code-number">0</span>:i*se,r=ii(t,n),a=<span class="code-literal">null</span>;r&amp;&amp;((a={<span class="code-attr">hasVideo</span>:r.video&amp;&amp;<span class="code-number">2</span>===r.video.length||!<span class="code-number">1</span>,<span class="code-attr">hasAudio</span>:r.audio&amp;&amp;<span class="code-number">2</span>===r.audio.length||!<span class="code-number">1</span>}).hasVideo&amp;&amp;(a.videoStart=r.video[<span class="code-number">0</span>].ptsTime),a.hasAudio&amp;&amp;(a.audioStart=r.audio[<span class="code-number">0</span>].ptsTime)),<span class="code-keyword">this</span>.self.postMessage({<span class="code-attr">action</span>:<span class="code-string">"probeTs"</span>,<span class="code-attr">result</span>:a,<span class="code-attr">data</span>:t},[t.buffer])},t.clearAllMp4Captions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.captionParser&amp;&amp;<span class="code-keyword">this</span>.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.captionParser&amp;&amp;<span class="code-keyword">this</span>.captionParser.clearParsedCaptions()},t.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.data,e.byteOffset,e.byteLength);<span class="code-keyword">this</span>.transmuxer.push(t)},t.reset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer.reset()},t.setTimestampOffset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.timestampOffset||<span class="code-number">0</span>;<span class="code-keyword">this</span>.transmuxer.setBaseMediaDecodeTime(<span class="code-built_in">Math</span>.round(oe(t)))},t.setAudioAppendStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.setAudioAppendStart(<span class="code-built_in">Math</span>.ceil(oe(e.appendStart)))},t.setRemux=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.setRemux(e.remux)},t.flush=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.flush(),self.postMessage({<span class="code-attr">action</span>:<span class="code-string">"done"</span>,<span class="code-attr">type</span>:<span class="code-string">"transmuxed"</span>})},t.endTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer.endTimeline(),self.postMessage({<span class="code-attr">action</span>:<span class="code-string">"endedtimeline"</span>,<span class="code-attr">type</span>:<span class="code-string">"transmuxed"</span>})},t.alignGopsWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"init"</span>===e.data.action&amp;&amp;e.data.options?<span class="code-keyword">this</span>.messageHandlers=<span class="code-keyword">new</span> ni(self,e.data.options):(<span class="code-keyword">this</span>.messageHandlers||(<span class="code-keyword">this</span>.messageHandlers=<span class="code-keyword">new</span> ni(self)),e.data&amp;&amp;e.data.action&amp;&amp;<span class="code-string">"init"</span>!==e.data.action&amp;&amp;<span class="code-keyword">this</span>.messageHandlers[e.data.action]&amp;&amp;<span class="code-keyword">this</span>.messageHandlers[e.data.action](e.data))}}))),hi=ui(ci),fi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,s=e.onData,o=e.onTrackInfo,u=e.onAudioTimingInfo,d=e.onVideoTimingInfo,l=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,h=e.onId3,f=e.onCaptions,p=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,y=e.isEndOfTimeline,v={<span class="code-attr">buffer</span>:[]},_=y;<span class="code-keyword">if</span>(t.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{t.currentTransmux===e&amp;&amp;(<span class="code-string">"data"</span>===i.data.action&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.data.segment,r=n.type,a=n.initSegment,s=n.captions,o=n.captionStreams,u=n.metadata,d=n.videoFrameDtsTime,l=n.videoFramePtsTime;t.buffer.push({<span class="code-attr">captions</span>:s,<span class="code-attr">captionStreams</span>:o,<span class="code-attr">metadata</span>:u});<span class="code-keyword">var</span> c=e.data.segment.boxes||{<span class="code-attr">data</span>:e.data.segment.data},h={<span class="code-attr">type</span>:r,<span class="code-attr">data</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(c.data,c.data.byteOffset,c.data.byteLength),<span class="code-attr">initSegment</span>:<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.data,a.byteOffset,a.byteLength)};<span class="code-keyword">void</span> <span class="code-number">0</span>!==d&amp;&amp;(h.videoFrameDtsTime=d),<span class="code-keyword">void</span> <span class="code-number">0</span>!==l&amp;&amp;(h.videoFramePtsTime=l),i(h)}(i,v,s),<span class="code-string">"trackinfo"</span>===i.data.action&amp;&amp;o(i.data.trackInfo),<span class="code-string">"gopInfo"</span>===i.data.action&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.gopInfo=e.data.gopInfo}(i,v),<span class="code-string">"audioTimingInfo"</span>===i.data.action&amp;&amp;u(i.data.audioTimingInfo),<span class="code-string">"videoTimingInfo"</span>===i.data.action&amp;&amp;d(i.data.videoTimingInfo),<span class="code-string">"videoSegmentTimingInfo"</span>===i.data.action&amp;&amp;l(i.data.videoSegmentTimingInfo),<span class="code-string">"audioSegmentTimingInfo"</span>===i.data.action&amp;&amp;c(i.data.audioSegmentTimingInfo),<span class="code-string">"id3Frame"</span>===i.data.action&amp;&amp;h([i.data.id3Frame],i.data.id3Frame.dispatchType),<span class="code-string">"caption"</span>===i.data.action&amp;&amp;f(i.data.caption),<span class="code-string">"endedtimeline"</span>===i.data.action&amp;&amp;(_=!<span class="code-number">1</span>,m()),<span class="code-string">"log"</span>===i.data.action&amp;&amp;g(i.data.log),<span class="code-string">"transmuxed"</span>===i.data.type&amp;&amp;(_||(t.onmessage=<span class="code-literal">null</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({<span class="code-attr">transmuxedData</span>:v,<span class="code-attr">callback</span>:p}),pi(t))))},n&amp;&amp;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setAudioAppendStart"</span>,<span class="code-attr">appendStart</span>:n}),<span class="code-built_in">Array</span>.isArray(r)&amp;&amp;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"alignGopsWith"</span>,<span class="code-attr">gopsToAlignWith</span>:r}),<span class="code-keyword">void</span> <span class="code-number">0</span>!==a&amp;&amp;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setRemux"</span>,<span class="code-attr">remux</span>:a}),i.byteLength){<span class="code-keyword">var</span> T=i <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>?i:i.buffer,b=i <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>?<span class="code-number">0</span>:i.byteOffset;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"push"</span>,<span class="code-attr">data</span>:T,<span class="code-attr">byteOffset</span>:b,<span class="code-attr">byteLength</span>:i.byteLength},[T])}y&amp;&amp;t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"endTimeline"</span>}),t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"flush"</span>})},pi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.currentTransmux=<span class="code-literal">null</span>,e.transmuxQueue.length&amp;&amp;(e.currentTransmux=e.transmuxQueue.shift(),<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e.currentTransmux?e.currentTransmux():fi(e.currentTransmux))},mi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.postMessage({<span class="code-attr">action</span>:t}),pi(e)},gi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t.currentTransmux)<span class="code-keyword">return</span> t.currentTransmux=e,<span class="code-keyword">void</span> mi(t,e);t.transmuxQueue.push(mi.bind(<span class="code-literal">null</span>,t,e))}(<span class="code-string">"reset"</span>,e)},yi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.transmuxer,i=e.endAction||e.action,n=e.callback,r=m({},e,{<span class="code-attr">endAction</span>:<span class="code-literal">null</span>,<span class="code-attr">transmuxer</span>:<span class="code-literal">null</span>,<span class="code-attr">callback</span>:<span class="code-literal">null</span>});<span class="code-keyword">if</span>(t.addEventListener(<span class="code-string">"message"</span>,(<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">r</span>(<span class="code-params">a</span>)</span>{a.data.action===i&amp;&amp;(t.removeEventListener(<span class="code-string">"message"</span>,r),a.data.data&amp;&amp;(a.data.data=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(a.data.data,e.byteOffset||<span class="code-number">0</span>,e.byteLength||a.data.data.byteLength),e.data&amp;&amp;(e.data=a.data.data)),n(a.data))})),e.data){<span class="code-keyword">var</span> a=e.data <span class="code-keyword">instanceof</span> <span class="code-built_in">ArrayBuffer</span>;r.byteOffset=a?<span class="code-number">0</span>:e.data.byteOffset,r.byteLength=e.data.byteLength;<span class="code-keyword">var</span> s=[a?e.data:e.data.buffer];t.postMessage(r,s)}<span class="code-keyword">else</span> t.postMessage(r)},vi=<span class="code-number">-101</span>,_i=<span class="code-number">-102</span>,Ti=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.abort()}))},bi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> t.timedout?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request timed-out at URL: "</span>+t.uri,<span class="code-attr">code</span>:vi,<span class="code-attr">xhr</span>:t}:t.aborted?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request aborted at URL: "</span>+t.uri,<span class="code-attr">code</span>:_i,<span class="code-attr">xhr</span>:t}:e?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"HLS request errored at URL: "</span>+t.uri,<span class="code-attr">code</span>:<span class="code-number">2</span>,<span class="code-attr">xhr</span>:t}:<span class="code-string">"arraybuffer"</span>===t.responseType&amp;&amp;<span class="code-number">0</span>===t.response.byteLength?{<span class="code-attr">status</span>:t.status,<span class="code-attr">message</span>:<span class="code-string">"Empty HLS response at URL: "</span>+t.uri,<span class="code-attr">code</span>:<span class="code-number">2</span>,<span class="code-attr">xhr</span>:t}:<span class="code-literal">null</span>},Si=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n,r</span>)</span>{<span class="code-keyword">var</span> a=r.response,s=bi(n,r);<span class="code-keyword">if</span>(s)<span class="code-keyword">return</span> i(s,e);<span class="code-keyword">if</span>(<span class="code-number">16</span>!==a.byteLength)<span class="code-keyword">return</span> i({<span class="code-attr">status</span>:r.status,<span class="code-attr">message</span>:<span class="code-string">"Invalid HLS key at URL: "</span>+r.uri,<span class="code-attr">code</span>:<span class="code-number">2</span>,<span class="code-attr">xhr</span>:r},e);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o=<span class="code-keyword">new</span> <span class="code-built_in">DataView</span>(a),u=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([o.getUint32(<span class="code-number">0</span>),o.getUint32(<span class="code-number">4</span>),o.getUint32(<span class="code-number">8</span>),o.getUint32(<span class="code-number">12</span>)]),d=<span class="code-number">0</span>;d&lt;t.length;d++)t[d].bytes=u;<span class="code-keyword">return</span> i(<span class="code-literal">null</span>,e)}},wi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=Jt(e.map.bytes);<span class="code-keyword">if</span>(<span class="code-string">"mp4"</span>!==i){<span class="code-keyword">var</span> n=e.map.resolvedUri||e.map.uri;<span class="code-keyword">return</span> t({<span class="code-attr">internal</span>:!<span class="code-number">0</span>,<span class="code-attr">message</span>:<span class="code-string">"Found unsupported "</span>+(i||<span class="code-string">"unknown"</span>)+<span class="code-string">" container for initialization segment at URL: "</span>+n,<span class="code-attr">code</span>:<span class="code-number">2</span>})}yi({<span class="code-attr">action</span>:<span class="code-string">"probeMp4Tracks"</span>,<span class="code-attr">data</span>:e.map.bytes,<span class="code-attr">transmuxer</span>:e.transmuxer,<span class="code-attr">callback</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=i.tracks,r=i.data;<span class="code-keyword">return</span> e.map.bytes=r,n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> t.id&amp;&amp;t.timescale&amp;&amp;(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(<span class="code-literal">null</span>)}})},Ii=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.isEndOfTimeline,l=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog,p=t.map&amp;&amp;t.map.tracks||{},m=<span class="code-built_in">Boolean</span>(p.audio&amp;&amp;p.video),g=r.bind(<span class="code-literal">null</span>,t,<span class="code-string">"audio"</span>,<span class="code-string">"start"</span>),y=r.bind(<span class="code-literal">null</span>,t,<span class="code-string">"audio"</span>,<span class="code-string">"end"</span>),v=r.bind(<span class="code-literal">null</span>,t,<span class="code-string">"video"</span>,<span class="code-string">"start"</span>),_=r.bind(<span class="code-literal">null</span>,t,<span class="code-string">"video"</span>,<span class="code-string">"end"</span>);yi({<span class="code-attr">action</span>:<span class="code-string">"probeTs"</span>,<span class="code-attr">transmuxer</span>:t.transmuxer,<span class="code-attr">data</span>:i,<span class="code-attr">baseStartTime</span>:t.baseStartTime,<span class="code-attr">callback</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.bytes=i=e.data;<span class="code-keyword">var</span> r=e.result;r&amp;&amp;(n(t,{<span class="code-attr">hasAudio</span>:r.hasAudio,<span class="code-attr">hasVideo</span>:r.hasVideo,<span class="code-attr">isMuxed</span>:m}),n=<span class="code-literal">null</span>,r.hasAudio&amp;&amp;!m&amp;&amp;g(r.audioStart),r.hasVideo&amp;&amp;v(r.videoStart),g=<span class="code-literal">null</span>,v=<span class="code-literal">null</span>),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.transmuxer.currentTransmux)<span class="code-keyword">return</span> e.transmuxer.currentTransmux=e,<span class="code-keyword">void</span> fi(e);e.transmuxer.transmuxQueue.push(e)}({<span class="code-attr">bytes</span>:i,<span class="code-attr">transmuxer</span>:t.transmuxer,<span class="code-attr">audioAppendStart</span>:t.audioAppendStart,<span class="code-attr">gopsToAlignWith</span>:t.gopsToAlignWith,<span class="code-attr">remux</span>:m,<span class="code-attr">onData</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.type=<span class="code-string">"combined"</span>===e.type?<span class="code-string">"video"</span>:e.type,c(t,e)},<span class="code-attr">onTrackInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n&amp;&amp;(m&amp;&amp;(e.isMuxed=!<span class="code-number">0</span>),n(t,e))},<span class="code-attr">onAudioTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{g&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.start&amp;&amp;(g(e.start),g=<span class="code-literal">null</span>),y&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.end&amp;&amp;y(e.end)},<span class="code-attr">onVideoTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{v&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.start&amp;&amp;(v(e.start),v=<span class="code-literal">null</span>),_&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.end&amp;&amp;_(e.end)},<span class="code-attr">onVideoSegmentTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{a(e)},<span class="code-attr">onAudioSegmentTimingInfo</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s(e)},<span class="code-attr">onId3</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{o(t,e,i)},<span class="code-attr">onCaptions</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{u(t,[e])},<span class="code-attr">isEndOfTimeline</span>:d,<span class="code-attr">onEndedTimeline</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{l()},<span class="code-attr">onTransmuxerLog</span>:f,<span class="code-attr">onDone</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{h&amp;&amp;(e.type=<span class="code-string">"combined"</span>===e.type?<span class="code-string">"video"</span>:e.type,h(<span class="code-literal">null</span>,t,e))}})}})},Ei=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.bytes,n=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,h=e.dataFn,f=e.doneFn,p=e.onTransmuxerLog,m=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(i);<span class="code-keyword">if</span>(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> Mt(e,[<span class="code-string">"moof"</span>]).length&gt;<span class="code-number">0</span>}(m)){t.isFmp4=!<span class="code-number">0</span>;<span class="code-keyword">var</span> g=t.map.tracks,y={<span class="code-attr">isFmp4</span>:!<span class="code-number">0</span>,<span class="code-attr">hasVideo</span>:!!g.video,<span class="code-attr">hasAudio</span>:!!g.audio};g.audio&amp;&amp;g.audio.codec&amp;&amp;<span class="code-string">"enca"</span>!==g.audio.codec&amp;&amp;(y.audioCodec=g.audio.codec),g.video&amp;&amp;g.video.codec&amp;&amp;<span class="code-string">"encv"</span>!==g.video.codec&amp;&amp;(y.videoCodec=g.video.codec),g.video&amp;&amp;g.audio&amp;&amp;(y.isMuxed=!<span class="code-number">0</span>),n(t,y);<span class="code-keyword">var</span> v=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{h(t,{<span class="code-attr">data</span>:m,<span class="code-attr">type</span>:y.hasAudio&amp;&amp;!y.isMuxed?<span class="code-string">"audio"</span>:<span class="code-string">"video"</span>}),e&amp;&amp;e.length&amp;&amp;d(t,e),f(<span class="code-literal">null</span>,t,{})};yi({<span class="code-attr">action</span>:<span class="code-string">"probeMp4StartTime"</span>,<span class="code-attr">timescales</span>:t.map.timescales,<span class="code-attr">data</span>:m,<span class="code-attr">transmuxer</span>:t.transmuxer,<span class="code-attr">callback</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> n=e.data,s=e.startTime;i=n.buffer,t.bytes=m=n,y.hasAudio&amp;&amp;!y.isMuxed&amp;&amp;a(t,<span class="code-string">"audio"</span>,<span class="code-string">"start"</span>,s),y.hasVideo&amp;&amp;a(t,<span class="code-string">"video"</span>,<span class="code-string">"start"</span>,s),g.video&amp;&amp;n.byteLength&amp;&amp;t.transmuxer?yi({<span class="code-attr">action</span>:<span class="code-string">"pushMp4Captions"</span>,<span class="code-attr">endAction</span>:<span class="code-string">"mp4Captions"</span>,<span class="code-attr">transmuxer</span>:t.transmuxer,<span class="code-attr">data</span>:m,<span class="code-attr">timescales</span>:t.map.timescales,<span class="code-attr">trackIds</span>:[g.video.id],<span class="code-attr">callback</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i=e.data.buffer,t.bytes=m=e.data,e.logs.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{p(r.default.mergeOptions(e,{<span class="code-attr">stream</span>:<span class="code-string">"mp4CaptionParser"</span>}))})),v(e.captions)}}):v()}})}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t.transmuxer){<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t.container&amp;&amp;(t.container=Jt(m)),<span class="code-string">"ts"</span>!==t.container&amp;&amp;<span class="code-string">"aac"</span>!==t.container)<span class="code-keyword">return</span> n(t,{<span class="code-attr">hasAudio</span>:!<span class="code-number">1</span>,<span class="code-attr">hasVideo</span>:!<span class="code-number">1</span>}),<span class="code-keyword">void</span> f(<span class="code-literal">null</span>,t,{});Ii({<span class="code-attr">segment</span>:t,<span class="code-attr">bytes</span>:i,<span class="code-attr">trackInfoFn</span>:n,<span class="code-attr">timingInfoFn</span>:a,<span class="code-attr">videoSegmentTimingInfoFn</span>:s,<span class="code-attr">audioSegmentTimingInfoFn</span>:o,<span class="code-attr">id3Fn</span>:u,<span class="code-attr">captionsFn</span>:d,<span class="code-attr">isEndOfTimeline</span>:l,<span class="code-attr">endedTimelineFn</span>:c,<span class="code-attr">dataFn</span>:h,<span class="code-attr">doneFn</span>:f,<span class="code-attr">onTransmuxerLog</span>:p})}<span class="code-keyword">else</span> f(<span class="code-literal">null</span>,t,{})},Ai=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n=e.id,r=e.key,a=e.encryptedBytes,s=e.decryptionWorker;s.addEventListener(<span class="code-string">"message"</span>,(<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">if</span>(i.data.source===n){s.removeEventListener(<span class="code-string">"message"</span>,e);<span class="code-keyword">var</span> r=i.data.decrypted;t(<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r.bytes,r.byteOffset,r.byteLength))}})),i=r.bytes.slice?r.bytes.slice():<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(<span class="code-built_in">Array</span>.prototype.slice.call(r.bytes)),s.postMessage(Be({<span class="code-attr">source</span>:n,<span class="code-attr">encrypted</span>:a,<span class="code-attr">key</span>:i,<span class="code-attr">iv</span>:r.iv}),[a.buffer,i.buffer])},Li=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.xhr,i=e.xhrOptions,n=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,u=e.trackInfoFn,d=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,h=e.id3Fn,f=e.captionsFn,p=e.isEndOfTimeline,m=e.endedTimelineFn,g=e.dataFn,y=e.doneFn,v=e.onTransmuxerLog,_=[],T=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.isEndOfTimeline,l=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog,p=<span class="code-number">0</span>,m=!<span class="code-number">1</span>;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,g</span>)</span>{<span class="code-keyword">if</span>(!m){<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> m=!<span class="code-number">0</span>,Ti(t),h(e,g);<span class="code-keyword">if</span>((p+=<span class="code-number">1</span>)===t.length){<span class="code-keyword">var</span> y=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(g.encryptedBytes)<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.decryptionWorker,i=e.segment,n=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,d=e.isEndOfTimeline,l=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,f=e.onTransmuxerLog;Ai({<span class="code-attr">id</span>:i.requestId,<span class="code-attr">key</span>:i.key,<span class="code-attr">encryptedBytes</span>:i.encryptedBytes,<span class="code-attr">decryptionWorker</span>:t},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.bytes=e,Ei({<span class="code-attr">segment</span>:i,<span class="code-attr">bytes</span>:i.bytes,<span class="code-attr">trackInfoFn</span>:n,<span class="code-attr">timingInfoFn</span>:r,<span class="code-attr">videoSegmentTimingInfoFn</span>:a,<span class="code-attr">audioSegmentTimingInfoFn</span>:s,<span class="code-attr">id3Fn</span>:o,<span class="code-attr">captionsFn</span>:u,<span class="code-attr">isEndOfTimeline</span>:d,<span class="code-attr">endedTimelineFn</span>:l,<span class="code-attr">dataFn</span>:c,<span class="code-attr">doneFn</span>:h,<span class="code-attr">onTransmuxerLog</span>:f})}))}({<span class="code-attr">decryptionWorker</span>:i,<span class="code-attr">segment</span>:g,<span class="code-attr">trackInfoFn</span>:n,<span class="code-attr">timingInfoFn</span>:r,<span class="code-attr">videoSegmentTimingInfoFn</span>:a,<span class="code-attr">audioSegmentTimingInfoFn</span>:s,<span class="code-attr">id3Fn</span>:o,<span class="code-attr">captionsFn</span>:u,<span class="code-attr">isEndOfTimeline</span>:d,<span class="code-attr">endedTimelineFn</span>:l,<span class="code-attr">dataFn</span>:c,<span class="code-attr">doneFn</span>:h,<span class="code-attr">onTransmuxerLog</span>:f});Ei({<span class="code-attr">segment</span>:g,<span class="code-attr">bytes</span>:g.bytes,<span class="code-attr">trackInfoFn</span>:n,<span class="code-attr">timingInfoFn</span>:r,<span class="code-attr">videoSegmentTimingInfoFn</span>:a,<span class="code-attr">audioSegmentTimingInfoFn</span>:s,<span class="code-attr">id3Fn</span>:o,<span class="code-attr">captionsFn</span>:u,<span class="code-attr">isEndOfTimeline</span>:d,<span class="code-attr">endedTimelineFn</span>:l,<span class="code-attr">dataFn</span>:c,<span class="code-attr">doneFn</span>:h,<span class="code-attr">onTransmuxerLog</span>:f})};<span class="code-keyword">if</span>(g.endOfAllRequests=<span class="code-built_in">Date</span>.now(),g.map&amp;&amp;g.map.encryptedBytes&amp;&amp;!g.map.bytes)<span class="code-keyword">return</span> Ai({<span class="code-attr">decryptionWorker</span>:i,<span class="code-attr">id</span>:g.requestId+<span class="code-string">"-init"</span>,<span class="code-attr">encryptedBytes</span>:g.map.encryptedBytes,<span class="code-attr">key</span>:g.map.key},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{g.map.bytes=e,wi(g,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> Ti(t),h(e,g);y()}))}));y()}}}}({<span class="code-attr">activeXhrs</span>:_,<span class="code-attr">decryptionWorker</span>:n,<span class="code-attr">trackInfoFn</span>:u,<span class="code-attr">timingInfoFn</span>:d,<span class="code-attr">videoSegmentTimingInfoFn</span>:l,<span class="code-attr">audioSegmentTimingInfoFn</span>:c,<span class="code-attr">id3Fn</span>:h,<span class="code-attr">captionsFn</span>:f,<span class="code-attr">isEndOfTimeline</span>:p,<span class="code-attr">endedTimelineFn</span>:m,<span class="code-attr">dataFn</span>:g,<span class="code-attr">doneFn</span>:y,<span class="code-attr">onTransmuxerLog</span>:v});<span class="code-keyword">if</span>(a.key&amp;&amp;!a.key.bytes){<span class="code-keyword">var</span> b=[a.key];a.map&amp;&amp;!a.map.bytes&amp;&amp;a.map.key&amp;&amp;a.map.key.resolvedUri===a.key.resolvedUri&amp;&amp;b.push(a.map.key);<span class="code-keyword">var</span> S=t(r.default.mergeOptions(i,{<span class="code-attr">uri</span>:a.key.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>}),Si(a,b,T));_.push(S)}<span class="code-keyword">if</span>(a.map&amp;&amp;!a.map.bytes){<span class="code-keyword">if</span>(a.map.key&amp;&amp;(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri)){<span class="code-keyword">var</span> w=t(r.default.mergeOptions(i,{<span class="code-attr">uri</span>:a.map.key.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>}),Si(a,[a.map.key],T));_.push(w)}<span class="code-keyword">var</span> I=r.default.mergeOptions(i,{<span class="code-attr">uri</span>:a.map.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:xe(a.map)}),E=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.finishProcessingFn;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=bi(e,n);<span class="code-keyword">if</span>(r)<span class="code-keyword">return</span> i(r,t);<span class="code-keyword">var</span> a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(n.response);<span class="code-keyword">if</span>(t.map.key)<span class="code-keyword">return</span> t.map.encryptedBytes=a,i(<span class="code-literal">null</span>,t);t.map.bytes=a,wi(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> e.xhr=n,e.status=n.status,i(e,t);i(<span class="code-literal">null</span>,t)}))}}({<span class="code-attr">segment</span>:a,<span class="code-attr">finishProcessingFn</span>:T}),A=t(I,E);_.push(A)}<span class="code-keyword">var</span> L=r.default.mergeOptions(i,{<span class="code-attr">uri</span>:a.part&amp;&amp;a.part.resolvedUri||a.resolvedUri,<span class="code-attr">responseType</span>:<span class="code-string">"arraybuffer"</span>,<span class="code-attr">headers</span>:xe(a)}),P=t(L,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.finishProcessingFn,n=e.responseType;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,r</span>)</span>{<span class="code-keyword">var</span> a=bi(e,r);<span class="code-keyword">if</span>(a)<span class="code-keyword">return</span> i(a,t);<span class="code-keyword">var</span> s=<span class="code-string">"arraybuffer"</span>!==n&amp;&amp;r.responseText?<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-keyword">new</span> <span class="code-built_in">ArrayBuffer</span>(e.length)),i=<span class="code-number">0</span>;i&lt;e.length;i++)t[i]=e.charCodeAt(i);<span class="code-keyword">return</span> t.buffer}(r.responseText.substring(t.lastReachedChar||<span class="code-number">0</span>)):r.response;<span class="code-keyword">return</span> t.stats=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>{<span class="code-attr">bandwidth</span>:e.bandwidth,<span class="code-attr">bytesReceived</span>:e.bytesReceived||<span class="code-number">0</span>,<span class="code-attr">roundTripTime</span>:e.roundTripTime||<span class="code-number">0</span>}}(r),t.key?t.encryptedBytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(s):t.bytes=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(s),i(<span class="code-literal">null</span>,t)}}({<span class="code-attr">segment</span>:a,<span class="code-attr">finishProcessingFn</span>:T,<span class="code-attr">responseType</span>:L.responseType}));P.addEventListener(<span class="code-string">"progress"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.progressFn;<span class="code-keyword">return</span> e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!e.target.aborted)<span class="code-keyword">return</span> t.stats=r.default.mergeOptions(t.stats,(a=(n=e).target,(s={<span class="code-attr">bandwidth</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">bytesReceived</span>:<span class="code-number">0</span>,<span class="code-attr">roundTripTime</span>:<span class="code-built_in">Date</span>.now()-a.requestTime||<span class="code-number">0</span>}).bytesReceived=n.loaded,s.bandwidth=<span class="code-built_in">Math</span>.floor(s.bytesReceived/s.roundTripTime*<span class="code-number">8</span>*<span class="code-number">1e3</span>),s)),!t.stats.firstBytesReceivedAt&amp;&amp;t.stats.bytesReceived&amp;&amp;(t.stats.firstBytesReceivedAt=<span class="code-built_in">Date</span>.now()),i(e,t);<span class="code-keyword">var</span> n,a,s}}({<span class="code-attr">segment</span>:a,<span class="code-attr">progressFn</span>:o,<span class="code-attr">trackInfoFn</span>:u,<span class="code-attr">timingInfoFn</span>:d,<span class="code-attr">videoSegmentTimingInfoFn</span>:l,<span class="code-attr">audioSegmentTimingInfoFn</span>:c,<span class="code-attr">id3Fn</span>:h,<span class="code-attr">captionsFn</span>:f,<span class="code-attr">isEndOfTimeline</span>:p,<span class="code-attr">endedTimelineFn</span>:m,<span class="code-attr">dataFn</span>:g})),_.push(P);<span class="code-keyword">var</span> k={};<span class="code-keyword">return</span> _.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.addEventListener(<span class="code-string">"loadend"</span>,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.loadendState,i=e.abortFn;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.target.aborted&amp;&amp;i&amp;&amp;!t.calledAbortFn&amp;&amp;(i(),t.calledAbortFn=!<span class="code-number">0</span>)}}({<span class="code-attr">loadendState</span>:k,<span class="code-attr">abortFn</span>:s}))})),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> Ti(_)}},Pi=p(<span class="code-string">"CodecUtils"</span>),ki=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.attributes||{};<span class="code-keyword">return</span> e&amp;&amp;e.mediaGroups&amp;&amp;e.mediaGroups.AUDIO&amp;&amp;i.AUDIO&amp;&amp;e.mediaGroups.AUDIO[i.AUDIO]},xi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t={};<span class="code-keyword">return</span> e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.mediaType,n=e.type,r=e.details;t[i]=t[i]||[],t[i].push(O(<span class="code-string">""</span>+n+r))})),<span class="code-built_in">Object</span>.keys(t).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(t[e].length&gt;<span class="code-number">1</span>)<span class="code-keyword">return</span> Pi(<span class="code-string">"multiple "</span>+e+<span class="code-string">" codecs found as attributes: "</span>+t[e].join(<span class="code-string">", "</span>)+<span class="code-string">". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."</span>),<span class="code-keyword">void</span>(t[e]=<span class="code-literal">null</span>);t[e]=t[e][<span class="code-number">0</span>]})),t},Oi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>;<span class="code-keyword">return</span> e.audio&amp;&amp;t++,e.video&amp;&amp;t++,t},Di=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.attributes||{},n=xi(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes||{};<span class="code-keyword">if</span>(t.CODECS)<span class="code-keyword">return</span> D(t.CODECS)}(t)||[]);<span class="code-keyword">if</span>(ki(e,t)&amp;&amp;!n.audio&amp;&amp;!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!ki(e,t))<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r <span class="code-keyword">in</span> n)<span class="code-keyword">if</span>(!n[r].uri&amp;&amp;!n[r].playlists)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>}(e,t)){<span class="code-keyword">var</span> r=xi(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e.mediaGroups.AUDIO||!t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=e.mediaGroups.AUDIO[t];<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i){<span class="code-keyword">var</span> r=i[n];<span class="code-keyword">if</span>(r.default&amp;&amp;r.playlists)<span class="code-keyword">return</span> D(r.playlists[<span class="code-number">0</span>].attributes.CODECS)}<span class="code-keyword">return</span> <span class="code-literal">null</span>}(e,i.AUDIO)||[]);r.audio&amp;&amp;(n.audio=r.audio)}<span class="code-keyword">return</span> n},Ci=p(<span class="code-string">"PlaylistSelector"</span>),Ui=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e&amp;&amp;e.playlist){<span class="code-keyword">var</span> t=e.playlist;<span class="code-keyword">return</span> <span class="code-built_in">JSON</span>.stringify({<span class="code-attr">id</span>:t.id,<span class="code-attr">bandwidth</span>:e.bandwidth,<span class="code-attr">width</span>:e.width,<span class="code-attr">height</span>:e.height,<span class="code-attr">codecs</span>:t.attributes&amp;&amp;t.attributes.CODECS||<span class="code-string">""</span>})}},Ri=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span><span class="code-string">""</span>;<span class="code-keyword">var</span> i=<span class="code-built_in">window</span>.getComputedStyle(e);<span class="code-keyword">return</span> i?i[t]:<span class="code-string">""</span>},Mi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.slice();e.sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,n</span>)</span>{<span class="code-keyword">var</span> r=t(e,n);<span class="code-keyword">return</span> <span class="code-number">0</span>===r?i.indexOf(e)-i.indexOf(n):r}))},Bi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n;<span class="code-keyword">return</span> e.attributes.BANDWIDTH&amp;&amp;(i=e.attributes.BANDWIDTH),i=i||<span class="code-built_in">window</span>.Number.MAX_VALUE,t.attributes.BANDWIDTH&amp;&amp;(n=t.attributes.BANDWIDTH),i-(n||<span class="code-built_in">window</span>.Number.MAX_VALUE)},Ni=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> s={<span class="code-attr">bandwidth</span>:t,<span class="code-attr">width</span>:i,<span class="code-attr">height</span>:n,<span class="code-attr">limitRenditionByPlayerDimensions</span>:r},o=e.playlists;ce.isAudioOnly(e)&amp;&amp;(o=a.getAudioTrackPlaylists_(),s.audioOnly=!<span class="code-number">0</span>);<span class="code-keyword">var</span> u=o.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.attributes&amp;&amp;e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width,i=e.attributes&amp;&amp;e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.height;<span class="code-keyword">return</span>{<span class="code-attr">bandwidth</span>:e.attributes&amp;&amp;e.attributes.BANDWIDTH||<span class="code-built_in">window</span>.Number.MAX_VALUE,<span class="code-attr">width</span>:t,<span class="code-attr">height</span>:i,<span class="code-attr">playlist</span>:e}}));Mi(u,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.bandwidth-t.bandwidth}));<span class="code-keyword">var</span> d=(u=u.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!ce.isIncompatible(e.playlist)}))).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> ce.isEnabled(e.playlist)}));d.length||(d=u.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!ce.isDisabled(e.playlist)})));<span class="code-keyword">var</span> l=d.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth*si.BANDWIDTH_VARIANCE&lt;t})),c=l[l.length<span class="code-number">-1</span>],h=l.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===c.bandwidth}))[<span class="code-number">0</span>];<span class="code-keyword">if</span>(!<span class="code-number">1</span>===r){<span class="code-keyword">var</span> f=h||d[<span class="code-number">0</span>]||u[<span class="code-number">0</span>];<span class="code-keyword">if</span>(f&amp;&amp;f.playlist){<span class="code-keyword">var</span> p=<span class="code-string">"sortedPlaylistReps"</span>;<span class="code-keyword">return</span> h&amp;&amp;(p=<span class="code-string">"bandwidthBestRep"</span>),d[<span class="code-number">0</span>]&amp;&amp;(p=<span class="code-string">"enabledPlaylistReps"</span>),Ci(<span class="code-string">"choosing "</span>+Ui(f)+<span class="code-string">" using "</span>+p+<span class="code-string">" with options"</span>,s),f.playlist}<span class="code-keyword">return</span> Ci(<span class="code-string">"could not choose a playlist with options"</span>,s),<span class="code-literal">null</span>}<span class="code-keyword">var</span> m=l.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width&amp;&amp;e.height}));Mi(m,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.width-t.width}));<span class="code-keyword">var</span> g=m.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width===i&amp;&amp;e.height===n}));c=g[g.length<span class="code-number">-1</span>];<span class="code-keyword">var</span> y,v,_,T,b=g.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===c.bandwidth}))[<span class="code-number">0</span>];<span class="code-keyword">if</span>(b||(v=(y=m.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width&gt;i||e.height&gt;n}))).filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.width===y[<span class="code-number">0</span>].width&amp;&amp;e.height===y[<span class="code-number">0</span>].height})),c=v[v.length<span class="code-number">-1</span>],_=v.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.bandwidth===c.bandwidth}))[<span class="code-number">0</span>]),a.experimentalLeastPixelDiffSelector){<span class="code-keyword">var</span> S=m.map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.pixelDiff=<span class="code-built_in">Math</span>.abs(e.width-i)+<span class="code-built_in">Math</span>.abs(e.height-n),e}));Mi(S,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),T=S[<span class="code-number">0</span>]}<span class="code-keyword">var</span> w=T||_||b||h||d[<span class="code-number">0</span>]||u[<span class="code-number">0</span>];<span class="code-keyword">if</span>(w&amp;&amp;w.playlist){<span class="code-keyword">var</span> I=<span class="code-string">"sortedPlaylistReps"</span>;<span class="code-keyword">return</span> T?I=<span class="code-string">"leastPixelDiffRep"</span>:_?I=<span class="code-string">"resolutionPlusOneRep"</span>:b?I=<span class="code-string">"resolutionBestRep"</span>:h?I=<span class="code-string">"bandwidthBestRep"</span>:d[<span class="code-number">0</span>]&amp;&amp;(I=<span class="code-string">"enabledPlaylistReps"</span>),Ci(<span class="code-string">"choosing "</span>+Ui(w)+<span class="code-string">" using "</span>+I+<span class="code-string">" with options"</span>,s),w.playlist}<span class="code-keyword">return</span> Ci(<span class="code-string">"could not choose a playlist with options"</span>,s),<span class="code-literal">null</span>}},Fi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.useDevicePixelRatio&amp;&amp;<span class="code-built_in">window</span>.devicePixelRatio||<span class="code-number">1</span>;<span class="code-keyword">return</span> Ni(<span class="code-keyword">this</span>.playlists.master,<span class="code-keyword">this</span>.systemBandwidth,<span class="code-built_in">parseInt</span>(Ri(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"width"</span>),<span class="code-number">10</span>)*e,<span class="code-built_in">parseInt</span>(Ri(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"height"</span>),<span class="code-number">10</span>)*e,<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions,<span class="code-keyword">this</span>.masterPlaylistController_)},qi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r;<span class="code-keyword">if</span>(i&amp;&amp;i.cues)<span class="code-keyword">for</span>(n=i.cues.length;n--;)(r=i.cues[n]).startTime&gt;=e&amp;&amp;r.endTime&lt;=t&amp;&amp;i.removeCue(r)},Hi=<span class="code-number">9e4</span>,Gi=Hi,Wi=(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e*Hi},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e*t},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e/Hi},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e/t},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;<span class="code-built_in">isFinite</span>(e)}),Vi=<span class="code-number">1</span>/<span class="code-number">60</span>,ji=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.startOfSegment,i=e.duration,n=e.segment,r=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,u=a.segments,d=<span class="code-keyword">void</span> <span class="code-number">0</span>===u?[]:u,l=e.mediaIndex,c=e.partIndex,h=e.timeline,f=d.length<span class="code-number">-1</span>,p=<span class="code-string">"mediaIndex/partIndex increment"</span>;e.getMediaInfoForTime?p=<span class="code-string">"getMediaInfoForTime ("</span>+e.getMediaInfoForTime+<span class="code-string">")"</span>:e.isSyncRequest&amp;&amp;(p=<span class="code-string">"getSyncSegmentCandidate (isSyncRequest)"</span>),e.independent&amp;&amp;(p+=<span class="code-string">" with independent "</span>+e.independent);<span class="code-keyword">var</span> m=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> c,g=e.segment.uri?<span class="code-string">"segment"</span>:<span class="code-string">"pre-segment"</span>,y=m?$({<span class="code-attr">preloadSegment</span>:n})<span class="code-number">-1</span>:<span class="code-number">0</span>;<span class="code-keyword">return</span> g+<span class="code-string">" ["</span>+(s+l)+<span class="code-string">"/"</span>+(s+f)+<span class="code-string">"]"</span>+(m?<span class="code-string">" part ["</span>+c+<span class="code-string">"/"</span>+y+<span class="code-string">"]"</span>:<span class="code-string">""</span>)+<span class="code-string">" segment start/end ["</span>+n.start+<span class="code-string">" =&gt; "</span>+n.end+<span class="code-string">"]"</span>+(m?<span class="code-string">" part start/end ["</span>+r.start+<span class="code-string">" =&gt; "</span>+r.end+<span class="code-string">"]"</span>:<span class="code-string">""</span>)+<span class="code-string">" startOfSegment ["</span>+t+<span class="code-string">"] duration ["</span>+i+<span class="code-string">"] timeline ["</span>+h+<span class="code-string">"] selected by ["</span>+p+<span class="code-string">"] playlist ["</span>+o+<span class="code-string">"]"</span>},Xi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e+<span class="code-string">"TimingInfo"</span>},zi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;<span class="code-keyword">if</span>(i===n)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-string">"audio"</span>===r){<span class="code-keyword">var</span> s=t.lastTimelineChange({<span class="code-attr">type</span>:<span class="code-string">"main"</span>});<span class="code-keyword">return</span>!s||s.to!==n}<span class="code-keyword">if</span>(<span class="code-string">"main"</span>===r&amp;&amp;a){<span class="code-keyword">var</span> o=t.pendingTimelineChange({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>});<span class="code-keyword">return</span>!o||o.to!==n}<span class="code-keyword">return</span>!<span class="code-number">1</span>},Qi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segmentDuration,i=e.maxDuration;<span class="code-keyword">return</span>!!t&amp;&amp;<span class="code-built_in">Math</span>.round(t)&gt;i+N},Yi=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">if</span>(n=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>,!t)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"Initialization settings are required"</span>);<span class="code-keyword">if</span>(<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> t.currentTime)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"No currentTime getter specified"</span>);<span class="code-keyword">if</span>(!t.mediaSource)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"No MediaSource specified"</span>);<span class="code-keyword">return</span> n.bandwidth=t.bandwidth,n.throughput={<span class="code-attr">rate</span>:<span class="code-number">0</span>,<span class="code-attr">count</span>:<span class="code-number">0</span>},n.roundTrip=<span class="code-literal">NaN</span>,n.resetStats_(),n.mediaIndex=<span class="code-literal">null</span>,n.partIndex=<span class="code-literal">null</span>,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=<span class="code-keyword">void</span> <span class="code-number">0</span>,n.startingMediaInfo_=<span class="code-keyword">void</span> <span class="code-number">0</span>,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_=<span class="code-string">"INIT"</span>,n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!<span class="code-number">0</span>,n.parse708captions_=t.parse708captions,n.captionServices_=t.captionServices,n.experimentalExactManifestTimings=t.experimentalExactManifestTimings,n.checkBufferTimeout_=<span class="code-literal">null</span>,n.error_=<span class="code-keyword">void</span> <span class="code-number">0</span>,n.currentTimeline_=<span class="code-number">-1</span>,n.pendingSegment_=<span class="code-literal">null</span>,n.xhrOptions_=<span class="code-literal">null</span>,n.pendingSegments_=[],n.audioDisabled_=!<span class="code-number">1</span>,n.isPendingTimestampOffset_=!<span class="code-number">1</span>,n.gopBuffer_=[],n.timeMapping_=<span class="code-number">0</span>,n.safeAppend_=r.default.browser.IE_VERSION&gt;=<span class="code-number">11</span>,n.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>},n.playlistOfLastInitSegment_={<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-attr">video</span>:<span class="code-literal">null</span>},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={<span class="code-attr">id3</span>:[],<span class="code-attr">caption</span>:[]},n.waitingOnRemove_=!<span class="code-number">1</span>,n.quotaExceededErrorRetryTimeout_=<span class="code-literal">null</span>,n.activeInitSegmentId_=<span class="code-literal">null</span>,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={<span class="code-attr">segmentIndex</span>:<span class="code-number">0</span>,<span class="code-attr">time</span>:<span class="code-number">0</span>},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> n.trigger(<span class="code-string">"syncinfoupdate"</span>)},n.syncController_.on(<span class="code-string">"syncinfoupdate"</span>,n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener(<span class="code-string">"sourceopen"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.isEndOfStream_()||(n.ended_=!<span class="code-number">1</span>)})),n.fetchAtBuffer_=!<span class="code-number">1</span>,n.logger_=p(<span class="code-string">"SegmentLoader["</span>+n.loaderType_+<span class="code-string">"]"</span>),<span class="code-built_in">Object</span>.defineProperty(s(n),<span class="code-string">"state"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state_},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e!==<span class="code-keyword">this</span>.state_&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-keyword">this</span>.state_+<span class="code-string">" -&gt; "</span>+e),<span class="code-keyword">this</span>.state_=e,<span class="code-keyword">this</span>.trigger(<span class="code-string">"statechange"</span>))}}),n.sourceUpdater_.on(<span class="code-string">"ready"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class="code-string">"main"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class="code-string">"pendingtimelinechange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),<span class="code-string">"audio"</span>===n.loaderType_&amp;&amp;n.timelineChangeController_.on(<span class="code-string">"timelinechange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.hasEnoughInfoToLoad_()&amp;&amp;n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&amp;&amp;n.processCallQueue_()})),n}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.createTransmuxer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">new</span> hi;t.currentTransmux=<span class="code-literal">null</span>,t.transmuxQueue=[];<span class="code-keyword">var</span> i=t.terminate;<span class="code-keyword">return</span> t.terminate=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.currentTransmux=<span class="code-literal">null</span>,t.transmuxQueue.length=<span class="code-number">0</span>,i.call(t)},t.postMessage({<span class="code-attr">action</span>:<span class="code-string">"init"</span>,<span class="code-attr">options</span>:e}),t}({<span class="code-attr">remux</span>:!<span class="code-number">1</span>,<span class="code-attr">alignGopsAtEnd</span>:<span class="code-keyword">this</span>.safeAppend_,<span class="code-attr">keepOriginalTimestamps</span>:!<span class="code-number">0</span>,<span class="code-attr">parse708captions</span>:<span class="code-keyword">this</span>.parse708captions_,<span class="code-attr">captionServices</span>:<span class="code-keyword">this</span>.captionServices_})},i.resetStats_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaBytesTransferred=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequests=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsAborted=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsTimedout=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaRequestsErrored=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaTransferDuration=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaSecondsLoaded=<span class="code-number">0</span>,<span class="code-keyword">this</span>.mediaAppends=<span class="code-number">0</span>},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.state=<span class="code-string">"DISPOSED"</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.abort_(),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.terminate(),<span class="code-keyword">this</span>.resetStats_(),<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.syncController_&amp;&amp;<span class="code-keyword">this</span>.triggerSyncInfoUpdate_&amp;&amp;<span class="code-keyword">this</span>.syncController_.off(<span class="code-string">"syncinfoupdate"</span>,<span class="code-keyword">this</span>.triggerSyncInfoUpdate_),<span class="code-keyword">this</span>.off()},i.setAudio=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.audioDisabled_=!e,e?<span class="code-keyword">this</span>.appendInitSegment_.audio=!<span class="code-number">0</span>:<span class="code-keyword">this</span>.sourceUpdater_.removeAudio(<span class="code-number">0</span>,<span class="code-keyword">this</span>.duration_())},i.abort=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"WAITING"</span>===<span class="code-keyword">this</span>.state?(<span class="code-keyword">this</span>.abort_(),<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_()):<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;(<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>)},i.abort_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;<span class="code-keyword">this</span>.pendingSegment_.abortRequests&amp;&amp;<span class="code-keyword">this</span>.pendingSegment_.abortRequests(),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.callQueue_=[],<span class="code-keyword">this</span>.loadQueue_=[],<span class="code-keyword">this</span>.metadataQueue_.id3=[],<span class="code-keyword">this</span>.metadataQueue_.caption=[],<span class="code-keyword">this</span>.timelineChangeController_.clearPendingTimelineChange(<span class="code-keyword">this</span>.loaderType_),<span class="code-keyword">this</span>.waitingOnRemove_=!<span class="code-number">1</span>,<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.quotaExceededErrorRetryTimeout_),<span class="code-keyword">this</span>.quotaExceededErrorRetryTimeout_=<span class="code-literal">null</span>},i.checkForAbort_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"APPENDING"</span>!==<span class="code-keyword">this</span>.state||<span class="code-keyword">this</span>.pendingSegment_?!<span class="code-keyword">this</span>.pendingSegment_||<span class="code-keyword">this</span>.pendingSegment_.requestId!==e:(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,!<span class="code-number">0</span>)},i.error=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"error occurred:"</span>,e),<span class="code-keyword">this</span>.error_=e),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.error_},i.endOfStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ended_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxer_&amp;&amp;gi(<span class="code-keyword">this</span>.transmuxer_),<span class="code-keyword">this</span>.gopBuffer_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"ended"</span>)},i.buffered_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.getMediaInfo_();<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.sourceUpdater_||!e)<span class="code-keyword">return</span> r.default.createTimeRanges();<span class="code-keyword">if</span>(<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_){<span class="code-keyword">var</span> t=e.hasAudio,i=e.hasVideo,n=e.isMuxed;<span class="code-keyword">if</span>(i&amp;&amp;t&amp;&amp;!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;!n)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceUpdater_.buffered();<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceUpdater_.videoBuffered()}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.sourceUpdater_.audioBuffered()},i.initSegmentForMap=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=!<span class="code-number">1</span>),!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=Ne(e),n=<span class="code-keyword">this</span>.initSegments_[i];<span class="code-keyword">return</span> t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class="code-keyword">this</span>.initSegments_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">byterange</span>:e.byterange,<span class="code-attr">bytes</span>:e.bytes,<span class="code-attr">tracks</span>:e.tracks,<span class="code-attr">timescales</span>:e.timescales}),n||e},i.segmentKey=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=!<span class="code-number">1</span>),!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=Fe(e),n=<span class="code-keyword">this</span>.keyCache_[i];<span class="code-keyword">this</span>.cacheEncryptionKeys_&amp;&amp;t&amp;&amp;!n&amp;&amp;e.bytes&amp;&amp;(<span class="code-keyword">this</span>.keyCache_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">bytes</span>:e.bytes});<span class="code-keyword">var</span> r={<span class="code-attr">resolvedUri</span>:(n||e).resolvedUri};<span class="code-keyword">return</span> n&amp;&amp;(r.bytes=n.bytes),r},i.couldBeginLoading_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.playlist_&amp;&amp;!<span class="code-keyword">this</span>.paused()},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.monitorBuffer_(),<span class="code-keyword">this</span>.playlist_)<span class="code-keyword">return</span><span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_()?<span class="code-keyword">this</span>.init_():<span class="code-keyword">void</span>(!<span class="code-keyword">this</span>.couldBeginLoading_()||<span class="code-string">"READY"</span>!==<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-string">"INIT"</span>!==<span class="code-keyword">this</span>.state||(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>))},i.init_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.resetEverything(),<span class="code-keyword">this</span>.monitorBuffer_()},i.playlist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={}),e){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.playlist_,n=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.playlist_=e,<span class="code-keyword">this</span>.xhrOptions_=t,<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;(e.syncInfo={<span class="code-attr">mediaSequence</span>:e.mediaSequence,<span class="code-attr">time</span>:<span class="code-number">0</span>},<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;<span class="code-keyword">this</span>.syncController_.setDateTimeMappingForStart(e));<span class="code-keyword">var</span> r=<span class="code-literal">null</span>;<span class="code-keyword">if</span>(i&amp;&amp;(i.id?r=i.id:i.uri&amp;&amp;(r=i.uri)),<span class="code-keyword">this</span>.logger_(<span class="code-string">"playlist update ["</span>+r+<span class="code-string">" =&gt; "</span>+(e.id||e.uri)+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.init_();<span class="code-keyword">if</span>(!i||i.uri!==e.uri)<span class="code-keyword">return</span> <span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex&amp;&amp;(e.endList?<span class="code-keyword">this</span>.resyncLoader():<span class="code-keyword">this</span>.resetLoader()),<span class="code-keyword">this</span>.currentMediaInfo_=<span class="code-keyword">void</span> <span class="code-number">0</span>,<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"playlistupdate"</span>);<span class="code-keyword">var</span> a=e.mediaSequence-i.mediaSequence;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.logger_(<span class="code-string">"live window shift ["</span>+a+<span class="code-string">"]"</span>),<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex)<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.mediaIndex-=a,<span class="code-keyword">this</span>.mediaIndex&lt;<span class="code-number">0</span>)<span class="code-keyword">this</span>.mediaIndex=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.partIndex=<span class="code-literal">null</span>;<span class="code-keyword">else</span>{<span class="code-keyword">var</span> s=<span class="code-keyword">this</span>.playlist_.segments[<span class="code-keyword">this</span>.mediaIndex];<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.partIndex&amp;&amp;(!s.parts||!s.parts.length||!s.parts[<span class="code-keyword">this</span>.partIndex])){<span class="code-keyword">var</span> o=<span class="code-keyword">this</span>.mediaIndex;<span class="code-keyword">this</span>.logger_(<span class="code-string">"currently processing part (index "</span>+<span class="code-keyword">this</span>.partIndex+<span class="code-string">") no longer exists."</span>),<span class="code-keyword">this</span>.resetLoader(),<span class="code-keyword">this</span>.mediaIndex=o}}n&amp;&amp;(n.mediaIndex-=a,n.mediaIndex&lt;<span class="code-number">0</span>?(n.mediaIndex=<span class="code-literal">null</span>,n.partIndex=<span class="code-literal">null</span>):(n.mediaIndex&gt;=<span class="code-number">0</span>&amp;&amp;(n.segment=e.segments[n.mediaIndex]),n.partIndex&gt;=<span class="code-number">0</span>&amp;&amp;n.segment.parts&amp;&amp;(n.part=n.segment.parts[n.partIndex]))),<span class="code-keyword">this</span>.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;(<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=<span class="code-literal">null</span>)},i.paused=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>===<span class="code-keyword">this</span>.checkBufferTimeout_},i.resetEverything=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.ended_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>},<span class="code-keyword">this</span>.resetLoader(),<span class="code-keyword">this</span>.remove(<span class="code-number">0</span>,<span class="code-number">1</span>/<span class="code-number">0</span>,e),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;(<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearAllMp4Captions"</span>}),<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"reset"</span>}))},i.resetLoader=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.fetchAtBuffer_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.resyncLoader()},i.resyncLoader=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.transmuxer_&amp;&amp;gi(<span class="code-keyword">this</span>.transmuxer_),<span class="code-keyword">this</span>.mediaIndex=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.partIndex=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.syncPoint_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.isPendingTimestampOffset_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.callQueue_=[],<span class="code-keyword">this</span>.loadQueue_=[],<span class="code-keyword">this</span>.metadataQueue_.id3=[],<span class="code-keyword">this</span>.metadataQueue_.caption=[],<span class="code-keyword">this</span>.abort(),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearParsedMp4Captions"</span>})},i.remove=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{}),<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=!<span class="code-number">1</span>),t===<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;(t=<span class="code-keyword">this</span>.duration_()),t&lt;=e)<span class="code-keyword">this</span>.logger_(<span class="code-string">"skipping remove because end ${end} is &lt;= start ${start}"</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.sourceUpdater_&amp;&amp;<span class="code-keyword">this</span>.getMediaInfo_()){<span class="code-keyword">var</span> r=<span class="code-number">1</span>,a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-number">0</span>==--r&amp;&amp;i()};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s <span class="code-keyword">in</span>!n&amp;&amp;<span class="code-keyword">this</span>.audioDisabled_||(r++,<span class="code-keyword">this</span>.sourceUpdater_.removeAudio(e,t,a)),(n||<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_)&amp;&amp;(<span class="code-keyword">this</span>.gopBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Math</span>.ceil((t-n)*Gi),a=<span class="code-built_in">Math</span>.ceil((i-n)*Gi),s=e.slice(),o=e.length;o--&amp;&amp;!(e[o].pts&lt;=a););<span class="code-keyword">if</span>(<span class="code-number">-1</span>===o)<span class="code-keyword">return</span> s;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=o+<span class="code-number">1</span>;u--&amp;&amp;!(e[u].pts&lt;=r););<span class="code-keyword">return</span> u=<span class="code-built_in">Math</span>.max(u,<span class="code-number">0</span>),s.splice(u,o-u+<span class="code-number">1</span>),s}(<span class="code-keyword">this</span>.gopBuffer_,e,t,<span class="code-keyword">this</span>.timeMapping_),r++,<span class="code-keyword">this</span>.sourceUpdater_.removeVideo(e,t,a)),<span class="code-keyword">this</span>.inbandTextTracks_)qi(e,t,<span class="code-keyword">this</span>.inbandTextTracks_[s]);qi(e,t,<span class="code-keyword">this</span>.segmentMetadataTrack_),a()}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"skipping remove because no source updater or starting media info"</span>)},i.monitorBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=<span class="code-built_in">window</span>.setTimeout(<span class="code-keyword">this</span>.monitorBufferTick_.bind(<span class="code-keyword">this</span>),<span class="code-number">1</span>)},i.monitorBufferTick_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-string">"READY"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.fillBuffer_(),<span class="code-keyword">this</span>.checkBufferTimeout_&amp;&amp;<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.checkBufferTimeout_),<span class="code-keyword">this</span>.checkBufferTimeout_=<span class="code-built_in">window</span>.setTimeout(<span class="code-keyword">this</span>.monitorBufferTick_.bind(<span class="code-keyword">this</span>),<span class="code-number">500</span>)},i.fillBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.sourceUpdater_.updating()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.chooseNextRequest_();e&amp;&amp;(<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.timestampOffset&amp;&amp;(<span class="code-keyword">this</span>.isPendingTimestampOffset_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.timelineChangeController_.pendingTimelineChange({<span class="code-attr">type</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">from</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">to</span>:e.timeline})),<span class="code-keyword">this</span>.loadSegment_(e))}},i.isEndOfStream_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.mediaIndex),<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=<span class="code-keyword">this</span>.playlist_),<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-keyword">this</span>.partIndex),!t||!<span class="code-keyword">this</span>.mediaSource_)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> n=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e&amp;&amp;t.segments[e],r=e+<span class="code-number">1</span>===t.segments.length,a=!n||!n.parts||i+<span class="code-number">1</span>===n.parts.length;<span class="code-keyword">return</span> t.endList&amp;&amp;<span class="code-string">"open"</span>===<span class="code-keyword">this</span>.mediaSource_.readyState&amp;&amp;r&amp;&amp;a},i.chooseNextRequest_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.buffered_(),t=j(e)||<span class="code-number">0</span>,i=X(e,<span class="code-keyword">this</span>.currentTime_()),n=!<span class="code-keyword">this</span>.hasPlayed_()&amp;&amp;i&gt;=<span class="code-number">1</span>,r=i&gt;=<span class="code-keyword">this</span>.goalBufferLength_(),a=<span class="code-keyword">this</span>.playlist_.segments;<span class="code-keyword">if</span>(!a.length||n||r)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">this</span>.syncPoint_=<span class="code-keyword">this</span>.syncPoint_||<span class="code-keyword">this</span>.syncController_.getSyncPoint(<span class="code-keyword">this</span>.playlist_,<span class="code-keyword">this</span>.duration_(),<span class="code-keyword">this</span>.currentTimeline_,<span class="code-keyword">this</span>.currentTime_());<span class="code-keyword">var</span> s={<span class="code-attr">partIndex</span>:<span class="code-literal">null</span>,<span class="code-attr">mediaIndex</span>:<span class="code-literal">null</span>,<span class="code-attr">startOfSegment</span>:<span class="code-literal">null</span>,<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.playlist_,<span class="code-attr">isSyncRequest</span>:<span class="code-built_in">Boolean</span>(!<span class="code-keyword">this</span>.syncPoint_)};<span class="code-keyword">if</span>(s.isSyncRequest)s.mediaIndex=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{t=t||[];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=[],r=<span class="code-number">0</span>,a=<span class="code-number">0</span>;a&lt;t.length;a++){<span class="code-keyword">var</span> s=t[a];<span class="code-keyword">if</span>(e===s.timeline&amp;&amp;(n.push(a),(r+=s.duration)&gt;i))<span class="code-keyword">return</span> a}<span class="code-keyword">return</span> <span class="code-number">0</span>===n.length?<span class="code-number">0</span>:n[n.length<span class="code-number">-1</span>]}(<span class="code-keyword">this</span>.currentTimeline_,a,t);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex){<span class="code-keyword">var</span> o=a[<span class="code-keyword">this</span>.mediaIndex],u=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.partIndex?<span class="code-keyword">this</span>.partIndex:<span class="code-number">-1</span>;s.startOfSegment=o.end?o.end:t,o.parts&amp;&amp;o.parts[u+<span class="code-number">1</span>]?(s.mediaIndex=<span class="code-keyword">this</span>.mediaIndex,s.partIndex=u+<span class="code-number">1</span>):s.mediaIndex=<span class="code-keyword">this</span>.mediaIndex+<span class="code-number">1</span>}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> d=ce.getMediaInfoForTime({<span class="code-attr">experimentalExactManifestTimings</span>:<span class="code-keyword">this</span>.experimentalExactManifestTimings,<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.playlist_,<span class="code-attr">currentTime</span>:<span class="code-keyword">this</span>.fetchAtBuffer_?t:<span class="code-keyword">this</span>.currentTime_(),<span class="code-attr">startingPartIndex</span>:<span class="code-keyword">this</span>.syncPoint_.partIndex,<span class="code-attr">startingSegmentIndex</span>:<span class="code-keyword">this</span>.syncPoint_.segmentIndex,<span class="code-attr">startTime</span>:<span class="code-keyword">this</span>.syncPoint_.time}),l=d.segmentIndex,c=d.startTime,h=d.partIndex;s.getMediaInfoForTime=<span class="code-keyword">this</span>.fetchAtBuffer_?<span class="code-string">"bufferedEnd "</span>+t:<span class="code-string">"currentTime "</span>+<span class="code-keyword">this</span>.currentTime_(),s.mediaIndex=l,s.startOfSegment=c,s.partIndex=h}<span class="code-keyword">var</span> f=a[s.mediaIndex],p=f&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> s.partIndex&amp;&amp;f.parts&amp;&amp;f.parts[s.partIndex];<span class="code-keyword">if</span>(!f||<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> s.partIndex&amp;&amp;!p)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> s.partIndex&amp;&amp;f.parts&amp;&amp;(s.partIndex=<span class="code-number">0</span>,p=f.parts[<span class="code-number">0</span>]),!i&amp;&amp;p&amp;&amp;!p.independent)<span class="code-keyword">if</span>(<span class="code-number">0</span>===s.partIndex){<span class="code-keyword">var</span> m=a[s.mediaIndex<span class="code-number">-1</span>],g=m.parts&amp;&amp;m.parts.length&amp;&amp;m.parts[m.parts.length<span class="code-number">-1</span>];g&amp;&amp;g.independent&amp;&amp;(s.mediaIndex-=<span class="code-number">1</span>,s.partIndex=m.parts.length<span class="code-number">-1</span>,s.independent=<span class="code-string">"previous segment"</span>)}<span class="code-keyword">else</span> f.parts[s.partIndex<span class="code-number">-1</span>].independent&amp;&amp;(s.partIndex-=<span class="code-number">1</span>,s.independent=<span class="code-string">"previous part"</span>);<span class="code-keyword">var</span> y=<span class="code-keyword">this</span>.mediaSource_&amp;&amp;<span class="code-string">"ended"</span>===<span class="code-keyword">this</span>.mediaSource_.readyState;<span class="code-keyword">return</span> s.mediaIndex&gt;=a.length<span class="code-number">-1</span>&amp;&amp;y&amp;&amp;!<span class="code-keyword">this</span>.seeking_()?<span class="code-literal">null</span>:<span class="code-keyword">this</span>.generateSegmentInfo_(s)},i.generateSegmentInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.independent,i=e.playlist,n=e.mediaIndex,r=e.startOfSegment,a=e.isSyncRequest,s=e.partIndex,o=e.forceTimestampOffset,u=e.getMediaInfoForTime,d=i.segments[n],l=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> s&amp;&amp;d.parts[s],c={<span class="code-attr">requestId</span>:<span class="code-string">"segment-loader-"</span>+<span class="code-built_in">Math</span>.random(),<span class="code-attr">uri</span>:l&amp;&amp;l.resolvedUri||d.resolvedUri,<span class="code-attr">mediaIndex</span>:n,<span class="code-attr">partIndex</span>:l?s:<span class="code-literal">null</span>,<span class="code-attr">isSyncRequest</span>:a,<span class="code-attr">startOfSegment</span>:r,<span class="code-attr">playlist</span>:i,<span class="code-attr">bytes</span>:<span class="code-literal">null</span>,<span class="code-attr">encryptedBytes</span>:<span class="code-literal">null</span>,<span class="code-attr">timestampOffset</span>:<span class="code-literal">null</span>,<span class="code-attr">timeline</span>:d.timeline,<span class="code-attr">duration</span>:l&amp;&amp;l.duration||d.duration,<span class="code-attr">segment</span>:d,<span class="code-attr">part</span>:l,<span class="code-attr">byteLength</span>:<span class="code-number">0</span>,<span class="code-attr">transmuxer</span>:<span class="code-keyword">this</span>.transmuxer_,<span class="code-attr">getMediaInfoForTime</span>:u,<span class="code-attr">independent</span>:t},h=<span class="code-keyword">void</span> <span class="code-number">0</span>!==o?o:<span class="code-keyword">this</span>.isPendingTimestampOffset_;c.timestampOffset=<span class="code-keyword">this</span>.timestampOffsetForSegment_({<span class="code-attr">segmentTimeline</span>:d.timeline,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">startOfSegment</span>:r,<span class="code-attr">buffered</span>:<span class="code-keyword">this</span>.buffered_(),<span class="code-attr">overrideCheck</span>:h});<span class="code-keyword">var</span> f=j(<span class="code-keyword">this</span>.sourceUpdater_.audioBuffered());<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> f&amp;&amp;(c.audioAppendStart=f-<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset()),<span class="code-keyword">this</span>.sourceUpdater_.videoBuffered().length&amp;&amp;(c.gopsToAlignWith=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-literal">null</span>==t||!e.length)<span class="code-keyword">return</span>[];<span class="code-keyword">var</span> n,r=<span class="code-built_in">Math</span>.ceil((t-i+<span class="code-number">3</span>)*Gi);<span class="code-keyword">for</span>(n=<span class="code-number">0</span>;n&lt;e.length&amp;&amp;!(e[n].pts&gt;r);n++);<span class="code-keyword">return</span> e.slice(n)}(<span class="code-keyword">this</span>.gopBuffer_,<span class="code-keyword">this</span>.currentTime_()-<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(),<span class="code-keyword">this</span>.timeMapping_)),c},i.timestampOffsetForSegment_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> i=(t=e).segmentTimeline,n=t.currentTimeline,r=t.startOfSegment,a=t.buffered,t.overrideCheck||i!==n?i&lt;n?r:a.length?a.end(a.length<span class="code-number">-1</span>):r:<span class="code-literal">null</span>;<span class="code-keyword">var</span> t,i,n,r,a},i.earlyAbortWhenNeeded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.vhs_.tech_.paused()&amp;&amp;<span class="code-keyword">this</span>.xhrOptions_.timeout&amp;&amp;<span class="code-keyword">this</span>.playlist_.attributes.BANDWIDTH&amp;&amp;!(<span class="code-built_in">Date</span>.now()-(e.firstBytesReceivedAt||<span class="code-built_in">Date</span>.now())&lt;<span class="code-number">1e3</span>)){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.currentTime_(),i=e.bandwidth,n=<span class="code-keyword">this</span>.pendingSegment_.duration,r=ce.estimateSegmentRequestTime(n,i,<span class="code-keyword">this</span>.playlist_,e.bytesReceived),a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-number">1</span>),((e.length?e.end(e.length<span class="code-number">-1</span>):<span class="code-number">0</span>)-t)/i}(<span class="code-keyword">this</span>.buffered_(),t,<span class="code-keyword">this</span>.vhs_.tech_.playbackRate())<span class="code-number">-1</span>;<span class="code-keyword">if</span>(!(r&lt;=a)){<span class="code-keyword">var</span> s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.currentTime,i=e.bandwidth,n=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,u=e.master.playlists.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!ce.isIncompatible(e)})),d=u.filter(ce.isEnabled);d.length||(d=u.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!ce.isDisabled(e)})));<span class="code-keyword">var</span> l=d.filter(ce.hasAttribute.bind(<span class="code-literal">null</span>,<span class="code-string">"BANDWIDTH"</span>)).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> u=o.getSyncPoint(e,n,s,t)?<span class="code-number">1</span>:<span class="code-number">2</span>;<span class="code-keyword">return</span>{<span class="code-attr">playlist</span>:e,<span class="code-attr">rebufferingImpact</span>:ce.estimateSegmentRequestTime(r,i,e)*u-a}})),c=l.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.rebufferingImpact&lt;=<span class="code-number">0</span>}));<span class="code-keyword">return</span> Mi(c,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> Bi(t.playlist,e.playlist)})),c.length?c[<span class="code-number">0</span>]:(Mi(l,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.rebufferingImpact-t.rebufferingImpact})),l[<span class="code-number">0</span>]||<span class="code-literal">null</span>)}({<span class="code-attr">master</span>:<span class="code-keyword">this</span>.vhs_.playlists.master,<span class="code-attr">currentTime</span>:t,<span class="code-attr">bandwidth</span>:i,<span class="code-attr">duration</span>:<span class="code-keyword">this</span>.duration_(),<span class="code-attr">segmentDuration</span>:n,<span class="code-attr">timeUntilRebuffer</span>:a,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">syncController</span>:<span class="code-keyword">this</span>.syncController_});<span class="code-keyword">if</span>(s){<span class="code-keyword">var</span> o=r-a-s.rebufferingImpact,u=<span class="code-number">.5</span>;a&lt;=N&amp;&amp;(u=<span class="code-number">1</span>),!s.playlist||s.playlist.uri===<span class="code-keyword">this</span>.playlist_.uri||o&lt;u||(<span class="code-keyword">this</span>.bandwidth=s.playlist.attributes.BANDWIDTH*si.BANDWIDTH_VARIANCE+<span class="code-number">1</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"earlyabort"</span>))}}}},i.handleAbort_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.logger_(<span class="code-string">"Aborting "</span>+ji(e)),<span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>},i.handleProgress_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(t.stats),<span class="code-keyword">this</span>.checkForAbort_(t.requestId)||<span class="code-keyword">this</span>.trigger(<span class="code-string">"progress"</span>)},i.handleTrackInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),<span class="code-keyword">this</span>.checkForAbort_(e.requestId)||<span class="code-keyword">this</span>.checkForIllegalMediaSwitch(t)||(t=t||{},<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e&amp;&amp;!t||!e&amp;&amp;t||e&amp;&amp;!t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(e===t)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> i=<span class="code-built_in">Object</span>.keys(e).sort(),n=<span class="code-built_in">Object</span>.keys(t).sort();<span class="code-keyword">if</span>(i.length!==n.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-number">0</span>;r&lt;i.length;r++){<span class="code-keyword">var</span> a=i[r];<span class="code-keyword">if</span>(a!==n[r])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(e[a]!==t[a])<span class="code-keyword">return</span>!<span class="code-number">1</span>}<span class="code-keyword">return</span>!<span class="code-number">0</span>}(<span class="code-keyword">this</span>.currentMediaInfo_,t)||(<span class="code-keyword">this</span>.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>},<span class="code-keyword">this</span>.startingMediaInfo_=t,<span class="code-keyword">this</span>.currentMediaInfo_=t,<span class="code-keyword">this</span>.logger_(<span class="code-string">"trackinfo update"</span>,t),<span class="code-keyword">this</span>.trigger(<span class="code-string">"trackinfo"</span>)),<span class="code-keyword">this</span>.checkForAbort_(e.requestId)||(<span class="code-keyword">this</span>.pendingSegment_.trackInfo=t,<span class="code-keyword">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class="code-keyword">this</span>.processCallQueue_()))},i.handleTimingInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId)){<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.pendingSegment_,a=Xi(t);r[a]=r[a]||{},r[a][i]=n,<span class="code-keyword">this</span>.logger_(<span class="code-string">"timinginfo: "</span>+t+<span class="code-string">" - "</span>+i+<span class="code-string">" - "</span>+n),<span class="code-keyword">this</span>.hasEnoughInfoToAppend_()&amp;&amp;<span class="code-keyword">this</span>.processCallQueue_()}},i.handleCaptions_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId))<span class="code-keyword">if</span>(<span class="code-number">0</span>!==t.length)<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_.hasAppendedData_){<span class="code-keyword">var</span> n=<span class="code-literal">null</span>===<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()?<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset():<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r[e.stream]=r[e.stream]||{<span class="code-attr">startTime</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">captions</span>:[],<span class="code-attr">endTime</span>:<span class="code-number">0</span>};<span class="code-keyword">var</span> t=r[e.stream];t.startTime=<span class="code-built_in">Math</span>.min(t.startTime,e.startTime+n),t.endTime=<span class="code-built_in">Math</span>.max(t.endTime,e.endTime+n),t.captions.push(e)})),<span class="code-built_in">Object</span>.keys(r).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=r[e],a=t.startTime,s=t.endTime,o=t.captions,u=i.inbandTextTracks_;i.logger_(<span class="code-string">"adding cues from "</span>+a+<span class="code-string">" -&gt; "</span>+s+<span class="code-string">" for "</span>+e),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e[i]){t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-608"</span>}),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-608"</span>});<span class="code-keyword">var</span> n=i;<span class="code-regexp">/^cc708_/</span>.test(i)&amp;&amp;(n=<span class="code-string">"SERVICE"</span>+i.split(<span class="code-string">"_"</span>)[<span class="code-number">1</span>]);<span class="code-keyword">var</span> r=t.textTracks().getTrackById(n);<span class="code-keyword">if</span>(r)e[i]=r;<span class="code-keyword">else</span>{<span class="code-keyword">var</span> a=i,s=i,o=!<span class="code-number">1</span>,u=(t.options_.vhs&amp;&amp;t.options_.vhs.captionServices||{})[n];u&amp;&amp;(a=u.label,s=u.language,o=u.default),e[i]=t.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"captions"</span>,<span class="code-attr">id</span>:n,<span class="code-attr">default</span>:o,<span class="code-attr">label</span>:a,<span class="code-attr">language</span>:s},!<span class="code-number">1</span>).track}}}(u,i.vhs_.tech_,e),qi(a,s,u[e]),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;<span class="code-keyword">if</span>(i){<span class="code-keyword">var</span> r=<span class="code-built_in">window</span>.WebKitDataCue||<span class="code-built_in">window</span>.VTTCue;i.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=e.stream;t[i].addCue(<span class="code-keyword">new</span> r(e.startTime+n,e.endTime+n,e.text))}))}}({<span class="code-attr">captionArray</span>:o,<span class="code-attr">inbandTextTracks</span>:u,<span class="code-attr">timestampOffset</span>:n})})),<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearParsedMp4Captions"</span>})}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.metadataQueue_.caption.push(<span class="code-keyword">this</span>.handleCaptions_.bind(<span class="code-keyword">this</span>,e,t));<span class="code-keyword">else</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"SegmentLoader received no captions from a caption event"</span>)},i.handleId3_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId))<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_.hasAppendedData_){<span class="code-keyword">var</span> n=<span class="code-literal">null</span>===<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()?<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset():<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset();!<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">label</span>:<span class="code-string">"Timed Metadata"</span>},!<span class="code-number">1</span>).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(<span class="code-keyword">this</span>.inbandTextTracks_,i,<span class="code-keyword">this</span>.vhs_.tech_),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.inbandTextTracks,i=e.metadataArray,n=e.timestampOffset,a=e.videoDuration;<span class="code-keyword">if</span>(i){<span class="code-keyword">var</span> s=<span class="code-built_in">window</span>.WebKitDataCue||<span class="code-built_in">window</span>.VTTCue,o=t.metadataTrack_;<span class="code-keyword">if</span>(o&amp;&amp;(i.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.cueTime+n;!(<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> t||<span class="code-built_in">window</span>.isNaN(t)||t&lt;<span class="code-number">0</span>)&amp;&amp;t&lt;<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;e.frames.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">new</span> s(t,t,e.value||e.url||e.data||<span class="code-string">""</span>);i.frame=e,i.value=e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-built_in">Object</span>.defineProperties(e.frame,{<span class="code-attr">id</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"cue.frame.id is deprecated. Use cue.value.key instead."</span>),e.value.key}},<span class="code-attr">value</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"cue.frame.value is deprecated. Use cue.value.data instead."</span>),e.value.data}},<span class="code-attr">privateData</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"cue.frame.privateData is deprecated. Use cue.value.data instead."</span>),e.value.data}}})}(i),o.addCue(i)}))})),o.cues&amp;&amp;o.cues.length)){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=o.cues,d=[],l=<span class="code-number">0</span>;l&lt;u.length;l++)u[l]&amp;&amp;d.push(u[l]);<span class="code-keyword">var</span> c=d.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e[t.startTime]||[];<span class="code-keyword">return</span> i.push(t),e[t.startTime]=i,e}),{}),h=<span class="code-built_in">Object</span>.keys(c).sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Number</span>(e)-<span class="code-built_in">Number</span>(t)}));h.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=c[e],n=<span class="code-built_in">Number</span>(h[t+<span class="code-number">1</span>])||a;i.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.endTime=n}))}))}}}({<span class="code-attr">inbandTextTracks</span>:<span class="code-keyword">this</span>.inbandTextTracks_,<span class="code-attr">metadataArray</span>:t,<span class="code-attr">timestampOffset</span>:n,<span class="code-attr">videoDuration</span>:<span class="code-keyword">this</span>.duration_()})}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.metadataQueue_.id3.push(<span class="code-keyword">this</span>.handleId3_.bind(<span class="code-keyword">this</span>,e,t,i))},i.processMetadataQueue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.metadataQueue_.id3.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()})),<span class="code-keyword">this</span>.metadataQueue_.caption.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()})),<span class="code-keyword">this</span>.metadataQueue_.id3=[],<span class="code-keyword">this</span>.metadataQueue_.caption=[]},i.processCallQueue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.callQueue_;<span class="code-keyword">this</span>.callQueue_=[],e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()}))},i.processLoadQueue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.loadQueue_;<span class="code-keyword">this</span>.loadQueue_=[],e.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e()}))},i.hasEnoughInfoToLoad_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"audio"</span>!==<span class="code-keyword">this</span>.loaderType_)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">return</span>!(!e||<span class="code-keyword">this</span>.getCurrentMediaInfo_()&amp;&amp;zi({<span class="code-attr">timelineChangeController</span>:<span class="code-keyword">this</span>.timelineChangeController_,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">segmentTimeline</span>:e.timeline,<span class="code-attr">loaderType</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">audioDisabled</span>:<span class="code-keyword">this</span>.audioDisabled_}))},i.getCurrentMediaInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.pendingSegment_),e&amp;&amp;e.trackInfo||<span class="code-keyword">this</span>.currentMediaInfo_},i.getMediaInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.pendingSegment_),<span class="code-keyword">this</span>.getCurrentMediaInfo_(e)||<span class="code-keyword">this</span>.startingMediaInfo_},i.hasEnoughInfoToAppend_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.sourceUpdater_.ready())<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.waitingOnRemove_||<span class="code-keyword">this</span>.quotaExceededErrorRetryTimeout_)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.pendingSegment_,t=<span class="code-keyword">this</span>.getCurrentMediaInfo_();<span class="code-keyword">if</span>(!e||!t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;<span class="code-keyword">return</span>!(n&amp;&amp;!e.videoTimingInfo||i&amp;&amp;!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;!r&amp;&amp;!e.audioTimingInfo||zi({<span class="code-attr">timelineChangeController</span>:<span class="code-keyword">this</span>.timelineChangeController_,<span class="code-attr">currentTimeline</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">segmentTimeline</span>:e.timeline,<span class="code-attr">loaderType</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">audioDisabled</span>:<span class="code-keyword">this</span>.audioDisabled_}))},i.handleData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.earlyAbortWhenNeeded_(e.stats),!<span class="code-keyword">this</span>.checkForAbort_(e.requestId))<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.callQueue_.length&amp;&amp;<span class="code-keyword">this</span>.hasEnoughInfoToAppend_()){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.setTimeMapping_(i.timeline),<span class="code-keyword">this</span>.updateMediaSecondsLoaded_(i.part||i.segment),<span class="code-string">"closed"</span>!==<span class="code-keyword">this</span>.mediaSource_.readyState){<span class="code-keyword">if</span>(e.map&amp;&amp;(e.map=<span class="code-keyword">this</span>.initSegmentForMap(e.map,!<span class="code-number">0</span>),i.segment.map=e.map),e.key&amp;&amp;<span class="code-keyword">this</span>.segmentKey(e.key,!<span class="code-number">0</span>),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)<span class="code-keyword">this</span>.trigger(<span class="code-string">"fmp4"</span>),i.timingInfo.start=i[Xi(t.type)].start;<span class="code-keyword">else</span>{<span class="code-keyword">var</span> n,r=<span class="code-keyword">this</span>.getCurrentMediaInfo_(),a=<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;r&amp;&amp;r.hasVideo;a&amp;&amp;(n=i.videoTimingInfo.start),i.timingInfo.start=<span class="code-keyword">this</span>.trueSegmentStart_({<span class="code-attr">currentStart</span>:i.timingInfo.start,<span class="code-attr">playlist</span>:i.playlist,<span class="code-attr">mediaIndex</span>:i.mediaIndex,<span class="code-attr">currentVideoTimestampOffset</span>:<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(),<span class="code-attr">useVideoTimingInfo</span>:a,<span class="code-attr">firstVideoFrameTimeForData</span>:n,<span class="code-attr">videoTimingInfo</span>:i.videoTimingInfo,<span class="code-attr">audioTimingInfo</span>:i.audioTimingInfo})}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.updateAppendInitSegmentStatus(i,t.type),<span class="code-keyword">this</span>.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){<span class="code-keyword">this</span>.updateTimingInfoEnd_(i),<span class="code-keyword">this</span>.syncController_.saveSegmentTimingInfo({<span class="code-attr">segmentInfo</span>:i,<span class="code-attr">shouldSaveTimelineMapping</span>:<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_});<span class="code-keyword">var</span> s=<span class="code-keyword">this</span>.chooseNextRequest_();<span class="code-keyword">if</span>(s.mediaIndex!==i.mediaIndex||s.partIndex!==i.partIndex)<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"sync segment was incorrect, not appending"</span>);<span class="code-keyword">this</span>.logger_(<span class="code-string">"sync segment was correct, appending"</span>)}i.hasAppendedData_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.processMetadataQueue_(),<span class="code-keyword">this</span>.appendData_(i,t)}}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.callQueue_.push(<span class="code-keyword">this</span>.handleData_.bind(<span class="code-keyword">this</span>,e,t))},i.updateAppendInitSegmentStatus=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-string">"main"</span>!==<span class="code-keyword">this</span>.loaderType_||<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e.timestampOffset||e.changedTimestampOffset||(<span class="code-keyword">this</span>.appendInitSegment_={<span class="code-attr">audio</span>:!<span class="code-number">0</span>,<span class="code-attr">video</span>:!<span class="code-number">0</span>}),<span class="code-keyword">this</span>.playlistOfLastInitSegment_[t]!==e.playlist&amp;&amp;(<span class="code-keyword">this</span>.appendInitSegment_[t]=!<span class="code-number">0</span>)},i.getInitSegmentAndUpdateState_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.initSegment,n=e.map,r=e.playlist;<span class="code-keyword">if</span>(n){<span class="code-keyword">var</span> a=Ne(n);<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.activeInitSegmentId_===a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;i=<span class="code-keyword">this</span>.initSegmentForMap(n,!<span class="code-number">0</span>).bytes,<span class="code-keyword">this</span>.activeInitSegmentId_=a}<span class="code-keyword">return</span> i&amp;&amp;<span class="code-keyword">this</span>.appendInitSegment_[t]?(<span class="code-keyword">this</span>.playlistOfLastInitSegment_[t]=r,<span class="code-keyword">this</span>.appendInitSegment_[t]=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.activeInitSegmentId_=<span class="code-literal">null</span>,i):<span class="code-literal">null</span>},i.handleQuotaExceededError_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>,n=e.segmentInfo,r=e.type,a=e.bytes,s=<span class="code-keyword">this</span>.sourceUpdater_.audioBuffered(),o=<span class="code-keyword">this</span>.sourceUpdater_.videoBuffered();s.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">this</span>.logger_(<span class="code-string">"On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "</span>+V(s).join(<span class="code-string">", "</span>)),o.length&gt;<span class="code-number">1</span>&amp;&amp;<span class="code-keyword">this</span>.logger_(<span class="code-string">"On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "</span>+V(o).join(<span class="code-string">", "</span>));<span class="code-keyword">var</span> u=s.length?s.start(<span class="code-number">0</span>):<span class="code-number">0</span>,d=s.length?s.end(s.length<span class="code-number">-1</span>):<span class="code-number">0</span>,l=o.length?o.start(<span class="code-number">0</span>):<span class="code-number">0</span>,c=o.length?o.end(o.length<span class="code-number">-1</span>):<span class="code-number">0</span>;<span class="code-keyword">if</span>(d-u&lt;=<span class="code-number">1</span>&amp;&amp;c-l&lt;=<span class="code-number">1</span>)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "</span>+a.byteLength+<span class="code-string">", audio buffer: "</span>+V(s).join(<span class="code-string">", "</span>)+<span class="code-string">", video buffer: "</span>+V(o).join(<span class="code-string">", "</span>)+<span class="code-string">", "</span>),<span class="code-keyword">this</span>.error({<span class="code-attr">message</span>:<span class="code-string">"Quota exceeded error with append of a single segment of content"</span>,<span class="code-attr">excludeUntil</span>:<span class="code-number">1</span>/<span class="code-number">0</span>}),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>);<span class="code-keyword">this</span>.waitingOnRemove_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.callQueue_.push(<span class="code-keyword">this</span>.appendToSourceBuffer_.bind(<span class="code-keyword">this</span>,{<span class="code-attr">segmentInfo</span>:n,<span class="code-attr">type</span>:r,<span class="code-attr">bytes</span>:a}));<span class="code-keyword">var</span> h=<span class="code-keyword">this</span>.currentTime_()<span class="code-number">-1</span>;<span class="code-keyword">this</span>.logger_(<span class="code-string">"On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "</span>+h),<span class="code-keyword">this</span>.remove(<span class="code-number">0</span>,h,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.logger_(<span class="code-string">"On QUOTA_EXCEEDED_ERR, retrying append in 1s"</span>),i.waitingOnRemove_=!<span class="code-number">1</span>,i.quotaExceededErrorRetryTimeout_=<span class="code-built_in">window</span>.setTimeout((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.logger_(<span class="code-string">"On QUOTA_EXCEEDED_ERR, re-processing call queue"</span>),i.quotaExceededErrorRetryTimeout_=<span class="code-literal">null</span>,i.processCallQueue_()}),<span class="code-number">1e3</span>)}),!<span class="code-number">0</span>)},i.handleAppendError_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.segmentInfo,n=e.type,r=e.bytes;t&amp;&amp;(<span class="code-number">22</span>!==t.code?(<span class="code-keyword">this</span>.logger_(<span class="code-string">"Received non QUOTA_EXCEEDED_ERR on append"</span>,t),<span class="code-keyword">this</span>.error(n+<span class="code-string">" append of "</span>+r.length+<span class="code-string">"b failed for segment #"</span>+i.mediaIndex+<span class="code-string">" in playlist "</span>+i.playlist.id),<span class="code-keyword">this</span>.trigger(<span class="code-string">"appenderror"</span>)):<span class="code-keyword">this</span>.handleQuotaExceededError_({<span class="code-attr">segmentInfo</span>:i,<span class="code-attr">type</span>:n,<span class="code-attr">bytes</span>:r}))},i.appendToSourceBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n,r=e.segmentInfo,a=e.type,s=e.initSegment,o=e.data,u=e.bytes;<span class="code-keyword">if</span>(!u){<span class="code-keyword">var</span> d=[o],l=o.byteLength;s&amp;&amp;(d.unshift(s),l+=s.byteLength),n=<span class="code-number">0</span>,(t={<span class="code-attr">bytes</span>:l,<span class="code-attr">segments</span>:d}).bytes&amp;&amp;(i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.bytes),t.segments.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.set(e,n),n+=e.byteLength}))),u=i}<span class="code-keyword">this</span>.sourceUpdater_.appendBuffer({<span class="code-attr">segmentInfo</span>:r,<span class="code-attr">type</span>:a,<span class="code-attr">bytes</span>:u},<span class="code-keyword">this</span>.handleAppendError_.bind(<span class="code-keyword">this</span>,{<span class="code-attr">segmentInfo</span>:r,<span class="code-attr">type</span>:a,<span class="code-attr">bytes</span>:u}))},i.handleSegmentTimingInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;t===<span class="code-keyword">this</span>.pendingSegment_.requestId){<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.pendingSegment_.segment,r=e+<span class="code-string">"TimingInfo"</span>;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||<span class="code-number">0</span>,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.type,n=t.data;<span class="code-keyword">if</span>(n&amp;&amp;n.byteLength&amp;&amp;(<span class="code-string">"audio"</span>!==i||!<span class="code-keyword">this</span>.audioDisabled_)){<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.getInitSegmentAndUpdateState_({<span class="code-attr">type</span>:i,<span class="code-attr">initSegment</span>:t.initSegment,<span class="code-attr">playlist</span>:e.playlist,<span class="code-attr">map</span>:e.isFmp4?e.segment.map:<span class="code-literal">null</span>});<span class="code-keyword">this</span>.appendToSourceBuffer_({<span class="code-attr">segmentInfo</span>:e,<span class="code-attr">type</span>:i,<span class="code-attr">initSegment</span>:r,<span class="code-attr">data</span>:n})}},i.loadSegment_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING"</span>,<span class="code-keyword">this</span>.pendingSegment_=e,<span class="code-keyword">this</span>.trimBackBuffer_(e),<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.timestampOffset&amp;&amp;<span class="code-keyword">this</span>.transmuxer_&amp;&amp;<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"clearAllMp4Captions"</span>}),<span class="code-keyword">this</span>.hasEnoughInfoToLoad_()?<span class="code-keyword">this</span>.updateTransmuxerAndRequestSegment_(e):<span class="code-keyword">this</span>.loadQueue_.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=m({},e,{<span class="code-attr">forceTimestampOffset</span>:!<span class="code-number">0</span>});m(e,t.generateSegmentInfo_(i)),t.isPendingTimestampOffset_=!<span class="code-number">1</span>,t.updateTransmuxerAndRequestSegment_(e)}))},i.updateTransmuxerAndRequestSegment_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&amp;&amp;(<span class="code-keyword">this</span>.gopBuffer_.length=<span class="code-number">0</span>,e.gopsToAlignWith=[],<span class="code-keyword">this</span>.timeMapping_=<span class="code-number">0</span>,<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"reset"</span>}),<span class="code-keyword">this</span>.transmuxer_.postMessage({<span class="code-attr">action</span>:<span class="code-string">"setTimestampOffset"</span>,<span class="code-attr">timestampOffset</span>:e.timestampOffset}));<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.createSimplifiedSegmentObj_(e),n=<span class="code-keyword">this</span>.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex,a=e.timeline!==<span class="code-keyword">this</span>.currentTimeline_&amp;&amp;e.timeline&gt;<span class="code-number">0</span>,s=n||r&amp;&amp;a;<span class="code-keyword">this</span>.logger_(<span class="code-string">"Requesting "</span>+ji(e)),i.map&amp;&amp;!i.map.bytes&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"going to request init segment."</span>),<span class="code-keyword">this</span>.appendInitSegment_={<span class="code-attr">video</span>:!<span class="code-number">0</span>,<span class="code-attr">audio</span>:!<span class="code-number">0</span>}),e.abortRequests=Li({<span class="code-attr">xhr</span>:<span class="code-keyword">this</span>.vhs_.xhr,<span class="code-attr">xhrOptions</span>:<span class="code-keyword">this</span>.xhrOptions_,<span class="code-attr">decryptionWorker</span>:<span class="code-keyword">this</span>.decrypter_,<span class="code-attr">segment</span>:i,<span class="code-attr">abortFn</span>:<span class="code-keyword">this</span>.handleAbort_.bind(<span class="code-keyword">this</span>,e),<span class="code-attr">progressFn</span>:<span class="code-keyword">this</span>.handleProgress_.bind(<span class="code-keyword">this</span>),<span class="code-attr">trackInfoFn</span>:<span class="code-keyword">this</span>.handleTrackInfo_.bind(<span class="code-keyword">this</span>),<span class="code-attr">timingInfoFn</span>:<span class="code-keyword">this</span>.handleTimingInfo_.bind(<span class="code-keyword">this</span>),<span class="code-attr">videoSegmentTimingInfoFn</span>:<span class="code-keyword">this</span>.handleSegmentTimingInfo_.bind(<span class="code-keyword">this</span>,<span class="code-string">"video"</span>,e.requestId),<span class="code-attr">audioSegmentTimingInfoFn</span>:<span class="code-keyword">this</span>.handleSegmentTimingInfo_.bind(<span class="code-keyword">this</span>,<span class="code-string">"audio"</span>,e.requestId),<span class="code-attr">captionsFn</span>:<span class="code-keyword">this</span>.handleCaptions_.bind(<span class="code-keyword">this</span>),<span class="code-attr">isEndOfTimeline</span>:s,<span class="code-attr">endedTimelineFn</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.logger_(<span class="code-string">"received endedtimeline callback"</span>)},<span class="code-attr">id3Fn</span>:<span class="code-keyword">this</span>.handleId3_.bind(<span class="code-keyword">this</span>),<span class="code-attr">dataFn</span>:<span class="code-keyword">this</span>.handleData_.bind(<span class="code-keyword">this</span>),<span class="code-attr">doneFn</span>:<span class="code-keyword">this</span>.segmentRequestFinished_.bind(<span class="code-keyword">this</span>),<span class="code-attr">onTransmuxerLog</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=i.message,r=i.level,a=i.stream;t.logger_(ji(e)+<span class="code-string">" logged from transmuxer stream "</span>+a+<span class="code-string">" as a "</span>+r+<span class="code-string">": "</span>+n)}})},i.trimBackBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=t-si.BACK_BUFFER_LENGTH;e.length&amp;&amp;(n=<span class="code-built_in">Math</span>.max(n,e.start(<span class="code-number">0</span>)));<span class="code-keyword">var</span> r=t-i;<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(r,n)}(<span class="code-keyword">this</span>.seekable_(),<span class="code-keyword">this</span>.currentTime_(),<span class="code-keyword">this</span>.playlist_.targetDuration||<span class="code-number">10</span>);t&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.remove(<span class="code-number">0</span>,t)},i.createSimplifiedSegmentObj_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segment,i=e.part,n={<span class="code-attr">resolvedUri</span>:i?i.resolvedUri:t.resolvedUri,<span class="code-attr">byterange</span>:i?i.byterange:t.byterange,<span class="code-attr">requestId</span>:e.requestId,<span class="code-attr">transmuxer</span>:e.transmuxer,<span class="code-attr">audioAppendStart</span>:e.audioAppendStart,<span class="code-attr">gopsToAlignWith</span>:e.gopsToAlignWith,<span class="code-attr">part</span>:e.part},r=e.playlist.segments[e.mediaIndex<span class="code-number">-1</span>];<span class="code-keyword">if</span>(r&amp;&amp;r.timeline===t.timeline&amp;&amp;(r.videoTimingInfo?n.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&amp;&amp;(n.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){<span class="code-keyword">var</span> a=t.key.iv||<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([<span class="code-number">0</span>,<span class="code-number">0</span>,<span class="code-number">0</span>,e.mediaIndex+e.playlist.mediaSequence]);n.key=<span class="code-keyword">this</span>.segmentKey(t.key),n.key.iv=a}<span class="code-keyword">return</span> t.map&amp;&amp;(n.map=<span class="code-keyword">this</span>.initSegmentForMap(t.map)),n},i.saveTransferStats_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.mediaRequests+=<span class="code-number">1</span>,e&amp;&amp;(<span class="code-keyword">this</span>.mediaBytesTransferred+=e.bytesReceived,<span class="code-keyword">this</span>.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.pendingSegment_.byteLength=t.bytesReceived,e&lt;Vi?<span class="code-keyword">this</span>.logger_(<span class="code-string">"Ignoring segment's bandwidth because its duration of "</span>+e+<span class="code-string">" is less than the min to record 0.016666666666666666"</span>):(<span class="code-keyword">this</span>.bandwidth=t.bandwidth,<span class="code-keyword">this</span>.roundTrip=t.roundTripTime)},i.handleTimeout_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mediaRequestsTimedout+=<span class="code-number">1</span>,<span class="code-keyword">this</span>.bandwidth=<span class="code-number">1</span>,<span class="code-keyword">this</span>.roundTrip=<span class="code-literal">NaN</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"bandwidthupdate"</span>)},i.segmentRequestFinished_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.callQueue_.length)<span class="code-keyword">this</span>.callQueue_.push(<span class="code-keyword">this</span>.segmentRequestFinished_.bind(<span class="code-keyword">this</span>,e,t,i));<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-keyword">this</span>.saveTransferStats_(t.stats),<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;t.requestId===<span class="code-keyword">this</span>.pendingSegment_.requestId){<span class="code-keyword">if</span>(e){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,e.code===_i)<span class="code-keyword">return</span>;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.pause(),e.code===vi?<span class="code-keyword">void</span> <span class="code-keyword">this</span>.handleTimeout_():(<span class="code-keyword">this</span>.mediaRequestsErrored+=<span class="code-number">1</span>,<span class="code-keyword">this</span>.error(e),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>))}<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&amp;&amp;(<span class="code-keyword">this</span>.gopBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!t.length)<span class="code-keyword">return</span> e;<span class="code-keyword">if</span>(i)<span class="code-keyword">return</span> t.slice();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=t[<span class="code-number">0</span>].pts,r=<span class="code-number">0</span>;r&lt;e.length&amp;&amp;!(e[r].pts&gt;=n);r++);<span class="code-keyword">return</span> e.slice(<span class="code-number">0</span>,r).concat(t)}(<span class="code-keyword">this</span>.gopBuffer_,i.gopInfo,<span class="code-keyword">this</span>.safeAppend_)),<span class="code-keyword">this</span>.state=<span class="code-string">"APPENDING"</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"appending"</span>),<span class="code-keyword">this</span>.waitForAppendsToComplete_(n)}},i.setTimeMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.syncController_.mappingForTimeline(e);<span class="code-literal">null</span>!==t&amp;&amp;(<span class="code-keyword">this</span>.timeMapping_=t)},i.updateMediaSecondsLoaded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.start&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.end?<span class="code-keyword">this</span>.mediaSecondsLoaded+=e.end-e.start:<span class="code-keyword">this</span>.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>!==e&amp;&amp;(<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;e!==<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()||!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;e!==<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,u=e.audioTimingInfo;<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==t)<span class="code-keyword">return</span> t;<span class="code-keyword">if</span>(!s)<span class="code-keyword">return</span> u.start;<span class="code-keyword">var</span> d=i.segments[n<span class="code-number">-1</span>];<span class="code-keyword">return</span> <span class="code-number">0</span>!==n&amp;&amp;d&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==d.start&amp;&amp;d.end===r+a?o.start:r},i.waitForAppendsToComplete_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.getCurrentMediaInfo_(e);<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error({<span class="code-attr">message</span>:<span class="code-string">"No starting media returned, likely due to an unsupported media format."</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>}),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>);<span class="code-keyword">var</span> i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,a=<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;n,s=!<span class="code-keyword">this</span>.audioDisabled_&amp;&amp;i&amp;&amp;!r;<span class="code-keyword">if</span>(e.waitingOnAppends=<span class="code-number">0</span>,!e.hasAppendedData_)<span class="code-keyword">return</span> e.timingInfo||<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> e.timestampOffset||(<span class="code-keyword">this</span>.isPendingTimestampOffset_=!<span class="code-number">0</span>),e.timingInfo={<span class="code-attr">start</span>:<span class="code-number">0</span>},e.waitingOnAppends++,<span class="code-keyword">this</span>.isPendingTimestampOffset_||(<span class="code-keyword">this</span>.updateSourceBufferTimestampOffset_(e),<span class="code-keyword">this</span>.processMetadataQueue_()),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.checkAppendsDone_(e);a&amp;&amp;e.waitingOnAppends++,s&amp;&amp;e.waitingOnAppends++,a&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.videoQueueCallback(<span class="code-keyword">this</span>.checkAppendsDone_.bind(<span class="code-keyword">this</span>,e)),s&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.audioQueueCallback(<span class="code-keyword">this</span>.checkAppendsDone_.bind(<span class="code-keyword">this</span>,e))},i.checkAppendsDone_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.checkForAbort_(e.requestId)||(e.waitingOnAppends--,<span class="code-number">0</span>===e.waitingOnAppends&amp;&amp;<span class="code-keyword">this</span>.handleAppendsDone_())},i.checkForIllegalMediaSwitch=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"main"</span>===e&amp;&amp;t&amp;&amp;i?i.hasAudio||i.hasVideo?t.hasVideo&amp;&amp;!i.hasVideo?<span class="code-string">"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest."</span>:!t.hasVideo&amp;&amp;i.hasVideo?<span class="code-string">"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest."</span>:<span class="code-literal">null</span>:<span class="code-string">"Neither audio nor video found in segment."</span>:<span class="code-literal">null</span>}(<span class="code-keyword">this</span>.loaderType_,<span class="code-keyword">this</span>.getCurrentMediaInfo_(),e);<span class="code-keyword">return</span>!!t&amp;&amp;(<span class="code-keyword">this</span>.error({<span class="code-attr">message</span>:t,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>}),<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>),!<span class="code-number">0</span>)},i.updateSourceBufferTimestampOffset_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==e.timestampOffset&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.timingInfo.start&amp;&amp;!e.changedTimestampOffset&amp;&amp;<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_){<span class="code-keyword">var</span> t=!<span class="code-number">1</span>;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!<span class="code-number">0</span>,e.timestampOffset!==<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset()&amp;&amp;(<span class="code-keyword">this</span>.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!<span class="code-number">0</span>),e.timestampOffset!==<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset()&amp;&amp;(<span class="code-keyword">this</span>.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!<span class="code-number">0</span>),t&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestampoffset"</span>)}},i.updateTimingInfoEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.timingInfo=e.timingInfo||{};<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.getMediaInfo_(),i=<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_&amp;&amp;t&amp;&amp;t.hasVideo&amp;&amp;e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&amp;&amp;(e.timingInfo.end=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.end?i.end:i.start+e.duration)},i.handleAppendsDone_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.pendingSegment_&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"appendsdone"</span>),!<span class="code-keyword">this</span>.pendingSegment_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_());<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.updateTimingInfoEnd_(e),<span class="code-keyword">this</span>.shouldSaveSegmentTimingInfo_&amp;&amp;<span class="code-keyword">this</span>.syncController_.saveSegmentTimingInfo({<span class="code-attr">segmentInfo</span>:e,<span class="code-attr">shouldSaveTimelineMapping</span>:<span class="code-string">"main"</span>===<span class="code-keyword">this</span>.loaderType_});<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"hls"</span>!==t)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i,n,r=(i={<span class="code-attr">audioTimingInfo</span>:e.audioTimingInfo,<span class="code-attr">videoTimingInfo</span>:e.videoTimingInfo},n=<span class="code-number">0</span>,[<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=i[e+<span class="code-string">"TimingInfo"</span>];<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> r,a=t.start,s=t.end;<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> a||<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> s?r=<span class="code-built_in">window</span>.BigInt(s)-<span class="code-built_in">window</span>.BigInt(a):<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> a&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> s&amp;&amp;(r=s-a),<span class="code-keyword">void</span> <span class="code-number">0</span>!==r&amp;&amp;r&gt;n&amp;&amp;(n=r)}})),<span class="code-string">"bigint"</span>==<span class="code-keyword">typeof</span> n&amp;&amp;n&lt;<span class="code-built_in">Number</span>.MAX_SAFE_INTEGER&amp;&amp;(n=<span class="code-built_in">Number</span>(n)),n);<span class="code-keyword">if</span>(!r)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> a=e.playlist.targetDuration,s=Qi({<span class="code-attr">segmentDuration</span>:r,<span class="code-attr">maxDuration</span>:<span class="code-number">2</span>*a}),o=Qi({<span class="code-attr">segmentDuration</span>:r,<span class="code-attr">maxDuration</span>:a}),u=<span class="code-string">"Segment with index "</span>+e.mediaIndex+<span class="code-string">" from playlist "</span>+e.playlist.id+<span class="code-string">" has a duration of "</span>+r+<span class="code-string">" when the reported duration is "</span>+e.duration+<span class="code-string">" and the target duration is "</span>+a+<span class="code-string">". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"</span>;<span class="code-keyword">return</span> s||o?{<span class="code-attr">severity</span>:s?<span class="code-string">"warn"</span>:<span class="code-string">"info"</span>,<span class="code-attr">message</span>:u}:<span class="code-literal">null</span>}(e,<span class="code-keyword">this</span>.sourceType_);<span class="code-keyword">if</span>(t&amp;&amp;(<span class="code-string">"warn"</span>===t.severity?r.default.log.warn(t.message):<span class="code-keyword">this</span>.logger_(t.message)),<span class="code-keyword">this</span>.recordThroughput_(e),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,!e.isSyncRequest||(<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),e.hasAppendedData_)){<span class="code-keyword">this</span>.logger_(<span class="code-string">"Appended "</span>+ji(e)),<span class="code-keyword">this</span>.addSegmentMetadataCue_(e),<span class="code-keyword">this</span>.fetchAtBuffer_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.currentTimeline_!==e.timeline&amp;&amp;(<span class="code-keyword">this</span>.timelineChangeController_.lastTimelineChange({<span class="code-attr">type</span>:<span class="code-keyword">this</span>.loaderType_,<span class="code-attr">from</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">to</span>:e.timeline}),<span class="code-string">"main"</span>!==<span class="code-keyword">this</span>.loaderType_||<span class="code-keyword">this</span>.audioDisabled_||<span class="code-keyword">this</span>.timelineChangeController_.lastTimelineChange({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">from</span>:<span class="code-keyword">this</span>.currentTimeline_,<span class="code-attr">to</span>:e.timeline})),<span class="code-keyword">this</span>.currentTimeline_=e.timeline,<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>);<span class="code-keyword">var</span> i=e.segment,n=e.part,a=i.end&amp;&amp;<span class="code-keyword">this</span>.currentTime_()-i.end&gt;<span class="code-number">3</span>*e.playlist.targetDuration,s=n&amp;&amp;n.end&amp;&amp;<span class="code-keyword">this</span>.currentTime_()-n.end&gt;<span class="code-number">3</span>*e.playlist.partTargetDuration;<span class="code-keyword">if</span>(a||s)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"bad "</span>+(a?<span class="code-string">"segment"</span>:<span class="code-string">"part"</span>)+<span class="code-string">" "</span>+ji(e)),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.resetEverything();<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.mediaIndex&amp;&amp;<span class="code-keyword">this</span>.trigger(<span class="code-string">"bandwidthupdate"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"progress"</span>),<span class="code-keyword">this</span>.mediaIndex=e.mediaIndex,<span class="code-keyword">this</span>.partIndex=e.partIndex,<span class="code-keyword">this</span>.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&amp;&amp;<span class="code-keyword">this</span>.endOfStream(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"appended"</span>),e.hasAppendedData_&amp;&amp;<span class="code-keyword">this</span>.mediaAppends++,<span class="code-keyword">this</span>.paused()||<span class="code-keyword">this</span>.monitorBuffer_()}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Throwing away un-appended sync request "</span>+ji(e))},i.recordThroughput_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e.duration&lt;Vi)<span class="code-keyword">this</span>.logger_(<span class="code-string">"Ignoring segment's throughput because its duration of "</span>+e.duration+<span class="code-string">" is less than the min to record 0.016666666666666666"</span>);<span class="code-keyword">else</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.throughput.rate,i=<span class="code-built_in">Date</span>.now()-e.endOfAllRequests+<span class="code-number">1</span>,n=<span class="code-built_in">Math</span>.floor(e.byteLength/i*<span class="code-number">8</span>*<span class="code-number">1e3</span>);<span class="code-keyword">this</span>.throughput.rate+=(n-t)/++<span class="code-keyword">this</span>.throughput.count}},i.addSegmentMetadataCue_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.segmentMetadataTrack_){<span class="code-keyword">var</span> t=e.segment,i=t.start,n=t.end;<span class="code-keyword">if</span>(Wi(i)&amp;&amp;Wi(n)){qi(i,n,<span class="code-keyword">this</span>.segmentMetadataTrack_);<span class="code-keyword">var</span> r=<span class="code-built_in">window</span>.WebKitDataCue||<span class="code-built_in">window</span>.VTTCue,a={<span class="code-attr">custom</span>:t.custom,<span class="code-attr">dateTimeObject</span>:t.dateTimeObject,<span class="code-attr">dateTimeString</span>:t.dateTimeString,<span class="code-attr">bandwidth</span>:e.playlist.attributes.BANDWIDTH,<span class="code-attr">resolution</span>:e.playlist.attributes.RESOLUTION,<span class="code-attr">codecs</span>:e.playlist.attributes.CODECS,<span class="code-attr">byteLength</span>:e.byteLength,<span class="code-attr">uri</span>:e.uri,<span class="code-attr">timeline</span>:e.timeline,<span class="code-attr">playlist</span>:e.playlist.id,<span class="code-attr">start</span>:i,<span class="code-attr">end</span>:n},s=<span class="code-keyword">new</span> r(i,n,<span class="code-built_in">JSON</span>.stringify(a));s.value=a,<span class="code-keyword">this</span>.segmentMetadataTrack_.addCue(s)}}},t}(r.default.EventTarget);<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">Ki</span>(<span class="code-params"></span>)</span>{}<span class="code-keyword">var</span> $i,Ji=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e?e:e.replace(<span class="code-regexp">/./</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.toUpperCase()}))},Zi=[<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>],en=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>];<span class="code-keyword">return</span> i&amp;&amp;i.updating||t.queuePending[e]},tn=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-number">0</span>!==i.queue.length){<span class="code-keyword">var</span> n=<span class="code-number">0</span>,r=i.queue[n];<span class="code-keyword">if</span>(<span class="code-string">"mediaSource"</span>!==r.type){<span class="code-keyword">if</span>(<span class="code-string">"mediaSource"</span>!==t&amp;&amp;i.ready()&amp;&amp;<span class="code-string">"closed"</span>!==i.mediaSource.readyState&amp;&amp;!en(t,i)){<span class="code-keyword">if</span>(r.type!==t){<span class="code-keyword">if</span>(n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];<span class="code-keyword">if</span>(<span class="code-string">"mediaSource"</span>===n.type)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(n.type===e)<span class="code-keyword">return</span> i}<span class="code-keyword">return</span> <span class="code-literal">null</span>}(t,i.queue),<span class="code-literal">null</span>===n)<span class="code-keyword">return</span>;r=i.queue[n]}<span class="code-keyword">return</span> i.queue.splice(n,<span class="code-number">1</span>),i.queuePending[t]=r,r.action(t,i),r.doneFn?<span class="code-keyword">void</span> <span class="code-number">0</span>:(i.queuePending[t]=<span class="code-literal">null</span>,<span class="code-keyword">void</span> e(t,i))}}<span class="code-keyword">else</span> i.updating()||<span class="code-string">"closed"</span>===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&amp;&amp;r.doneFn(),e(<span class="code-string">"audio"</span>,i),e(<span class="code-string">"video"</span>,i))}},nn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>],n=Ji(e);i&amp;&amp;(i.removeEventListener(<span class="code-string">"updateend"</span>,t[<span class="code-string">"on"</span>+n+<span class="code-string">"UpdateEnd_"</span>]),i.removeEventListener(<span class="code-string">"error"</span>,t[<span class="code-string">"on"</span>+n+<span class="code-string">"Error_"</span>]),t.codecs[e]=<span class="code-literal">null</span>,t[e+<span class="code-string">"Buffer"</span>]=<span class="code-literal">null</span>)},rn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;t&amp;&amp;<span class="code-number">-1</span>!==<span class="code-built_in">Array</span>.prototype.indexOf.call(e.sourceBuffers,t)},an=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n,r</span>)</span>{<span class="code-keyword">var</span> a=r[n+<span class="code-string">"Buffer"</span>];<span class="code-keyword">if</span>(rn(r.mediaSource,a)){r.logger_(<span class="code-string">"Appending segment "</span>+t.mediaIndex+<span class="code-string">"'s "</span>+e.length+<span class="code-string">" bytes to "</span>+n+<span class="code-string">"Buffer"</span>);<span class="code-keyword">try</span>{a.appendBuffer(e)}<span class="code-keyword">catch</span>(e){r.logger_(<span class="code-string">"Error with code "</span>+e.code+<span class="code-string">" "</span>+(<span class="code-number">22</span>===e.code?<span class="code-string">"(QUOTA_EXCEEDED_ERR) "</span>:<span class="code-string">""</span>)+<span class="code-string">"when appending segment "</span>+t.mediaIndex+<span class="code-string">" to "</span>+n+<span class="code-string">"Buffer"</span>),r.queuePending[n]=<span class="code-literal">null</span>,i(e)}}}},sn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">var</span> r=n[i+<span class="code-string">"Buffer"</span>];<span class="code-keyword">if</span>(rn(n.mediaSource,r)){n.logger_(<span class="code-string">"Removing "</span>+e+<span class="code-string">" to "</span>+t+<span class="code-string">" from "</span>+i+<span class="code-string">"Buffer"</span>);<span class="code-keyword">try</span>{r.remove(e,t)}<span class="code-keyword">catch</span>(r){n.logger_(<span class="code-string">"Remove "</span>+e+<span class="code-string">" to "</span>+t+<span class="code-string">" from "</span>+i+<span class="code-string">"Buffer failed"</span>)}}}},on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=i[t+<span class="code-string">"Buffer"</span>];rn(i.mediaSource,n)&amp;&amp;(i.logger_(<span class="code-string">"Setting "</span>+t+<span class="code-string">"timestampOffset to "</span>+e),n.timestampOffset=e)}},un=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{e()}},dn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"open"</span>===t.mediaSource.readyState){t.logger_(<span class="code-string">"Calling mediaSource endOfStream("</span>+(e||<span class="code-string">""</span>)+<span class="code-string">")"</span>);<span class="code-keyword">try</span>{t.mediaSource.endOfStream(e)}<span class="code-keyword">catch</span>(e){r.default.log.warn(<span class="code-string">"Failed to call media source endOfStream"</span>,e)}}}},ln=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=Ji(e),r=U(t);i.logger_(<span class="code-string">"Adding "</span>+e+<span class="code-string">"Buffer with codec "</span>+t+<span class="code-string">" to mediaSource"</span>);<span class="code-keyword">var</span> a=i.mediaSource.addSourceBuffer(r);a.addEventListener(<span class="code-string">"updateend"</span>,i[<span class="code-string">"on"</span>+n+<span class="code-string">"UpdateEnd_"</span>]),a.addEventListener(<span class="code-string">"error"</span>,i[<span class="code-string">"on"</span>+n+<span class="code-string">"Error_"</span>]),i.codecs[e]=t,i[e+<span class="code-string">"Buffer"</span>]=a}},cn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>];<span class="code-keyword">if</span>(nn(e,t),rn(t.mediaSource,i)){t.logger_(<span class="code-string">"Removing "</span>+e+<span class="code-string">"Buffer with codec "</span>+t.codecs[e]+<span class="code-string">" from mediaSource"</span>);<span class="code-keyword">try</span>{t.mediaSource.removeSourceBuffer(i)}<span class="code-keyword">catch</span>(t){r.default.log.warn(<span class="code-string">"Failed to removeSourceBuffer "</span>+e+<span class="code-string">"Buffer"</span>,t)}}}},hn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=i[t+<span class="code-string">"Buffer"</span>],r=U(e);rn(i.mediaSource,n)&amp;&amp;i.codecs[t]!==e&amp;&amp;(i.logger_(<span class="code-string">"changing "</span>+t+<span class="code-string">"Buffer codec from "</span>+i.codecs[t]+<span class="code-string">" to "</span>+e),n.changeType(r),i.codecs[t]=e)}},fn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,a=e.name;i.queue.push({<span class="code-attr">type</span>:t,<span class="code-attr">action</span>:n,<span class="code-attr">doneFn</span>:r,<span class="code-attr">name</span>:a}),tn(t,i)},pn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">if</span>(t.queuePending[e]){<span class="code-keyword">var</span> n=t.queuePending[e].doneFn;t.queuePending[e]=<span class="code-literal">null</span>,n&amp;&amp;n(t[e+<span class="code-string">"Error_"</span>])}tn(e,t)}},mn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span>(i=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).mediaSource=t,i.sourceopenListener_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> tn(<span class="code-string">"mediaSource"</span>,s(i))},i.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,i.sourceopenListener_),i.logger_=p(<span class="code-string">"SourceUpdater"</span>),i.audioTimestampOffset_=<span class="code-number">0</span>,i.videoTimestampOffset_=<span class="code-number">0</span>,i.queue=[],i.queuePending={<span class="code-attr">audio</span>:<span class="code-literal">null</span>,<span class="code-attr">video</span>:<span class="code-literal">null</span>},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!<span class="code-number">1</span>,i.codecs={},i.onVideoUpdateEnd_=pn(<span class="code-string">"video"</span>,s(i)),i.onAudioUpdateEnd_=pn(<span class="code-string">"audio"</span>,s(i)),i.onVideoError_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.videoError_=e},i.onAudioError_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.audioError_=e},i.createdSourceBuffers_=!<span class="code-number">1</span>,i.initializedEme_=!<span class="code-number">1</span>,i.triggeredReady_=!<span class="code-number">1</span>,i}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.initializedEme=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.initializedEme_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.triggerReady()},i.hasCreatedSourceBuffers=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.createdSourceBuffers_},i.hasInitializedAnyEme=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.initializedEme_},i.ready=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.hasCreatedSourceBuffers()&amp;&amp;<span class="code-keyword">this</span>.hasInitializedAnyEme()},i.createSourceBuffers=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.hasCreatedSourceBuffers()||(<span class="code-keyword">this</span>.addOrChangeSourceBuffers(e),<span class="code-keyword">this</span>.createdSourceBuffers_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"createdsourcebuffers"</span>),<span class="code-keyword">this</span>.triggerReady())},i.triggerReady=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ready()&amp;&amp;!<span class="code-keyword">this</span>.triggeredReady_&amp;&amp;(<span class="code-keyword">this</span>.triggeredReady_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"ready"</span>))},i.addSourceBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{fn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:ln(e,t),<span class="code-attr">name</span>:<span class="code-string">"addSourceBuffer"</span>})},i.abort=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{fn({<span class="code-attr">type</span>:e,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"open"</span>===t.mediaSource.readyState){<span class="code-keyword">var</span> i=t[e+<span class="code-string">"Buffer"</span>];<span class="code-keyword">if</span>(rn(t.mediaSource,i)){t.logger_(<span class="code-string">"calling abort on "</span>+e+<span class="code-string">"Buffer"</span>);<span class="code-keyword">try</span>{i.abort()}<span class="code-keyword">catch</span>(t){r.default.log.warn(<span class="code-string">"Failed to abort on "</span>+e+<span class="code-string">"Buffer"</span>,t)}}}},<span class="code-attr">name</span>:<span class="code-string">"abort"</span>})},i.removeSourceBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.canRemoveSourceBuffer()?fn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:cn(e),<span class="code-attr">name</span>:<span class="code-string">"removeSourceBuffer"</span>}):r.default.log.error(<span class="code-string">"removeSourceBuffer is not supported!"</span>)},i.canRemoveSourceBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!r.default.browser.IE_VERSION&amp;&amp;!r.default.browser.IS_FIREFOX&amp;&amp;<span class="code-built_in">window</span>.MediaSource&amp;&amp;<span class="code-built_in">window</span>.MediaSource.prototype&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>.MediaSource.prototype.removeSourceBuffer},t.canChangeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">window</span>.SourceBuffer&amp;&amp;<span class="code-built_in">window</span>.SourceBuffer.prototype&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>.SourceBuffer.prototype.changeType},i.canChangeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.constructor.canChangeType()},i.changeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.canChangeType()?fn({<span class="code-attr">type</span>:e,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:hn(t),<span class="code-attr">name</span>:<span class="code-string">"changeType"</span>}):r.default.log.error(<span class="code-string">"changeType is not supported!"</span>)},i.addOrChangeSourceBuffers=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(!e||<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> e||<span class="code-number">0</span>===<span class="code-built_in">Object</span>.keys(e).length)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Cannot addOrChangeSourceBuffers to undefined codecs"</span>);<span class="code-built_in">Object</span>.keys(e).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=e[i];<span class="code-keyword">if</span>(!t.hasCreatedSourceBuffers())<span class="code-keyword">return</span> t.addSourceBuffer(i,n);t.canChangeType()&amp;&amp;t.changeType(i,n)}))},i.appendBuffer=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>,n=e.segmentInfo,r=e.type,a=e.bytes;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.processedAppend_=!<span class="code-number">0</span>,<span class="code-string">"audio"</span>===r&amp;&amp;<span class="code-keyword">this</span>.videoBuffer&amp;&amp;!<span class="code-keyword">this</span>.videoAppendQueued_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.delayedAudioAppendQueue_.push([e,t]),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"delayed audio append of "</span>+a.length+<span class="code-string">" until video append"</span>);<span class="code-keyword">if</span>(fn({<span class="code-attr">type</span>:r,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:an(a,n||{<span class="code-attr">mediaIndex</span>:<span class="code-number">-1</span>},t),<span class="code-attr">doneFn</span>:t,<span class="code-attr">name</span>:<span class="code-string">"appendBuffer"</span>}),<span class="code-string">"video"</span>===r){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoAppendQueued_=!<span class="code-number">0</span>,!<span class="code-keyword">this</span>.delayedAudioAppendQueue_.length)<span class="code-keyword">return</span>;<span class="code-keyword">var</span> s=<span class="code-keyword">this</span>.delayedAudioAppendQueue_.slice();<span class="code-keyword">this</span>.logger_(<span class="code-string">"queuing delayed audio "</span>+s.length+<span class="code-string">" appendBuffers"</span>),<span class="code-keyword">this</span>.delayedAudioAppendQueue_.length=<span class="code-number">0</span>,s.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.appendBuffer.apply(i,e)}))}},i.audioBuffered=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> rn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.audioBuffer)&amp;&amp;<span class="code-keyword">this</span>.audioBuffer.buffered?<span class="code-keyword">this</span>.audioBuffer.buffered:r.default.createTimeRange()},i.videoBuffered=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> rn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.videoBuffer)&amp;&amp;<span class="code-keyword">this</span>.videoBuffer.buffered?<span class="code-keyword">this</span>.videoBuffer.buffered:r.default.createTimeRange()},i.buffered=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=rn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.videoBuffer)?<span class="code-keyword">this</span>.videoBuffer:<span class="code-literal">null</span>,t=rn(<span class="code-keyword">this</span>.mediaSource,<span class="code-keyword">this</span>.audioBuffer)?<span class="code-keyword">this</span>.audioBuffer:<span class="code-literal">null</span>;<span class="code-keyword">return</span> t&amp;&amp;!e?<span class="code-keyword">this</span>.audioBuffered():e&amp;&amp;!t?<span class="code-keyword">this</span>.videoBuffered():<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>,a=<span class="code-number">0</span>,s=[],o=[];<span class="code-keyword">if</span>(!(e&amp;&amp;e.length&amp;&amp;t&amp;&amp;t.length))<span class="code-keyword">return</span> r.default.createTimeRange();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=e.length;u--;)s.push({<span class="code-attr">time</span>:e.start(u),<span class="code-attr">type</span>:<span class="code-string">"start"</span>}),s.push({<span class="code-attr">time</span>:e.end(u),<span class="code-attr">type</span>:<span class="code-string">"end"</span>});<span class="code-keyword">for</span>(u=t.length;u--;)s.push({<span class="code-attr">time</span>:t.start(u),<span class="code-attr">type</span>:<span class="code-string">"start"</span>}),s.push({<span class="code-attr">time</span>:t.end(u),<span class="code-attr">type</span>:<span class="code-string">"end"</span>});<span class="code-keyword">for</span>(s.sort((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.time-t.time})),u=<span class="code-number">0</span>;u&lt;s.length;u++)<span class="code-string">"start"</span>===s[u].type?<span class="code-number">2</span>==++a&amp;&amp;(i=s[u].time):<span class="code-string">"end"</span>===s[u].type&amp;&amp;<span class="code-number">1</span>==--a&amp;&amp;(n=s[u].time),<span class="code-literal">null</span>!==i&amp;&amp;<span class="code-literal">null</span>!==n&amp;&amp;(o.push([i,n]),i=<span class="code-literal">null</span>,n=<span class="code-literal">null</span>);<span class="code-keyword">return</span> r.default.createTimeRanges(o)}(<span class="code-keyword">this</span>.audioBuffered(),<span class="code-keyword">this</span>.videoBuffered())},i.setDuration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=Ki),fn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:(i=e,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.logger_(<span class="code-string">"Setting mediaSource duration to "</span>+i);<span class="code-keyword">try</span>{e.mediaSource.duration=i}<span class="code-keyword">catch</span>(e){r.default.log.warn(<span class="code-string">"Failed to set media source duration"</span>,e)}}),<span class="code-attr">name</span>:<span class="code-string">"duration"</span>,<span class="code-attr">doneFn</span>:t})},i.endOfStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-literal">null</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=Ki),<span class="code-string">"string"</span>!=<span class="code-keyword">typeof</span> e&amp;&amp;(e=<span class="code-keyword">void</span> <span class="code-number">0</span>),fn({<span class="code-attr">type</span>:<span class="code-string">"mediaSource"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:dn(e),<span class="code-attr">name</span>:<span class="code-string">"endOfStream"</span>,<span class="code-attr">doneFn</span>:t})},i.removeAudio=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=Ki),<span class="code-keyword">this</span>.audioBuffered().length&amp;&amp;<span class="code-number">0</span>!==<span class="code-keyword">this</span>.audioBuffered().end(<span class="code-number">0</span>)?fn({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:sn(e,t),<span class="code-attr">doneFn</span>:i,<span class="code-attr">name</span>:<span class="code-string">"remove"</span>}):i()},i.removeVideo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=Ki),<span class="code-keyword">this</span>.videoBuffered().length&amp;&amp;<span class="code-number">0</span>!==<span class="code-keyword">this</span>.videoBuffered().end(<span class="code-number">0</span>)?fn({<span class="code-attr">type</span>:<span class="code-string">"video"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:sn(e,t),<span class="code-attr">doneFn</span>:i,<span class="code-attr">name</span>:<span class="code-string">"remove"</span>}):i()},i.updating=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>!(!en(<span class="code-string">"audio"</span>,<span class="code-keyword">this</span>)&amp;&amp;!en(<span class="code-string">"video"</span>,<span class="code-keyword">this</span>))},i.audioTimestampOffset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;<span class="code-keyword">this</span>.audioBuffer&amp;&amp;<span class="code-keyword">this</span>.audioTimestampOffset_!==e&amp;&amp;(fn({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:on(e),<span class="code-attr">name</span>:<span class="code-string">"timestampOffset"</span>}),<span class="code-keyword">this</span>.audioTimestampOffset_=e),<span class="code-keyword">this</span>.audioTimestampOffset_},i.videoTimestampOffset=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;<span class="code-keyword">this</span>.videoBuffer&amp;&amp;<span class="code-keyword">this</span>.videoTimestampOffset!==e&amp;&amp;(fn({<span class="code-attr">type</span>:<span class="code-string">"video"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:on(e),<span class="code-attr">name</span>:<span class="code-string">"timestampOffset"</span>}),<span class="code-keyword">this</span>.videoTimestampOffset_=e),<span class="code-keyword">this</span>.videoTimestampOffset_},i.audioQueueCallback=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.audioBuffer&amp;&amp;fn({<span class="code-attr">type</span>:<span class="code-string">"audio"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:un(e),<span class="code-attr">name</span>:<span class="code-string">"callback"</span>})},i.videoQueueCallback=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.videoBuffer&amp;&amp;fn({<span class="code-attr">type</span>:<span class="code-string">"video"</span>,<span class="code-attr">sourceUpdater</span>:<span class="code-keyword">this</span>,<span class="code-attr">action</span>:un(e),<span class="code-attr">name</span>:<span class="code-string">"callback"</span>})},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),Zi.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+<span class="code-string">"QueueCallback"</span>]((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> nn(t,e)}))})),<span class="code-keyword">this</span>.videoAppendQueued_=!<span class="code-number">1</span>,<span class="code-keyword">this</span>.delayedAudioAppendQueue_.length=<span class="code-number">0</span>,<span class="code-keyword">this</span>.sourceopenListener_&amp;&amp;<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.sourceopenListener_),<span class="code-keyword">this</span>.off()},t}(r.default.EventTarget),gn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">decodeURIComponent</span>(<span class="code-built_in">escape</span>(<span class="code-built_in">String</span>.fromCharCode.apply(<span class="code-literal">null</span>,e)))},yn=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(<span class="code-string">"\n\n"</span>.split(<span class="code-string">""</span>).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.charCodeAt(<span class="code-number">0</span>)}))),vn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n;<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i={}),(n=e.call(<span class="code-keyword">this</span>,t,i)||<span class="code-keyword">this</span>).mediaSource_=<span class="code-literal">null</span>,n.subtitlesTrack_=<span class="code-literal">null</span>,n.loaderType_=<span class="code-string">"subtitle"</span>,n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!<span class="code-number">1</span>,n}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.createTransmuxer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>},i.buffered_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.subtitlesTrack_||!<span class="code-keyword">this</span>.subtitlesTrack_.cues||!<span class="code-keyword">this</span>.subtitlesTrack_.cues.length)<span class="code-keyword">return</span> r.default.createTimeRanges();<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.subtitlesTrack_.cues,t=e[<span class="code-number">0</span>].startTime,i=e[e.length<span class="code-number">-1</span>].startTime;<span class="code-keyword">return</span> r.default.createTimeRanges([[t,i]])},i.initSegmentForMap=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t=!<span class="code-number">1</span>),!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=Ne(e),n=<span class="code-keyword">this</span>.initSegments_[i];<span class="code-keyword">if</span>(t&amp;&amp;!n&amp;&amp;e.bytes){<span class="code-keyword">var</span> r=yn.byteLength+e.bytes.byteLength,a=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(r);a.set(e.bytes),a.set(yn,e.bytes.byteLength),<span class="code-keyword">this</span>.initSegments_[i]=n={<span class="code-attr">resolvedUri</span>:e.resolvedUri,<span class="code-attr">byterange</span>:e.byterange,<span class="code-attr">bytes</span>:a}}<span class="code-keyword">return</span> n||e},i.couldBeginLoading_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.playlist_&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_&amp;&amp;!<span class="code-keyword">this</span>.paused()},i.init_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.resetEverything(),<span class="code-keyword">this</span>.monitorBuffer_()},i.track=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e||(<span class="code-keyword">this</span>.subtitlesTrack_=e,<span class="code-string">"INIT"</span>===<span class="code-keyword">this</span>.state&amp;&amp;<span class="code-keyword">this</span>.couldBeginLoading_()&amp;&amp;<span class="code-keyword">this</span>.init_()),<span class="code-keyword">this</span>.subtitlesTrack_},i.remove=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{qi(e,t,<span class="code-keyword">this</span>.subtitlesTrack_)},i.fillBuffer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.chooseNextRequest_();<span class="code-keyword">if</span>(t){<span class="code-keyword">if</span>(<span class="code-literal">null</span>===<span class="code-keyword">this</span>.syncController_.timestampOffsetForTimeline(t.timeline))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.syncController_.one(<span class="code-string">"timestampoffset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.state=<span class="code-string">"READY"</span>,e.paused()||e.monitorBuffer_()})),<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING_ON_TIMELINE"</span>);<span class="code-keyword">this</span>.loadSegment_(t)}},i.timestampOffsetForSegment_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-literal">null</span>},i.chooseNextRequest_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.skipEmptySegments_(e.prototype.chooseNextRequest_.call(<span class="code-keyword">this</span>))},i.skipEmptySegments_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">for</span>(;e&amp;&amp;e.segment.empty;){<span class="code-keyword">if</span>(e.mediaIndex+<span class="code-number">1</span>&gt;=e.playlist.segments.length){e=<span class="code-literal">null</span>;<span class="code-keyword">break</span>}e=<span class="code-keyword">this</span>.generateSegmentInfo_({<span class="code-attr">playlist</span>:e.playlist,<span class="code-attr">mediaIndex</span>:e.mediaIndex+<span class="code-number">1</span>,<span class="code-attr">startOfSegment</span>:e.startOfSegment+e.duration,<span class="code-attr">isSyncRequest</span>:e.isSyncRequest})}<span class="code-keyword">return</span> e},i.stopForError=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.error(e),<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">this</span>.pause(),<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>)},i.segmentRequestFinished_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.subtitlesTrack_){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.saveTransferStats_(t.stats),!<span class="code-keyword">this</span>.pendingSegment_)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>);<span class="code-keyword">if</span>(e)<span class="code-keyword">return</span> e.code===vi&amp;&amp;<span class="code-keyword">this</span>.handleTimeout_(),e.code===_i?<span class="code-keyword">this</span>.mediaRequestsAborted+=<span class="code-number">1</span>:<span class="code-keyword">this</span>.mediaRequestsErrored+=<span class="code-number">1</span>,<span class="code-keyword">void</span> <span class="code-keyword">this</span>.stopForError(e);<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.pendingSegment_;<span class="code-keyword">this</span>.saveBandwidthRelatedStats_(r.duration,t.stats),<span class="code-keyword">this</span>.state=<span class="code-string">"APPENDING"</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"appending"</span>);<span class="code-keyword">var</span> a=r.segment;<span class="code-keyword">if</span>(a.map&amp;&amp;(a.map.bytes=t.map.bytes),r.bytes=t.bytes,<span class="code-string">"function"</span>!=<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>.WebVTT&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_&amp;&amp;<span class="code-keyword">this</span>.subtitlesTrack_.tech_){<span class="code-keyword">var</span> s,o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class="code-string">"vttjsloaded"</span>,s),n.stopForError({<span class="code-attr">message</span>:<span class="code-string">"Error loading vtt.js"</span>})};<span class="code-keyword">return</span> s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.subtitlesTrack_.tech_.off(<span class="code-string">"vttjserror"</span>,o),n.segmentRequestFinished_(e,t,i)},<span class="code-keyword">this</span>.state=<span class="code-string">"WAITING_ON_VTTJS"</span>,<span class="code-keyword">this</span>.subtitlesTrack_.tech_.one(<span class="code-string">"vttjsloaded"</span>,s),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.subtitlesTrack_.tech_.one(<span class="code-string">"vttjserror"</span>,o)}a.requested=!<span class="code-number">0</span>;<span class="code-keyword">try</span>{<span class="code-keyword">this</span>.parseVTTCues_(r)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-keyword">this</span>.stopForError({<span class="code-attr">message</span>:e.message})}<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.updateTimeMapping_(r,<span class="code-keyword">this</span>.syncController_.timelines[r.timeline],<span class="code-keyword">this</span>.playlist_),r.cues.length?r.timingInfo={<span class="code-attr">start</span>:r.cues[<span class="code-number">0</span>].startTime,<span class="code-attr">end</span>:r.cues[r.cues.length<span class="code-number">-1</span>].endTime}:r.timingInfo={<span class="code-attr">start</span>:r.startOfSegment,<span class="code-attr">end</span>:r.startOfSegment+r.duration},r.isSyncRequest)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>),<span class="code-keyword">this</span>.pendingSegment_=<span class="code-literal">null</span>,<span class="code-keyword">void</span>(<span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>);r.byteLength=r.bytes.byteLength,<span class="code-keyword">this</span>.mediaSecondsLoaded+=a.duration,r.cues.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?<span class="code-keyword">new</span> <span class="code-built_in">window</span>.VTTCue(e.startTime,e.endTime,e.text):e)})),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.cues;<span class="code-keyword">if</span>(t)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=[],r=<span class="code-number">0</span>,a=<span class="code-number">0</span>;a&lt;t.length;a++)t[i].startTime===t[a].startTime&amp;&amp;t[i].endTime===t[a].endTime&amp;&amp;t[i].text===t[a].text&amp;&amp;++r&gt;<span class="code-number">1</span>&amp;&amp;n.push(t[a]);n.length&amp;&amp;n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span> e.removeCue(t)}))}}(<span class="code-keyword">this</span>.subtitlesTrack_),<span class="code-keyword">this</span>.handleAppendsDone_()}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.state=<span class="code-string">"READY"</span>},i.handleData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},i.updateTimingInfoEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{},i.parseVTTCues_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i=!<span class="code-number">1</span>;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> <span class="code-built_in">window</span>.TextDecoder?t=<span class="code-keyword">new</span> <span class="code-built_in">window</span>.TextDecoder(<span class="code-string">"utf8"</span>):(t=<span class="code-built_in">window</span>.WebVTT.StringDecoder(),i=!<span class="code-number">0</span>);<span class="code-keyword">var</span> n=<span class="code-keyword">new</span> <span class="code-built_in">window</span>.WebVTT.Parser(<span class="code-built_in">window</span>,<span class="code-built_in">window</span>.vttjs,t);<span class="code-keyword">if</span>(e.cues=[],e.timestampmap={<span class="code-attr">MPEGTS</span>:<span class="code-number">0</span>,<span class="code-attr">LOCAL</span>:<span class="code-number">0</span>},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.timestampmap=t},n.onparsingerror=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{r.default.log.warn(<span class="code-string">"Error encountered when parsing cues: "</span>+e.message)},e.segment.map){<span class="code-keyword">var</span> a=e.segment.map.bytes;i&amp;&amp;(a=gn(a)),n.parse(a)}<span class="code-keyword">var</span> s=e.bytes;i&amp;&amp;(s=gn(s)),n.parse(s),n.flush()},i.updateTimeMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=e.segment;<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(e.cues.length){<span class="code-keyword">var</span> r=e.timestampmap,a=r.MPEGTS/Gi-r.LOCAL+t.mapping;<span class="code-keyword">if</span>(e.cues.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.startTime+=a,e.endTime+=a})),!i.syncInfo){<span class="code-keyword">var</span> s=e.cues[<span class="code-number">0</span>].startTime,o=e.cues[e.cues.length<span class="code-number">-1</span>].startTime;i.syncInfo={<span class="code-attr">mediaSequence</span>:i.mediaSequence+e.mediaIndex,<span class="code-attr">time</span>:<span class="code-built_in">Math</span>.min(s,o-n.duration)}}}<span class="code-keyword">else</span> n.empty=!<span class="code-number">0</span>},t}(Yi),_n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e.cues,n=<span class="code-number">0</span>;n&lt;i.length;n++){<span class="code-keyword">var</span> r=i[n];<span class="code-keyword">if</span>(t&gt;=r.adStartTime&amp;&amp;t&lt;=r.adEndTime)<span class="code-keyword">return</span> r}<span class="code-keyword">return</span> <span class="code-literal">null</span>},Tn=[{<span class="code-attr">name</span>:<span class="code-string">"VOD"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">return</span> i!==<span class="code-number">1</span>/<span class="code-number">0</span>?{<span class="code-attr">time</span>:<span class="code-number">0</span>,<span class="code-attr">segmentIndex</span>:<span class="code-number">0</span>,<span class="code-attr">partIndex</span>:<span class="code-literal">null</span>}:<span class="code-literal">null</span>}},{<span class="code-attr">name</span>:<span class="code-string">"ProgramDateTime"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-built_in">Object</span>.keys(e.timelineToDatetimeMappings).length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> a=<span class="code-literal">null</span>,s=<span class="code-literal">null</span>,o=Y(t);r=r||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=<span class="code-number">0</span>;u&lt;o.length;u++){<span class="code-keyword">var</span> d=o[t.endList||<span class="code-number">0</span>===r?u:o.length-(u+<span class="code-number">1</span>)],l=d.segment,c=e.timelineToDatetimeMappings[l.timeline];<span class="code-keyword">if</span>(c&amp;&amp;l.dateTimeObject){<span class="code-keyword">var</span> h=l.dateTimeObject.getTime()/<span class="code-number">1e3</span>+c;<span class="code-keyword">if</span>(l.parts&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> d.partIndex)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> f=<span class="code-number">0</span>;f&lt;d.partIndex;f++)h+=l.parts[f].duration;<span class="code-keyword">var</span> p=<span class="code-built_in">Math</span>.abs(r-h);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==s&amp;&amp;(<span class="code-number">0</span>===p||s&lt;p))<span class="code-keyword">break</span>;s=p,a={<span class="code-attr">time</span>:h,<span class="code-attr">segmentIndex</span>:d.segmentIndex,<span class="code-attr">partIndex</span>:d.partIndex}}}<span class="code-keyword">return</span> a}},{<span class="code-attr">name</span>:<span class="code-string">"Segment"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=<span class="code-literal">null</span>,s=<span class="code-literal">null</span>;r=r||<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> o=Y(t),u=<span class="code-number">0</span>;u&lt;o.length;u++){<span class="code-keyword">var</span> d=o[t.endList||<span class="code-number">0</span>===r?u:o.length-(u+<span class="code-number">1</span>)],l=d.segment,c=d.part&amp;&amp;d.part.start||l&amp;&amp;l.start;<span class="code-keyword">if</span>(l.timeline===n&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==c){<span class="code-keyword">var</span> h=<span class="code-built_in">Math</span>.abs(r-c);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==s&amp;&amp;s&lt;h)<span class="code-keyword">break</span>;(!a||<span class="code-literal">null</span>===s||s&gt;=h)&amp;&amp;(s=h,a={<span class="code-attr">time</span>:c,<span class="code-attr">segmentIndex</span>:d.segmentIndex,<span class="code-attr">partIndex</span>:d.partIndex})}}<span class="code-keyword">return</span> a}},{<span class="code-attr">name</span>:<span class="code-string">"Discontinuity"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=<span class="code-literal">null</span>;<span class="code-keyword">if</span>(r=r||<span class="code-number">0</span>,t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s=<span class="code-literal">null</span>,o=<span class="code-number">0</span>;o&lt;t.discontinuityStarts.length;o++){<span class="code-keyword">var</span> u=t.discontinuityStarts[o],d=t.discontinuitySequence+o+<span class="code-number">1</span>,l=e.discontinuities[d];<span class="code-keyword">if</span>(l){<span class="code-keyword">var</span> c=<span class="code-built_in">Math</span>.abs(r-l.time);<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==s&amp;&amp;s&lt;c)<span class="code-keyword">break</span>;(!a||<span class="code-literal">null</span>===s||s&gt;=c)&amp;&amp;(s=c,a={<span class="code-attr">time</span>:l.time,<span class="code-attr">segmentIndex</span>:u,<span class="code-attr">partIndex</span>:<span class="code-literal">null</span>})}}<span class="code-keyword">return</span> a}},{<span class="code-attr">name</span>:<span class="code-string">"Playlist"</span>,<span class="code-attr">run</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r</span>)</span>{<span class="code-keyword">return</span> t.syncInfo?{<span class="code-attr">time</span>:t.syncInfo.time,<span class="code-attr">segmentIndex</span>:t.syncInfo.mediaSequence-t.mediaSequence,<span class="code-attr">partIndex</span>:<span class="code-literal">null</span>}:<span class="code-literal">null</span>}}],bn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i;<span class="code-keyword">return</span>(i=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=p(<span class="code-string">"SyncController"</span>),i}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.getSyncPoint=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.runStrategies_(e,t,i,n);<span class="code-keyword">return</span> r.length?<span class="code-keyword">this</span>.selectSyncPoint_(r,{<span class="code-attr">key</span>:<span class="code-string">"time"</span>,<span class="code-attr">value</span>:n}):<span class="code-literal">null</span>},i.getExpiredTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!e||!e.segments)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.runStrategies_(e,t,e.discontinuitySequence,<span class="code-number">0</span>);<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.selectSyncPoint_(i,{<span class="code-attr">key</span>:<span class="code-string">"segmentIndex"</span>,<span class="code-attr">value</span>:<span class="code-number">0</span>});<span class="code-keyword">return</span> n.segmentIndex&gt;<span class="code-number">0</span>&amp;&amp;(n.time*=<span class="code-number">-1</span>),<span class="code-built_in">Math</span>.abs(n.time+te({<span class="code-attr">defaultDuration</span>:e.targetDuration,<span class="code-attr">durationList</span>:e.segments,<span class="code-attr">startIndex</span>:n.segmentIndex,<span class="code-attr">endIndex</span>:<span class="code-number">0</span>}))},i.runStrategies_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=[],a=<span class="code-number">0</span>;a&lt;Tn.length;a++){<span class="code-keyword">var</span> s=Tn[a],o=s.run(<span class="code-keyword">this</span>,e,t,i,n);o&amp;&amp;(o.strategy=s.name,r.push({<span class="code-attr">strategy</span>:s.name,<span class="code-attr">syncPoint</span>:o}))}<span class="code-keyword">return</span> r},i.selectSyncPoint_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=e[<span class="code-number">0</span>].syncPoint,n=<span class="code-built_in">Math</span>.abs(e[<span class="code-number">0</span>].syncPoint[t.key]-t.value),r=e[<span class="code-number">0</span>].strategy,a=<span class="code-number">1</span>;a&lt;e.length;a++){<span class="code-keyword">var</span> s=<span class="code-built_in">Math</span>.abs(e[a].syncPoint[t.key]-t.value);s&lt;n&amp;&amp;(n=s,i=e[a].syncPoint,r=e[a].strategy)}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"syncPoint for ["</span>+t.key+<span class="code-string">": "</span>+t.value+<span class="code-string">"] chosen with strategy ["</span>+r+<span class="code-string">"]: [time:"</span>+i.time+<span class="code-string">", segmentIndex:"</span>+i.segmentIndex+(<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i.partIndex?<span class="code-string">",partIndex:"</span>+i.partIndex:<span class="code-string">""</span>)+<span class="code-string">"]"</span>),i},i.saveExpiredSegmentInfo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.mediaSequence-e.mediaSequence;<span class="code-keyword">if</span>(i&gt;<span class="code-number">86400</span>)r.default.log.warn(<span class="code-string">"Not saving expired segment info. Media sequence gap "</span>+i+<span class="code-string">" is too large."</span>);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=i<span class="code-number">-1</span>;n&gt;=<span class="code-number">0</span>;n--){<span class="code-keyword">var</span> a=e.segments[n];<span class="code-keyword">if</span>(a&amp;&amp;<span class="code-keyword">void</span> <span class="code-number">0</span>!==a.start){t.syncInfo={<span class="code-attr">mediaSequence</span>:e.mediaSequence+n,<span class="code-attr">time</span>:a.start},<span class="code-keyword">this</span>.logger_(<span class="code-string">"playlist refresh sync: [time:"</span>+t.syncInfo.time+<span class="code-string">", mediaSequence: "</span>+t.syncInfo.mediaSequence+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.trigger(<span class="code-string">"syncinfoupdate"</span>);<span class="code-keyword">break</span>}}},i.setDateTimeMappingForStart=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.timelineToDatetimeMappings={},e.segments&amp;&amp;e.segments.length&amp;&amp;e.segments[<span class="code-number">0</span>].dateTimeObject){<span class="code-keyword">var</span> t=e.segments[<span class="code-number">0</span>],i=t.dateTimeObject.getTime()/<span class="code-number">1e3</span>;<span class="code-keyword">this</span>.timelineToDatetimeMappings[t.timeline]=-i}},i.saveSegmentTimingInfo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.segmentInfo,i=e.shouldSaveTimelineMapping,n=<span class="code-keyword">this</span>.calculateSegmentTimeMapping_(t,t.timingInfo,i),r=t.segment;n&amp;&amp;(<span class="code-keyword">this</span>.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={<span class="code-attr">mediaSequence</span>:t.playlist.mediaSequence+t.mediaIndex,<span class="code-attr">time</span>:r.start}));<span class="code-keyword">var</span> a=r.dateTimeObject;r.discontinuity&amp;&amp;i&amp;&amp;a&amp;&amp;(<span class="code-keyword">this</span>.timelineToDatetimeMappings[r.timeline]=-a.getTime()/<span class="code-number">1e3</span>)},i.timestampOffsetForTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.timelines[e]?<span class="code-literal">null</span>:<span class="code-keyword">this</span>.timelines[e].time},i.mappingForTimeline=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===<span class="code-keyword">this</span>.timelines[e]?<span class="code-literal">null</span>:<span class="code-keyword">this</span>.timelines[e].mapping},i.calculateSegmentTimeMapping_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a=e.segment,s=e.part,o=<span class="code-keyword">this</span>.timelines[e.timeline];<span class="code-keyword">if</span>(<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> e.timestampOffset)o={<span class="code-attr">time</span>:e.startOfSegment,<span class="code-attr">mapping</span>:e.startOfSegment-t.start},i&amp;&amp;(<span class="code-keyword">this</span>.timelines[e.timeline]=o,<span class="code-keyword">this</span>.trigger(<span class="code-string">"timestampoffset"</span>),<span class="code-keyword">this</span>.logger_(<span class="code-string">"time mapping for timeline "</span>+e.timeline+<span class="code-string">": [time: "</span>+o.time+<span class="code-string">"] [mapping: "</span>+o.mapping+<span class="code-string">"]"</span>)),n=e.startOfSegment,r=t.end+o.mapping;<span class="code-keyword">else</span>{<span class="code-keyword">if</span>(!o)<span class="code-keyword">return</span>!<span class="code-number">1</span>;n=t.start+o.mapping,r=t.end+o.mapping}<span class="code-keyword">return</span> s&amp;&amp;(s.start=n,s.end=r),(!a.start||n&lt;a.start)&amp;&amp;(a.start=n),a.end=r,!<span class="code-number">0</span>},i.saveDiscontinuitySyncInfo_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.segment;<span class="code-keyword">if</span>(i.discontinuity)<span class="code-keyword">this</span>.discontinuities[i.timeline]={<span class="code-attr">time</span>:i.start,<span class="code-attr">accuracy</span>:<span class="code-number">0</span>};<span class="code-keyword">else</span> <span class="code-keyword">if</span>(t.discontinuityStarts&amp;&amp;t.discontinuityStarts.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;t.discontinuityStarts.length;n++){<span class="code-keyword">var</span> r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+<span class="code-number">1</span>,s=r-e.mediaIndex,o=<span class="code-built_in">Math</span>.abs(s);<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.discontinuities[a]||<span class="code-keyword">this</span>.discontinuities[a].accuracy&gt;o){<span class="code-keyword">var</span> u;u=s&lt;<span class="code-number">0</span>?i.start-te({<span class="code-attr">defaultDuration</span>:t.targetDuration,<span class="code-attr">durationList</span>:t.segments,<span class="code-attr">startIndex</span>:e.mediaIndex,<span class="code-attr">endIndex</span>:r}):i.end+te({<span class="code-attr">defaultDuration</span>:t.targetDuration,<span class="code-attr">durationList</span>:t.segments,<span class="code-attr">startIndex</span>:e.mediaIndex+<span class="code-number">1</span>,<span class="code-attr">endIndex</span>:r}),<span class="code-keyword">this</span>.discontinuities[a]={<span class="code-attr">time</span>:u,<span class="code-attr">accuracy</span>:o}}}},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.off()},t}(r.default.EventTarget),Sn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.clearPendingTimelineChange=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.pendingTimelineChanges_[e]=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.trigger(<span class="code-string">"pendingtimelinechange"</span>)},i.pendingTimelineChange=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.from,n=e.to;<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n&amp;&amp;(<span class="code-keyword">this</span>.pendingTimelineChanges_[t]={<span class="code-attr">type</span>:t,<span class="code-attr">from</span>:i,<span class="code-attr">to</span>:n},<span class="code-keyword">this</span>.trigger(<span class="code-string">"pendingtimelinechange"</span>)),<span class="code-keyword">this</span>.pendingTimelineChanges_[t]},i.lastTimelineChange=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.type,i=e.from,n=e.to;<span class="code-keyword">return</span><span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> i&amp;&amp;<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n&amp;&amp;(<span class="code-keyword">this</span>.lastTimelineChanges_[t]={<span class="code-attr">type</span>:t,<span class="code-attr">from</span>:i,<span class="code-attr">to</span>:n},<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.pendingTimelineChanges_[t],<span class="code-keyword">this</span>.trigger(<span class="code-string">"timelinechange"</span>)),<span class="code-keyword">this</span>.lastTimelineChanges_[t]},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.pendingTimelineChanges_={},<span class="code-keyword">this</span>.lastTimelineChanges_={},<span class="code-keyword">this</span>.off()},t}(r.default.EventTarget),wn=di(li((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">return</span> e(i={<span class="code-attr">path</span>:t,<span class="code-attr">exports</span>:{},<span class="code-attr">require</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Dynamic requires are not currently supported by @rollup/plugin-commonjs"</span>)}(<span class="code-literal">null</span>==t&amp;&amp;i.path)}},i.exports),i.exports}<span class="code-keyword">var</span> t=e((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;t.length;i++){<span class="code-keyword">var</span> n=t[i];n.enumerable=n.enumerable||!<span class="code-number">1</span>,n.configurable=!<span class="code-number">0</span>,<span class="code-string">"value"</span><span class="code-keyword">in</span> n&amp;&amp;(n.writable=!<span class="code-number">0</span>),<span class="code-built_in">Object</span>.defineProperty(e,n.key,n)}}e.exports=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i,n</span>)</span>{<span class="code-keyword">return</span> i&amp;&amp;t(e.prototype,i),n&amp;&amp;t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>})),i=e((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">i,n</span>)</span>{<span class="code-keyword">return</span> e.exports=t=<span class="code-built_in">Object</span>.setPrototypeOf||<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>,t(i,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>})),n=e((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.exports=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.prototype=<span class="code-built_in">Object</span>.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!<span class="code-number">0</span>})),r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.on=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">this</span>.listeners[e]||(<span class="code-keyword">this</span>.listeners[e]=[]),<span class="code-keyword">this</span>.listeners[e].push(t)},t.off=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.listeners[e])<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.listeners[e].indexOf(t);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.listeners[e]=<span class="code-keyword">this</span>.listeners[e].slice(<span class="code-number">0</span>),<span class="code-keyword">this</span>.listeners[e].splice(i,<span class="code-number">1</span>),i&gt;<span class="code-number">-1</span>},t.trigger=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.listeners[e];<span class="code-keyword">if</span>(t)<span class="code-keyword">if</span>(<span class="code-number">2</span>===<span class="code-built_in">arguments</span>.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.length,n=<span class="code-number">0</span>;n&lt;i;++n)t[n].call(<span class="code-keyword">this</span>,<span class="code-built_in">arguments</span>[<span class="code-number">1</span>]);<span class="code-keyword">else</span> <span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>,<span class="code-number">1</span>),a=t.length,s=<span class="code-number">0</span>;s&lt;a;++s)t[s].apply(<span class="code-keyword">this</span>,r)},t.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.listeners={}},t.pipe=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.on(<span class="code-string">"data"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.push(t)}))},e}(),a=<span class="code-literal">null</span>,s=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t,i,n;a||(a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t,i,n,r,a,s,o,u=[[[],[],[],[],[]],[[],[],[],[],[]]],d=u[<span class="code-number">0</span>],l=u[<span class="code-number">1</span>],c=d[<span class="code-number">4</span>],h=l[<span class="code-number">4</span>],f=[],p=[];<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-number">256</span>;e++)p[(f[e]=e&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(e&gt;&gt;<span class="code-number">7</span>))^e]=e;<span class="code-keyword">for</span>(t=i=<span class="code-number">0</span>;!c[t];t^=n||<span class="code-number">1</span>,i=p[i]||<span class="code-number">1</span>)<span class="code-keyword">for</span>(a=(a=i^i&lt;&lt;<span class="code-number">1</span>^i&lt;&lt;<span class="code-number">2</span>^i&lt;&lt;<span class="code-number">3</span>^i&lt;&lt;<span class="code-number">4</span>)&gt;&gt;<span class="code-number">8</span>^<span class="code-number">255</span>&amp;a^<span class="code-number">99</span>,c[t]=a,h[a]=t,o=<span class="code-number">16843009</span>*f[r=f[n=f[t]]]^<span class="code-number">65537</span>*r^<span class="code-number">257</span>*n^<span class="code-number">16843008</span>*t,s=<span class="code-number">257</span>*f[a]^<span class="code-number">16843008</span>*a,e=<span class="code-number">0</span>;e&lt;<span class="code-number">4</span>;e++)d[e][t]=s=s&lt;&lt;<span class="code-number">24</span>^s&gt;&gt;&gt;<span class="code-number">8</span>,l[e][a]=o=o&lt;&lt;<span class="code-number">24</span>^o&gt;&gt;&gt;<span class="code-number">8</span>;<span class="code-keyword">for</span>(e=<span class="code-number">0</span>;e&lt;<span class="code-number">5</span>;e++)d[e]=d[e].slice(<span class="code-number">0</span>),l[e]=l[e].slice(<span class="code-number">0</span>);<span class="code-keyword">return</span> u}()),<span class="code-keyword">this</span>._tables=[[a[<span class="code-number">0</span>][<span class="code-number">0</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">1</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">2</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">3</span>].slice(),a[<span class="code-number">0</span>][<span class="code-number">4</span>].slice()],[a[<span class="code-number">1</span>][<span class="code-number">0</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">1</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">2</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">3</span>].slice(),a[<span class="code-number">1</span>][<span class="code-number">4</span>].slice()]];<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>._tables[<span class="code-number">0</span>][<span class="code-number">4</span>],s=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],o=e.length,u=<span class="code-number">1</span>;<span class="code-keyword">if</span>(<span class="code-number">4</span>!==o&amp;&amp;<span class="code-number">6</span>!==o&amp;&amp;<span class="code-number">8</span>!==o)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Invalid aes key size"</span>);<span class="code-keyword">var</span> d=e.slice(<span class="code-number">0</span>),l=[];<span class="code-keyword">for</span>(<span class="code-keyword">this</span>._key=[d,l],t=o;t&lt;<span class="code-number">4</span>*o+<span class="code-number">28</span>;t++)n=d[t<span class="code-number">-1</span>],(t%o==<span class="code-number">0</span>||<span class="code-number">8</span>===o&amp;&amp;t%o==<span class="code-number">4</span>)&amp;&amp;(n=r[n&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^r[n&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^r[n&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^r[<span class="code-number">255</span>&amp;n],t%o==<span class="code-number">0</span>&amp;&amp;(n=n&lt;&lt;<span class="code-number">8</span>^n&gt;&gt;&gt;<span class="code-number">24</span>^u&lt;&lt;<span class="code-number">24</span>,u=u&lt;&lt;<span class="code-number">1</span>^<span class="code-number">283</span>*(u&gt;&gt;<span class="code-number">7</span>))),d[t]=d[t-o]^n;<span class="code-keyword">for</span>(i=<span class="code-number">0</span>;t;i++,t--)n=d[<span class="code-number">3</span>&amp;i?t:t<span class="code-number">-4</span>],l[i]=t&lt;=<span class="code-number">4</span>||i&lt;<span class="code-number">4</span>?n:s[<span class="code-number">0</span>][r[n&gt;&gt;&gt;<span class="code-number">24</span>]]^s[<span class="code-number">1</span>][r[n&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]]^s[<span class="code-number">2</span>][r[n&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]]^s[<span class="code-number">3</span>][r[<span class="code-number">255</span>&amp;n]]}<span class="code-keyword">return</span> e.prototype.decrypt=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n,r,a</span>)</span>{<span class="code-keyword">var</span> s,o,u,d,l=<span class="code-keyword">this</span>._key[<span class="code-number">1</span>],c=e^l[<span class="code-number">0</span>],h=n^l[<span class="code-number">1</span>],f=i^l[<span class="code-number">2</span>],p=t^l[<span class="code-number">3</span>],m=l.length/<span class="code-number">4</span><span class="code-number">-2</span>,g=<span class="code-number">4</span>,y=<span class="code-keyword">this</span>._tables[<span class="code-number">1</span>],v=y[<span class="code-number">0</span>],_=y[<span class="code-number">1</span>],T=y[<span class="code-number">2</span>],b=y[<span class="code-number">3</span>],S=y[<span class="code-number">4</span>];<span class="code-keyword">for</span>(d=<span class="code-number">0</span>;d&lt;m;d++)s=v[c&gt;&gt;&gt;<span class="code-number">24</span>]^_[h&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^T[f&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^b[<span class="code-number">255</span>&amp;p]^l[g],o=v[h&gt;&gt;&gt;<span class="code-number">24</span>]^_[f&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^T[p&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^b[<span class="code-number">255</span>&amp;c]^l[g+<span class="code-number">1</span>],u=v[f&gt;&gt;&gt;<span class="code-number">24</span>]^_[p&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^T[c&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^b[<span class="code-number">255</span>&amp;h]^l[g+<span class="code-number">2</span>],p=v[p&gt;&gt;&gt;<span class="code-number">24</span>]^_[c&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]^T[h&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]^b[<span class="code-number">255</span>&amp;f]^l[g+<span class="code-number">3</span>],g+=<span class="code-number">4</span>,c=s,h=o,f=u;<span class="code-keyword">for</span>(d=<span class="code-number">0</span>;d&lt;<span class="code-number">4</span>;d++)r[(<span class="code-number">3</span>&amp;-d)+a]=S[c&gt;&gt;&gt;<span class="code-number">24</span>]&lt;&lt;<span class="code-number">24</span>^S[h&gt;&gt;<span class="code-number">16</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">16</span>^S[f&gt;&gt;<span class="code-number">8</span>&amp;<span class="code-number">255</span>]&lt;&lt;<span class="code-number">8</span>^S[<span class="code-number">255</span>&amp;p]^l[g++],s=c,c=h,h=f,f=p,p=s},e}(),o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t;<span class="code-keyword">return</span>(t=e.call(<span class="code-keyword">this</span>,r)||<span class="code-keyword">this</span>).jobs=[],t.delay=<span class="code-number">1</span>,t.timeout_=<span class="code-literal">null</span>,t}n(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.processJob_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.jobs.shift()(),<span class="code-keyword">this</span>.jobs.length?<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay):<span class="code-keyword">this</span>.timeout_=<span class="code-literal">null</span>},i.push=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.jobs.push(e),<span class="code-keyword">this</span>.timeout_||(<span class="code-keyword">this</span>.timeout_=setTimeout(<span class="code-keyword">this</span>.processJob_.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.delay))},t}(r),u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e&lt;&lt;<span class="code-number">24</span>|(<span class="code-number">65280</span>&amp;e)&lt;&lt;<span class="code-number">8</span>|(<span class="code-number">16711680</span>&amp;e)&gt;&gt;<span class="code-number">8</span>|e&gt;&gt;&gt;<span class="code-number">24</span>},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i,n,r</span>)</span>{<span class="code-keyword">var</span> a=e.STEP,s=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(t.buffer),d=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.byteLength),l=<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">this</span>.asyncStream_=<span class="code-keyword">new</span> o,<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(s.subarray(l,l+a),i,n,d)),l=a;l&lt;s.length;l+=a)n=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>([u(s[l<span class="code-number">-4</span>]),u(s[l<span class="code-number">-3</span>]),u(s[l<span class="code-number">-2</span>]),u(s[l<span class="code-number">-1</span>])]),<span class="code-keyword">this</span>.asyncStream_.push(<span class="code-keyword">this</span>.decryptChunk_(s.subarray(l,l+a),i,n,d));<span class="code-keyword">this</span>.asyncStream_.push((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{
</code></td></tr><tr><td id="L4" class="css-a4x74f"><span>4</span></td><td id="LC4" class="css-1dcdqdg"><code><span class="code-comment">/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */</span>
</code></td></tr><tr><td id="L5" class="css-a4x74f"><span>5</span></td><td id="LC5" class="css-1dcdqdg"><code><span class="code-keyword">var</span> e;
</code></td></tr><tr><td id="L6" class="css-a4x74f"><span>6</span></td><td id="LC6" class="css-1dcdqdg"><code><span class="code-comment">/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */</span>r(<span class="code-literal">null</span>,(e=d).subarray(<span class="code-number">0</span>,e.byteLength-e[e.byteLength<span class="code-number">-1</span>]))}))}<span class="code-keyword">return</span> e.prototype.decryptChunk_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,o,d,l,c,h,f,p=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(e.buffer,e.byteOffset,e.byteLength&gt;&gt;<span class="code-number">2</span>),m=<span class="code-keyword">new</span> s(<span class="code-built_in">Array</span>.prototype.slice.call(t)),g=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(e.byteLength),y=<span class="code-keyword">new</span> <span class="code-built_in">Int32Array</span>(g.buffer);<span class="code-keyword">for</span>(n=i[<span class="code-number">0</span>],r=i[<span class="code-number">1</span>],a=i[<span class="code-number">2</span>],o=i[<span class="code-number">3</span>],f=<span class="code-number">0</span>;f&lt;p.length;f+=<span class="code-number">4</span>)d=u(p[f]),l=u(p[f+<span class="code-number">1</span>]),c=u(p[f+<span class="code-number">2</span>]),h=u(p[f+<span class="code-number">3</span>]),m.decrypt(d,l,c,h,y,f),y[f]=u(y[f]^n),y[f+<span class="code-number">1</span>]=u(y[f+<span class="code-number">1</span>]^r),y[f+<span class="code-number">2</span>]=u(y[f+<span class="code-number">2</span>]^a),y[f+<span class="code-number">3</span>]=u(y[f+<span class="code-number">3</span>]^o),n=d,r=l,a=c,o=h;<span class="code-keyword">return</span> g}(e,t,i);n.set(r,e.byteOffset)}},t(e,<span class="code-literal">null</span>,[{<span class="code-attr">key</span>:<span class="code-string">"STEP"</span>,<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-number">32e3</span>}}]),e}();self.onmessage=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.data,i=<span class="code-keyword">new</span> <span class="code-built_in">Uint8Array</span>(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),n=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(t.key.bytes,t.key.byteOffset,t.key.byteLength/<span class="code-number">4</span>),r=<span class="code-keyword">new</span> <span class="code-built_in">Uint32Array</span>(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/<span class="code-number">4</span>);<span class="code-keyword">new</span> d(i,n,r,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">var</span> n,r;self.postMessage((n={<span class="code-attr">source</span>:t.source,<span class="code-attr">decrypted</span>:i},r={},<span class="code-built_in">Object</span>.keys(n).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=n[e];<span class="code-built_in">ArrayBuffer</span>.isView(t)?r[e]={<span class="code-attr">bytes</span>:t.buffer,<span class="code-attr">byteOffset</span>:t.byteOffset,<span class="code-attr">byteLength</span>:t.byteLength}:r[e]=t})),r),[i.buffer])}))}}))),In=ui(wn),En=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.default?<span class="code-string">"main"</span>:<span class="code-string">"alternative"</span>;<span class="code-keyword">return</span> e.characteristics&amp;&amp;e.characteristics.indexOf(<span class="code-string">"public.accessibility.describes-video"</span>)&gt;=<span class="code-number">0</span>&amp;&amp;(t=<span class="code-string">"main-desc"</span>),t},An=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{e.abort(),e.pause(),t&amp;&amp;t.activePlaylistLoader&amp;&amp;(t.activePlaylistLoader.pause(),t.activePlaylistLoader=<span class="code-literal">null</span>)},Ln=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{t.activePlaylistLoader=e,e.load()},Pn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;An(i,n);<span class="code-keyword">var</span> s=n.activeTrack(),o=n.activeGroup(),u=(o.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.default}))[<span class="code-number">0</span>]||o[<span class="code-number">0</span>]).id,d=n.tracks[u];<span class="code-keyword">if</span>(s!==d){<span class="code-keyword">for</span>(<span class="code-keyword">var</span> l <span class="code-keyword">in</span> r.default.log.warn(<span class="code-string">"Problem encountered loading the alternate audio track.Switching back to default."</span>),n.tracks)n.tracks[l].enabled=n.tracks[l]===d;n.onTrackChanged()}<span class="code-keyword">else</span> a({<span class="code-attr">message</span>:<span class="code-string">"Problem encountered loading the default audio track."</span>})}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders[e],n=t.mediaTypes[e];r.default.log.warn(<span class="code-string">"Problem encountered loading the subtitle track.Disabling subtitle track."</span>),An(i,n);<span class="code-keyword">var</span> a=n.activeTrack();a&amp;&amp;(a.mode=<span class="code-string">"disabled"</span>),n.onTrackChanged()}}},kn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=t.media();a.playlist(e,r),(!n.paused()||e.endList&amp;&amp;<span class="code-string">"none"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class="code-string">"error"</span>,Pn[e](e,i))}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],s=i.mediaTypes[e];t.on(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!n.paused()||e.endList&amp;&amp;<span class="code-string">"none"</span>!==n.preload())&amp;&amp;a.load()})),t.on(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a.playlist(t.media(),r),n.paused()||a.load()})),t.on(<span class="code-string">"error"</span>,Pn[e](e,i))}},xn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.vhs,n=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,u=t.mediaTypes[e],d=u.groups,l=u.tracks,c=u.logger_,h=t.masterPlaylistLoader,f=le(h.master);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> p <span class="code-keyword">in</span> o[e]&amp;&amp;<span class="code-number">0</span>!==<span class="code-built_in">Object</span>.keys(o[e]).length||(o[e]={<span class="code-attr">main</span>:{<span class="code-attr">default</span>:{<span class="code-attr">default</span>:!<span class="code-number">0</span>}}},f&amp;&amp;(o[e].main.default.playlists=h.master.playlists)),o[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> m <span class="code-keyword">in</span> d[p]||(d[p]=[]),o[e][p]){<span class="code-keyword">var</span> g=o[e][p][m],y=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(f?(c(<span class="code-string">"AUDIO group '"</span>+p+<span class="code-string">"' label '"</span>+m+<span class="code-string">"' is a master playlist"</span>),g.isMasterPlaylist=!<span class="code-number">0</span>,y=<span class="code-literal">null</span>):y=<span class="code-string">"vhs-json"</span>===n&amp;&amp;g.playlists?<span class="code-keyword">new</span> Ee(g.playlists[<span class="code-number">0</span>],i,s):g.resolvedUri?<span class="code-keyword">new</span> Ee(g.resolvedUri,i,s):g.playlists&amp;&amp;<span class="code-string">"dash"</span>===n?<span class="code-keyword">new</span> ai(g.playlists[<span class="code-number">0</span>],i,s,h):<span class="code-literal">null</span>,g=r.default.mergeOptions({<span class="code-attr">id</span>:m,<span class="code-attr">playlistLoader</span>:y},g),kn[e](e,g.playlistLoader,t),d[p].push(g),<span class="code-keyword">void</span> <span class="code-number">0</span>===l[m]){<span class="code-keyword">var</span> v=<span class="code-keyword">new</span> r.default.AudioTrack({<span class="code-attr">id</span>:m,<span class="code-attr">kind</span>:En(g),<span class="code-attr">enabled</span>:!<span class="code-number">1</span>,<span class="code-attr">language</span>:g.language,<span class="code-attr">default</span>:g.default,<span class="code-attr">label</span>:m});l[m]=v}}a.on(<span class="code-string">"error"</span>,Pn[e](e,t))},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.tech,n=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,d=t.mediaTypes[e],l=d.groups,c=d.tracks,h=t.masterPlaylistLoader;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> f <span class="code-keyword">in</span> u[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> p <span class="code-keyword">in</span> l[f]||(l[f]=[]),u[e][f])<span class="code-keyword">if</span>(!u[e][f][p].forced){<span class="code-keyword">var</span> m=u[e][f][p],g=<span class="code-keyword">void</span> <span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-string">"hls"</span>===a)g=<span class="code-keyword">new</span> Ee(m.resolvedUri,n,o);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-string">"dash"</span>===a){<span class="code-keyword">if</span>(!m.playlists.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.excludeUntil!==<span class="code-number">1</span>/<span class="code-number">0</span>})).length)<span class="code-keyword">return</span>;g=<span class="code-keyword">new</span> ai(m.playlists[<span class="code-number">0</span>],n,o,h)}<span class="code-keyword">else</span><span class="code-string">"vhs-json"</span>===a&amp;&amp;(g=<span class="code-keyword">new</span> Ee(m.playlists?m.playlists[<span class="code-number">0</span>]:m.resolvedUri,n,o));<span class="code-keyword">if</span>(m=r.default.mergeOptions({<span class="code-attr">id</span>:p,<span class="code-attr">playlistLoader</span>:g},m),kn[e](e,m.playlistLoader,t),l[f].push(m),<span class="code-keyword">void</span> <span class="code-number">0</span>===c[p]){<span class="code-keyword">var</span> y=i.addRemoteTextTrack({<span class="code-attr">id</span>:p,<span class="code-attr">kind</span>:<span class="code-string">"subtitles"</span>,<span class="code-attr">default</span>:m.default&amp;&amp;m.autoselect,<span class="code-attr">language</span>:m.language,<span class="code-attr">label</span>:p},!<span class="code-number">1</span>).track;c[p]=y}}s.on(<span class="code-string">"error"</span>,Pn[e](e,t))},<span class="code-string">"CLOSED-CAPTIONS"</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.tech,n=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u <span class="code-keyword">in</span> n[e])<span class="code-keyword">for</span>(<span class="code-keyword">var</span> d <span class="code-keyword">in</span> s[u]||(s[u]=[]),n[e][u]){<span class="code-keyword">var</span> l=n[e][u][d];<span class="code-keyword">if</span>(<span class="code-regexp">/^(?:CC|SERVICE)/</span>.test(l.instreamId)){<span class="code-keyword">var</span> c=i.options_.vhs&amp;&amp;i.options_.vhs.captionServices||{},h={<span class="code-attr">label</span>:d,<span class="code-attr">language</span>:l.language,<span class="code-attr">instreamId</span>:l.instreamId,<span class="code-attr">default</span>:l.default&amp;&amp;l.autoselect};<span class="code-keyword">if</span>(c[h.instreamId]&amp;&amp;(h=r.default.mergeOptions(h,c[h.instreamId])),<span class="code-keyword">void</span> <span class="code-number">0</span>===h.default&amp;&amp;<span class="code-keyword">delete</span> h.default,s[u].push(r.default.mergeOptions({<span class="code-attr">id</span>:d},l)),<span class="code-keyword">void</span> <span class="code-number">0</span>===o[d]){<span class="code-keyword">var</span> f=i.addRemoteTextTrack({<span class="code-attr">id</span>:h.instreamId,<span class="code-attr">kind</span>:<span class="code-string">"captions"</span>,<span class="code-attr">default</span>:h.default,<span class="code-attr">language</span>:h.language,<span class="code-attr">label</span>:h.label},!<span class="code-number">1</span>).track;o[d]=f}}}}},On=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n=<span class="code-number">0</span>;n&lt;t.length;n++){<span class="code-keyword">if</span>(ue(i,t[n]))<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(t[n].playlists&amp;&amp;e(t[n].playlists,i))<span class="code-keyword">return</span>!<span class="code-number">0</span>}<span class="code-keyword">return</span>!<span class="code-number">1</span>},Dn={<span class="code-attr">AUDIO</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.mediaTypes[e].tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-keyword">if</span>(i[n].enabled)<span class="code-keyword">return</span> i[n];<span class="code-keyword">return</span> <span class="code-literal">null</span>}},<span class="code-attr">SUBTITLES</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.mediaTypes[e].tracks;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)<span class="code-keyword">if</span>(<span class="code-string">"showing"</span>===i[n].mode||<span class="code-string">"hidden"</span>===i[n].mode)<span class="code-keyword">return</span> i[n];<span class="code-keyword">return</span> <span class="code-literal">null</span>}}},Cn=[<span class="code-string">"mediaRequests"</span>,<span class="code-string">"mediaRequestsAborted"</span>,<span class="code-string">"mediaRequestsTimedout"</span>,<span class="code-string">"mediaRequestsErrored"</span>,<span class="code-string">"mediaTransferDuration"</span>,<span class="code-string">"mediaBytesTransferred"</span>,<span class="code-string">"mediaAppends"</span>],Un=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.audioSegmentLoader_[e]+<span class="code-keyword">this</span>.mainSegmentLoader_[e]},Rn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i;i=e.call(<span class="code-keyword">this</span>)||<span class="code-keyword">this</span>;<span class="code-keyword">var</span> n=t.src,a=t.handleManifestRedirects,o=t.withCredentials,u=t.tech,d=t.bandwidth,l=t.externVhs,c=t.useCueTags,h=t.blacklistDuration,f=t.enableLowInitialPlaylist,m=t.sourceType,g=t.cacheEncryptionKeys,y=t.experimentalBufferBasedABR,v=t.experimentalLeastPixelDiffSelector,_=t.captionServices;<span class="code-keyword">if</span>(!n)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"A non-empty playlist URL or JSON manifest string is required"</span>);<span class="code-keyword">var</span> T=t.maxPlaylistRetries;<span class="code-literal">null</span>==T&amp;&amp;(T=<span class="code-number">1</span>/<span class="code-number">0</span>),$i=l,i.experimentalBufferBasedABR=<span class="code-built_in">Boolean</span>(y),i.experimentalLeastPixelDiffSelector=<span class="code-built_in">Boolean</span>(v),i.withCredentials=o,i.tech_=u,i.vhs_=u.vhs,i.sourceType_=m,i.useCueTags_=c,i.blacklistDuration=h,i.maxPlaylistRetries=T,i.enableLowInitialPlaylist=f,i.useCueTags_&amp;&amp;(i.cueTagsTrack_=i.tech_.addTextTrack(<span class="code-string">"metadata"</span>,<span class="code-string">"ad-cues"</span>),i.cueTagsTrack_.inBandMetadataTrackDispatchType=<span class="code-string">""</span>),i.requestOptions_={<span class="code-attr">withCredentials</span>:o,<span class="code-attr">handleManifestRedirects</span>:a,<span class="code-attr">maxPlaylistRetries</span>:T,<span class="code-attr">timeout</span>:<span class="code-literal">null</span>},i.on(<span class="code-string">"error"</span>,i.pauseLoading),i.mediaTypes_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e={};<span class="code-keyword">return</span>[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>,<span class="code-string">"CLOSED-CAPTIONS"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e[t]={<span class="code-attr">groups</span>:{},<span class="code-attr">tracks</span>:{},<span class="code-attr">activePlaylistLoader</span>:<span class="code-literal">null</span>,<span class="code-attr">activeGroup</span>:Ki,<span class="code-attr">activeTrack</span>:Ki,<span class="code-attr">getActiveGroup</span>:Ki,<span class="code-attr">onGroupChanged</span>:Ki,<span class="code-attr">onTrackChanged</span>:Ki,<span class="code-attr">lastTrack_</span>:<span class="code-literal">null</span>,<span class="code-attr">logger_</span>:p(<span class="code-string">"MediaGroups["</span>+t+<span class="code-string">"]"</span>)}})),e}(),i.mediaSource=<span class="code-keyword">new</span> <span class="code-built_in">window</span>.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(s(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(s(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(s(i)),i.mediaSource.addEventListener(<span class="code-string">"durationchange"</span>,i.handleDurationChange_),i.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,i.handleSourceOpen_),i.mediaSource.addEventListener(<span class="code-string">"sourceended"</span>,i.handleSourceEnded_),i.seekable_=r.default.createTimeRanges(),i.hasPlayed_=!<span class="code-number">1</span>,i.syncController_=<span class="code-keyword">new</span> bn(t),i.segmentMetadataTrack_=u.addRemoteTextTrack({<span class="code-attr">kind</span>:<span class="code-string">"metadata"</span>,<span class="code-attr">label</span>:<span class="code-string">"segment-metadata"</span>},!<span class="code-number">1</span>).track,i.decrypter_=<span class="code-keyword">new</span> In,i.sourceUpdater_=<span class="code-keyword">new</span> mn(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=<span class="code-keyword">new</span> Sn;<span class="code-keyword">var</span> b={<span class="code-attr">vhs</span>:i.vhs_,<span class="code-attr">parse708captions</span>:t.parse708captions,<span class="code-attr">captionServices</span>:_,<span class="code-attr">mediaSource</span>:i.mediaSource,<span class="code-attr">currentTime</span>:i.tech_.currentTime.bind(i.tech_),<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.seekable()},<span class="code-attr">seeking</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.seeking()},<span class="code-attr">duration</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.duration()},<span class="code-attr">hasPlayed</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.hasPlayed_},<span class="code-attr">goalBufferLength</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.goalBufferLength()},<span class="code-attr">bandwidth</span>:d,<span class="code-attr">syncController</span>:i.syncController_,<span class="code-attr">decrypter</span>:i.decrypter_,<span class="code-attr">sourceType</span>:i.sourceType_,<span class="code-attr">inbandTextTracks</span>:i.inbandTextTracks_,<span class="code-attr">cacheEncryptionKeys</span>:g,<span class="code-attr">sourceUpdater</span>:i.sourceUpdater_,<span class="code-attr">timelineChangeController</span>:i.timelineChangeController_,<span class="code-attr">experimentalExactManifestTimings</span>:t.experimentalExactManifestTimings};i.masterPlaylistLoader_=<span class="code-string">"dash"</span>===i.sourceType_?<span class="code-keyword">new</span> ai(n,i.vhs_,i.requestOptions_):<span class="code-keyword">new</span> Ee(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=<span class="code-keyword">new</span> Yi(r.default.mergeOptions(b,{<span class="code-attr">segmentMetadataTrack</span>:i.segmentMetadataTrack_,<span class="code-attr">loaderType</span>:<span class="code-string">"main"</span>}),t),i.audioSegmentLoader_=<span class="code-keyword">new</span> Yi(r.default.mergeOptions(b,{<span class="code-attr">loaderType</span>:<span class="code-string">"audio"</span>}),t),i.subtitleSegmentLoader_=<span class="code-keyword">new</span> vn(r.default.mergeOptions(b,{<span class="code-attr">loaderType</span>:<span class="code-string">"vtt"</span>,<span class="code-attr">featuresNativeTextTracks</span>:i.tech_.featuresNativeTextTracks}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&amp;&amp;(i.masterPlaylistLoader_.one(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.startABRTimer_()})),i.tech_.on(<span class="code-string">"pause"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.stopABRTimer_()})),i.tech_.on(<span class="code-string">"play"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.startABRTimer_()}))),Cn.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i[e+<span class="code-string">"_"</span>]=Un.bind(s(i),e)})),i.logger_=p(<span class="code-string">"MPC"</span>),i.triggeredFmp4Usage=!<span class="code-number">1</span>,<span class="code-string">"none"</span>===i.tech_.preload()?(i.loadOnPlay_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.loadOnPlay_=<span class="code-literal">null</span>,i.masterPlaylistLoader_.load()},i.tech_.one(<span class="code-string">"play"</span>,i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=<span class="code-number">-1</span>,i.mainAppendsToLoadedData__=<span class="code-number">-1</span>,i.audioAppendsToLoadedData__=<span class="code-number">-1</span>;<span class="code-keyword">var</span> S=<span class="code-string">"none"</span>===i.tech_.preload()?<span class="code-string">"play"</span>:<span class="code-string">"loadstart"</span>;<span class="code-keyword">return</span> i.tech_.one(S,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-built_in">Date</span>.now();i.tech_.one(<span class="code-string">"loadeddata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.timeToLoadedData__=<span class="code-built_in">Date</span>.now()-e,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends}))})),i}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.mainAppendsToLoadedData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.audioAppendsToLoadedData__},i.appendsToLoadedData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.mainAppendsToLoadedData_(),t=<span class="code-keyword">this</span>.audioAppendsToLoadedData_();<span class="code-keyword">return</span><span class="code-number">-1</span>===e||<span class="code-number">-1</span>===t?<span class="code-number">-1</span>:e+t},i.timeToLoadedData_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.timeToLoadedData__},i.checkABR_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.selectPlaylist();e&amp;&amp;<span class="code-keyword">this</span>.shouldSwitchToMedia_(e)&amp;&amp;<span class="code-keyword">this</span>.switchMedia_(e,<span class="code-string">"abr"</span>)},i.switchMedia_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.media(),r=n&amp;&amp;(n.id||n.uri),a=e.id||e.uri;r&amp;&amp;r!==a&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"switch media "</span>+r+<span class="code-string">" -&gt; "</span>+a+<span class="code-string">" from "</span>+t),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-rendition-change-"</span>+t})),<span class="code-keyword">this</span>.masterPlaylistLoader_.media(e,i)},i.startABRTimer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.stopABRTimer_(),<span class="code-keyword">this</span>.abrTimer_=<span class="code-built_in">window</span>.setInterval((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> e.checkABR_()}),<span class="code-number">250</span>)},i.stopABRTimer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.scrubbing&amp;&amp;<span class="code-keyword">this</span>.tech_.scrubbing()||(<span class="code-built_in">window</span>.clearInterval(<span class="code-keyword">this</span>.abrTimer_),<span class="code-keyword">this</span>.abrTimer_=<span class="code-literal">null</span>)},i.getAudioTrackPlaylists_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.master(),t=e&amp;&amp;e.playlists||[];<span class="code-keyword">if</span>(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)<span class="code-keyword">return</span> t;<span class="code-keyword">var</span> i,n=e.mediaGroups.AUDIO,r=<span class="code-built_in">Object</span>.keys(n);<span class="code-keyword">if</span>(<span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.mediaTypes_.AUDIO.groups).length)i=<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activeTrack();<span class="code-keyword">else</span>{<span class="code-keyword">var</span> a=n.main||r.length&amp;&amp;n[r[<span class="code-number">0</span>]];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s <span class="code-keyword">in</span> a)<span class="code-keyword">if</span>(a[s].default){i={<span class="code-attr">label</span>:s};<span class="code-keyword">break</span>}}<span class="code-keyword">if</span>(!i)<span class="code-keyword">return</span> t;<span class="code-keyword">var</span> o=[];<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u <span class="code-keyword">in</span> n)<span class="code-keyword">if</span>(n[u][i.label]){<span class="code-keyword">var</span> d=n[u][i.label];<span class="code-keyword">if</span>(d.playlists&amp;&amp;d.playlists.length)o.push.apply(o,d.playlists);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(d.uri)o.push(d);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(e.playlists.length)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> l=<span class="code-number">0</span>;l&lt;e.playlists.length;l++){<span class="code-keyword">var</span> c=e.playlists[l];c.attributes&amp;&amp;c.attributes.AUDIO&amp;&amp;c.attributes.AUDIO===u&amp;&amp;o.push(c)}}<span class="code-keyword">return</span> o.length?o:t},i.setupMasterPlaylistLoaderListeners_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media(),i=<span class="code-number">1.5</span>*t.targetDuration*<span class="code-number">1e3</span>;oe(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class="code-number">0</span>:e.requestOptions_.timeout=i,t.endList&amp;&amp;<span class="code-string">"none"</span>!==e.tech_.preload()&amp;&amp;(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>,<span class="code-string">"CLOSED-CAPTIONS"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{xn[t](t,e)}));<span class="code-keyword">var</span> t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs,a=e.segmentLoaders,s=a.AUDIO,o=a.main;[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{t[i].activeGroup=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{<span class="code-keyword">var</span> n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=n.media();<span class="code-keyword">if</span>(!a)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> s=<span class="code-literal">null</span>;a.attributes[e]&amp;&amp;(s=r[a.attributes[e]]);<span class="code-keyword">var</span> o=<span class="code-built_in">Object</span>.keys(r);<span class="code-keyword">if</span>(!s)<span class="code-keyword">if</span>(<span class="code-string">"AUDIO"</span>===e&amp;&amp;o.length&gt;<span class="code-number">1</span>&amp;&amp;le(t.master))<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u=<span class="code-number">0</span>;u&lt;o.length;u++){<span class="code-keyword">var</span> d=r[o[u]];<span class="code-keyword">if</span>(On(d,a)){s=d;<span class="code-keyword">break</span>}}<span class="code-keyword">else</span> r.main?s=r.main:<span class="code-number">1</span>===o.length&amp;&amp;(s=r[o[<span class="code-number">0</span>]]);<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i?s:<span class="code-literal">null</span>!==i&amp;&amp;s&amp;&amp;s.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.id===i.id}))[<span class="code-number">0</span>]||<span class="code-literal">null</span>}}(i,e),t[i].activeTrack=Dn[i](i,e),t[i].onGroupChanged=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders,n=i[e],r=i.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.getActiveGroup(),u=a.activePlaylistLoader,d=a.lastGroup_;o&amp;&amp;d&amp;&amp;o.id===d.id||(a.lastGroup_=o,a.lastTrack_=s,An(n,a),o&amp;&amp;!o.isMasterPlaylist&amp;&amp;(o.playlistLoader?(n.resyncLoader(),Ln(o.playlistLoader,a)):u&amp;&amp;r.resetEverything()))}}(i,e),t[i].onGroupChanging=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=<span class="code-literal">null</span>,i.abort(),i.pause()}}(i,e),t[i].onTrackChanged=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> i=t.masterPlaylistLoader,n=t.segmentLoaders,r=n[e],a=n.main,s=t.mediaTypes[e],o=s.activeTrack(),u=s.getActiveGroup(),d=s.activePlaylistLoader,l=s.lastTrack_;<span class="code-keyword">if</span>((!l||!o||l.id!==o.id)&amp;&amp;(s.lastGroup_=u,s.lastTrack_=o,An(r,s),u)){<span class="code-keyword">if</span>(u.isMasterPlaylist){<span class="code-keyword">if</span>(!o||!l||o.id===l.id)<span class="code-keyword">return</span>;<span class="code-keyword">var</span> c=t.vhs.masterPlaylistController_,h=c.selectPlaylist();<span class="code-keyword">if</span>(c.media()===h)<span class="code-keyword">return</span>;<span class="code-keyword">return</span> s.logger_(<span class="code-string">"track change. Switching master audio from "</span>+l.id+<span class="code-string">" to "</span>+o.id),i.pause(),a.resetEverything(),<span class="code-keyword">void</span> c.fastQualityChange_(h)}<span class="code-keyword">if</span>(<span class="code-string">"AUDIO"</span>===e){<span class="code-keyword">if</span>(!u.playlistLoader)<span class="code-keyword">return</span> a.setAudio(!<span class="code-number">0</span>),<span class="code-keyword">void</span> a.resetEverything();r.setAudio(!<span class="code-number">0</span>),a.setAudio(!<span class="code-number">1</span>)}d!==u.playlistLoader?(r.track&amp;&amp;r.track(o),r.resetEverything(),Ln(u.playlistLoader,s)):Ln(u.playlistLoader,s)}}}(i,e),t[i].getActiveGroup=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=t.mediaTypes;<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=i[e].activeTrack();<span class="code-keyword">return</span> t?i[e].activeGroup(t):<span class="code-literal">null</span>}}(i,e)}));<span class="code-keyword">var</span> u=t.AUDIO.activeGroup();<span class="code-keyword">if</span>(u){<span class="code-keyword">var</span> d=(u.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e.default}))[<span class="code-number">0</span>]||u[<span class="code-number">0</span>]).id;t.AUDIO.tracks[d].enabled=!<span class="code-number">0</span>,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!<span class="code-number">1</span>),s.setAudio(!<span class="code-number">0</span>)):o.setAudio(!<span class="code-number">0</span>)}i.on(<span class="code-string">"mediachange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e].onGroupChanged()}))})),i.on(<span class="code-string">"mediachanging"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t[e].onGroupChanging()}))}));<span class="code-keyword">var</span> l=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.AUDIO.onTrackChanged(),n.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-audio-change"</span>}),n.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-audio-change"</span>})};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> c <span class="code-keyword">in</span> n.audioTracks().addEventListener(<span class="code-string">"change"</span>,l),n.remoteTextTracks().addEventListener(<span class="code-string">"change"</span>,t.SUBTITLES.onTrackChanged),r.on(<span class="code-string">"dispose"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{n.audioTracks().removeEventListener(<span class="code-string">"change"</span>,l),n.remoteTextTracks().removeEventListener(<span class="code-string">"change"</span>,t.SUBTITLES.onTrackChanged)})),n.clearTracks(<span class="code-string">"audio"</span>),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[c])}({<span class="code-attr">sourceType</span>:e.sourceType_,<span class="code-attr">segmentLoaders</span>:{<span class="code-attr">AUDIO</span>:e.audioSegmentLoader_,<span class="code-attr">SUBTITLES</span>:e.subtitleSegmentLoader_,<span class="code-attr">main</span>:e.mainSegmentLoader_},<span class="code-attr">tech</span>:e.tech_,<span class="code-attr">requestOptions</span>:e.requestOptions_,<span class="code-attr">masterPlaylistLoader</span>:e.masterPlaylistLoader_,<span class="code-attr">vhs</span>:e.vhs_,<span class="code-attr">master</span>:e.master(),<span class="code-attr">mediaTypes</span>:e.mediaTypes_,<span class="code-attr">blacklistCurrentPlaylist</span>:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger(<span class="code-string">"selectedinitialmedia"</span>):e.mediaTypes_.AUDIO.activePlaylistLoader.one(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"selectedinitialmedia"</span>)}))})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"loadedplaylist"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.loadOnPlay_&amp;&amp;e.tech_.off(<span class="code-string">"play"</span>,e.loadOnPlay_);<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(!t){<span class="code-keyword">var</span> i;<span class="code-keyword">if</span>(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&amp;&amp;(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(e.initialMedia_=i,e.switchMedia_(e.initialMedia_,<span class="code-string">"initial"</span>),<span class="code-string">"vhs-json"</span>!==e.sourceType_||!e.initialMedia_.segments)<span class="code-keyword">return</span>;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"mediachanging"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"mediachange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media(),i=<span class="code-number">1.5</span>*t.targetDuration*<span class="code-number">1e3</span>;oe(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=<span class="code-number">0</span>:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"mediachange"</span>,<span class="code-attr">bubbles</span>:!<span class="code-number">0</span>})})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"playlistunchanged"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistLoader_.media();<span class="code-string">"playlist-unchanged"</span>!==t.lastExcludeReason_&amp;&amp;e.stuckAtPlaylistEnd_(t)&amp;&amp;(e.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Playlist no longer updating."</span>,<span class="code-attr">reason</span>:<span class="code-string">"playlist-unchanged"</span>}),e.tech_.trigger(<span class="code-string">"playliststuck"</span>))})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"renditiondisabled"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-rendition-disabled"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-disabled"</span>})})),<span class="code-keyword">this</span>.masterPlaylistLoader_.on(<span class="code-string">"renditionenabled"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-rendition-enabled"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-enabled"</span>})}))},i.handleUpdatedMediaPlaylist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.useCueTags_&amp;&amp;<span class="code-keyword">this</span>.updateAdCues_(e),<span class="code-keyword">this</span>.mainSegmentLoader_.playlist(e,<span class="code-keyword">this</span>.requestOptions_),<span class="code-keyword">this</span>.updateDuration(!e.endList),<span class="code-keyword">this</span>.tech_.paused()||(<span class="code-keyword">this</span>.mainSegmentLoader_.load(),<span class="code-keyword">this</span>.audioSegmentLoader_&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.load())},i.triggerPresenceUsage_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=e.mediaGroups||{},n=!<span class="code-number">0</span>,r=<span class="code-built_in">Object</span>.keys(i.AUDIO);<span class="code-keyword">for</span>(<span class="code-keyword">var</span> a <span class="code-keyword">in</span> i.AUDIO)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> s <span class="code-keyword">in</span> i.AUDIO[a])i.AUDIO[a][s].uri||(n=!<span class="code-number">1</span>);n&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-demuxed"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-demuxed"</span>})),<span class="code-built_in">Object</span>.keys(i.SUBTITLES).length&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-webvtt"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-webvtt"</span>})),$i.Playlist.isAes(t)&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-aes"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-aes"</span>})),r.length&amp;&amp;<span class="code-built_in">Object</span>.keys(i.AUDIO[r[<span class="code-number">0</span>]]).length&gt;<span class="code-number">1</span>&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-alternate-audio"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-alternate-audio"</span>})),<span class="code-keyword">this</span>.useCueTags_&amp;&amp;(<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-playlist-cue-tags"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-playlist-cue-tags"</span>}))},i.shouldSwitchToMedia_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistLoader_.media()||<span class="code-keyword">this</span>.masterPlaylistLoader_.pendingMedia_,i=<span class="code-keyword">this</span>.tech_.currentTime(),n=<span class="code-keyword">this</span>.bufferLowWaterLine(),a=<span class="code-keyword">this</span>.bufferHighWaterLine();<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.currentPlaylist,i=e.buffered,n=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,u=e.duration,d=e.experimentalBufferBasedABR,l=e.log;<span class="code-keyword">if</span>(!a)<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"We received no playlist to switch to. Please check your stream."</span>),!<span class="code-number">1</span>;<span class="code-keyword">var</span> c=<span class="code-string">"allowing switch "</span>+(t&amp;&amp;t.id||<span class="code-string">"null"</span>)+<span class="code-string">" -&gt; "</span>+a.id;<span class="code-keyword">if</span>(!t)<span class="code-keyword">return</span> l(c+<span class="code-string">" as current playlist is not set"</span>),!<span class="code-number">0</span>;<span class="code-keyword">if</span>(a.id===t.id)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> h=<span class="code-built_in">Boolean</span>(H(i,n).length);<span class="code-keyword">if</span>(!t.endList)<span class="code-keyword">return</span> h||<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> t.partTargetDuration?(l(c+<span class="code-string">" as current playlist is live"</span>),!<span class="code-number">0</span>):(l(<span class="code-string">"not "</span>+c+<span class="code-string">" as current playlist is live llhls, but currentTime isn't in buffered."</span>),!<span class="code-number">1</span>);<span class="code-keyword">var</span> f=X(i,n),p=d?si.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:si.MAX_BUFFER_LOW_WATER_LINE;<span class="code-keyword">if</span>(u&lt;p)<span class="code-keyword">return</span> l(c+<span class="code-string">" as duration &lt; max low water line ("</span>+u+<span class="code-string">" &lt; "</span>+p+<span class="code-string">")"</span>),!<span class="code-number">0</span>;<span class="code-keyword">var</span> m=a.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;<span class="code-keyword">if</span>(m&lt;g&amp;&amp;(!d||f&lt;o)){<span class="code-keyword">var</span> y=c+<span class="code-string">" as next bandwidth &lt; current bandwidth ("</span>+m+<span class="code-string">" &lt; "</span>+g+<span class="code-string">")"</span>;<span class="code-keyword">return</span> d&amp;&amp;(y+=<span class="code-string">" and forwardBuffer &lt; bufferHighWaterLine ("</span>+f+<span class="code-string">" &lt; "</span>+o+<span class="code-string">")"</span>),l(y),!<span class="code-number">0</span>}<span class="code-keyword">if</span>((!d||m&gt;g)&amp;&amp;f&gt;=s){<span class="code-keyword">var</span> v=c+<span class="code-string">" as forwardBuffer &gt;= bufferLowWaterLine ("</span>+f+<span class="code-string">" &gt;= "</span>+s+<span class="code-string">")"</span>;<span class="code-keyword">return</span> d&amp;&amp;(v+=<span class="code-string">" and next bandwidth &gt; current bandwidth ("</span>+m+<span class="code-string">" &gt; "</span>+g+<span class="code-string">")"</span>),l(v),!<span class="code-number">0</span>}<span class="code-keyword">return</span> l(<span class="code-string">"not "</span>+c+<span class="code-string">" as no switching criteria met"</span>),!<span class="code-number">1</span>}({<span class="code-attr">buffered</span>:<span class="code-keyword">this</span>.tech_.buffered(),<span class="code-attr">currentTime</span>:i,<span class="code-attr">currentPlaylist</span>:t,<span class="code-attr">nextPlaylist</span>:e,<span class="code-attr">bufferLowWaterLine</span>:n,<span class="code-attr">bufferHighWaterLine</span>:a,<span class="code-attr">duration</span>:<span class="code-keyword">this</span>.duration(),<span class="code-attr">experimentalBufferBasedABR</span>:<span class="code-keyword">this</span>.experimentalBufferBasedABR,<span class="code-attr">log</span>:<span class="code-keyword">this</span>.logger_})},i.setupSegmentLoaderListeners_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.experimentalBufferBasedABR||(<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"bandwidthupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&amp;&amp;e.switchMedia_(t,<span class="code-string">"bandwidthupdate"</span>),e.tech_.trigger(<span class="code-string">"bandwidthupdate"</span>)})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"progress"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"progress"</span>)}))),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"appenderror"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.error=e.mainSegmentLoader_.error_,e.trigger(<span class="code-string">"error"</span>)})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"syncinfoupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onSyncInfoUpdate_()})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"timestampoffset"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-timestamp-offset"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-timestamp-offset"</span>})})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"syncinfoupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.onSyncInfoUpdate_()})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"appenderror"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.error=e.audioSegmentLoader_.error_,e.trigger(<span class="code-string">"error"</span>)})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"ended"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.logger_(<span class="code-string">"main segment loader ended"</span>),e.onEndOfStream()})),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"earlyabort"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.experimentalBufferBasedABR||(e.delegateLoaders_(<span class="code-string">"all"</span>,[<span class="code-string">"abort"</span>]),e.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."</span>},<span class="code-number">120</span>))}));<span class="code-keyword">var</span> t=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!e.sourceUpdater_.hasCreatedSourceBuffers())<span class="code-keyword">return</span> e.tryToCreateSourceBuffers_();<span class="code-keyword">var</span> t=e.getCodecsOrExclude_();t&amp;&amp;e.sourceUpdater_.addOrChangeSourceBuffers(t)};<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"trackinfo"</span>,t),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"trackinfo"</span>,t),<span class="code-keyword">this</span>.mainSegmentLoader_.on(<span class="code-string">"fmp4"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-fmp4"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-fmp4"</span>}),e.triggeredFmp4Usage=!<span class="code-number">0</span>)})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"fmp4"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.triggeredFmp4Usage||(e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-fmp4"</span>}),e.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-fmp4"</span>}),e.triggeredFmp4Usage=!<span class="code-number">0</span>)})),<span class="code-keyword">this</span>.audioSegmentLoader_.on(<span class="code-string">"ended"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.logger_(<span class="code-string">"audioSegmentLoader ended"</span>),e.onEndOfStream()}))},i.mediaSecondsLoaded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.max(<span class="code-keyword">this</span>.audioSegmentLoader_.mediaSecondsLoaded+<span class="code-keyword">this</span>.mainSegmentLoader_.mediaSecondsLoaded)},i.load=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.mainSegmentLoader_.load(),<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.load(),<span class="code-keyword">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;<span class="code-keyword">this</span>.subtitleSegmentLoader_.load()},i.smoothQualityChange_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.selectPlaylist()),<span class="code-keyword">this</span>.fastQualityChange_(e)},i.fastQualityChange_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e=<span class="code-keyword">this</span>.selectPlaylist()),e!==<span class="code-keyword">this</span>.masterPlaylistLoader_.media()?(<span class="code-keyword">this</span>.switchMedia_(e,<span class="code-string">"fast-quality"</span>),<span class="code-keyword">this</span>.mainSegmentLoader_.resetEverything((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r.default.browser.IE_VERSION||r.default.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+<span class="code-number">.04</span>):t.tech_.setCurrentTime(t.tech_.currentTime())}))):<span class="code-keyword">this</span>.logger_(<span class="code-string">"skipping fastQualityChange because new media is same as old"</span>)},i.play=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.setupFirstPlay()){<span class="code-keyword">this</span>.tech_.ended()&amp;&amp;<span class="code-keyword">this</span>.tech_.setCurrentTime(<span class="code-number">0</span>),<span class="code-keyword">this</span>.hasPlayed_&amp;&amp;<span class="code-keyword">this</span>.load();<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.seekable();<span class="code-keyword">return</span> <span class="code-keyword">this</span>.tech_.duration()===<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.tech_.currentTime()&lt;e.start(<span class="code-number">0</span>)?<span class="code-keyword">this</span>.tech_.setCurrentTime(e.end(e.length<span class="code-number">-1</span>)):<span class="code-keyword">void</span> <span class="code-number">0</span>}},i.setupFirstPlay=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(!t||<span class="code-keyword">this</span>.tech_.paused()||<span class="code-keyword">this</span>.hasPlayed_)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!t.endList){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.seekable();<span class="code-keyword">if</span>(!i.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(r.default.browser.IE_VERSION&amp;&amp;<span class="code-number">0</span>===<span class="code-keyword">this</span>.tech_.readyState())<span class="code-keyword">return</span> <span class="code-keyword">this</span>.tech_.one(<span class="code-string">"loadedmetadata"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.trigger(<span class="code-string">"firstplay"</span>),e.tech_.setCurrentTime(i.end(<span class="code-number">0</span>)),e.hasPlayed_=!<span class="code-number">0</span>})),!<span class="code-number">1</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"firstplay"</span>),<span class="code-keyword">this</span>.tech_.setCurrentTime(i.end(<span class="code-number">0</span>))}<span class="code-keyword">return</span> <span class="code-keyword">this</span>.hasPlayed_=!<span class="code-number">0</span>,<span class="code-keyword">this</span>.load(),!<span class="code-number">0</span>},i.handleSourceOpen_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tryToCreateSourceBuffers_(),<span class="code-keyword">this</span>.tech_.autoplay()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.play();<span class="code-keyword">void</span> <span class="code-number">0</span>!==e&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e.then&amp;&amp;e.then(<span class="code-literal">null</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{}))}<span class="code-keyword">this</span>.trigger(<span class="code-string">"sourceopen"</span>)},i.handleSourceEnded_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.inbandTextTracks_.metadataTrack_){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.inbandTextTracks_.metadataTrack_.cues;<span class="code-keyword">if</span>(e&amp;&amp;e.length){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.duration();e[e.length<span class="code-number">-1</span>].endTime=<span class="code-built_in">isNaN</span>(t)||<span class="code-built_in">Math</span>.abs(t)===<span class="code-number">1</span>/<span class="code-number">0</span>?<span class="code-built_in">Number</span>.MAX_VALUE:t}}},i.handleDurationChange_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"durationchange"</span>)},i.onEndOfStream=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.mainSegmentLoader_.ended_;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&amp;&amp;<span class="code-keyword">this</span>.audioSegmentLoader_.ended_:<span class="code-keyword">this</span>.audioSegmentLoader_.ended_}e&amp;&amp;(<span class="code-keyword">this</span>.stopABRTimer_(),<span class="code-keyword">this</span>.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.seekable().length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.syncController_.getExpiredTime(e,<span class="code-keyword">this</span>.duration());<span class="code-keyword">if</span>(<span class="code-literal">null</span>===t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> i=$i.Playlist.playlistEnd(e,t),n=<span class="code-keyword">this</span>.tech_.currentTime(),r=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(!r.length)<span class="code-keyword">return</span> i-n&lt;=F;<span class="code-keyword">var</span> a=r.end(r.length<span class="code-number">-1</span>);<span class="code-keyword">return</span> a-n&lt;=F&amp;&amp;i-a&lt;=F},i.blacklistCurrentPlaylist=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===e&amp;&amp;(e={});<span class="code-keyword">var</span> i=e.playlist||<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(t=t||e.blacklistDuration||<span class="code-keyword">this</span>.blacklistDuration,!i)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error=e,<span class="code-keyword">void</span>(<span class="code-string">"open"</span>!==<span class="code-keyword">this</span>.mediaSource.readyState?<span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>):<span class="code-keyword">this</span>.sourceUpdater_.endOfStream(<span class="code-string">"network"</span>));i.playlistErrors_++;<span class="code-keyword">var</span> n,a=<span class="code-keyword">this</span>.masterPlaylistLoader_.master.playlists,s=a.filter(ae),o=<span class="code-number">1</span>===s.length&amp;&amp;s[<span class="code-number">0</span>]===i;<span class="code-keyword">if</span>(<span class="code-number">1</span>===a.length&amp;&amp;t!==<span class="code-number">1</span>/<span class="code-number">0</span>)<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"Problem encountered with playlist "</span>+i.id+<span class="code-string">". Trying again since it is the only playlist."</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"retryplaylist"</span>),<span class="code-keyword">this</span>.masterPlaylistLoader_.load(o);<span class="code-keyword">if</span>(o){<span class="code-keyword">var</span> u=!<span class="code-number">1</span>;a.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e!==i){<span class="code-keyword">var</span> t=e.excludeUntil;<span class="code-keyword">void</span> <span class="code-number">0</span>!==t&amp;&amp;t!==<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;(u=!<span class="code-number">0</span>,<span class="code-keyword">delete</span> e.excludeUntil)}})),u&amp;&amp;(r.default.log.warn(<span class="code-string">"Removing other playlists from the exclusion list because the last rendition is about to be excluded."</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"retryplaylist"</span>))}n=i.playlistErrors_&gt;<span class="code-keyword">this</span>.maxPlaylistRetries?<span class="code-number">1</span>/<span class="code-number">0</span>:<span class="code-built_in">Date</span>.now()+<span class="code-number">1e3</span>*t,i.excludeUntil=n,e.reason&amp;&amp;(i.lastExcludeReason_=e.reason),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"blacklistplaylist"</span>),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-rendition-blacklisted"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-rendition-blacklisted"</span>});<span class="code-keyword">var</span> d=<span class="code-keyword">this</span>.selectPlaylist();<span class="code-keyword">if</span>(!d)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.error=<span class="code-string">"Playback cannot continue. No available working or supported playlists."</span>,<span class="code-keyword">void</span> <span class="code-keyword">this</span>.trigger(<span class="code-string">"error"</span>);<span class="code-keyword">var</span> l=e.internal?<span class="code-keyword">this</span>.logger_:r.default.log.warn,c=e.message?<span class="code-string">" "</span>+e.message:<span class="code-string">""</span>;l((e.internal?<span class="code-string">"Internal problem"</span>:<span class="code-string">"Problem"</span>)+<span class="code-string">" encountered with playlist "</span>+i.id+<span class="code-string">"."</span>+c+<span class="code-string">" Switching to playlist "</span>+d.id+<span class="code-string">"."</span>),d.attributes.AUDIO!==i.attributes.AUDIO&amp;&amp;<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"audio"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]),d.attributes.SUBTITLES!==i.attributes.SUBTITLES&amp;&amp;<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"subtitle"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]),<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"main"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]);<span class="code-keyword">var</span> h=d.targetDuration/<span class="code-number">2</span>*<span class="code-number">1e3</span>||<span class="code-number">5e3</span>,f=<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> d.lastRequest&amp;&amp;<span class="code-built_in">Date</span>.now()-d.lastRequest&lt;=h;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.switchMedia_(d,<span class="code-string">"exclude"</span>,o||f)},i.pauseLoading=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.delegateLoaders_(<span class="code-string">"all"</span>,[<span class="code-string">"abort"</span>,<span class="code-string">"pause"</span>]),<span class="code-keyword">this</span>.stopABRTimer_()},i.delegateLoaders_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>,n=[],r=<span class="code-string">"all"</span>===e;(r||<span class="code-string">"main"</span>===e)&amp;&amp;n.push(<span class="code-keyword">this</span>.masterPlaylistLoader_);<span class="code-keyword">var</span> a=[];(r||<span class="code-string">"audio"</span>===e)&amp;&amp;a.push(<span class="code-string">"AUDIO"</span>),(r||<span class="code-string">"subtitle"</span>===e)&amp;&amp;(a.push(<span class="code-string">"CLOSED-CAPTIONS"</span>),a.push(<span class="code-string">"SUBTITLES"</span>)),a.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=i.mediaTypes_[e]&amp;&amp;i.mediaTypes_[e].activePlaylistLoader;t&amp;&amp;n.push(t)})),[<span class="code-string">"main"</span>,<span class="code-string">"audio"</span>,<span class="code-string">"subtitle"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> r=i[t+<span class="code-string">"SegmentLoader_"</span>];!r||e!==t&amp;&amp;<span class="code-string">"all"</span>!==e||n.push(r)})),n.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> t.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> e[t]&amp;&amp;e[t]()}))}))},i.setCurrentTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=H(<span class="code-keyword">this</span>.tech_.buffered(),e);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.media()&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistLoader_.media().segments?t&amp;&amp;t.length?e:(<span class="code-keyword">this</span>.mainSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.mainSegmentLoader_.abort(),<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader&amp;&amp;(<span class="code-keyword">this</span>.audioSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.audioSegmentLoader_.abort()),<span class="code-keyword">this</span>.mediaTypes_.SUBTITLES.activePlaylistLoader&amp;&amp;(<span class="code-keyword">this</span>.subtitleSegmentLoader_.resetEverything(),<span class="code-keyword">this</span>.subtitleSegmentLoader_.abort()),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.load()):<span class="code-number">0</span>},i.duration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.masterPlaylistLoader_)<span class="code-keyword">return</span> <span class="code-number">0</span>;<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">return</span> e?e.endList?<span class="code-keyword">this</span>.mediaSource?<span class="code-keyword">this</span>.mediaSource.duration:$i.Playlist.duration(e):<span class="code-number">1</span>/<span class="code-number">0</span>:<span class="code-number">0</span>},i.seekable=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.seekable_},i.onSyncInfoUpdate_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.masterPlaylistLoader_){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistLoader_.media();<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.syncController_.getExpiredTime(t,<span class="code-keyword">this</span>.duration());<span class="code-keyword">if</span>(<span class="code-literal">null</span>!==i){<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.masterPlaylistLoader_.master,a=$i.Playlist.seekable(t,i,$i.Playlist.liveEdgeDelay(n,t));<span class="code-keyword">if</span>(<span class="code-number">0</span>!==a.length){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader){<span class="code-keyword">if</span>(t=<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader.media(),<span class="code-literal">null</span>===(i=<span class="code-keyword">this</span>.syncController_.getExpiredTime(t,<span class="code-keyword">this</span>.duration())))<span class="code-keyword">return</span>;<span class="code-keyword">if</span>(<span class="code-number">0</span>===(e=$i.Playlist.seekable(t,i,$i.Playlist.liveEdgeDelay(n,t))).length)<span class="code-keyword">return</span>}<span class="code-keyword">var</span> s,o;<span class="code-keyword">this</span>.seekable_&amp;&amp;<span class="code-keyword">this</span>.seekable_.length&amp;&amp;(s=<span class="code-keyword">this</span>.seekable_.end(<span class="code-number">0</span>),o=<span class="code-keyword">this</span>.seekable_.start(<span class="code-number">0</span>)),e?e.start(<span class="code-number">0</span>)&gt;a.end(<span class="code-number">0</span>)||a.start(<span class="code-number">0</span>)&gt;e.end(<span class="code-number">0</span>)?<span class="code-keyword">this</span>.seekable_=a:<span class="code-keyword">this</span>.seekable_=r.default.createTimeRanges([[e.start(<span class="code-number">0</span>)&gt;a.start(<span class="code-number">0</span>)?e.start(<span class="code-number">0</span>):a.start(<span class="code-number">0</span>),e.end(<span class="code-number">0</span>)&lt;a.end(<span class="code-number">0</span>)?e.end(<span class="code-number">0</span>):a.end(<span class="code-number">0</span>)]]):<span class="code-keyword">this</span>.seekable_=a,<span class="code-keyword">this</span>.seekable_&amp;&amp;<span class="code-keyword">this</span>.seekable_.length&amp;&amp;<span class="code-keyword">this</span>.seekable_.end(<span class="code-number">0</span>)===s&amp;&amp;<span class="code-keyword">this</span>.seekable_.start(<span class="code-number">0</span>)===o||(<span class="code-keyword">this</span>.logger_(<span class="code-string">"seekable updated ["</span>+W(<span class="code-keyword">this</span>.seekable_)+<span class="code-string">"]"</span>),<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"seekablechanged"</span>))}}}}},i.updateDuration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.updateDuration_&amp;&amp;(<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.updateDuration_),<span class="code-keyword">this</span>.updateDuration_=<span class="code-literal">null</span>),<span class="code-string">"open"</span>!==<span class="code-keyword">this</span>.mediaSource.readyState)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.updateDuration_=<span class="code-keyword">this</span>.updateDuration.bind(<span class="code-keyword">this</span>,e),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.mediaSource.addEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.updateDuration_);<span class="code-keyword">if</span>(e){<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.seekable();<span class="code-keyword">if</span>(!t.length)<span class="code-keyword">return</span>;(<span class="code-built_in">isNaN</span>(<span class="code-keyword">this</span>.mediaSource.duration)||<span class="code-keyword">this</span>.mediaSource.duration&lt;t.end(t.length<span class="code-number">-1</span>))&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.setDuration(t.end(t.length<span class="code-number">-1</span>))}<span class="code-keyword">else</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>.tech_.buffered(),n=$i.Playlist.duration(<span class="code-keyword">this</span>.masterPlaylistLoader_.media());i.length&gt;<span class="code-number">0</span>&amp;&amp;(n=<span class="code-built_in">Math</span>.max(n,i.end(i.length<span class="code-number">-1</span>))),<span class="code-keyword">this</span>.mediaSource.duration!==n&amp;&amp;<span class="code-keyword">this</span>.sourceUpdater_.setDuration(n)}},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.trigger(<span class="code-string">"dispose"</span>),<span class="code-keyword">this</span>.decrypter_.terminate(),<span class="code-keyword">this</span>.masterPlaylistLoader_.dispose(),<span class="code-keyword">this</span>.mainSegmentLoader_.dispose(),<span class="code-keyword">this</span>.loadOnPlay_&amp;&amp;<span class="code-keyword">this</span>.tech_.off(<span class="code-string">"play"</span>,<span class="code-keyword">this</span>.loadOnPlay_),[<span class="code-string">"AUDIO"</span>,<span class="code-string">"SUBTITLES"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=e.mediaTypes_[t].groups;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n <span class="code-keyword">in</span> i)i[n].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e.playlistLoader&amp;&amp;e.playlistLoader.dispose()}))})),<span class="code-keyword">this</span>.audioSegmentLoader_.dispose(),<span class="code-keyword">this</span>.subtitleSegmentLoader_.dispose(),<span class="code-keyword">this</span>.sourceUpdater_.dispose(),<span class="code-keyword">this</span>.timelineChangeController_.dispose(),<span class="code-keyword">this</span>.stopABRTimer_(),<span class="code-keyword">this</span>.updateDuration_&amp;&amp;<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.updateDuration_),<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"durationchange"</span>,<span class="code-keyword">this</span>.handleDurationChange_),<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceopen"</span>,<span class="code-keyword">this</span>.handleSourceOpen_),<span class="code-keyword">this</span>.mediaSource.removeEventListener(<span class="code-string">"sourceended"</span>,<span class="code-keyword">this</span>.handleSourceEnded_),<span class="code-keyword">this</span>.off()},i.master=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_.master},i.media=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistLoader_.media()||<span class="code-keyword">this</span>.initialMedia_},i.areMediaTypesKnown_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=!!<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader,t=!!<span class="code-keyword">this</span>.mainSegmentLoader_.getCurrentMediaInfo_(),i=!e||!!<span class="code-keyword">this</span>.audioSegmentLoader_.getCurrentMediaInfo_();<span class="code-keyword">return</span>!(!t||!i)},i.getCodecsOrExclude_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t={<span class="code-attr">main</span>:<span class="code-keyword">this</span>.mainSegmentLoader_.getCurrentMediaInfo_()||{},<span class="code-attr">audio</span>:<span class="code-keyword">this</span>.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;<span class="code-keyword">var</span> i=Di(<span class="code-keyword">this</span>.master(),<span class="code-keyword">this</span>.media()),n={},r=!!<span class="code-keyword">this</span>.mediaTypes_.AUDIO.activePlaylistLoader;<span class="code-keyword">if</span>(t.main.hasVideo&amp;&amp;(n.video=i.video||t.main.videoCodec||<span class="code-string">"avc1.4d400d"</span>),t.main.isMuxed&amp;&amp;(n.video+=<span class="code-string">","</span>+(i.audio||t.main.audioCodec||B)),(t.main.hasAudio&amp;&amp;!t.main.isMuxed||t.audio.hasAudio||r)&amp;&amp;(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||B,t.audio.isFmp4=t.main.hasAudio&amp;&amp;!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){<span class="code-keyword">var</span> a,s={};<span class="code-keyword">if</span>([<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(n.hasOwnProperty(e)&amp;&amp;(r=t[e].isFmp4,o=n[e],!(r?R(o):M(o)))){<span class="code-keyword">var</span> i=t[e].isFmp4?<span class="code-string">"browser"</span>:<span class="code-string">"muxer"</span>;s[i]=s[i]||[],s[i].push(n[e]),<span class="code-string">"audio"</span>===e&amp;&amp;(a=i)}<span class="code-keyword">var</span> r,o})),r&amp;&amp;a&amp;&amp;<span class="code-keyword">this</span>.media().attributes.AUDIO){<span class="code-keyword">var</span> o=<span class="code-keyword">this</span>.media().attributes.AUDIO;<span class="code-keyword">this</span>.master().playlists.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{(t.attributes&amp;&amp;t.attributes.AUDIO)===o&amp;&amp;t!==e.media()&amp;&amp;(t.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>)})),<span class="code-keyword">this</span>.logger_(<span class="code-string">"excluding audio group "</span>+o+<span class="code-string">" as "</span>+a+<span class="code-string">' does not support codec(s): "'</span>+n.audio+<span class="code-string">'"'</span>)}<span class="code-keyword">if</span>(!<span class="code-built_in">Object</span>.keys(s).length){<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;!<span class="code-keyword">this</span>.sourceUpdater_.canChangeType()){<span class="code-keyword">var</span> u=[];<span class="code-keyword">if</span>([<span class="code-string">"video"</span>,<span class="code-string">"audio"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">var</span> i=(D(e.sourceUpdater_.codecs[t]||<span class="code-string">""</span>)[<span class="code-number">0</span>]||{}).type,r=(D(n[t]||<span class="code-string">""</span>)[<span class="code-number">0</span>]||{}).type;i&amp;&amp;r&amp;&amp;i.toLowerCase()!==r.toLowerCase()&amp;&amp;u.push(<span class="code-string">'"'</span>+e.sourceUpdater_.codecs[t]+<span class="code-string">'" -&gt; "'</span>+n[t]+<span class="code-string">'"'</span>)})),u.length)<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-keyword">this</span>.blacklistCurrentPlaylist({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.media(),<span class="code-attr">message</span>:<span class="code-string">"Codec switching not supported: "</span>+u.join(<span class="code-string">", "</span>)+<span class="code-string">"."</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>,<span class="code-attr">internal</span>:!<span class="code-number">0</span>})}<span class="code-keyword">return</span> n}<span class="code-keyword">var</span> d=<span class="code-built_in">Object</span>.keys(s).reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e&amp;&amp;(e+=<span class="code-string">", "</span>),e+(t+<span class="code-string">' does not support codec(s): "'</span>)+s[t].join(<span class="code-string">","</span>)+<span class="code-string">'"'</span>}),<span class="code-string">""</span>)+<span class="code-string">"."</span>;<span class="code-keyword">this</span>.blacklistCurrentPlaylist({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.media(),<span class="code-attr">internal</span>:!<span class="code-number">0</span>,<span class="code-attr">message</span>:d,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>})}<span class="code-keyword">else</span> <span class="code-keyword">this</span>.blacklistCurrentPlaylist({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.media(),<span class="code-attr">message</span>:<span class="code-string">"Could not determine codecs for playlist."</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>})},i.tryToCreateSourceBuffers_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(<span class="code-string">"open"</span>===<span class="code-keyword">this</span>.mediaSource.readyState&amp;&amp;!<span class="code-keyword">this</span>.sourceUpdater_.hasCreatedSourceBuffers()&amp;&amp;<span class="code-keyword">this</span>.areMediaTypesKnown_()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.getCodecsOrExclude_();<span class="code-keyword">if</span>(e){<span class="code-keyword">this</span>.sourceUpdater_.createSourceBuffers(e);<span class="code-keyword">var</span> t=[e.video,e.audio].filter(<span class="code-built_in">Boolean</span>).join(<span class="code-string">","</span>);<span class="code-keyword">this</span>.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.master().playlists,i=[];<span class="code-built_in">Object</span>.keys(t).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">n</span>)</span>{<span class="code-keyword">var</span> r=t[n];<span class="code-keyword">if</span>(<span class="code-number">-1</span>===i.indexOf(r.id)){i.push(r.id);<span class="code-keyword">var</span> a=Di(e.master,r),s=[];!a.audio||M(a.audio)||R(a.audio)||s.push(<span class="code-string">"audio codec "</span>+a.audio),!a.video||M(a.video)||R(a.video)||s.push(<span class="code-string">"video codec "</span>+a.video),a.text&amp;&amp;<span class="code-string">"stpp.ttml.im1t"</span>===a.text&amp;&amp;s.push(<span class="code-string">"text codec "</span>+a.text),s.length&amp;&amp;(r.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>,e.logger_(<span class="code-string">"excluding "</span>+r.id+<span class="code-string">" for unsupported: "</span>+s.join(<span class="code-string">", "</span>)))}}))},i.excludeIncompatibleVariants_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>,i=[],n=<span class="code-keyword">this</span>.master().playlists,r=xi(D(e)),a=Oi(r),s=r.video&amp;&amp;D(r.video)[<span class="code-number">0</span>]||<span class="code-literal">null</span>,o=r.audio&amp;&amp;D(r.audio)[<span class="code-number">0</span>]||<span class="code-literal">null</span>;<span class="code-built_in">Object</span>.keys(n).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> r=n[e];<span class="code-keyword">if</span>(<span class="code-number">-1</span>===i.indexOf(r.id)&amp;&amp;r.excludeUntil!==<span class="code-number">1</span>/<span class="code-number">0</span>){i.push(r.id);<span class="code-keyword">var</span> u=[],d=Di(t.masterPlaylistLoader_.master,r),l=Oi(d);<span class="code-keyword">if</span>(d.audio||d.video){<span class="code-keyword">if</span>(l!==a&amp;&amp;u.push(<span class="code-string">'codec count "'</span>+l+<span class="code-string">'" !== "'</span>+a+<span class="code-string">'"'</span>),!t.sourceUpdater_.canChangeType()){<span class="code-keyword">var</span> c=d.video&amp;&amp;D(d.video)[<span class="code-number">0</span>]||<span class="code-literal">null</span>,h=d.audio&amp;&amp;D(d.audio)[<span class="code-number">0</span>]||<span class="code-literal">null</span>;c&amp;&amp;s&amp;&amp;c.type.toLowerCase()!==s.type.toLowerCase()&amp;&amp;u.push(<span class="code-string">'video codec "'</span>+c.type+<span class="code-string">'" !== "'</span>+s.type+<span class="code-string">'"'</span>),h&amp;&amp;o&amp;&amp;h.type.toLowerCase()!==o.type.toLowerCase()&amp;&amp;u.push(<span class="code-string">'audio codec "'</span>+h.type+<span class="code-string">'" !== "'</span>+o.type+<span class="code-string">'"'</span>)}u.length&amp;&amp;(r.excludeUntil=<span class="code-number">1</span>/<span class="code-number">0</span>,t.logger_(<span class="code-string">"blacklisting "</span>+r.id+<span class="code-string">": "</span>+u.join(<span class="code-string">" &amp;&amp; "</span>)))}}}))},i.updateAdCues_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">0</span>,i=<span class="code-keyword">this</span>.seekable();i.length&amp;&amp;(t=i.start(<span class="code-number">0</span>)),<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=<span class="code-number">0</span>),e.segments)<span class="code-keyword">for</span>(<span class="code-keyword">var</span> n,r=i,a=<span class="code-number">0</span>;a&lt;e.segments.length;a++){<span class="code-keyword">var</span> s=e.segments[a];<span class="code-keyword">if</span>(n||(n=_n(t,r+s.duration/<span class="code-number">2</span>)),n){<span class="code-keyword">if</span>(<span class="code-string">"cueIn"</span><span class="code-keyword">in</span> s){n.endTime=r,n.adEndTime=r,r+=s.duration,n=<span class="code-literal">null</span>;<span class="code-keyword">continue</span>}<span class="code-keyword">if</span>(r&lt;n.endTime){r+=s.duration;<span class="code-keyword">continue</span>}n.endTime+=s.duration}<span class="code-keyword">else</span> <span class="code-keyword">if</span>(<span class="code-string">"cueOut"</span><span class="code-keyword">in</span> s&amp;&amp;((n=<span class="code-keyword">new</span> <span class="code-built_in">window</span>.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,n.adEndTime=r+<span class="code-built_in">parseFloat</span>(s.cueOut),t.addCue(n)),<span class="code-string">"cueOutCont"</span><span class="code-keyword">in</span> s){<span class="code-keyword">var</span> o=s.cueOutCont.split(<span class="code-string">"/"</span>).map(<span class="code-built_in">parseFloat</span>),u=o[<span class="code-number">0</span>],d=o[<span class="code-number">1</span>];(n=<span class="code-keyword">new</span> <span class="code-built_in">window</span>.VTTCue(r,r+s.duration,<span class="code-string">""</span>)).adStartTime=r-u,n.adEndTime=n.adStartTime+d,t.addCue(n)}r+=s.duration}}(e,<span class="code-keyword">this</span>.cueTagsTrack_,t)},i.goalBufferLength=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=si.GOAL_BUFFER_LENGTH,i=si.GOAL_BUFFER_LENGTH_RATE,n=<span class="code-built_in">Math</span>.max(t,si.MAX_GOAL_BUFFER_LENGTH);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(t+e*i,n)},i.bufferLowWaterLine=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=si.BUFFER_LOW_WATER_LINE,i=si.BUFFER_LOW_WATER_LINE_RATE,n=<span class="code-built_in">Math</span>.max(t,si.MAX_BUFFER_LOW_WATER_LINE),r=<span class="code-built_in">Math</span>.max(t,si.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);<span class="code-keyword">return</span> <span class="code-built_in">Math</span>.min(t+e*i,<span class="code-keyword">this</span>.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> si.BUFFER_HIGH_WATER_LINE},t}(r.default.EventTarget),Mn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">var</span> n,r,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?<span class="code-string">"smooth"</span>:<span class="code-string">"fast"</span>)+<span class="code-string">"QualityChange_"</span>].bind(s);<span class="code-keyword">if</span>(t.attributes){<span class="code-keyword">var</span> u=t.attributes.RESOLUTION;<span class="code-keyword">this</span>.width=u&amp;&amp;u.width,<span class="code-keyword">this</span>.height=u&amp;&amp;u.height,<span class="code-keyword">this</span>.bandwidth=t.attributes.BANDWIDTH}<span class="code-keyword">this</span>.codecs=Di(s.master(),t),<span class="code-keyword">this</span>.playlist=t,<span class="code-keyword">this</span>.id=i,<span class="code-keyword">this</span>.enabled=(n=e.playlists,r=t.id,a=o,<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=n.master.playlists[r],i=re(t),s=ae(t);<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===e?s:(e?<span class="code-keyword">delete</span> t.disabled:t.disabled=!<span class="code-number">0</span>,e===s||i||(a(),e?n.trigger(<span class="code-string">"renditionenabled"</span>):n.trigger(<span class="code-string">"renditiondisabled"</span>)),e)})},Bn=[<span class="code-string">"seeking"</span>,<span class="code-string">"seeked"</span>,<span class="code-string">"pause"</span>,<span class="code-string">"playing"</span>,<span class="code-string">"error"</span>],Nn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>;<span class="code-keyword">this</span>.masterPlaylistController_=e.masterPlaylistController,<span class="code-keyword">this</span>.tech_=e.tech,<span class="code-keyword">this</span>.seekable=e.seekable,<span class="code-keyword">this</span>.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,<span class="code-keyword">this</span>.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,<span class="code-keyword">this</span>.media=e.media,<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.lastRecordedTime=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.timer_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.checkCurrentTimeTimeout_=<span class="code-literal">null</span>,<span class="code-keyword">this</span>.logger_=p(<span class="code-string">"PlaybackWatcher"</span>),<span class="code-keyword">this</span>.logger_(<span class="code-string">"initialize"</span>);<span class="code-keyword">var</span> i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.monitorCurrentTime_()},n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.monitorCurrentTime_()},r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.techWaiting_()},a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.cancelTimer_()},s=<span class="code-keyword">this</span>.masterPlaylistController_,o=[<span class="code-string">"main"</span>,<span class="code-string">"subtitle"</span>,<span class="code-string">"audio"</span>],u={};o.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{u[e]={<span class="code-attr">reset</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.resetSegmentDownloads_(e)},<span class="code-attr">updateend</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> t.checkSegmentDownloads_(e)}},s[e+<span class="code-string">"SegmentLoader_"</span>].on(<span class="code-string">"appendsdone"</span>,u[e].updateend),s[e+<span class="code-string">"SegmentLoader_"</span>].on(<span class="code-string">"playlistupdate"</span>,u[e].reset),t.tech_.on([<span class="code-string">"seeked"</span>,<span class="code-string">"seeking"</span>],u[e].reset)}));<span class="code-keyword">var</span> d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{[<span class="code-string">"main"</span>,<span class="code-string">"audio"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{s[i+<span class="code-string">"SegmentLoader_"</span>][e](<span class="code-string">"appended"</span>,t.seekingAppendCheck_)}))};<span class="code-keyword">this</span>.seekingAppendCheck_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.fixesBadSeeks_()&amp;&amp;(t.consecutiveUpdates=<span class="code-number">0</span>,t.lastRecordedTime=t.tech_.currentTime(),d(<span class="code-string">"off"</span>))},<span class="code-keyword">this</span>.clearSeekingAppendCheck_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> d(<span class="code-string">"off"</span>)},<span class="code-keyword">this</span>.watchForBadSeeking_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.clearSeekingAppendCheck_(),d(<span class="code-string">"on"</span>)},<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"seeked"</span>,<span class="code-keyword">this</span>.clearSeekingAppendCheck_),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"seeking"</span>,<span class="code-keyword">this</span>.watchForBadSeeking_),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"waiting"</span>,r),<span class="code-keyword">this</span>.tech_.on(Bn,a),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"canplay"</span>,n),<span class="code-keyword">this</span>.tech_.one(<span class="code-string">"play"</span>,i),<span class="code-keyword">this</span>.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.clearSeekingAppendCheck_(),t.logger_(<span class="code-string">"dispose"</span>),t.tech_.off(<span class="code-string">"waiting"</span>,r),t.tech_.off(Bn,a),t.tech_.off(<span class="code-string">"canplay"</span>,n),t.tech_.off(<span class="code-string">"play"</span>,i),t.tech_.off(<span class="code-string">"seeking"</span>,t.watchForBadSeeking_),t.tech_.off(<span class="code-string">"seeked"</span>,t.clearSeekingAppendCheck_),o.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{s[e+<span class="code-string">"SegmentLoader_"</span>].off(<span class="code-string">"appendsdone"</span>,u[e].updateend),s[e+<span class="code-string">"SegmentLoader_"</span>].off(<span class="code-string">"playlistupdate"</span>,u[e].reset),t.tech_.off([<span class="code-string">"seeked"</span>,<span class="code-string">"seeking"</span>],u[e].reset)})),t.checkCurrentTimeTimeout_&amp;&amp;<span class="code-built_in">window</span>.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}<span class="code-keyword">var</span> t=e.prototype;<span class="code-keyword">return</span> t.monitorCurrentTime_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.checkCurrentTime_(),<span class="code-keyword">this</span>.checkCurrentTimeTimeout_&amp;&amp;<span class="code-built_in">window</span>.clearTimeout(<span class="code-keyword">this</span>.checkCurrentTimeTimeout_),<span class="code-keyword">this</span>.checkCurrentTimeTimeout_=<span class="code-built_in">window</span>.setTimeout(<span class="code-keyword">this</span>.monitorCurrentTime_.bind(<span class="code-keyword">this</span>),<span class="code-number">250</span>)},t.resetSegmentDownloads_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistController_[e+<span class="code-string">"SegmentLoader_"</span>];<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.logger_(<span class="code-string">"resetting possible stalled download count for "</span>+e+<span class="code-string">" loader"</span>),<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]=<span class="code-number">0</span>,<span class="code-keyword">this</span>[e+<span class="code-string">"Buffered_"</span>]=t.buffered_()},t.checkSegmentDownloads_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.masterPlaylistController_,i=t[e+<span class="code-string">"SegmentLoader_"</span>],n=i.buffered_(),r=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(e===t)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">if</span>(!e&amp;&amp;t||!t&amp;&amp;e)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(e.length!==t.length)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-number">0</span>;i&lt;e.length;i++)<span class="code-keyword">if</span>(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">return</span>!<span class="code-number">1</span>}(<span class="code-keyword">this</span>[e+<span class="code-string">"Buffered_"</span>],n);<span class="code-keyword">this</span>[e+<span class="code-string">"Buffered_"</span>]=n,r?<span class="code-keyword">this</span>.resetSegmentDownloads_(e):(<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]++,<span class="code-keyword">this</span>.logger_(<span class="code-string">"found #"</span>+<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]+<span class="code-string">" "</span>+e+<span class="code-string">" appends that did not increase buffer (possible stalled download)"</span>,{<span class="code-attr">playlistId</span>:i.playlist_&amp;&amp;i.playlist_.id,<span class="code-attr">buffered</span>:V(n)}),<span class="code-keyword">this</span>[e+<span class="code-string">"StalledDownloads_"</span>]&lt;<span class="code-number">10</span>||(<span class="code-keyword">this</span>.logger_(e+<span class="code-string">" loader stalled download exclusion"</span>),<span class="code-keyword">this</span>.resetSegmentDownloads_(e),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-"</span>+e+<span class="code-string">"-download-exclusion"</span>}),<span class="code-string">"subtitle"</span>!==e&amp;&amp;t.blacklistCurrentPlaylist({<span class="code-attr">message</span>:<span class="code-string">"Excessive "</span>+e+<span class="code-string">" segment downloading detected."</span>},<span class="code-number">1</span>/<span class="code-number">0</span>)))},t.checkCurrentTime_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.tech_.paused()&amp;&amp;!<span class="code-keyword">this</span>.tech_.seeking()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.lastRecordedTime===e&amp;&amp;(!t.length||e+F&gt;=t.end(t.length<span class="code-number">-1</span>)))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.techWaiting_();<span class="code-keyword">this</span>.consecutiveUpdates&gt;=<span class="code-number">5</span>&amp;&amp;e===<span class="code-keyword">this</span>.lastRecordedTime?(<span class="code-keyword">this</span>.consecutiveUpdates++,<span class="code-keyword">this</span>.waiting_()):e===<span class="code-keyword">this</span>.lastRecordedTime?<span class="code-keyword">this</span>.consecutiveUpdates++:(<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.lastRecordedTime=e)}},t.cancelTimer_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.consecutiveUpdates=<span class="code-number">0</span>,<span class="code-keyword">this</span>.timer_&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"cancelTimer_"</span>),clearTimeout(<span class="code-keyword">this</span>.timer_)),<span class="code-keyword">this</span>.timer_=<span class="code-literal">null</span>},t.fixesBadSeeks_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.tech_.seeking())<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> e,t=<span class="code-keyword">this</span>.seekable(),i=<span class="code-keyword">this</span>.tech_.currentTime();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.afterSeekableWindow_(t,i,<span class="code-keyword">this</span>.media(),<span class="code-keyword">this</span>.allowSeeksWithinUnsafeLiveWindow)&amp;&amp;(e=t.end(t.length<span class="code-number">-1</span>)),<span class="code-keyword">this</span>.beforeSeekableWindow_(t,i)){<span class="code-keyword">var</span> n=t.start(<span class="code-number">0</span>);e=n+(n===t.end(<span class="code-number">0</span>)?<span class="code-number">0</span>:F)}<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>!==e)<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Trying to seek outside of seekable at time "</span>+i+<span class="code-string">" with seekable range "</span>+W(t)+<span class="code-string">". Seeking to "</span>+e+<span class="code-string">"."</span>),<span class="code-keyword">this</span>.tech_.setCurrentTime(e),!<span class="code-number">0</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> r=<span class="code-keyword">this</span>.masterPlaylistController_.sourceUpdater_,a=<span class="code-keyword">this</span>.tech_.buffered(),s=r.audioBuffer?r.audioBuffered():<span class="code-literal">null</span>,o=r.videoBuffer?r.videoBuffered():<span class="code-literal">null</span>,u=<span class="code-keyword">this</span>.media(),d=u.partTargetDuration?u.partTargetDuration:<span class="code-number">2</span>*(u.targetDuration-N),l=[s,o],c=<span class="code-number">0</span>;c&lt;l.length;c++)<span class="code-keyword">if</span>(l[c]&amp;&amp;X(l[c],i)&lt;d)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> h=G(a,i);<span class="code-keyword">return</span> <span class="code-number">0</span>!==h.length&amp;&amp;(e=h.start(<span class="code-number">0</span>)+F,<span class="code-keyword">this</span>.logger_(<span class="code-string">"Buffered region starts ("</span>+h.start(<span class="code-number">0</span>)+<span class="code-string">")  just beyond seek point ("</span>+i+<span class="code-string">"). Seeking to "</span>+e+<span class="code-string">"."</span>),<span class="code-keyword">this</span>.tech_.setCurrentTime(e),!<span class="code-number">0</span>)},t.waiting_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-keyword">this</span>.techWaiting_()){<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.tech_.currentTime(),t=<span class="code-keyword">this</span>.tech_.buffered(),i=H(t,e);<span class="code-keyword">return</span> i.length&amp;&amp;e+<span class="code-number">3</span>&lt;=i.end(<span class="code-number">0</span>)?(<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.tech_.setCurrentTime(e),<span class="code-keyword">this</span>.logger_(<span class="code-string">"Stopped at "</span>+e+<span class="code-string">" while inside a buffered region ["</span>+i.start(<span class="code-number">0</span>)+<span class="code-string">" -&gt; "</span>+i.end(<span class="code-number">0</span>)+<span class="code-string">"]. Attempting to resume playback by seeking to the current time."</span>),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-unknown-waiting"</span>}),<span class="code-keyword">void</span> <span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-unknown-waiting"</span>})):<span class="code-keyword">void</span> <span class="code-number">0</span>}},t.techWaiting_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.seekable(),t=<span class="code-keyword">this</span>.tech_.currentTime();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.tech_.seeking()||<span class="code-literal">null</span>!==<span class="code-keyword">this</span>.timer_)<span class="code-keyword">return</span>!<span class="code-number">0</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.beforeSeekableWindow_(e,t)){<span class="code-keyword">var</span> i=e.end(e.length<span class="code-number">-1</span>);<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Fell out of live window at time "</span>+t+<span class="code-string">". Seeking to live point (seekable end) "</span>+i),<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.tech_.setCurrentTime(i),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-live-resync"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-live-resync"</span>}),!<span class="code-number">0</span>}<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=<span class="code-keyword">this</span>.tech_.buffered();<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.videoUnderflow_({<span class="code-attr">audioBuffered</span>:n.audioBuffered(),<span class="code-attr">videoBuffered</span>:n.videoBuffered(),<span class="code-attr">currentTime</span>:t}))<span class="code-keyword">return</span> <span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.tech_.setCurrentTime(t),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-video-underflow"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-video-underflow"</span>}),!<span class="code-number">0</span>;<span class="code-keyword">var</span> a=G(r,t);<span class="code-keyword">if</span>(a.length&gt;<span class="code-number">0</span>){<span class="code-keyword">var</span> s=a.start(<span class="code-number">0</span>)-t;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.logger_(<span class="code-string">"Stopped at "</span>+t+<span class="code-string">", setting timer for "</span>+s+<span class="code-string">", seeking to "</span>+a.start(<span class="code-number">0</span>)),<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-keyword">this</span>.timer_=setTimeout(<span class="code-keyword">this</span>.skipTheGap_.bind(<span class="code-keyword">this</span>),<span class="code-number">1e3</span>*s,t),!<span class="code-number">0</span>}<span class="code-keyword">return</span>!<span class="code-number">1</span>},t.afterSeekableWindow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">if</span>(<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=!<span class="code-number">1</span>),!e.length)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> r=e.end(e.length<span class="code-number">-1</span>)+F;<span class="code-keyword">return</span>!i.endList&amp;&amp;n&amp;&amp;(r=e.end(e.length<span class="code-number">-1</span>)+<span class="code-number">3</span>*i.targetDuration),t&gt;r},t.beforeSeekableWindow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span>!!(e.length&amp;&amp;e.start(<span class="code-number">0</span>)&gt;<span class="code-number">0</span>&amp;&amp;t&lt;e.start(<span class="code-number">0</span>)-<span class="code-keyword">this</span>.liveRangeSafeTimeDelta)},t.videoUnderflow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;<span class="code-keyword">if</span>(t){<span class="code-keyword">var</span> r;<span class="code-keyword">if</span>(t.length&amp;&amp;i.length){<span class="code-keyword">var</span> a=H(t,n<span class="code-number">-3</span>),s=H(t,n),o=H(i,n);o.length&amp;&amp;!s.length&amp;&amp;a.length&amp;&amp;(r={<span class="code-attr">start</span>:a.end(<span class="code-number">0</span>),<span class="code-attr">end</span>:o.end(<span class="code-number">0</span>)})}<span class="code-keyword">else</span> G(t,n).length||(r=<span class="code-keyword">this</span>.gapFromVideoUnderflow_(t,n));<span class="code-keyword">return</span>!!r&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"Encountered a gap in video from "</span>+r.start+<span class="code-string">" to "</span>+r.end+<span class="code-string">". Seeking to current time "</span>+n),!<span class="code-number">0</span>)}},t.skipTheGap_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-keyword">this</span>.tech_.buffered(),i=<span class="code-keyword">this</span>.tech_.currentTime(),n=G(t,i);<span class="code-keyword">this</span>.cancelTimer_(),<span class="code-number">0</span>!==n.length&amp;&amp;i===e&amp;&amp;(<span class="code-keyword">this</span>.logger_(<span class="code-string">"skipTheGap_:"</span>,<span class="code-string">"currentTime:"</span>,i,<span class="code-string">"scheduled currentTime:"</span>,e,<span class="code-string">"nextRange start:"</span>,n.start(<span class="code-number">0</span>)),<span class="code-keyword">this</span>.tech_.setCurrentTime(n.start(<span class="code-number">0</span>)+N),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-gap-skip"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-gap-skip"</span>}))},t.gapFromVideoUnderflow_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(e.length&lt;<span class="code-number">2</span>)<span class="code-keyword">return</span> r.default.createTimeRanges();<span class="code-keyword">for</span>(<span class="code-keyword">var</span> t=[],i=<span class="code-number">1</span>;i&lt;e.length;i++){<span class="code-keyword">var</span> n=e.end(i<span class="code-number">-1</span>),a=e.start(i);t.push([n,a])}<span class="code-keyword">return</span> r.default.createTimeRanges(t)}(e),n=<span class="code-number">0</span>;n&lt;i.length;n++){<span class="code-keyword">var</span> a=i.start(n),s=i.end(n);<span class="code-keyword">if</span>(t-a&lt;<span class="code-number">4</span>&amp;&amp;t-a&gt;<span class="code-number">2</span>)<span class="code-keyword">return</span>{<span class="code-attr">start</span>:a,<span class="code-attr">end</span>:s}}<span class="code-keyword">return</span> <span class="code-literal">null</span>},e}(),Fn={<span class="code-attr">errorInterval</span>:<span class="code-number">30</span>,<span class="code-attr">getSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> e(<span class="code-keyword">this</span>.tech({<span class="code-attr">IWillNotUseThisInPlugins</span>:!<span class="code-number">0</span>}).currentSource_||<span class="code-keyword">this</span>.currentSource())}},qn=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">var</span> n=<span class="code-number">0</span>,a=<span class="code-number">0</span>,s=r.default.mergeOptions(Fn,i);t.ready((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-error-reload-initialized"</span>}),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload-initialized"</span>})}));<span class="code-keyword">var</span> o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{a&amp;&amp;t.currentTime(a)},u=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-literal">null</span>!=e&amp;&amp;(a=t.duration()!==<span class="code-number">1</span>/<span class="code-number">0</span>&amp;&amp;t.currentTime()||<span class="code-number">0</span>,t.one(<span class="code-string">"loadedmetadata"</span>,o),t.src(e),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-error-reload"</span>}),t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload"</span>}),t.play())},d=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Date</span>.now()-n&lt;<span class="code-number">1e3</span>*s.errorInterval?(t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-error-reload-canceled"</span>}),<span class="code-keyword">void</span> t.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-error-reload-canceled"</span>})):s.getSource&amp;&amp;<span class="code-string">"function"</span>==<span class="code-keyword">typeof</span> s.getSource?(n=<span class="code-built_in">Date</span>.now(),s.getSource.call(t,u)):<span class="code-keyword">void</span> r.default.log.error(<span class="code-string">"ERROR: reloadSourceOnError - The option getSource must be a function!"</span>)},l=<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">e</span>(<span class="code-params"></span>)</span>{t.off(<span class="code-string">"loadedmetadata"</span>,o),t.off(<span class="code-string">"error"</span>,d),t.off(<span class="code-string">"dispose"</span>,e)};t.on(<span class="code-string">"error"</span>,d),t.on(<span class="code-string">"dispose"</span>,l),t.reloadSourceOnError=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i</span>)</span>{l(),e(t,i)}},Hn=<span class="code-string">"2.12.1"</span>,Gn={<span class="code-attr">PlaylistLoader</span>:Ee,<span class="code-attr">Playlist</span>:ce,<span class="code-attr">utils</span>:He,<span class="code-attr">STANDARD_PLAYLIST_SELECTOR</span>:Fi,<span class="code-attr">INITIAL_PLAYLIST_SELECTOR</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.playlists.master.playlists.filter(ce.isEnabled);<span class="code-keyword">return</span> Mi(t,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> Bi(e,t)})),t.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span>!!Di(e.playlists.master,t).video}))[<span class="code-number">0</span>]||<span class="code-literal">null</span>},<span class="code-attr">lastBandwidthSelector</span>:Fi,<span class="code-attr">movingAverageBandwidthSelector</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-number">-1</span>,i=<span class="code-number">-1</span>;<span class="code-keyword">if</span>(e&lt;<span class="code-number">0</span>||e&gt;<span class="code-number">1</span>)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Moving average bandwidth decay must be between 0 and 1."</span>);<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> n=<span class="code-keyword">this</span>.useDevicePixelRatio&amp;&amp;<span class="code-built_in">window</span>.devicePixelRatio||<span class="code-number">1</span>;<span class="code-keyword">return</span> t&lt;<span class="code-number">0</span>&amp;&amp;(t=<span class="code-keyword">this</span>.systemBandwidth,i=<span class="code-keyword">this</span>.systemBandwidth),<span class="code-keyword">this</span>.systemBandwidth&gt;<span class="code-number">0</span>&amp;&amp;<span class="code-keyword">this</span>.systemBandwidth!==i&amp;&amp;(t=e*<span class="code-keyword">this</span>.systemBandwidth+(<span class="code-number">1</span>-e)*t,i=<span class="code-keyword">this</span>.systemBandwidth),Ni(<span class="code-keyword">this</span>.playlists.master,t,<span class="code-built_in">parseInt</span>(Ri(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"width"</span>),<span class="code-number">10</span>)*n,<span class="code-built_in">parseInt</span>(Ri(<span class="code-keyword">this</span>.tech_.el(),<span class="code-string">"height"</span>),<span class="code-number">10</span>)*n,<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions,<span class="code-keyword">this</span>.masterPlaylistController_)}},<span class="code-attr">comparePlaylistBandwidth</span>:Bi,<span class="code-attr">comparePlaylistResolution</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i,n;<span class="code-keyword">return</span> e.attributes.RESOLUTION&amp;&amp;e.attributes.RESOLUTION.width&amp;&amp;(i=e.attributes.RESOLUTION.width),i=i||<span class="code-built_in">window</span>.Number.MAX_VALUE,t.attributes.RESOLUTION&amp;&amp;t.attributes.RESOLUTION.width&amp;&amp;(n=t.attributes.RESOLUTION.width),i===(n=n||<span class="code-built_in">window</span>.Number.MAX_VALUE)&amp;&amp;e.attributes.BANDWIDTH&amp;&amp;t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},<span class="code-attr">xhr</span>:ke()};<span class="code-built_in">Object</span>.keys(si).forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-built_in">Object</span>.defineProperty(Gn,e,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"using Vhs."</span>+e+<span class="code-string">" is UNSAFE be sure you know what you are doing"</span>),si[e]},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{r.default.log.warn(<span class="code-string">"using Vhs."</span>+e+<span class="code-string">" is UNSAFE be sure you know what you are doing"</span>),<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> t||t&lt;<span class="code-number">0</span>?r.default.log.warn(<span class="code-string">"value of Vhs."</span>+e+<span class="code-string">" must be greater than or equal to 0"</span>):si[e]=t}})}));<span class="code-keyword">var</span> Wn=<span class="code-string">"videojs-vhs"</span>,Vn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i=t.media(),n=<span class="code-number">-1</span>,r=<span class="code-number">0</span>;r&lt;e.length;r++)<span class="code-keyword">if</span>(e[r].id===i.id){n=r;<span class="code-keyword">break</span>}e.selectedIndex_=n,e.trigger({<span class="code-attr">selectedIndex</span>:n,<span class="code-attr">type</span>:<span class="code-string">"change"</span>})};Gn.canPlaySource=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"HLS is no longer a tech. Please remove it from your player's techOrder."</span>)};<span class="code-keyword">var</span> jn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> n={};t&amp;&amp;t.attributes&amp;&amp;t.attributes.CODECS&amp;&amp;(n=xi(D(t.attributes.CODECS))),i&amp;&amp;i.attributes&amp;&amp;i.attributes.CODECS&amp;&amp;(n.audio=i.attributes.CODECS);<span class="code-keyword">var</span> a=U(n.video),s=U(n.audio),o={};<span class="code-keyword">for</span>(<span class="code-keyword">var</span> u <span class="code-keyword">in</span> e)o[u]={},s&amp;&amp;(o[u].audioContentType=s),a&amp;&amp;(o[u].videoContentType=a),t.contentProtection&amp;&amp;t.contentProtection[u]&amp;&amp;t.contentProtection[u].pssh&amp;&amp;(o[u].pssh=t.contentProtection[u].pssh),<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> e[u]&amp;&amp;(o[u].url=e[u]);<span class="code-keyword">return</span> r.default.mergeOptions(e,o)},Xn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> e.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{<span class="code-keyword">if</span>(!i.contentProtection)<span class="code-keyword">return</span> e;<span class="code-keyword">var</span> n=t.reduce((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> n=i.contentProtection[t];<span class="code-keyword">return</span> n&amp;&amp;n.pssh&amp;&amp;(e[t]={<span class="code-attr">pssh</span>:n.pssh}),e}),{});<span class="code-keyword">return</span> <span class="code-built_in">Object</span>.keys(n).length&amp;&amp;e.push(n),e}),[])},zn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;<span class="code-keyword">if</span>(!t.eme.initializeMediaKeys)<span class="code-keyword">return</span> <span class="code-built_in">Promise</span>.resolve();<span class="code-keyword">var</span> a=n?r.concat([n]):r,s=Xn(a,<span class="code-built_in">Object</span>.keys(i)),o=[],u=[];<span class="code-keyword">return</span> s.forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{u.push(<span class="code-keyword">new</span> <span class="code-built_in">Promise</span>((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,i</span>)</span>{t.tech_.one(<span class="code-string">"keysessioncreated"</span>,e)}))),o.push(<span class="code-keyword">new</span> <span class="code-built_in">Promise</span>((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">i,n</span>)</span>{t.eme.initializeMediaKeys({<span class="code-attr">keySystems</span>:e},(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{e?n(e):i()}))})))})),<span class="code-built_in">Promise</span>.race([<span class="code-built_in">Promise</span>.all(o),<span class="code-built_in">Promise</span>.race(u)])},Qn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.player,i=e.sourceKeySystems,n=e.media,a=e.audioMedia,s=jn(i,n,a);<span class="code-keyword">return</span>!(!s||(t.currentSource().keySystems=s,s&amp;&amp;!t.eme&amp;&amp;(r.default.log.warn(<span class="code-string">"DRM encrypted source cannot be decrypted without a DRM plugin"</span>),<span class="code-number">1</span>)))},Yn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-built_in">window</span>.localStorage)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> e=<span class="code-built_in">window</span>.localStorage.getItem(Wn);<span class="code-keyword">if</span>(!e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">try</span>{<span class="code-keyword">return</span> <span class="code-built_in">JSON</span>.parse(e)}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span> <span class="code-literal">null</span>}},Kn=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span> <span class="code-number">0</span>===e.toLowerCase().indexOf(<span class="code-string">"data:application/vnd.videojs.vhs+json,"</span>)?<span class="code-built_in">JSON</span>.parse(e.substring(e.indexOf(<span class="code-string">","</span>)+<span class="code-number">1</span>)):e};Gn.supportsNativeHls=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">if</span>(!<span class="code-built_in">document</span>||!<span class="code-built_in">document</span>.createElement)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> e=<span class="code-built_in">document</span>.createElement(<span class="code-string">"video"</span>);<span class="code-keyword">return</span>!!r.default.getTech(<span class="code-string">"Html5"</span>).isSupported()&amp;&amp;[<span class="code-string">"application/vnd.apple.mpegurl"</span>,<span class="code-string">"audio/mpegurl"</span>,<span class="code-string">"audio/x-mpegurl"</span>,<span class="code-string">"application/x-mpegurl"</span>,<span class="code-string">"video/x-mpegurl"</span>,<span class="code-string">"video/mpegurl"</span>,<span class="code-string">"application/mpegurl"</span>].some((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">return</span><span class="code-regexp">/maybe|probably/i</span>.test(e.canPlayType(t))}))}(),Gn.supportsNativeDash=!!(<span class="code-built_in">document</span>&amp;&amp;<span class="code-built_in">document</span>.createElement&amp;&amp;r.default.getTech(<span class="code-string">"Html5"</span>).isSupported())&amp;&amp;<span class="code-regexp">/maybe|probably/i</span>.test(<span class="code-built_in">document</span>.createElement(<span class="code-string">"video"</span>).canPlayType(<span class="code-string">"application/dash+xml"</span>)),Gn.supportsTypeNatively=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span><span class="code-string">"hls"</span>===e?Gn.supportsNativeHls:<span class="code-string">"dash"</span>===e&amp;&amp;Gn.supportsNativeDash},Gn.isSupported=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"HLS is no longer a tech. Please remove it from your player's techOrder."</span>)};<span class="code-keyword">var</span> $n=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-function"><span class="code-keyword">function</span> <span class="code-title">t</span>(<span class="code-params">t,i,n</span>)</span>{<span class="code-keyword">var</span> a;<span class="code-keyword">if</span>(a=e.call(<span class="code-keyword">this</span>,i,r.default.mergeOptions(n.hls,n.vhs))||<span class="code-keyword">this</span>,n.hls&amp;&amp;<span class="code-built_in">Object</span>.keys(n.hls).length&amp;&amp;r.default.log.warn(<span class="code-string">"Using hls options is deprecated. Use vhs instead."</span>),<span class="code-string">"number"</span>==<span class="code-keyword">typeof</span> n.initialBandwidth&amp;&amp;(a.options_.bandwidth=n.initialBandwidth),a.logger_=p(<span class="code-string">"VhsHandler"</span>),i.options_&amp;&amp;i.options_.playerId){<span class="code-keyword">var</span> o=r.default(i.options_.playerId);o.hasOwnProperty(<span class="code-string">"hls"</span>)||<span class="code-built_in">Object</span>.defineProperty(o,<span class="code-string">"hls"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"player.hls is deprecated. Use player.tech().vhs instead."</span>),i.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-player-access"</span>}),s(a)},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),o.hasOwnProperty(<span class="code-string">"vhs"</span>)||<span class="code-built_in">Object</span>.defineProperty(o,<span class="code-string">"vhs"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"player.vhs is deprecated. Use player.tech().vhs instead."</span>),i.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-player-access"</span>}),s(a)},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),o.hasOwnProperty(<span class="code-string">"dash"</span>)||<span class="code-built_in">Object</span>.defineProperty(o,<span class="code-string">"dash"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"player.dash is deprecated. Use player.tech().vhs instead."</span>),s(a)},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),a.player_=o}<span class="code-keyword">if</span>(a.tech_=i,a.source_=t,a.stats={},a.ignoreNextSeekingEvent_=!<span class="code-number">1</span>,a.setOptions_(),a.options_.overrideNative&amp;&amp;i.overrideNativeAudioTracks&amp;&amp;i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!<span class="code-number">0</span>),i.overrideNativeVideoTracks(!<span class="code-number">0</span>);<span class="code-keyword">else</span> <span class="code-keyword">if</span>(a.options_.overrideNative&amp;&amp;(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"Overriding native HLS requires emulated tracks. See https://git.io/vMpjB"</span>);<span class="code-keyword">return</span> a.on(<span class="code-built_in">document</span>,[<span class="code-string">"fullscreenchange"</span>,<span class="code-string">"webkitfullscreenchange"</span>,<span class="code-string">"mozfullscreenchange"</span>,<span class="code-string">"MSFullscreenChange"</span>],(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=<span class="code-built_in">document</span>.fullscreenElement||<span class="code-built_in">document</span>.webkitFullscreenElement||<span class="code-built_in">document</span>.mozFullScreenElement||<span class="code-built_in">document</span>.msFullscreenElement;t&amp;&amp;t.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()})),a.on(a.tech_,<span class="code-string">"seeking"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ignoreNextSeekingEvent_?<span class="code-keyword">this</span>.ignoreNextSeekingEvent_=!<span class="code-number">1</span>:<span class="code-keyword">this</span>.setCurrentTime(<span class="code-keyword">this</span>.tech_.currentTime())})),a.on(a.tech_,<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.error()&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_.pauseLoading()})),a.on(a.tech_,<span class="code-string">"play"</span>,a.play),a}u(t,e);<span class="code-keyword">var</span> i=t.prototype;<span class="code-keyword">return</span> i.setOptions_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.options_.withCredentials=<span class="code-keyword">this</span>.options_.withCredentials||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.handleManifestRedirects=!<span class="code-number">1</span>!==<span class="code-keyword">this</span>.options_.handleManifestRedirects,<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions=!<span class="code-number">1</span>!==<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions,<span class="code-keyword">this</span>.options_.useDevicePixelRatio=<span class="code-keyword">this</span>.options_.useDevicePixelRatio||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.smoothQualityChange=<span class="code-keyword">this</span>.options_.smoothQualityChange||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage=<span class="code-keyword">void</span> <span class="code-number">0</span>!==<span class="code-keyword">this</span>.source_.useBandwidthFromLocalStorage?<span class="code-keyword">this</span>.source_.useBandwidthFromLocalStorage:<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.useNetworkInformationApi=<span class="code-keyword">this</span>.options_.useNetworkInformationApi||!<span class="code-number">1</span>,<span class="code-keyword">this</span>.options_.customTagParsers=<span class="code-keyword">this</span>.options_.customTagParsers||[],<span class="code-keyword">this</span>.options_.customTagMappers=<span class="code-keyword">this</span>.options_.customTagMappers||[],<span class="code-keyword">this</span>.options_.cacheEncryptionKeys=<span class="code-keyword">this</span>.options_.cacheEncryptionKeys||!<span class="code-number">1</span>,<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.blacklistDuration&amp;&amp;(<span class="code-keyword">this</span>.options_.blacklistDuration=<span class="code-number">300</span>),<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;<span class="code-keyword">this</span>.options_.useBandwidthFromLocalStorage){<span class="code-keyword">var</span> t=Yn();t&amp;&amp;t.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.options_.bandwidth=t.bandwidth,<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-bandwidth-from-local-storage"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-bandwidth-from-local-storage"</span>})),t&amp;&amp;t.throughput&amp;&amp;(<span class="code-keyword">this</span>.options_.throughput=t.throughput,<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"vhs-throughput-from-local-storage"</span>}),<span class="code-keyword">this</span>.tech_.trigger({<span class="code-attr">type</span>:<span class="code-string">"usage"</span>,<span class="code-attr">name</span>:<span class="code-string">"hls-throughput-from-local-storage"</span>}))}<span class="code-string">"number"</span>!=<span class="code-keyword">typeof</span> <span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.options_.bandwidth=si.INITIAL_BANDWIDTH),<span class="code-keyword">this</span>.options_.enableLowInitialPlaylist=<span class="code-keyword">this</span>.options_.enableLowInitialPlaylist&amp;&amp;<span class="code-keyword">this</span>.options_.bandwidth===si.INITIAL_BANDWIDTH,[<span class="code-string">"withCredentials"</span>,<span class="code-string">"useDevicePixelRatio"</span>,<span class="code-string">"limitRenditionByPlayerDimensions"</span>,<span class="code-string">"bandwidth"</span>,<span class="code-string">"smoothQualityChange"</span>,<span class="code-string">"customTagParsers"</span>,<span class="code-string">"customTagMappers"</span>,<span class="code-string">"handleManifestRedirects"</span>,<span class="code-string">"cacheEncryptionKeys"</span>,<span class="code-string">"playlistSelector"</span>,<span class="code-string">"initialPlaylistSelector"</span>,<span class="code-string">"experimentalBufferBasedABR"</span>,<span class="code-string">"liveRangeSafeTimeDelta"</span>,<span class="code-string">"experimentalLLHLS"</span>,<span class="code-string">"useNetworkInformationApi"</span>,<span class="code-string">"experimentalExactManifestTimings"</span>,<span class="code-string">"experimentalLeastPixelDiffSelector"</span>].forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>!==e.source_[t]&amp;&amp;(e.options_[t]=e.source_[t])})),<span class="code-keyword">this</span>.limitRenditionByPlayerDimensions=<span class="code-keyword">this</span>.options_.limitRenditionByPlayerDimensions,<span class="code-keyword">this</span>.useDevicePixelRatio=<span class="code-keyword">this</span>.options_.useDevicePixelRatio},i.src=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">var</span> i=<span class="code-keyword">this</span>;<span class="code-keyword">if</span>(e){<span class="code-keyword">this</span>.setOptions_(),<span class="code-keyword">this</span>.options_.src=Kn(<span class="code-keyword">this</span>.source_.src),<span class="code-keyword">this</span>.options_.tech=<span class="code-keyword">this</span>.tech_,<span class="code-keyword">this</span>.options_.externVhs=Gn,<span class="code-keyword">this</span>.options_.sourceType=Ce(t),<span class="code-keyword">this</span>.options_.seekTo=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{i.tech_.setCurrentTime(e)},<span class="code-keyword">this</span>.options_.smoothQualityChange&amp;&amp;r.default.log.warn(<span class="code-string">"smoothQualityChange is deprecated and will be removed in the next major version"</span>),<span class="code-keyword">this</span>.masterPlaylistController_=<span class="code-keyword">new</span> Rn(<span class="code-keyword">this</span>.options_);<span class="code-keyword">var</span> n=r.default.mergeOptions({<span class="code-attr">liveRangeSafeTimeDelta</span>:F},<span class="code-keyword">this</span>.options_,{<span class="code-attr">seekable</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.seekable()},<span class="code-attr">media</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.media()},<span class="code-attr">masterPlaylistController</span>:<span class="code-keyword">this</span>.masterPlaylistController_});<span class="code-keyword">this</span>.playbackWatcher_=<span class="code-keyword">new</span> Nn(n),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"error"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=r.default.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;<span class="code-string">"object"</span>!=<span class="code-keyword">typeof</span> t||t.code?<span class="code-string">"string"</span>==<span class="code-keyword">typeof</span> t&amp;&amp;(t={<span class="code-attr">message</span>:t,<span class="code-attr">code</span>:<span class="code-number">3</span>}):t.code=<span class="code-number">3</span>,e.error(t)}));<span class="code-keyword">var</span> a=<span class="code-keyword">this</span>.options_.experimentalBufferBasedABR?Gn.movingAverageBandwidthSelector(<span class="code-number">.55</span>):Gn.STANDARD_PLAYLIST_SELECTOR;<span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist=<span class="code-keyword">this</span>.selectPlaylist?<span class="code-keyword">this</span>.selectPlaylist.bind(<span class="code-keyword">this</span>):a.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.masterPlaylistController_.selectInitialPlaylist=Gn.INITIAL_PLAYLIST_SELECTOR.bind(<span class="code-keyword">this</span>),<span class="code-keyword">this</span>.playlists=<span class="code-keyword">this</span>.masterPlaylistController_.masterPlaylistLoader_,<span class="code-keyword">this</span>.mediaSource=<span class="code-keyword">this</span>.masterPlaylistController_.mediaSource,<span class="code-built_in">Object</span>.defineProperties(<span class="code-keyword">this</span>,{<span class="code-attr">selectPlaylist</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.selectPlaylist=e.bind(<span class="code-keyword">this</span>)}},<span class="code-attr">throughput</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput.count=<span class="code-number">1</span>}},<span class="code-attr">bandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=<span class="code-built_in">window</span>.navigator.connection||<span class="code-built_in">window</span>.navigator.mozConnection||<span class="code-built_in">window</span>.navigator.webkitConnection,i=<span class="code-number">1e7</span>;<span class="code-keyword">if</span>(<span class="code-keyword">this</span>.options_.useNetworkInformationApi&amp;&amp;t){<span class="code-keyword">var</span> n=<span class="code-number">1e3</span>*t.downlink*<span class="code-number">1e3</span>;e=n&gt;=i&amp;&amp;e&gt;=i?<span class="code-built_in">Math</span>.max(e,n):n}<span class="code-keyword">return</span> e},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,<span class="code-keyword">this</span>.masterPlaylistController_.mainSegmentLoader_.throughput={<span class="code-attr">rate</span>:<span class="code-number">0</span>,<span class="code-attr">count</span>:<span class="code-number">0</span>}}},<span class="code-attr">systemBandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e,t=<span class="code-number">1</span>/(<span class="code-keyword">this</span>.bandwidth||<span class="code-number">1</span>);<span class="code-keyword">return</span> e=<span class="code-keyword">this</span>.throughput&gt;<span class="code-number">0</span>?<span class="code-number">1</span>/<span class="code-keyword">this</span>.throughput:<span class="code-number">0</span>,<span class="code-built_in">Math</span>.floor(<span class="code-number">1</span>/(t+e))},<span class="code-attr">set</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{r.default.log.error(<span class="code-string">'The "systemBandwidth" property is read-only'</span>)}}}),<span class="code-keyword">this</span>.options_.bandwidth&amp;&amp;(<span class="code-keyword">this</span>.bandwidth=<span class="code-keyword">this</span>.options_.bandwidth),<span class="code-keyword">this</span>.options_.throughput&amp;&amp;(<span class="code-keyword">this</span>.throughput=<span class="code-keyword">this</span>.options_.throughput),<span class="code-built_in">Object</span>.defineProperties(<span class="code-keyword">this</span>.stats,{<span class="code-attr">bandwidth</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.bandwidth||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequests</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequests_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsAborted</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequestsAborted_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsTimedout</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequestsTimedout_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaRequestsErrored</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaRequestsErrored_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaTransferDuration</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaTransferDuration_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaBytesTransferred</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaBytesTransferred_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaSecondsLoaded</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaSecondsLoaded_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mediaAppends</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mediaAppends_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">mainAppendsToLoadedData</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.mainAppendsToLoadedData_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">audioAppendsToLoadedData</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.audioAppendsToLoadedData_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">appendsToLoadedData</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.appendsToLoadedData_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">timeToLoadedData</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.masterPlaylistController_.timeToLoadedData_()||<span class="code-number">0</span>},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">buffered</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> V(i.tech_.buffered())},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentTime</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.currentTime()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentSource</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.currentSource_},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">currentTech</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.name_},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">duration</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.duration()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">master</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.playlists.master},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">playerDimensions</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.currentDimensions()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">seekable</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> V(i.tech_.seekable())},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">timestamp</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-built_in">Date</span>.now()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>},<span class="code-attr">videoPlaybackQuality</span>:{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> i.tech_.getVideoPlaybackQuality()},<span class="code-attr">enumerable</span>:!<span class="code-number">0</span>}}),<span class="code-keyword">this</span>.tech_.one(<span class="code-string">"canplay"</span>,<span class="code-keyword">this</span>.masterPlaylistController_.setupFirstPlay.bind(<span class="code-keyword">this</span>.masterPlaylistController_)),<span class="code-keyword">this</span>.tech_.on(<span class="code-string">"bandwidthupdate"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.options_.useBandwidthFromLocalStorage&amp;&amp;<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">if</span>(!<span class="code-built_in">window</span>.localStorage)<span class="code-keyword">return</span>!<span class="code-number">1</span>;<span class="code-keyword">var</span> t=Yn();t=t?r.default.mergeOptions(t,e):e;<span class="code-keyword">try</span>{<span class="code-built_in">window</span>.localStorage.setItem(Wn,<span class="code-built_in">JSON</span>.stringify(t))}<span class="code-keyword">catch</span>(e){<span class="code-keyword">return</span>!<span class="code-number">1</span>}}({<span class="code-attr">bandwidth</span>:i.bandwidth,<span class="code-attr">throughput</span>:<span class="code-built_in">Math</span>.round(i.throughput)})})),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"selectedinitialmedia"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e;(e=i).representations=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t=e.masterPlaylistController_.master(),i=le(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;<span class="code-keyword">return</span> i?i.filter((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">return</span>!re(e)})).map((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t,i</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">new</span> Mn(e,t,t.id)})):[]}})),<span class="code-keyword">this</span>.masterPlaylistController_.sourceUpdater_.on(<span class="code-string">"createdsourcebuffers"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{i.setupEme_()})),<span class="code-keyword">this</span>.on(<span class="code-keyword">this</span>.masterPlaylistController_,<span class="code-string">"progress"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.tech_.trigger(<span class="code-string">"progress"</span>)})),<span class="code-keyword">this</span>.on(<span class="code-keyword">this</span>.masterPlaylistController_,<span class="code-string">"firstplay"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.ignoreNextSeekingEvent_=!<span class="code-number">0</span>})),<span class="code-keyword">this</span>.setupQualityLevels_(),<span class="code-keyword">this</span>.tech_.el()&amp;&amp;(<span class="code-keyword">this</span>.mediaSourceUrl_=<span class="code-built_in">window</span>.URL.createObjectURL(<span class="code-keyword">this</span>.masterPlaylistController_.mediaSource),<span class="code-keyword">this</span>.tech_.src(<span class="code-keyword">this</span>.mediaSourceUrl_))}},i.setupEme_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=<span class="code-keyword">this</span>.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=Qn({<span class="code-attr">player</span>:<span class="code-keyword">this</span>.player_,<span class="code-attr">sourceKeySystems</span>:<span class="code-keyword">this</span>.source_.keySystems,<span class="code-attr">media</span>:<span class="code-keyword">this</span>.playlists.media(),<span class="code-attr">audioMedia</span>:t&amp;&amp;t.media()});<span class="code-keyword">this</span>.player_.tech_.on(<span class="code-string">"keystatuschange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{<span class="code-string">"output-restricted"</span>===t.status&amp;&amp;e.masterPlaylistController_.blacklistCurrentPlaylist({<span class="code-attr">playlist</span>:e.masterPlaylistController_.media(),<span class="code-attr">message</span>:<span class="code-string">"DRM keystatus changed to "</span>+t.status+<span class="code-string">". Playlist will fail to play. Check for HDCP content."</span>,<span class="code-attr">blacklistDuration</span>:<span class="code-number">1</span>/<span class="code-number">0</span>})})),<span class="code-number">11</span>!==r.default.browser.IE_VERSION&amp;&amp;i?(<span class="code-keyword">this</span>.logger_(<span class="code-string">"waiting for EME key session creation"</span>),zn({<span class="code-attr">player</span>:<span class="code-keyword">this</span>.player_,<span class="code-attr">sourceKeySystems</span>:<span class="code-keyword">this</span>.source_.keySystems,<span class="code-attr">audioMedia</span>:t&amp;&amp;t.media(),<span class="code-attr">mainPlaylists</span>:<span class="code-keyword">this</span>.playlists.master.playlists}).then((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{e.logger_(<span class="code-string">"created EME key session"</span>),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">t</span>)</span>{e.logger_(<span class="code-string">"error while creating EME key session"</span>,t),e.player_.error({<span class="code-attr">message</span>:<span class="code-string">"Failed to initialize media keys for EME"</span>,<span class="code-attr">code</span>:<span class="code-number">3</span>})}))):<span class="code-keyword">this</span>.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> e=<span class="code-keyword">this</span>,t=r.default.players[<span class="code-keyword">this</span>.tech_.options_.playerId];t&amp;&amp;t.qualityLevels&amp;&amp;!<span class="code-keyword">this</span>.qualityLevels_&amp;&amp;(<span class="code-keyword">this</span>.qualityLevels_=t.qualityLevels(),<span class="code-keyword">this</span>.masterPlaylistController_.on(<span class="code-string">"selectedinitialmedia"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">var</span> t,i;t=e.qualityLevels_,(i=e).representations().forEach((<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{t.addQualityLevel(e)})),Vn(t,i.playlists)})),<span class="code-keyword">this</span>.playlists.on(<span class="code-string">"mediachange"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{Vn(e.qualityLevels_,e.playlists)})))},t.version=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span>{<span class="code-string">"@videojs/http-streaming"</span>:Hn,<span class="code-string">"mux.js"</span>:<span class="code-string">"6.0.0"</span>,<span class="code-string">"mpd-parser"</span>:<span class="code-string">"0.20.0"</span>,<span class="code-string">"m3u8-parser"</span>:<span class="code-string">"4.7.0"</span>,<span class="code-string">"aes-decrypter"</span>:<span class="code-string">"3.1.2"</span>}},i.version=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.constructor.version()},i.canChangeType=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> mn.canChangeType()},i.play=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.play()},i.setCurrentTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">this</span>.masterPlaylistController_.setCurrentTime(e)},i.duration=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.duration()},i.seekable=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">this</span>.masterPlaylistController_.seekable()},i.dispose=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">this</span>.playbackWatcher_&amp;&amp;<span class="code-keyword">this</span>.playbackWatcher_.dispose(),<span class="code-keyword">this</span>.masterPlaylistController_&amp;&amp;<span class="code-keyword">this</span>.masterPlaylistController_.dispose(),<span class="code-keyword">this</span>.qualityLevels_&amp;&amp;<span class="code-keyword">this</span>.qualityLevels_.dispose(),<span class="code-keyword">this</span>.player_&amp;&amp;(<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.vhs,<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.dash,<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.player_.hls),<span class="code-keyword">this</span>.tech_&amp;&amp;<span class="code-keyword">this</span>.tech_.vhs&amp;&amp;<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.tech_.vhs,<span class="code-keyword">this</span>.tech_&amp;&amp;<span class="code-keyword">delete</span> <span class="code-keyword">this</span>.tech_.hls,<span class="code-keyword">this</span>.mediaSourceUrl_&amp;&amp;<span class="code-built_in">window</span>.URL.revokeObjectURL&amp;&amp;(<span class="code-built_in">window</span>.URL.revokeObjectURL(<span class="code-keyword">this</span>.mediaSourceUrl_),<span class="code-keyword">this</span>.mediaSourceUrl_=<span class="code-literal">null</span>),e.prototype.dispose.call(<span class="code-keyword">this</span>)},i.convertToProgramTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{<span class="code-keyword">var</span> t=e.playlist,i=e.time,n=<span class="code-keyword">void</span> <span class="code-number">0</span>===i?<span class="code-keyword">void</span> <span class="code-number">0</span>:i,r=e.callback;<span class="code-keyword">if</span>(!r)<span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">"getProgramTime: callback must be provided"</span>);<span class="code-keyword">if</span>(!t||<span class="code-keyword">void</span> <span class="code-number">0</span>===n)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"getProgramTime: playlist and time must be provided"</span>});<span class="code-keyword">var</span> a=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t||!t.segments||<span class="code-number">0</span>===t.segments.length)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">for</span>(<span class="code-keyword">var</span> i,n=<span class="code-number">0</span>,r=<span class="code-number">0</span>;r&lt;t.segments.length&amp;&amp;!(e&lt;=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);<span class="code-keyword">var</span> a=t.segments[t.segments.length<span class="code-number">-1</span>];<span class="code-keyword">if</span>(a.videoTimingInfo&amp;&amp;a.videoTimingInfo.transmuxedPresentationEnd&lt;e)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">if</span>(e&gt;n){<span class="code-keyword">if</span>(e&gt;n+<span class="code-number">.25</span>*a.duration)<span class="code-keyword">return</span> <span class="code-literal">null</span>;i=a}<span class="code-keyword">return</span>{<span class="code-attr">segment</span>:i,<span class="code-attr">estimatedStart</span>:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,<span class="code-attr">type</span>:i.videoTimingInfo?<span class="code-string">"accurate"</span>:<span class="code-string">"estimate"</span>}}(n,t);<span class="code-keyword">if</span>(!a)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"valid programTime was not found"</span>});<span class="code-keyword">if</span>(<span class="code-string">"estimate"</span>===a.type)<span class="code-keyword">return</span> r({<span class="code-attr">message</span>:<span class="code-string">"Accurate programTime could not be determined. Please seek to e.seekTime and try again"</span>,<span class="code-attr">seekTime</span>:a.estimatedStart});<span class="code-keyword">var</span> s={<span class="code-attr">mediaSeconds</span>:n},o=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">if</span>(!t.dateTimeObject)<span class="code-keyword">return</span> <span class="code-literal">null</span>;<span class="code-keyword">var</span> i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);<span class="code-keyword">return</span> <span class="code-keyword">new</span> <span class="code-built_in">Date</span>(t.dateTimeObject.getTime()+<span class="code-number">1e3</span>*n)}(n,a.segment);<span class="code-keyword">return</span> o&amp;&amp;(s.programDateTime=o.toISOString()),r(<span class="code-literal">null</span>,s)}({<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.masterPlaylistController_.media(),<span class="code-attr">time</span>:e,<span class="code-attr">callback</span>:t})},i.seekToProgramTime=<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i,n</span>)</span>{<span class="code-keyword">return</span> <span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i=!<span class="code-number">0</span>),<span class="code-keyword">void</span> <span class="code-number">0</span>===n&amp;&amp;(n=<span class="code-number">2</span>),Ge({<span class="code-attr">programTime</span>:e,<span class="code-attr">playlist</span>:<span class="code-keyword">this</span>.masterPlaylistController_.media(),<span class="code-attr">retryCount</span>:n,<span class="code-attr">pauseAfterSeek</span>:i,<span class="code-attr">seekTo</span>:<span class="code-keyword">this</span>.options_.seekTo,<span class="code-attr">tech</span>:<span class="code-keyword">this</span>.options_.tech,<span class="code-attr">callback</span>:t})},t}(r.default.getComponent(<span class="code-string">"Component"</span>)),Jn={<span class="code-attr">name</span>:<span class="code-string">"videojs-http-streaming"</span>,<span class="code-attr">VERSION</span>:Hn,<span class="code-attr">canHandleSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=r.default.mergeOptions(r.default.options,t);<span class="code-keyword">return</span> Jn.canPlayType(e.type,i)},<span class="code-attr">handleSource</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t,i</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===i&amp;&amp;(i={});<span class="code-keyword">var</span> n=r.default.mergeOptions(r.default.options,i);<span class="code-keyword">return</span> t.vhs=<span class="code-keyword">new</span> $n(e,t,n),r.default.hasOwnProperty(<span class="code-string">"hls"</span>)||<span class="code-built_in">Object</span>.defineProperty(t,<span class="code-string">"hls"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"player.tech().hls is deprecated. Use player.tech().vhs instead."</span>),t.vhs},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),t.vhs.xhr=ke(),t.vhs.src(e.src,e.type),t.vhs},<span class="code-attr">canPlayType</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e,t</span>)</span>{<span class="code-keyword">void</span> <span class="code-number">0</span>===t&amp;&amp;(t={});<span class="code-keyword">var</span> i=r.default.mergeOptions(r.default.options,t),n=i.vhs,a=(n=<span class="code-keyword">void</span> <span class="code-number">0</span>===n?{}:n).overrideNative,s=<span class="code-keyword">void</span> <span class="code-number">0</span>===a?!r.default.browser.IS_ANY_SAFARI:a,o=i.hls,u=(o=<span class="code-keyword">void</span> <span class="code-number">0</span>===o?{}:o).overrideNative,d=<span class="code-keyword">void</span> <span class="code-number">0</span>!==u&amp;&amp;u,l=Ce(e);<span class="code-keyword">return</span> l&amp;&amp;(!Gn.supportsTypeNatively(l)||d||s)?<span class="code-string">"maybe"</span>:<span class="code-string">""</span>}};R(<span class="code-string">"avc1.4d400d,mp4a.40.2"</span>)&amp;&amp;r.default.getTech(<span class="code-string">"Html5"</span>).registerSourceHandler(Jn,<span class="code-number">0</span>),r.default.VhsHandler=$n,<span class="code-built_in">Object</span>.defineProperty(r.default,<span class="code-string">"HlsHandler"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."</span>),$n},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),r.default.VhsSourceHandler=Jn,<span class="code-built_in">Object</span>.defineProperty(r.default,<span class="code-string">"HlsSourceHandler"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."</span>),Jn},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),r.default.Vhs=Gn,<span class="code-built_in">Object</span>.defineProperty(r.default,<span class="code-string">"Hls"</span>,{<span class="code-attr">get</span>:<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{<span class="code-keyword">return</span> r.default.log.warn(<span class="code-string">"videojs.Hls is deprecated. Use videojs.Vhs instead."</span>),Gn},<span class="code-attr">configurable</span>:!<span class="code-number">0</span>}),r.default.use||(r.default.registerComponent(<span class="code-string">"Hls"</span>,Gn),r.default.registerComponent(<span class="code-string">"Vhs"</span>,Gn)),r.default.options.vhs=r.default.options.vhs||{},r.default.options.hls=r.default.options.hls||{},r.default.getPlugin&amp;&amp;r.default.getPlugin(<span class="code-string">"reloadSourceOnError"</span>)||(r.default.registerPlugin||r.default.plugin)(<span class="code-string">"reloadSourceOnError"</span>,(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params">e</span>)</span>{qn(<span class="code-keyword">this</span>,e)})),e.LOCAL_STORAGE_KEY=Wn,e.Vhs=Gn,e.VhsHandler=$n,e.VhsSourceHandler=Jn,e.emeKeySystems=jn,e.expandDataUri=Kn,e.getAllPsshKeySystemsOptions=Xn,e.setupEmeOptions=Qn,e.simpleTypeFromSourceType=Ce,e.waitForKeySessionCreation=zn,<span class="code-built_in">Object</span>.defineProperty(e,<span class="code-string">"__esModule"</span>,{<span class="code-attr">value</span>:!<span class="code-number">0</span>})}));
</code></td></tr></tbody></table></div></div></div></div><style data-emotion-css="1teho9j">.css-1teho9j{margin-top:5rem;background:black;color:#aaa;}</style><footer class="css-1teho9j"><style data-emotion-css="1ui8put">.css-1ui8put{max-width:940px;padding:10px 20px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1ui8put"><p><span>Build: <!-- -->a7ebffa</span></p><p><span> <!-- -->2021<!-- --> UNPKG</span></p><style data-emotion-css="la3nd4">.css-la3nd4{font-size:1.5rem;}</style><p class="css-la3nd4"><style data-emotion-css="bogekj">.css-bogekj{color:#aaa;display:inline-block;}.css-bogekj:hover{color:white;}</style><a href="https://twitter.com/unpkg" class="css-bogekj"><style data-emotion-css="i6dzq1">.css-i6dzq1{vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><style data-emotion-css="3czw03">.css-3czw03{color:#aaa;display:inline-block;margin-left:1rem;}.css-3czw03:hover{color:white;}</style><a href="https://github.com/mjackson/unpkg" class="css-3czw03"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></p></div></footer></div><script src="/react@16.8.6/umd/react.production.min.js"></script><script src="/react-dom@16.8.6/umd/react-dom.production.min.js"></script><script src="/@emotion/core@10.0.6/dist/core.umd.min.js"></script><script>'use strict';(function(t,A,c){function w(){w=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}return a};return w.apply(this,arguments)}function P(a,b){if(null==a)return{};var e={},c=Object.keys(a),d;for(d=0;d<c.length;d++){var h=c[d];0<=b.indexOf(h)||(e[h]=a[h])}return e}function Q(a,b){b||(b=a.slice(0));a.raw=b;return a}function R(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,
"default")?a["default"]:a}function D(a,b){return b={exports:{}},a(b,b.exports),b.exports}function J(a,b,e,c,d){for(var g in a)if(ua(a,g)){try{if("function"!==typeof a[g]){var r=Error((c||"React class")+": "+e+" type `"+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[g]+"`.");r.name="Invariant Violation";throw r;}var k=a[g](b,g,c,e,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(q){k=q}!k||k instanceof Error||K((c||"React class")+": type specification of "+
e+" `"+g+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof k+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).");if(k instanceof Error&&!(k.message in L)){L[k.message]=!0;var B=d?d():"";K("Failed "+e+" type: "+k.message+(null!=B?B:""))}}}function G(){return null}function S(a){var b,e=a.children;a=a.css;return c.jsx("div",{css:w((b={border:"1px solid #dfe2e5",
borderRadius:3},b["@media (max-width: 700px)"]={borderRightWidth:0,borderLeftWidth:0},b),a)},e)}function T(a){var b,e=a.children;a=a.css;return c.jsx("div",{css:w((b={padding:10,background:"#f6f8fa",color:"#424242",border:"1px solid #d1d5da",borderTopLeftRadius:3,borderTopRightRadius:3,margin:"-1px -1px 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},b["@media (max-width: 700px)"]={paddingRight:20,paddingLeft:20},b),a)},e)}function U(a){return a&&a.map(function(a,
c){return t.createElement(a.tag,z({key:c},a.attr),U(a.child))})}function E(a){return function(b){return t.createElement(va,z({attr:z({},a.attr)},b),U(a.child))}}function va(a){var b=function(b){var c=a.size||b.size||"1em";if(b.className)var e=b.className;a.className&&(e=(e?e+" ":"")+a.className);var h=a.attr,r=a.title,k=["attr","title"],B={},q;for(q in a)Object.prototype.hasOwnProperty.call(a,q)&&0>k.indexOf(q)&&(B[q]=a[q]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var p=0;for(q=
Object.getOwnPropertySymbols(a);p<q.length;p++)0>k.indexOf(q[p])&&(B[q[p]]=a[q[p]])}return t.createElement("svg",z({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},b.attr,h,B,{className:e,style:z({color:a.color||b.color},b.style,a.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),r&&t.createElement("title",null,r),a.children)};return void 0!==V?t.createElement(V.Consumer,null,function(a){return b(a)}):b(W)}function F(a,b){var e=b.css;b=P(b,["css"]);return c.jsx(a,w({css:w({},
e,{verticalAlign:"text-bottom"})},b))}function wa(a){return F(X,a)}function xa(a){return F(Y,a)}function ya(a){return F(Z,a)}function za(a){return F(aa,a)}function Aa(a){return F(ba,a)}function ca(a){var b=a.path,e=a.details,g=Object.keys(e).reduce(function(a,b){var c=a.subdirs,g=a.files;b=e[b];"directory"===b.type?c.push(b):"file"===b.type&&g.push(b);return a},{subdirs:[],files:[]});a=g.subdirs;g=g.files;a.sort(da("path"));g.sort(da("path"));var d=[];"/"!==b&&d.push(c.jsx("tr",{key:".."},c.jsx("td",
{css:M}),c.jsx("td",{css:y},c.jsx("a",{title:"Parent directory",href:"../",css:N},"..")),c.jsx("td",{css:y}),c.jsx("td",{css:O})));a.forEach(function(a){a=a.path.substr(1<b.length?b.length+1:1);var e=a+"/";d.push(c.jsx("tr",{key:a},c.jsx("td",{css:M},c.jsx(ya,null)),c.jsx("td",{css:y},c.jsx("a",{title:a,href:e,css:N},a)),c.jsx("td",{css:y},"-"),c.jsx("td",{css:O},"-")))});g.forEach(function(a){var e=a.size,g=a.contentType;a=a.path.substr(1<b.length?b.length+1:1);d.push(c.jsx("tr",{key:a},c.jsx("td",
{css:M},"text/plain"===g||"text/markdown"===g?c.jsx(wa,null):c.jsx(xa,null)),c.jsx("td",{css:y},c.jsx("a",{title:a,href:a,css:N},a)),c.jsx("td",{css:y},ea(e)),c.jsx("td",{css:O},g)))});var h=[];0<g.length&&h.push(g.length+" file"+(1===g.length?"":"s"));0<a.length&&h.push(a.length+" folder"+(1===a.length?"":"s"));return c.jsx(S,null,c.jsx(T,null,c.jsx("span",null,h.join(", "))),c.jsx("table",{css:{width:"100%",borderCollapse:"collapse",borderRadius:2,background:"#fff","@media (max-width: 700px)":{"& th + th + th + th, & td + td + td + td":{display:"none"}},
"& tr:first-of-type td":{borderTop:0}}},c.jsx("thead",null,c.jsx("tr",null,c.jsx("th",null,c.jsx(H,null,"Icon")),c.jsx("th",null,c.jsx(H,null,"Name")),c.jsx("th",null,c.jsx(H,null,"Size")),c.jsx("th",null,c.jsx(H,null,"Content Type")))),c.jsx("tbody",null,d)))}function Ba(a){a=a.split("/");return a[a.length-1]}function Ca(a){var b=a.uri;return c.jsx("div",{css:{padding:20,textAlign:"center"}},c.jsx("img",{alt:Ba(a.path),src:b}))}function Da(a){a=a.highlights.slice(0);var b=a.length&&""===a[a.length-
1];b&&a.pop();return c.jsx("div",{className:"code-listing",css:{overflowX:"auto",overflowY:"hidden",paddingTop:5,paddingBottom:5}},c.jsx("table",{css:{border:"none",borderCollapse:"collapse",borderSpacing:0}},c.jsx("tbody",null,a.map(function(a,b){var e=b+1;return c.jsx("tr",{key:b},c.jsx("td",{id:"L"+e,css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},c.jsx("span",null,e)),c.jsx("td",{id:"LC"+e,css:{paddingLeft:10,
paddingRight:10,color:"#24292e",whiteSpace:"pre"}},c.jsx("code",{dangerouslySetInnerHTML:{__html:a}})))}),!b&&c.jsx("tr",{key:"no-newline"},c.jsx("td",{css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},"\\"),c.jsx("td",{css:{paddingLeft:10,color:"rgba(27,31,35,.3)",userSelect:"none"}},"No newline at end of file")))))}function Ea(){return c.jsx("div",{css:{padding:20}},c.jsx("p",{css:{textAlign:"center"}},
"No preview available."))}function fa(a){var b=a.packageName,e=a.packageVersion,g=a.path;a=a.details;var d=a.highlights,h=a.uri,r=a.language;return c.jsx(S,null,c.jsx(T,null,c.jsx("span",null,ea(a.size)),c.jsx("span",null,r),c.jsx("span",null,c.jsx("a",{href:"/"+b+"@"+e+g,css:{display:"inline-block",marginLeft:8,padding:"2px 8px",textDecoration:"none",fontWeight:600,fontSize:"0.9rem",color:"#24292e",backgroundColor:"#eff3f6",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,":hover":{backgroundColor:"#e6ebf1",
borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},"View Raw"))),d?c.jsx(Da,{highlights:d}):h?c.jsx(Ca,{path:g,uri:h}):c.jsx(Ea,null))}function ha(){var a=Q(["\n  .code-listing {\n    background: #fbfdff;\n    color: #383a42;\n  }\n  .code-comment,\n  .code-quote {\n    color: #a0a1a7;\n    font-style: italic;\n  }\n  .code-doctag,\n  .code-keyword,\n  .code-link,\n  .code-formula {\n    color: #a626a4;\n  }\n  .code-section,\n  .code-name,\n  .code-selector-tag,\n  .code-deletion,\n  .code-subst {\n    color: #e45649;\n  }\n  .code-literal {\n    color: #0184bb;\n  }\n  .code-string,\n  .code-regexp,\n  .code-addition,\n  .code-attribute,\n  .code-meta-string {\n    color: #50a14f;\n  }\n  .code-built_in,\n  .code-class .code-title {\n    color: #c18401;\n  }\n  .code-attr,\n  .code-variable,\n  .code-template-variable,\n  .code-type,\n  .code-selector-class,\n  .code-selector-attr,\n  .code-selector-pseudo,\n  .code-number {\n    color: #986801;\n  }\n  .code-symbol,\n  .code-bullet,\n  .code-meta,\n  .code-selector-id,\n  .code-title {\n    color: #4078f2;\n  }\n  .code-emphasis {\n    font-style: italic;\n  }\n  .code-strong {\n    font-weight: bold;\n  }\n"]);
ha=function(){return a};return a}function ia(){var a=Q(["\n  html {\n    box-sizing: border-box;\n  }\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  html,\n  body,\n  #root {\n    height: 100%;\n    margin: 0;\n  }\n\n  body {\n    ","\n    font-size: 16px;\n    line-height: 1.5;\n    overflow-wrap: break-word;\n    background: white;\n    color: black;\n  }\n\n  code {\n    ","\n  }\n\n  th,\n  td {\n    padding: 0;\n  }\n\n  select {\n    font-size: inherit;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n  }\n"]);
ia=function(){return a};return a}function ja(a){var b=a.css;a=P(a,["css"]);return c.jsx("a",w({},a,{css:w({color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},b)}))}function Fa(){return c.jsx("header",{css:{marginTop:"2rem"}},c.jsx("h1",{css:{textAlign:"center",fontSize:"3rem",letterSpacing:"0.05em"}},c.jsx("a",{href:"/",css:{color:"#000",textDecoration:"none"}},"UNPKG")))}function Ga(a){var b=a.packageName,e=a.packageVersion,g=a.availableVersions;a=a.filename;var d=[];if("/"===
a)d.push(b);else{var h="/browse/"+b+"@"+e;d.push(c.jsx(ja,{href:h+"/"},b));b=a.replace(/^\/+/,"").replace(/\/+$/,"").split("/");a=b.pop();b.forEach(function(a){h+="/"+a;d.push(c.jsx(ja,{href:h+"/"},a))});d.push(a)}return c.jsx("header",{css:{display:"flex",flexDirection:"row",alignItems:"center","@media (max-width: 700px)":{flexDirection:"column-reverse",alignItems:"flex-start"}}},c.jsx("h1",{css:{fontSize:"1.5rem",fontWeight:"normal",flex:1,wordBreak:"break-all"}},c.jsx("nav",null,d.map(function(a,
b,e){return c.jsx(t.Fragment,{key:b},0!==b&&c.jsx("span",{css:{paddingLeft:5,paddingRight:5}},"/"),b===e.length-1?c.jsx("strong",null,a):a)}))),c.jsx(Ha,{packageVersion:e,availableVersions:g,onChange:function(a){window.location.href=window.location.href.replace("@"+e,"@"+a)}}))}function Ha(a){var b=a.onChange;return c.jsx("p",{css:{marginLeft:20,"@media (max-width: 700px)":{marginLeft:0,marginBottom:0}}},c.jsx("label",null,"Version:"," ",c.jsx("select",{name:"version",defaultValue:a.packageVersion,
onChange:function(a){b&&b(a.target.value)},css:{appearance:"none",cursor:"pointer",padding:"4px 24px 4px 8px",fontWeight:600,fontSize:"0.9em",color:"#24292e",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,backgroundColor:"#eff3f6",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==)",
backgroundPosition:"right 8px center",backgroundRepeat:"no-repeat",backgroundSize:"auto 25%",":hover":{backgroundColor:"#e6ebf1",borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},a.availableVersions.map(function(a){return c.jsx("option",{key:a,value:a},a)}))))}function Ia(a){var b=a.packageName,e=a.packageVersion;a=a.target;return"directory"===a.type?c.jsx(ca,{path:a.path,details:a.details}):
"file"===a.type?c.jsx(fa,{packageName:b,packageVersion:e,path:a.path,details:a.details}):null}function ka(a){var b=a.packageName,e=a.packageVersion,g=a.availableVersions;g=void 0===g?[]:g;var d=a.filename;a=a.target;return c.jsx(t.Fragment,null,c.jsx(c.Global,{styles:Ja}),c.jsx(c.Global,{styles:Ka}),c.jsx("div",{css:{flex:"1 0 auto"}},c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(Fa,null)),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(Ga,{packageName:b,
packageVersion:e,availableVersions:g,filename:d})),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto","@media (max-width: 700px)":{padding:0,margin:0}}},c.jsx(Ia,{packageName:b,packageVersion:e,target:a}))),c.jsx("footer",{css:{marginTop:"5rem",background:"black",color:"#aaa"}},c.jsx("div",{css:{maxWidth:940,padding:"10px 20px",margin:"0 auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},c.jsx("p",null,c.jsx("span",null,"Build: ","a7ebffa")),
c.jsx("p",null,c.jsx("span",null,"\u00a9 ",(new Date).getFullYear()," UNPKG")),c.jsx("p",{css:{fontSize:"1.5rem"}},c.jsx("a",{href:"https://twitter.com/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"}}},c.jsx(za,null)),c.jsx("a",{href:"https://github.com/mjackson/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"},marginLeft:"1rem"}},c.jsx(Aa,null))))))}var la="default"in t?t["default"]:t;A=A&&A.hasOwnProperty("default")?A["default"]:A;var La="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},m=D(function(a,b){function c(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case d:switch(a=a.type,a){case l:case f:case r:case m:case k:case v:return a;default:switch(a=a&&a.$$typeof,a){case p:case n:case q:return a;default:return b}}case x:case u:case h:return b}}}function g(a){return c(a)===f}Object.defineProperty(b,"__esModule",{value:!0});var d=
(a="function"===typeof Symbol&&Symbol.for)?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,r=a?Symbol.for("react.fragment"):60107,k=a?Symbol.for("react.strict_mode"):60108,m=a?Symbol.for("react.profiler"):60114,q=a?Symbol.for("react.provider"):60109,p=a?Symbol.for("react.context"):60110,l=a?Symbol.for("react.async_mode"):60111,f=a?Symbol.for("react.concurrent_mode"):60111,n=a?Symbol.for("react.forward_ref"):60112,v=a?Symbol.for("react.suspense"):60113,u=a?Symbol.for("react.memo"):
60115,x=a?Symbol.for("react.lazy"):60116;b.typeOf=c;b.AsyncMode=l;b.ConcurrentMode=f;b.ContextConsumer=p;b.ContextProvider=q;b.Element=d;b.ForwardRef=n;b.Fragment=r;b.Lazy=x;b.Memo=u;b.Portal=h;b.Profiler=m;b.StrictMode=k;b.Suspense=v;b.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===r||a===f||a===m||a===k||a===v||"object"===typeof a&&null!==a&&(a.$$typeof===x||a.$$typeof===u||a.$$typeof===q||a.$$typeof===p||a.$$typeof===n)};b.isAsyncMode=function(a){return g(a)||
c(a)===l};b.isConcurrentMode=g;b.isContextConsumer=function(a){return c(a)===p};b.isContextProvider=function(a){return c(a)===q};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===d};b.isForwardRef=function(a){return c(a)===n};b.isFragment=function(a){return c(a)===r};b.isLazy=function(a){return c(a)===x};b.isMemo=function(a){return c(a)===u};b.isPortal=function(a){return c(a)===h};b.isProfiler=function(a){return c(a)===m};b.isStrictMode=function(a){return c(a)===k};b.isSuspense=
function(a){return c(a)===v}});R(m);var na=D(function(a,b){(function(){function a(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case h:switch(a=a.type,a){case f:case n:case k:case q:case m:case u:return a;default:switch(a=a&&a.$$typeof,a){case l:case v:case p:return a;default:return b}}case I:case x:case r:return b}}}function c(b){return a(b)===n}Object.defineProperty(b,"__esModule",{value:!0});var d="function"===typeof Symbol&&Symbol.for,h=d?Symbol.for("react.element"):60103,r=
d?Symbol.for("react.portal"):60106,k=d?Symbol.for("react.fragment"):60107,m=d?Symbol.for("react.strict_mode"):60108,q=d?Symbol.for("react.profiler"):60114,p=d?Symbol.for("react.provider"):60109,l=d?Symbol.for("react.context"):60110,f=d?Symbol.for("react.async_mode"):60111,n=d?Symbol.for("react.concurrent_mode"):60111,v=d?Symbol.for("react.forward_ref"):60112,u=d?Symbol.for("react.suspense"):60113,x=d?Symbol.for("react.memo"):60115,I=d?Symbol.for("react.lazy"):60116;d=function(){};var Ma=function(a){for(var b=
arguments.length,f=Array(1<b?b-1:0),c=1;c<b;c++)f[c-1]=arguments[c];var n=0;b="Warning: "+a.replace(/%s/g,function(){return f[n++]});"undefined"!==typeof console&&console.warn(b);try{throw Error(b);}catch(Xa){}},Na=d=function(a,b){if(void 0===b)throw Error("`lowPriorityWarning(condition, format, ...args)` requires a warning message argument");if(!a){for(var f=arguments.length,c=Array(2<f?f-2:0),n=2;n<f;n++)c[n-2]=arguments[n];Ma.apply(void 0,[b].concat(c))}},ma=!1;b.typeOf=a;b.AsyncMode=f;b.ConcurrentMode=
n;b.ContextConsumer=l;b.ContextProvider=p;b.Element=h;b.ForwardRef=v;b.Fragment=k;b.Lazy=I;b.Memo=x;b.Portal=r;b.Profiler=q;b.StrictMode=m;b.Suspense=u;b.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===k||a===n||a===q||a===m||a===u||"object"===typeof a&&null!==a&&(a.$$typeof===I||a.$$typeof===x||a.$$typeof===p||a.$$typeof===l||a.$$typeof===v)};b.isAsyncMode=function(b){ma||(ma=!0,Na(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."));
return c(b)||a(b)===f};b.isConcurrentMode=c;b.isContextConsumer=function(b){return a(b)===l};b.isContextProvider=function(b){return a(b)===p};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===h};b.isForwardRef=function(b){return a(b)===v};b.isFragment=function(b){return a(b)===k};b.isLazy=function(b){return a(b)===I};b.isMemo=function(b){return a(b)===x};b.isPortal=function(b){return a(b)===r};b.isProfiler=function(b){return a(b)===q};b.isStrictMode=function(b){return a(b)===
m};b.isSuspense=function(b){return a(b)===u}})()});R(na);var oa=D(function(a){a.exports=na}),pa=Object.getOwnPropertySymbols,Oa=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Qa=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=
a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,d=1;d<arguments.length;d++){var h=Object(arguments[d]);for(var r in h)Oa.call(h,r)&&(c[r]=h[r]);if(pa){g=pa(h);for(var k=0;k<g.length;k++)Pa.call(h,g[k])&&(c[g[k]]=h[g[k]])}}return c},K=function(){},L={},ua=Function.call.bind(Object.prototype.hasOwnProperty);
K=function(a){a="Warning: "+a;"undefined"!==typeof console&&console.error(a);try{throw Error(a);}catch(b){}};J.resetWarningCache=function(){L={}};var Ra=Function.call.bind(Object.prototype.hasOwnProperty),C=function(){};C=function(a){a="Warning: "+a;"undefined"!==typeof console&&console.error(a);try{throw Error(a);}catch(b){}};var Sa=function(a,b){function c(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}function g(a){this.message=a;this.stack=""}function d(a){function c(c,n,v,d,e,u,h){d=d||"<<anonymous>>";
u=u||v;if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==h){if(b)throw c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),c.name="Invariant Violation",c;"undefined"!==typeof console&&(h=d+":"+v,!f[h]&&3>l&&(C("You are manually calling a React.PropTypes validation function for the `"+u+"` prop on `"+d+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),
f[h]=!0,l++))}return null==n[v]?c?null===n[v]?new g("The "+e+" `"+u+"` is marked as required "+("in `"+d+"`, but its value is `null`.")):new g("The "+e+" `"+u+"` is marked as required in "+("`"+d+"`, but its value is `undefined`.")):null:a(n,v,d,e,u)}var f={},l=0,d=c.bind(null,!1);d.isRequired=c.bind(null,!0);return d}function h(a){return d(function(b,c,f,d,l,e){b=b[c];return k(b)!==a?(b=m(b),new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected ")+("`"+a+"`."))):null})}function r(b){switch(typeof b){case "number":case "string":case "undefined":return!0;
case "boolean":return!b;case "object":if(Array.isArray(b))return b.every(r);if(null===b||a(b))return!0;var c=b&&(p&&b[p]||b["@@iterator"]);var f="function"===typeof c?c:void 0;if(f)if(c=f.call(b),f!==b.entries)for(;!(b=c.next()).done;){if(!r(b.value))return!1}else for(;!(b=c.next()).done;){if((b=b.value)&&!r(b[1]))return!1}else return!1;return!0;default:return!1}}function k(a){var b=typeof a;return Array.isArray(a)?"array":a instanceof RegExp?"object":"symbol"===b||a&&("Symbol"===a["@@toStringTag"]||
"function"===typeof Symbol&&a instanceof Symbol)?"symbol":b}function m(a){if("undefined"===typeof a||null===a)return""+a;var b=k(a);if("object"===b){if(a instanceof Date)return"date";if(a instanceof RegExp)return"regexp"}return b}function q(a){a=m(a);switch(a){case "array":case "object":return"an "+a;case "boolean":case "date":case "regexp":return"a "+a;default:return a}}var p="function"===typeof Symbol&&Symbol.iterator,l={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),
string:h("string"),symbol:h("symbol"),any:d(G),arrayOf:function(a){return d(function(b,c,f,d,l){if("function"!==typeof a)return new g("Property `"+l+"` of component `"+f+"` has invalid PropType notation inside arrayOf.");b=b[c];if(!Array.isArray(b))return b=k(b),new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected an array."));for(c=0;c<b.length;c++){var n=a(b,c,f,d,l+"["+c+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(n instanceof Error)return n}return null})},
element:function(){return d(function(b,c,d,l,e){b=b[c];return a(b)?null:(b=k(b),new g("Invalid "+l+" `"+e+"` of type "+("`"+b+"` supplied to `"+d+"`, expected a single ReactElement.")))})}(),elementType:function(){return d(function(a,b,c,d,l){a=a[b];return oa.isValidElementType(a)?null:(a=k(a),new g("Invalid "+d+" `"+l+"` of type "+("`"+a+"` supplied to `"+c+"`, expected a single ReactElement type.")))})}(),instanceOf:function(a){return d(function(b,c,f,d,l){if(!(b[c]instanceof a)){var n=a.name||
"<<anonymous>>";b=b[c];b=b.constructor&&b.constructor.name?b.constructor.name:"<<anonymous>>";return new g("Invalid "+d+" `"+l+"` of type "+("`"+b+"` supplied to `"+f+"`, expected ")+("instance of `"+n+"`."))}return null})},node:function(){return d(function(a,b,c,d,l){return r(a[b])?null:new g("Invalid "+d+" `"+l+"` supplied to "+("`"+c+"`, expected a ReactNode."))})}(),objectOf:function(a){return d(function(b,c,f,d,l){if("function"!==typeof a)return new g("Property `"+l+"` of component `"+f+"` has invalid PropType notation inside objectOf.");
b=b[c];c=k(b);if("object"!==c)return new g("Invalid "+d+" `"+l+"` of type "+("`"+c+"` supplied to `"+f+"`, expected an object."));for(var n in b)if(Ra(b,n)&&(c=a(b,n,f,d,l+"."+n,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"),c instanceof Error))return c;return null})},oneOf:function(a){return Array.isArray(a)?d(function(b,f,d,l,e){b=b[f];for(f=0;f<a.length;f++)if(c(b,a[f]))return null;f=JSON.stringify(a,function(a,b){return"symbol"===m(b)?String(b):b});return new g("Invalid "+l+" `"+e+"` of value `"+
String(b)+"` "+("supplied to `"+d+"`, expected one of "+f+"."))}):(1<arguments.length?C("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):C("Invalid argument supplied to oneOf, expected an array."),G)},oneOfType:function(a){if(!Array.isArray(a))return C("Invalid argument supplied to oneOfType, expected an instance of array."),G;for(var b=0;b<a.length;b++){var c=a[b];if("function"!==
typeof c)return C("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+q(c)+" at index "+b+"."),G}return d(function(b,c,f,d,l){for(var e=0;e<a.length;e++)if(null==(0,a[e])(b,c,f,d,l,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null;return new g("Invalid "+d+" `"+l+"` supplied to "+("`"+f+"`."))})},shape:function(a){return d(function(b,c,d,l,f){b=b[c];c=k(b);if("object"!==c)return new g("Invalid "+l+" `"+f+"` of type `"+c+"` "+("supplied to `"+d+"`, expected `object`."));
for(var e in a)if(c=a[e])if(c=c(b,e,d,l,f+"."+e,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return c;return null})},exact:function(a){return d(function(b,c,d,l,f){var e=b[c],n=k(e);if("object"!==n)return new g("Invalid "+l+" `"+f+"` of type `"+n+"` "+("supplied to `"+d+"`, expected `object`."));n=Qa({},b[c],a);for(var h in n){n=a[h];if(!n)return new g("Invalid "+l+" `"+f+"` key `"+h+"` supplied to `"+d+"`.\nBad object: "+JSON.stringify(b[c],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(a),
null,"  "));if(n=n(e,h,d,l,f+"."+h,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return n}return null})}};g.prototype=Error.prototype;l.checkPropTypes=J;l.resetWarningCache=J.resetWarningCache;return l.PropTypes=l};m=D(function(a){a.exports=Sa(oa.isElement,!0)});var Ta=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&(a[g]=c[g])}return a},Ua={border:0,clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",
padding:0,overflow:"hidden",position:"absolute"},H=function(a){return la.createElement("div",Ta({style:Ua},a))},qa=D(function(a){(function(b,c){a.exports=c()})(La,function(){function a(a){if(!a)return!0;if(!d(a)||0!==a.length)for(var b in a)if(q.call(a,b))return!1;return!0}function c(a){return"number"===typeof a||"[object Number]"===t.call(a)}function g(a){return"string"===typeof a||"[object String]"===t.call(a)}function d(a){return"object"===typeof a&&"number"===typeof a.length&&"[object Array]"===
t.call(a)}function h(a){var b=parseInt(a);return b.toString()===a?b:a}function m(b,d,e,k){c(d)&&(d=[d]);if(a(d))return b;if(g(d))return m(b,d.split("."),e,k);var f=h(d[0]);if(1===d.length)return d=b[f],void 0!==d&&k||(b[f]=e),d;void 0===b[f]&&(c(f)?b[f]=[]:b[f]={});return m(b[f],d.slice(1),e,k)}function k(b,f){c(f)&&(f=[f]);if(!a(b)){if(a(f))return b;if(g(f))return k(b,f.split("."));var e=h(f[0]),l=b[e];if(1===f.length)void 0!==l&&(d(b)?b.splice(e,1):delete b[e]);else if(void 0!==b[e])return k(b[e],
f.slice(1));return b}}var t=Object.prototype.toString,q=Object.prototype.hasOwnProperty,p={ensureExists:function(a,b,c){return m(a,b,c,!0)},set:function(a,b,c,d){return m(a,b,c,d)},insert:function(a,b,c,e){var f=p.get(a,b);e=~~e;d(f)||(f=[],p.set(a,b,f));f.splice(e,0,c)},empty:function(b,f){if(a(f))return b;if(!a(b)){var e,h;if(!(e=p.get(b,f)))return b;if(g(e))return p.set(b,f,"");if("boolean"===typeof e||"[object Boolean]"===t.call(e))return p.set(b,f,!1);if(c(e))return p.set(b,f,0);if(d(e))e.length=
0;else if("object"===typeof e&&"[object Object]"===t.call(e))for(h in e)q.call(e,h)&&delete e[h];else return p.set(b,f,null)}},push:function(a,b){var c=p.get(a,b);d(c)||(c=[],p.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var d,e=0,f=b.length;e<f;e++)if(void 0!==(d=p.get(a,b[e])))return d;return c},get:function(b,d,e){c(d)&&(d=[d]);if(a(d))return b;if(a(b))return e;if(g(d))return p.get(b,d.split("."),e);var f=h(d[0]);return 1===d.length?void 0===
b[f]?e:b[f]:p.get(b[f],d.slice(1),e)},del:function(a,b){return k(a,b)}};return p})});var ra=function(a){return function(b){return typeof b===a}};var Va=function(a,b){var c=1,g=b||function(a,b){return b};"-"===a[0]&&(c=-1,a=a.substr(1));return function(b,e){var d;b=g(a,qa.get(b,a));e=g(a,qa.get(e,a));b<e&&(d=-1);b>e&&(d=1);b===e&&(d=0);return d*c}};var da=function(){var a=Array.prototype.slice.call(arguments),b=a.filter(ra("string")),c=a.filter(ra("function"))[0];return function(a,d){for(var e=b.length,
g=0,k=0;0===g&&k<e;)g=Va(b[k],c)(a,d),k++;return g}};let sa="B kB MB GB TB PB EB ZB YB".split(" "),ta=(a,b)=>{let c=a;"string"===typeof b?c=a.toLocaleString(b):!0===b&&(c=a.toLocaleString());return c};var ea=(a,b)=>{if(!Number.isFinite(a))throw new TypeError(`Expected a finite number, got ${typeof a}: ${a}`);b=Object.assign({},b);if(b.signed&&0===a)return" 0 B";var c=0>a;let g=c?"-":b.signed?"+":"";c&&(a=-a);if(1>a)return a=ta(a,b.locale),g+a+" B";c=Math.min(Math.floor(Math.log10(a)/3),sa.length-
1);a=Number((a/Math.pow(1E3,c)).toPrecision(3));a=ta(a,b.locale);return g+a+" "+sa[c]},W={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},V=t.createContext&&t.createContext(W),z=function(){z=Object.assign||function(a){for(var b,c=1,g=arguments.length;c<g;c++){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])}return a};return z.apply(this,arguments)},Y=function(a){return E({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",
d:"M8.5 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4.5L8.5 1zM11 14H1V2h7l3 3v9zM5 6.98L3.5 8.5 5 10l-.5 1L2 8.5 4.5 6l.5.98zM7.5 6L10 8.5 7.5 11l-.5-.98L8.5 8.5 7 7l.5-1z"}}]})(a)};Y.displayName="GoFileCode";var Z=function(a){return E({tag:"svg",attr:{viewBox:"0 0 14 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}}]})(a)};Z.displayName="GoFileDirectory";var X=function(a){return E({tag:"svg",
attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}}]})(a)};X.displayName="GoFile";var ba=function(a){return E({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(a)};
ba.displayName="FaGithub";var aa=function(a){return E({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(a)};
aa.displayName="FaTwitter";var N={color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},y={paddingTop:6,paddingRight:3,paddingBottom:6,paddingLeft:3,borderTop:"1px solid #eaecef"},M=w({},y,{color:"#424242",width:17,paddingRight:2,paddingLeft:10,"@media (max-width: 700px)":{paddingLeft:20}}),O=w({},y,{textAlign:"right",paddingRight:10,"@media (max-width: 700px)":{paddingRight:20}});ca.propTypes={path:m.string.isRequired,details:m.objectOf(m.shape({path:m.string.isRequired,type:m.oneOf(["directory",
"file"]).isRequired,contentType:m.string,integrity:m.string,size:m.number})).isRequired};fa.propTypes={path:m.string.isRequired,details:m.shape({contentType:m.string.isRequired,highlights:m.arrayOf(m.string),uri:m.string,integrity:m.string.isRequired,language:m.string.isRequired,size:m.number.isRequired}).isRequired};var Ja=c.css(ia(),'\nfont-family: -apple-system,\n  BlinkMacSystemFont,\n  "Segoe UI",\n  "Roboto",\n  "Oxygen",\n  "Ubuntu",\n  "Cantarell",\n  "Fira Sans",\n  "Droid Sans",\n  "Helvetica Neue",\n  sans-serif;\n',
"\nfont-family: Menlo,\n  Monaco,\n  Lucida Console,\n  Liberation Mono,\n  DejaVu Sans Mono,\n  Bitstream Vera Sans Mono,\n  Courier New,\n  monospace;\n"),Ka=c.css(ha()),Wa=m.shape({path:m.string.isRequired,type:m.oneOf(["directory","file"]).isRequired,details:m.object.isRequired});ka.propTypes={packageName:m.string.isRequired,packageVersion:m.string.isRequired,availableVersions:m.arrayOf(m.string),filename:m.string.isRequired,target:Wa.isRequired};A.hydrate(la.createElement(ka,window.__DATA__||
{}),document.getElementById("root"))})(React,ReactDOM,emotionCore);
</script></body></html>